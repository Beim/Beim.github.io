<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[2017-收藏]]></title>
      <url>https://beim.github.io/3017/01/01/2017-%E6%94%B6%E8%97%8F/</url>
      <content type="html"><![CDATA[<p><img src="http://ob4a6y748.bkt.clouddn.com/500px-anime-stock-photo-141919003.jpg" alt="anime-500px"></p>
<a id="more"></a>
<center><br>    <embed src="//music.163.com/style/swf/widget.swf?sid=35030745&type=2&auto=0&width=320&height=66" width="340" height="86" allownetworking="all"><br></center>

<h1 id="语言相关"><a href="#语言相关" class="headerlink" title="语言相关"></a>语言相关</h1><h2 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h2><ul>
<li><p><a href="http://www.ruanyifeng.com/blog/2013/01/javascript_strict_mode.html" target="_blank" rel="external">javascript 严格模式 - 阮一峰</a></p>
</li>
<li><p><a href="http://idlelife.org/archives/808" target="_blank" rel="external">passportJs - 验证</a></p>
</li>
<li><p><a href="https://segmentfault.com/a/1190000006793571" target="_blank" rel="external">pm2入门</a></p>
</li>
<li><p><a href="http://docs.sequelizejs.com/en/v3/docs/models-usage/#find-search-for-one-specific-element-in-the-database" target="_blank" rel="external">sequelize doc</a></p>
</li>
<li><p><a href="http://www.ruanyifeng.com/blog/2016/07/yaml.html" target="_blank" rel="external">yaml 入门</a></p>
</li>
<li><p><a href="http://lodashjs.com/docs/#_pickobject-predicate-thisarg" target="_blank" rel="external">lodash - javascript 工具库</a></p>
</li>
</ul>
<h2 id="C"><a href="#C" class="headerlink" title="C"></a>C</h2><ul>
<li><p><a href="http://blog.csdn.net/haoel/article/details/2879" target="_blank" rel="external">gdb 调试</a></p>
</li>
<li><p><a href="http://www.cnblogs.com/xuning/p/3888699.html" target="_blank" rel="external">webbench 源码分析</a></p>
</li>
<li><p><a href="https://github.com/wolkykim/qlibc" target="_blank" rel="external">C 工具库 - qlibc</a></p>
</li>
<li><p><a href="http://stackoverflow.com/questions/11626786/what-does-void-mean-and-how-to-use-it" target="_blank" rel="external">what does void * mean - stack overflow</a></p>
</li>
<li><p><a href="http://www.cnblogs.com/dolphin0520/archive/2011/04/03/2004808.html" target="_blank" rel="external">char *str 和 char str[] 的区别</a><br>  <a href="http://stackoverflow.com/questions/3862842/difference-between-char-str-string-and-char-str-string" target="_blank" rel="external">stackoverflow 上的解释</a></p>
</li>
</ul>
<h2 id="C-1"><a href="#C-1" class="headerlink" title="C++"></a>C++</h2><ul>
<li><a href="http://www.cplusplus.com/reference/string/string/find_first_not_of/" target="_blank" rel="external"><code>std::string::find_first_not_of</code></a></li>
</ul>
<h2 id="python"><a href="#python" class="headerlink" title="python"></a>python</h2><ul>
<li><p><a href="https://wizardforcel.gitbooks.io/core-python-2e/content/14.html" target="_blank" rel="external">python 核心编程 - gitbook</a></p>
</li>
<li><p><a href="http://djangobook.py3k.cn/2.0/" target="_blank" rel="external">Djiango book - 中文翻译</a></p>
</li>
<li><p><a href="http://docs.python-requests.org/en/master/" target="_blank" rel="external">Requests - doc</a></p>
</li>
<li><p><a href="http://www.52yunwei.cn/" target="_blank" rel="external">小白运维站</a></p>
</li>
<li><p><a href="http://stackoverflow.com/questions/22073516/failed-to-install-python-cryptography-package-with-pip-and-setup-py" target="_blank" rel="external">安装scrapy 失败 - 缺少依赖libssl-dev</a></p>
</li>
</ul>
<hr>
<h1 id="语言无关"><a href="#语言无关" class="headerlink" title="语言无关"></a>语言无关</h1><ul>
<li><p><a href="https://tools.ietf.org/html/rfc5234#section-2.1" target="_blank" rel="external">ABNF规范</a> - <a href="https://zh.wikipedia.org/wiki/%E6%89%A9%E5%85%85%E5%B7%B4%E7%A7%91%E6%96%AF%E8%8C%83%E5%BC%8F" target="_blank" rel="external">wiki</a></p>
</li>
<li><p><a href="https://mozillazg.github.io/2014/06/hello-postgresql.html" target="_blank" rel="external">postgresql 常用操作</a></p>
</li>
<li><p><a href="http://blog.topspeedsnail.com/archives/4813" target="_blank" rel="external">Ubuntu 安装 eclipse</a></p>
</li>
<li><p><a href="http://nyc1991.blog.51cto.com/6424159/1132023" target="_blank" rel="external">解决Ubuntu和Windows的文件乱码问题</a></p>
</li>
<li><p><a href="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%8F%98%E5%9F%BA" target="_blank" rel="external">git 详解</a></p>
</li>
<li><p><a href="https://shadowsocks.com.hk/" target="_blank" rel="external">shadowsocks.com.hk - 2017-2-9 主页</a></p>
</li>
<li><p><a href="http://you.163.com/item/detail?id=1023013&amp;_stat_area=mod_5_item_2&amp;_stat_id=1019000&amp;_stat_referer=itemList" target="_blank" rel="external">便携多功能防水垫</a></p>
</li>
<li><p><a href="https://dcc.godaddy.com/manage/beiming.life/dns?regionsite=sg&amp;cilaunch=59990&amp;marketid=zh-SG&amp;isc=BB2470" target="_blank" rel="external">godaddy - 域名</a></p>
</li>
<li><p><a href="http://www.bilibili.com/video/av7322294/" target="_blank" rel="external">sss - 90-92分钟 - 跑跑</a></p>
</li>
<li><p><a href="http://mooc.study.163.com/university/HIT#/c" target="_blank" rel="external">网易云课堂 - 哈工大</a></p>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[huawei-yunpingtai]]></title>
      <url>https://beim.github.io/2017/03/23/huawei-yunpingtai/</url>
      <content type="html"><![CDATA[<h1 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h1><h2 id="SELECT"><a href="#SELECT" class="headerlink" title="SELECT"></a>SELECT</h2><p><code>SELECT * FROM dept;</code></p>
<p>// 算术运算<br><code>SELECT ename, sal, 12*sal+100 FROM emp;</code></p>
<p>// 别名<br><code>SELECT ename as &quot;Name&quot;, sal*12 &quot;Annual Salary&quot; FROM emp;</code></p>
<p>// 级联操作符||，结果是两列的拼接<br><code>SELECT ename, job, ename || job as &quot;Employees&quot; FROM emp;</code></p>
<p>// DISTINCT 消除重复<br><code>SELECT DISTINCT deptno FROM emp;</code></p>
<h2 id="WHERE-条件"><a href="#WHERE-条件" class="headerlink" title="WHERE 条件"></a>WHERE 条件</h2><p>// WHERE<br><code>SELECT ename FROM emp WHERE deptno=30;</code><br>// 字符串和日期使用单引号；字符值区分大小写，日期值对格式敏感<br><code>SELECT job FROM emp WHERE ename=&#39;RACHEL&#39;;</code></p>
<p>比较条件： <code>=  &gt;  &gt;=  &lt;  &lt;=  &lt;&gt;  BETWEEN...AND...  IN(set)匹配任意值  LIKE  IS NULL</code><br><code>SELECT name FROM users WHERE id BETWEEN 1 AND 10;</code><br><code>SELECT name FROM users WHERE id IN(1, 2, 3);</code><br><code>SELECT name FROM users WHERE name LIKE &#39;user\_%&#39;;</code> <code>%</code>替代一个或多个， <code>_</code>替代一个, <code>\_</code>转义</p>
<p>逻辑条件：<code>AND OR NOT</code></p>
<p>优先级：算数操作符 &gt; 连接操作符 &gt; 条件比较 &gt; IS [NOT] NULL, LIKE, [NOT] IN &gt; [NOT] BETWEEN &gt; NOT &gt; AND &gt; OR</p>
<p>ORDER BY 子句作排序：<code>ASC</code>升序(默认)，<code>DESC</code>降序<br><code>SELECT name,id FROM users WHERE name LIKE &#39;user\_%&#39; ORDER BY id;</code><br><code>SELECT name,id FROM users WHERE name LIKE &#39;user\_%&#39; ORDER BY id DESC;</code><br>// ORDER BY 可以有多列，从左到右依次排序<br><code>SELECT ename,job FROM emp ORDER BY deptno,sal DESC;</code></p>
<a id="more"></a>
<h2 id="单行函数"><a href="#单行函数" class="headerlink" title="单行函数"></a>单行函数</h2><p><strong>字符函数</strong></p>
<p>大小写操作函数<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">LOWER(<span class="string">'SQL Course'</span>) 转小写 sql course</div><div class="line">UPPER(<span class="string">'SQL Course'</span>) 转大写 SQL COURSE</div><div class="line">INITCAP(<span class="string">'SQL Course'</span>) 仅首字母大写 Sql Course</div><div class="line"></div><div class="line"><span class="keyword">SELECT</span> ename, deptno <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> LOWER(ename)=<span class="string">'jones'</span>;</div></pre></td></tr></table></figure></p>
<p>字符操作函数<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CONCAT</span>(<span class="string">'Hello'</span>, <span class="string">'World'</span>) 字符连接 HelloWorld</div><div class="line">SUBSTR(<span class="string">'HelloWorld'</span>, <span class="number">1</span>, <span class="number">5</span>) 取子串 Hello</div><div class="line">LENGTH(<span class="string">'HelloWrold'</span>) 取字符串长度 <span class="number">10</span></div><div class="line">INSTR(<span class="string">'HelloWorld'</span>, <span class="string">'W'</span>) 返回子字符串在字符串中的位置 </div><div class="line"></div><div class="line"><span class="keyword">SELECT</span> ename, <span class="keyword">concat</span>(ename,job) infor <span class="keyword">FROM</span> emp;</div></pre></td></tr></table></figure></p>
<p>数字函数<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ROUND(<span class="number">45.926</span>, <span class="number">2</span>) 四舍五入到指定位 <span class="number">45.93</span></div><div class="line">TRUNC(<span class="number">45.926</span>, <span class="number">2</span>) 截取到指定位 <span class="number">45.92</span></div><div class="line"></div><div class="line">SELECT ROUND(<span class="number">45.926</span>, <span class="number">2</span>), TRUNC(<span class="number">45.926</span>, <span class="number">2</span>) FROM dual;</div></pre></td></tr></table></figure></p>
<p>日期函数<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">SYSDATE 返回系统当前日期</div><div class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span> <span class="keyword">FROM</span> dual;</div><div class="line"><span class="keyword">SELECT</span> TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">'YYYY-MM-DD HH24:MI:SS'</span>) <span class="keyword">FROM</span> dual;</div><div class="line"></div><div class="line">日期算法：</div><div class="line">加上或减去一个数字得到一个日期值</div><div class="line">两个日期相减得到两个日期之间的天数</div><div class="line">将小时与日期相加，需要将小时数除以24</div><div class="line"><span class="keyword">SELECT</span> ename, HIREDATE, (<span class="keyword">sysdate</span>-hiredate)/<span class="number">7</span> <span class="keyword">AS</span> WEEKS, hiredate+<span class="number">1</span>, hiredate<span class="number">-24</span>/<span class="number">24</span> <span class="keyword">FROM</span> emp;</div><div class="line"></div><div class="line">常用日期函数</div><div class="line">MONTHS_BETWEEN(x, y) 两个日期之间的月数</div><div class="line">ADD_MONTHS(x, y) 添加日历月y到日期x</div><div class="line">NEXT_DAY(x, day) 指定日期x的下一day的时间值，例如day是MONDAY</div><div class="line">LAST_DAY(x) 指定日期当前月的最后一天</div><div class="line"></div><div class="line"><span class="keyword">SELECT</span> ename, hiredate, <span class="keyword">MONTHS</span> <span class="keyword">BETWEEN</span>(<span class="keyword">SYSDATE</span>, hiredate) <span class="keyword">months</span>, ADD_MONTHS(hiredate, <span class="number">2</span>) add2mon, NEXT_DAY(hireday, <span class="string">'MONDAY'</span>), <span class="keyword">LAST_DAY</span>(hiredate) <span class="keyword">FROM</span> emp;</div></pre></td></tr></table></figure></p>
<p>转换函数：隐式数据类型转换，显式数据类型转换<br><figure class="highlight sqf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">隐式：</div><div class="line">VARCHAR2 <span class="built_in">or</span> CHAR  -&gt; NUMBER</div><div class="line">VARCHAR2 <span class="built_in">or</span> CHAR -&gt; <span class="built_in">DATE</span></div><div class="line"><span class="built_in">SELECT</span> ename, hiredate <span class="keyword">FROM</span> emp WHERE hiredate &gt; <span class="string">'20-APR-15'</span>;</div><div class="line"></div><div class="line">转换函数：</div><div class="line"></div><div class="line">常用TO_CHAR函数处理日期，格式format_model 需要满足：</div><div class="line">- 必须包含在单引号，并且是大小写敏感</div><div class="line">- 可以包括任何有效的日期格式元素</div><div class="line">- 由逗号分开的日期值</div><div class="line"><span class="built_in">SELECT</span> ename, TO_CHAR(hiredate, <span class="string">'YYYY-MM-DD'</span>) <span class="keyword">FROM</span> emp;</div><div class="line"></div><div class="line">常用TO_CHAR函数处理数字</div><div class="line"><span class="number">9</span> 代表一个数字</div><div class="line"><span class="number">0</span> 强制显示一个<span class="number">0</span></div><div class="line">$ 放置一个浮动的美元符号</div><div class="line">L 使用浮动的本地流通货币符号</div><div class="line">. 打印一个小数点</div><div class="line">, 打印一个”一千“指标符</div><div class="line"><span class="built_in">SELECT</span> ename, sal, TO_CHAR(sal, <span class="string">'$99,999.00'</span>) <span class="keyword">FROM</span> emp;</div><div class="line"></div><div class="line">TO_NUMBER 将字符转成数字</div><div class="line"><span class="built_in">SELECT</span> TO_NUMBER(<span class="string">'0001122'</span>) <span class="keyword">FROM</span> dual;</div><div class="line"></div><div class="line">TO_DATE 将字符串转换为日期格式</div><div class="line"><span class="built_in">SELECT</span> TO_DATE(<span class="string">'2015-07-28 19:15:39'</span>, <span class="string">'yyyy-mm-dd hh24:mi:ss'</span>) <span class="keyword">FROM</span> dual;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[内存字节对齐]]></title>
      <url>https://beim.github.io/2017/03/22/%E5%86%85%E5%AD%98%E5%AD%97%E8%8A%82%E5%AF%B9%E9%BD%90/</url>
      <content type="html"><![CDATA[<p><a href="http://blog.csdn.net/hairetz/article/details/4084088" target="_blank" rel="external">５分钟搞定内存字节对齐</a></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"></div><div class="line"><span class="comment">// #pragma pack(8)</span></div><div class="line"></div><div class="line"><span class="keyword">struct</span> st &#123;</div><div class="line">  <span class="keyword">int</span> b; <span class="comment">// 0-3</span></div><div class="line">  <span class="keyword">char</span> c; <span class="comment">// 4</span></div><div class="line">  <span class="keyword">double</span> a; <span class="comment">// 8-15</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> st1 &#123;</div><div class="line">  <span class="keyword">int</span> b; <span class="comment">// 0-3</span></div><div class="line">  <span class="keyword">double</span> a; <span class="comment">// 8-15</span></div><div class="line">  <span class="keyword">char</span> c; <span class="comment">// 16</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> st2 &#123;</div><div class="line">  <span class="keyword">int</span> a; <span class="comment">// 0-3</span></div><div class="line">  <span class="keyword">int</span> b; <span class="comment">// 4-7</span></div><div class="line">  <span class="keyword">int</span> c; <span class="comment">// 8-11</span></div><div class="line">  st s; <span class="comment">// 16-31</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">(<span class="keyword">void</span>)</span></span>&#123;</div><div class="line">  <span class="built_in">printf</span>(<span class="string">"%lu %lu %lu\n"</span>, <span class="keyword">sizeof</span>(st), <span class="keyword">sizeof</span>(st1), <span class="keyword">sizeof</span>(st2));</div><div class="line">  <span class="comment">// 16 24 32</span></div><div class="line">  <span class="comment">// 若#pragma pack(1) -&gt; 13 13 25</span></div><div class="line">  <span class="comment">// 若#pragma pack(2) -&gt; 14 14 26</span></div><div class="line">  <span class="comment">// 若#pragma pack(4) -&gt; 16 16 28</span></div><div class="line">  <span class="comment">// 若#pragma pack(8) -&gt; 16 24 32</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[UML-note]]></title>
      <url>https://beim.github.io/2017/03/22/UML-note/</url>
      <content type="html"><![CDATA[<h1 id="UML简介"><a href="#UML简介" class="headerlink" title="UML简介"></a>UML简介</h1><p>UML 是一种对软件密集型系统的制品进行下列工作的语言，这些工作包括：</p>
<ul>
<li>可视化 visualizing</li>
<li>详述 specifying</li>
<li>构造 constructing</li>
<li>文档化 documenting</li>
</ul>
<h1 id="UML-的构成"><a href="#UML-的构成" class="headerlink" title="UML 的构成"></a>UML 的构成</h1><ul>
<li>视图 views</li>
<li>图 diagrams</li>
<li>模型元素</li>
<li>通用机制</li>
</ul>
<h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><p>Use-Case View<br>Logical View<br>Process View<br>Component View<br>Deployment View</p>
<h2 id="图"><a href="#图" class="headerlink" title="图"></a>图</h2><p>类图 class diagram<br>对象图 object diagram<br>用例图 use case diagram<br>时序图 sequence diagram<br>协作图 conllaboration diagram<br>状态图 statechart diagram<br>活动图 activity diagram<br>组件图 component diagram<br>部署图 deployment diagram</p>
<a id="more"></a>
<h2 id="模型元素"><a href="#模型元素" class="headerlink" title="模型元素"></a>模型元素</h2><h3 id="事物-things"><a href="#事物-things" class="headerlink" title="事物 things"></a>事物 things</h3><ul>
<li><strong>结构事物</strong> structural things<br>类<br>接口<br>协作<br>用例<br>活动类<br>组件<br>节点</li>
<li><strong>行为事物</strong> behavioral things<br>交互<br>状态机</li>
<li><strong>分组事物</strong> grouping things<br>分组事物只有一种： 包<br>包是一种将有组织的元素分组的机制</li>
<li><strong>注释事物</strong> annotational things</li>
</ul>
<h3 id="UML-中的关系-relationships"><a href="#UML-中的关系-relationships" class="headerlink" title="UML 中的关系 relationships"></a>UML 中的关系 relationships</h3><ul>
<li>关联 association</li>
<li>依赖 dependency</li>
<li>泛化 generalization</li>
<li>实现 realization</li>
<li>聚合 polymerization</li>
</ul>
<h2 id="通用机制"><a href="#通用机制" class="headerlink" title="通用机制"></a>通用机制</h2><ul>
<li>修饰</li>
<li>注释</li>
<li>规格说明</li>
<li>通用划分</li>
<li>扩展机制</li>
</ul>
<h2 id="UML-的扩展组件"><a href="#UML-的扩展组件" class="headerlink" title="UML 的扩展组件"></a>UML 的扩展组件</h2><ul>
<li>构造型</li>
<li>标记值</li>
<li>约束</li>
</ul>
<hr>
<h1 id="用例图"><a href="#用例图" class="headerlink" title="用例图"></a>用例图</h1><p>用例图的组成；参与者；用例；事件流；用例间的关系</p>
<p>用例图分为<code>业务用例图</code>和<code>系统用例图</code></p>
<p>用例图主要包含以下6个元素</p>
<ul>
<li><p><code>参与者</code> (系统外部的一个实体)(启动者和支持者)</p>
</li>
<li><p><code>用例</code> (外部可见的系统功能单元)(简单名，路径名)</p>
</li>
<li><p><code>关联关系</code>: （实线箭头）表示参与者与用例之间的关系</p>
</li>
<li><p><code>包含关系</code>: （虚线箭头include）一个用例可以包含其他用例的行为；<code>客户用例</code>包含<code>提供者用例</code>；包含关系把几个<code>客户用例</code>的公共部分提取出来作为单独的用例（<code>提供者用例</code>）。</p>
</li>
<li><p><code>扩展关系</code>: （虚线箭头extend）扩展关系把新行为加入到已有的用例中；<code>扩展用例</code>扩展<code>基础用例</code>；<code>扩展用例</code>是<code>基础用例</code>的增量扩展；<br>扩展关系与包含关系的区别：<code>客户用例</code>执行时<code>提供者用例</code>一定执行；而<code>基础用例</code>被执行时，<code>扩展用例</code>不一定执行。</p>
</li>
<li><p><code>泛化关系</code>: （实线三角箭头）<code>父用例</code>可以被列举为多个<code>子用例</code>（继承行为和属性，还可以添加行为或覆盖，改变继承的行为）</p>
</li>
</ul>
<p><code>事件流</code><br>事件流的描述是独立于实现方法的，描述系统“做什么”，而不是“怎么做”<br>事件流文件的组成：简要说明，前提条件，后置条件，事件流程</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/UML3-%E5%9B%BE%E7%89%871.png" alt="uml3-0"><br><img src="http://ob4a6y748.bkt.clouddn.com/UML3-1-%E5%9B%BE%E7%89%871.png" alt="uml3-1"><br><img src="http://ob4a6y748.bkt.clouddn.com/UML3-2-%E5%9B%BE%E7%89%871.png" alt="uml3-2"><br><img src="http://ob4a6y748.bkt.clouddn.com/UML3-4-%E5%9B%BE%E7%89%871.png" alt="uml3-4"><br><img src="http://ob4a6y748.bkt.clouddn.com/UML3-5%E5%9B%BE%E7%89%871.png" alt="uml3-5"></p>
<hr>
<h1 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h1><p>类图的元素， 类， 接口， 类之间的关系， 分析阶段的类图， 设计阶段的类图</p>
<p>类图是描述类，接口以及他们之间关系的图</p>
<p>类图的元素</p>
<ul>
<li><code>类</code> 包括名称(name), 属性(attribute), 和操作(operation)<br>类的属性可见性：public(+) private(-) protected(#) package(~)</li>
<li><code>接口</code></li>
<li><code>依赖关系</code> 客户以某种形式依赖于提供者<br>依赖关系的分类： 使用依赖(usage), 抽象依赖(abstraction), 授权依赖(permission), 绑定依赖(binding)</li>
<li><code>泛化关系</code></li>
<li><code>关联关系</code>: 名称name，角色role，多重性multiplicity，聚合关系aggregation，组合关系composition，导航性navigation<br>名称：使用一个动词或动词短语来命名关联，关联的名称非必须; 用户—使用&gt;—计算机<br>角色：一个类对另一个类表现出来的职责; 学生–+学习者—-+教学者–学校<br>多重性：指有多少个对象可以参与关联; 学校n–+教学者—-+学习者–1..n学生<br>聚合关系：表示整体与部分关系的关联; 大学〇1—-1..n学院<br>组合关系：组合是聚合关系中一种特殊情况，是更强形式的聚合</li>
<li><code>实现关系</code></li>
</ul>
<p><img src="http://ob4a6y748.bkt.clouddn.com/UML4-1%E5%9B%BE%E7%89%871.png" alt="uml4-1"><br><img src="http://ob4a6y748.bkt.clouddn.com/UML4-2%E5%9B%BE%E7%89%871.png" alt="uml4-2"><br><img src="http://ob4a6y748.bkt.clouddn.com/UML4-3%E5%9B%BE%E7%89%871.png" alt="uml4-3"></p>
<center><strong>接口</strong></center><br><img src="http://ob4a6y748.bkt.clouddn.com/UML4-4%E5%9B%BE%E7%89%871.png" alt="uml4-4"><br><center><strong>依赖关系</strong></center><br><img src="http://ob4a6y748.bkt.clouddn.com/UML4-5%E5%9B%BE%E7%89%871.png" alt="uml4-5"><br><center><strong>泛化关系</strong></center><br><img src="http://ob4a6y748.bkt.clouddn.com/UML4-6%E5%9B%BE%E7%89%872.png" alt="uml4-6"><br><center><strong>关联关系</strong></center><br><img src="http://ob4a6y748.bkt.clouddn.com/uml4-7%E5%9B%BE%E7%89%872.png" alt="uml4-7"><br><center><strong>聚合关系</strong></center><br><img src="http://ob4a6y748.bkt.clouddn.com/UML4-8%E5%9B%BE%E7%89%872.png" alt="uml4-8"><br><center><strong>组合关系</strong></center>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[systemd-note]]></title>
      <url>https://beim.github.io/2017/03/22/systemd-note/</url>
      <content type="html"><![CDATA[<p>Systemd 是 Linux 系统工具，用来启动守护进程，已成为大多数发行版的标准配置。</p>
<p>ubuntu 从15 开始采用Systemd</p>
<p>systemd配置文件存放在<code>/lib/systemd/system</code> 下<br>系统从<code>/etc/systemd/system/</code> 下的软链接寻找配置文件并启动服务</p>
<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 启动一个服务</span></div><div class="line">$ <span class="string">systemctl </span><span class="string">start </span><span class="string">ssh.</span><span class="string">service</span></div><div class="line"></div><div class="line"><span class="comment"># 停止一个服务</span></div><div class="line">$ <span class="string">systemctl </span><span class="string">stop </span><span class="string">ssh.</span><span class="string">service</span></div><div class="line"></div><div class="line"><span class="comment"># 重启一个服务</span></div><div class="line">$ <span class="string">systemctl </span><span class="string">restart </span><span class="string">ssh.</span><span class="string">service</span></div><div class="line"></div><div class="line"><span class="comment"># 杀死一个服务的所有紫禁城</span></div><div class="line">$ <span class="string">systemctl </span><span class="string">kill </span><span class="string">ssh.</span><span class="string">service</span></div><div class="line"></div><div class="line"><span class="comment"># 重新加载一个服务的配置文件</span></div><div class="line">$ <span class="string">systemctl </span><span class="string">reload </span><span class="string">ssh.</span><span class="string">service</span></div><div class="line"></div><div class="line"><span class="comment"># 重新加载所有修改过的配置文件</span></div><div class="line">$ <span class="string">systemctl </span><span class="string">daemon-reload</span></div><div class="line"></div><div class="line"><span class="comment"># 显示某个Unit 的所有底层参数</span></div><div class="line">$ <span class="string">systemctl </span><span class="string">show </span><span class="string">ssh.</span><span class="string">service</span></div><div class="line"></div><div class="line"><span class="comment"># 列出所有配置文件以及状态</span></div><div class="line">$ <span class="string">systemctl </span><span class="built_in">list-unit-files</span></div><div class="line"></div><div class="line"><span class="comment"># 查看某个Unit 的运行状态</span></div><div class="line">$ <span class="string">systemctl </span><span class="string">status </span><span class="string">ssh.</span><span class="string">service </span></div><div class="line"></div><div class="line"><span class="comment"># 查看配置文件的内容</span></div><div class="line">$ <span class="string">systemctl </span><span class="string">cat </span><span class="string">ssh.</span><span class="string">service</span></div><div class="line"></div><div class="line"><span class="comment"># 启用一个服务</span></div><div class="line">$ <span class="string">systemctl </span><span class="string">enable </span><span class="string">ssh.</span><span class="string">service</span></div><div class="line"></div><div class="line"><span class="comment"># 禁用一个服务</span></div><div class="line">$ <span class="string">systemctl </span><span class="string">disable </span><span class="string">ssh.</span><span class="string">service</span></div><div class="line"></div><div class="line"><span class="comment"># 查看启动时默认的Target</span></div><div class="line">$ <span class="string">systemctl </span><span class="built_in">get-default</span></div><div class="line"></div><div class="line"><span class="comment"># 设置启动时默认的Target</span></div><div class="line">$ <span class="string">systemctl </span><span class="built_in">set-default</span> <span class="string">multi-user </span><span class="string">target</span></div><div class="line"></div><div class="line"><span class="comment"># 查看日志</span></div><div class="line">$ <span class="string">journalctl </span>-<span class="string">xe</span></div></pre></td></tr></table></figure>
<p>修改配置文件之后要重新加载配置文件，再重新启动，否则修改不会生效。</p>
<p>Unit 区块是配置文件的第一个区块，定义Unit 的描述和其他Unit 的关系</p>
<p>Install 通常是最后一个区块，用来定义如何启动，是否开机启动。</p>
<p>Service 是Service 的配置（如启动服务的命令，重启的配置），只有Service 类型的Unit 才有这个区块</p>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JS-原型]]></title>
      <url>https://beim.github.io/2017/03/15/JS-%E5%8E%9F%E5%9E%8B/</url>
      <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = &#123;</div><div class="line">    first: <span class="string">'liu'</span>,</div><div class="line">    second: <span class="string">'xin'</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">p = <span class="keyword">new</span> Person()</div><div class="line"></div><div class="line">p.__proto__ === Person.prototype <span class="comment">// true</span></div><div class="line"><span class="built_in">Object</span>.getPrototypeOf(p) === Person.prototype <span class="comment">// true</span></div><div class="line">p.constructor === Person <span class="comment">// true</span></div><div class="line">p.constructor === Person.prototype.constructor <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Man</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.who = <span class="string">'man'</span></div><div class="line">&#125;</div><div class="line">Man.prototype = <span class="keyword">new</span> Person()</div><div class="line"></div><div class="line">m = <span class="keyword">new</span> Man()</div><div class="line">m.constructor === Man <span class="comment">// false</span></div><div class="line">m.constructor === Person <span class="comment">// true</span></div><div class="line">m.__proto__ === Person <span class="comment">// false m.__proto__ 是之前创建的new Person() 对象</span></div><div class="line">m.__proto__.__proto__ === Person.prototype <span class="comment">// true</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.x = <span class="number">0</span>;</div><div class="line">  <span class="keyword">this</span>.y = <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line">Shape.prototype.display = () =&gt; <span class="built_in">console</span>.log(<span class="string">'x is'</span>, <span class="keyword">this</span>.x)</div><div class="line">s = <span class="keyword">new</span> Shape()</div><div class="line">s.display() <span class="comment">// x is 0</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Rect</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = <span class="string">'im a rect'</span></div><div class="line">&#125;</div><div class="line">r = <span class="keyword">new</span> Rect()</div><div class="line">Rect.prototype = <span class="built_in">Object</span>.create(Shape.prototype)</div><div class="line">r.display() <span class="comment">// x is undefined</span></div><div class="line"></div><div class="line">r.__proto__ === Shape.prototype <span class="comment">// true</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bottle</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">'bottle'</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">b = <span class="keyword">new</span> Bottle()</div><div class="line"></div><div class="line">b.constructor === Bottle</div><div class="line">b.__proto__ === Bottle.prototype</div></pre></td></tr></table></figure>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[实习面试]]></title>
      <url>https://beim.github.io/2017/03/12/%E5%AE%9E%E4%B9%A0%E9%9D%A2%E8%AF%95/</url>
      <content type="html"><![CDATA[<p>记录一下面试遇到过的问题</p>
<h1 id="2017-03-11-蚂蚁金服-分布式计算-30"><a href="#2017-03-11-蚂蚁金服-分布式计算-30" class="headerlink" title="2017-03-11 蚂蚁金服 分布式计算(30+)"></a><code>2017-03-11 蚂蚁金服 分布式计算(30+)</code></h1><p>计算机网络：</p>
<ul>
<li>TCP 和UDP 的区别<br>有序数据传输<br>重发丢失的数据包<br>舍弃重复的数据包<br>无错误数据传输<br>阻塞/流量控制<br>面向连接（确认有创建三方交握，连接已创建才作传输。）</li>
<li>TCP 报文内容<br>源端口 目的端口<br>序列号<br>确认号<br>头大小 标志位 窗口大小<br>校验和 紧急指针<br>选项字段<br>数据</li>
<li>TIME_WAIT 是什么<br>主动关闭端接收到FIN后，就发送ACK包，等待足够时间以确保被动关闭端收到了终止请求的确认包。【按照RFC 793，一个连接可以在TIME-WAIT保证最大四分钟，即最大分段寿命（maximum segment lifetime）的2倍】</li>
<li>TIME_WAIT 存在的理由<br><a href="http://www.cnblogs.com/li-hao/archive/2011/12/08/2280678.html" target="_blank" rel="external">博客园</a><br>可靠地实现TCP全双工连接的终止， 允许老的重复分节在网络中消逝</li>
</ul>
<p>操作系统</p>
<ul>
<li><p>进程和线程的区别<br>一个程序至少有一个进程，一个进程至少有一个线程。线程的划分尺度小于进程，使得多线程程序的并发性高。<br>进程在执行的过程中有独立的内存单元，而多个线程共享内存，从而提高了程序的运行效率。<br>进程是具有一定独立个功能的程序关于某个数据集合上的一次运行活动，进程是系统进行资源分配和调度的独立单位。<br>线程是CPU调度的最小单位，新建线程的时候会申请thread ID, program counter, register set, stack; 与其他同一进程的线程共享code section, data section, open files and signals。<br>进程和线程的主要差别在于它们是不同的操作系统资源管理方式。进程有独立的地址空间，一个进程崩溃后，在保护模式下不会对其它进程产生影响，而线程只是一个进程中的不同执行路径。线程有自己的堆栈和局部变量，但线程之间没有单独的地址空间，一个线程死掉就等于整个进程死掉，所以多进程的程序要比多线程的程序健壮，但在进程切换时，耗费资源较大，效率要差一些。但对于一些要求同时进行并且又要共享某些变量的并发操作，只能用线程，不能用进程。</p>
</li>
<li><p>python 的线程和c 的线程一样吗，python 线程是不是只能占用一个核</p>
</li>
</ul>
<p>C 语言</p>
<ul>
<li><p>函数指针的作用</p>
<p>算法</p>
</li>
<li><p>单链表求环代码实现(快慢指针)</p>
<p>项目</p>
<ul>
<li>项目中遇到的问题，怎么解决</li>
</ul>
<a id="more"></a>
</li>
</ul>
<h1 id="2017-03-13-阿里-研发工程师C-C-50"><a href="#2017-03-13-阿里-研发工程师C-C-50" class="headerlink" title="2017-03-13 阿里 研发工程师C/C++(50+)"></a><code>2017-03-13 阿里 研发工程师C/C++(50+)</code></h1><p>项目</p>
<ul>
<li>项目架构</li>
<li>负责的部分(权限认证，批量授权怎么解决)</li>
</ul>
<p>操作系统</p>
<ul>
<li>线程的状态<br>create ready running blocking terminating</li>
<li>为什么需要线程同步<br>线程之间可能共享一些资源，当多个线程同时读写同一份资源的时候可能会引起冲突。<br>线程同步的方法：互斥量，条件变量，屏障，信号量</li>
</ul>
<p>数据结构</p>
<ul>
<li>双向链表删除节点</li>
<li>哈希碰撞<br>散列函数的输入和输出不是唯一对应关系的，如果两个散列值相同，两个输入值很可能是相同的，但也可能不同，这种情况称为“哈希碰撞”，这通常是两个不同长度的输入值，刻意计算出相同的输出值。</li>
</ul>
<p>计算机网络</p>
<ul>
<li>TCP 三次握手过程<br>[SYN Seq=A]客户端通过向服务器端发送一个SYN来创建一个主动打开，作为三路握手的一部分。客户端把这段连接的序号设定为随机数A。<br>[SYN, ACK Seq=B, Ack=A+1]服务器端应当为一个合法的SYN回送一个SYN/ACK。ACK的确认码应为A+1，SYN/ACK包本身又有一个随机序号B。<br>[ACK Seq=A+1, Ack=B+1]最后，客户端再发送一个ACK。当服务端受到这个ACK的时候，就完成了三路握手，并进入了连接创建状态。此时包序号被设定为收到的确认号A+1，而响应则为B+1。</li>
<li>TCP 报文内容<br><a href="https://zh.wikipedia.org/wiki/%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE" target="_blank" rel="external">WiKI</a><br>源端口 目的端口<br>序列号<br>确认号<br>头长度 标志位 窗口大小<br>校验和 紧急指针<br>选项字段<br>数据</li>
<li>HTTP 字段含义<br><a href="https://zh.wikipedia.org/zh-hans/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE" target="_blank" rel="external">WIKI</a><br>200 OK 204 No Content<br>301 资源移动到新位置  302 重定向 304 Not Modified<br>400 Bad Request 请求语法错误  401 Unauthorized  403 Forbidden 404 Not Found 405 Method Not Allowed<br>500 服务器错误 501 Not Implemented服务器无法识别请求的方法 504 Gateway Timeout</li>
</ul>
<p>数据库</p>
<ul>
<li>索引的方式<br><a href="http://blog.csdn.net/kennyrose/article/details/7532032" target="_blank" rel="external">唯一索引，主键索引，聚集索引</a></li>
</ul>
<h1 id="2017-03-17-腾讯SNG事业部-测试开发方向-1h"><a href="#2017-03-17-腾讯SNG事业部-测试开发方向-1h" class="headerlink" title="2017-03-17 腾讯SNG事业部 测试开发方向(1h+)"></a><code>2017-03-17 腾讯SNG事业部 测试开发方向(1h+)</code></h1><p>项目：</p>
<ul>
<li>遇到的困难</li>
<li>收获</li>
<li>网站能支持的访问量</li>
</ul>
<p>语言：</p>
<ul>
<li>最熟悉的语言，语言的难点，怎么解决</li>
<li>nodejs promise 原理</li>
</ul>
<p>数据结构与算法</p>
<ul>
<li>场景：给出根目录，根目录下有很多日志文件和文件夹，文件夹下有各自的日志文件和子文件夹；日志文件有不同级别的记录如error，info等，如何筛选出所需要的记录？<br>层序遍历</li>
<li>继续上面场景：每个文件都非常大，一个一个文件处理会很慢，怎么进行筛选？<br>？？？</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">准备</div><div class="line">从测试的目的分类</div><div class="line">功能测试</div><div class="line">  单元测试</div><div class="line">  功能测试</div><div class="line">  集成测试</div><div class="line">  场景测试</div><div class="line">  系统测试</div><div class="line">非功能测试</div><div class="line">  压力测试</div><div class="line">  负载测试</div><div class="line">  性能测试</div><div class="line">  兼容性测试</div><div class="line">  配置测试</div><div class="line"></div><div class="line">从测试设计分类</div><div class="line">黑盒测试</div><div class="line">  等价划分</div><div class="line">  边界值分析</div><div class="line">  因果图</div><div class="line">  错误猜测</div><div class="line">白盒测试</div><div class="line">  语句覆盖</div><div class="line">  分支覆盖</div><div class="line">  条件覆盖</div><div class="line">  路径覆盖</div></pre></td></tr></table></figure>
<h1 id="2017-03-25-腾讯SNG事业部-测试（1h）二面"><a href="#2017-03-25-腾讯SNG事业部-测试（1h）二面" class="headerlink" title="2017-03-25 腾讯SNG事业部 测试（1h）二面"></a>2017-03-25 腾讯SNG事业部 测试（1h）二面</h1><p>日常聊天。。</p>
<p>访问网页缓慢，如何定位问题所在</p>
<p>一个抽奖程序，一等奖10%概率，二等奖20%概率，未中奖70%概率。过程：点击按钮，转盘指针转动，一段时间后停下，指向一个区域，对应一种奖项（或者未中奖），然后弹框提示。如何测试这个程序？</p>
<p>C语言中<br><figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">st</span></span> &#123;</div><div class="line">  <span class="keyword">int</span> a;</div><div class="line">  <span class="keyword">char</span> b;</div><div class="line">  <span class="keyword">int</span> c;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">sizeof</span>(<span class="class"><span class="keyword">struct</span> <span class="title">st</span></span>) 的值是多少</div><div class="line"></div><div class="line">如果要给这个结构体增加一个变量，增加在什么位置（中间或者上面或者下面？）</div></pre></td></tr></table></figure></p>
<p>期望工作地点，职业规划等</p>
<p>对系统测试和测试开发的理解</p>
<h1 id="2017-03-25-华为-C-（20m-）"><a href="#2017-03-25-华为-C-（20m-）" class="headerlink" title="2017-03-25 华为 C++（20m+）"></a>2017-03-25 华为 C++（20m+）</h1><p>专业，成绩，职业规划，有没有女朋友？？？</p>
<p>项目中的难点</p>
<p>在俱乐部参加的活动</p>
<p>已经面试了哪些单位，情况怎么样</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[cpp-左值与右值]]></title>
      <url>https://beim.github.io/2017/03/07/cpp-%E5%B7%A6%E5%80%BC%E4%B8%8E%E5%8F%B3%E5%80%BC/</url>
      <content type="html"><![CDATA[<p>C++ 的表达式要不然是右值(rvalue)，要不然是左值(lvalue)。<br>当一个对象被用作右值的时候，用的是对象的值（内容）；当对象被用作左值的时候，用的是对象的身份（在内存中的位置）。<br>一个左值表达式的求值结果是一个对象或者一个函数，然而以常量对象为代表的某些左值实际上不能作为赋值语句的左侧运算对象。此外，虽然某些表达式的求值结果是对象，但它们是右值。</p>
<a id="more"></a>
<p>不同的运算符对运算对象的要求不同，有的需要左值运算对象，有的需要右值运算对象；返回值也有差异，有的得到左值结果、有的得到右值结果。<br>一个重要的原则：在需要右值的地方可以用左值代替，但是不能把右值当成左值（也就是位置）来使用。</p>
<p>以下常用的运算符用到左值：</p>
<ul>
<li>赋值运算符需要一个（非常量）左值作为左侧运算对象，得到的结果仍然是左值。</li>
<li>取地址符作用于一个左值运算符对象，返回一个指向该运算对象的指针，这个指针是右值。</li>
<li>内置解引用运算符、下标运算符、迭代器解引用运算符、string 和vector 的下标运算符的求值结果都是左值。</li>
<li>内置类型的迭代器的递增递减运算符作用于左值运算对象，其前置版本所得的结果也是左值。</li>
</ul>
<p><strong>摘自 C++ primer 第五版 p121</strong></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[C-解析命令行参数]]></title>
      <url>https://beim.github.io/2017/02/27/C-%E8%A7%A3%E6%9E%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0/</url>
      <content type="html"><![CDATA[<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getopt</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> * <span class="keyword">const</span> argv[],</span></span></div><div class="line">           <span class="keyword">const</span> <span class="keyword">char</span> *optstring);</div><div class="line"></div><div class="line"><span class="keyword">extern</span> <span class="keyword">char</span> *optarg;</div><div class="line"><span class="keyword">extern</span> <span class="keyword">int</span> optind, opterr, optopt;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;getopt.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getopt_long</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> * <span class="keyword">const</span> argv[],</span></span></div><div class="line">           <span class="keyword">const</span> <span class="keyword">char</span> *optstring,</div><div class="line">           <span class="keyword">const</span> <span class="keyword">struct</span> option *longopts, <span class="keyword">int</span> *longindex);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getopt_long_only</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> * <span class="keyword">const</span> argv[],</span></span></div><div class="line">           <span class="keyword">const</span> <span class="keyword">char</span> *optstring,</div><div class="line">           <span class="keyword">const</span> <span class="keyword">struct</span> option *longopts, <span class="keyword">int</span> *longindex);</div></pre></td></tr></table></figure>
<p><a href="https://www.ibm.com/developerworks/cn/aix/library/au-unix-getopt.html#listing1" target="_blank" rel="external">ibm - 使用 getopt() 进行命令行处理</a></p>
<a id="more"></a>
<h1 id="getopt"><a href="#getopt" class="headerlink" title="getopt"></a>getopt</h1><p>每调用一次getopt 返回一次选项，并设置相应全局变量，没有参数时返回-1<br>getopt() 设置的全局变量有：</p>
<ul>
<li>optarg 指向当前选项参数的指针</li>
<li>optind 再次调用getopt() 时的下一个argv 指针的索引</li>
<li>optopt 最后一个已知选项，当命令行选项字符不包括在optstring 中或者选项缺少必要的参数时，该选项存储在optopt中</li>
</ul>
<p>optstring 可以有下列元素：</p>
<ul>
<li>单个字符，表示选项</li>
<li>单个字符后接一个冒号：表示该选项后必须跟一个参数。参数紧跟在选项娘后或者以空格隔开。该参数的指针赋给optarg</li>
<li>单个字符后接两个冒号：表示该选项后必须跟一个参数。参数必须紧跟在选项后不能以空格隔开。该参数的指针赋给optarg</li>
</ul>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="comment">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="comment">#include &lt;unistd.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> main (<span class="keyword">int</span> argc, char *argv[])</div><div class="line">&#123;</div><div class="line">  <span class="keyword">int</span> result = <span class="number">0</span>;</div><div class="line"></div><div class="line">  <span class="keyword">while</span> ((result = getopt(argc, argv, <span class="string">"ab:c::"</span>)) != -<span class="number">1</span>) &#123;</div><div class="line">    switch (result) &#123;</div><div class="line">      case <span class="string">'a'</span>:</div><div class="line">        <span class="keyword">printf</span>(<span class="string">"option = a, optopt = %c, optarg = %s, optind = %d\n"</span>, optopt, optarg, optind);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      case <span class="string">'b'</span>:</div><div class="line">        <span class="keyword">printf</span>(<span class="string">"option = b, optopt = %c, optarg = %s, optind = %d\n"</span>, optopt, optarg, optind);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      case <span class="string">'c'</span>:</div><div class="line">        <span class="keyword">printf</span>(<span class="string">"option = c, optopt = %c, optarg = %s, optind = %d\n"</span>, optopt, optarg, optind);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      case <span class="string">'?'</span>:</div><div class="line">        <span class="keyword">printf</span>(<span class="string">"option = ?, optopt = %c, optarg = %s, optind = %d\n"</span>, optopt, optarg, optind);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      default:</div><div class="line">        <span class="keyword">printf</span>(<span class="string">"default, result = %c\n"</span>, result);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">printf</span>(<span class="string">"argv[%d] = %s\n\n"</span>, optind, argv[optind]);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">printf</span>(<span class="string">"result = %d, optind = %d\n"</span>, result, optind);</div><div class="line">  <span class="keyword">for</span> (result = optind; result &lt; argc; result++) &#123;</div><div class="line">    <span class="keyword">printf</span>(<span class="string">"----argv[%d] = %s\n"</span>, result, argv[result]);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">printf</span>(<span class="string">"\n"</span>);</div><div class="line">  <span class="keyword">for</span> (result = <span class="number">0</span>; result &lt; argc; result++) &#123;</div><div class="line">    <span class="keyword">printf</span>(<span class="string">"---- argv[%d] = %s\n"</span>, result, argv[result]);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">$ ./<span class="selector-tag">a</span><span class="selector-class">.out</span> -<span class="selector-tag">a</span> -<span class="selector-tag">b</span> barg -ccarg args</div><div class="line">option = <span class="selector-tag">a</span>, optopt = , optarg = (null), optind = <span class="number">2</span></div><div class="line">argv[<span class="number">2</span>] = -<span class="selector-tag">b</span></div><div class="line"></div><div class="line">option = <span class="selector-tag">b</span>, optopt = , optarg = barg, optind = <span class="number">4</span></div><div class="line">argv[<span class="number">4</span>] = -ccarg</div><div class="line"></div><div class="line">option = c, optopt = , optarg = carg, optind = <span class="number">5</span></div><div class="line">argv[<span class="number">5</span>] = args</div><div class="line"></div><div class="line">result = -<span class="number">1</span>, optind = <span class="number">5</span></div><div class="line">----argv[<span class="number">5</span>] = args</div><div class="line"></div><div class="line">---- argv[<span class="number">0</span>] = ./<span class="selector-tag">a</span><span class="selector-class">.out</span></div><div class="line">---- argv[<span class="number">1</span>] = -<span class="selector-tag">a</span></div><div class="line">---- argv[<span class="number">2</span>] = -<span class="selector-tag">b</span></div><div class="line">---- argv[<span class="number">3</span>] = barg</div><div class="line">---- argv[<span class="number">4</span>] = -ccarg</div><div class="line">---- argv[<span class="number">5</span>] = args</div></pre></td></tr></table></figure>
<hr>
<h1 id="getopt-long"><a href="#getopt-long" class="headerlink" title="getopt_long"></a>getopt_long</h1><p><code>getopt_long</code> 是同时支持长选项和短选项的<code>getopt()</code> 版本。</p>
<p>其中一个参数是指向<code>struct option</code> 对象数组的指针<br>还有一个参数longIndex 所指向的整数将设置为当前找到的长选项的索引</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">option</span></span> &#123;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *name; <span class="comment">// 指向长选项名称（带两个断横线）的指针</span></div><div class="line">    <span class="keyword">int</span>         has_arg; <span class="comment">// no_argument, optional_argument, required_argument之一</span></div><div class="line">    <span class="keyword">int</span>        *flag;</div><div class="line">    <span class="keyword">int</span>         val;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="comment">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="comment">#include &lt;unistd.h&gt;</span></div><div class="line"><span class="comment">#include &lt;getopt.h&gt;</span></div><div class="line"></div><div class="line">static const struct option longOpts[] = &#123;</div><div class="line">  &#123; <span class="string">"aarg"</span>, no_argument, NULL, <span class="string">'a'</span> &#125;,</div><div class="line">  &#123; <span class="string">"barg"</span>, required_argument, NULL, <span class="string">'b'</span> &#125;,</div><div class="line">  &#123; <span class="string">"carg"</span>, required_argument, NULL, <span class="string">'c'</span> &#125;,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">int</span> longIndex = -<span class="number">1</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> main (<span class="keyword">int</span> argc, char *argv[])</div><div class="line">&#123;</div><div class="line">  <span class="keyword">int</span> result = <span class="number">0</span>;</div><div class="line"></div><div class="line">  <span class="keyword">while</span> ((result = getopt_long(argc, argv, <span class="string">"ab:c::"</span>, longOpts, &amp;longIndex)) != -<span class="number">1</span>) &#123;</div><div class="line">    switch (result) &#123;</div><div class="line">      case <span class="string">'a'</span>:</div><div class="line">        <span class="keyword">printf</span>(<span class="string">"option = a, optopt = %c, optarg = %s, optind = %d, longIndex = %d\n"</span>, optopt, optarg, optind, longIndex);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      case <span class="string">'b'</span>:</div><div class="line">        <span class="keyword">printf</span>(<span class="string">"option = b, optopt = %c, optarg = %s, optind = %d, longIndex = %d\n"</span>, optopt, optarg, optind, longIndex);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      case <span class="string">'c'</span>:</div><div class="line">        <span class="keyword">printf</span>(<span class="string">"option = c, optopt = %c, optarg = %s, optind = %d, longIndex = %d\n"</span>, optopt, optarg, optind, longIndex);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      case <span class="string">'?'</span>:</div><div class="line">        <span class="keyword">printf</span>(<span class="string">"option = ?, optopt = %c, optarg = %s, optind = %d, longIndex = %d\n"</span>, optopt, optarg, optind, longIndex);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      default:</div><div class="line">        <span class="keyword">printf</span>(<span class="string">"default, result = %c\n"</span>, result);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">printf</span>(<span class="string">"argv[%d] = %s\n\n"</span>, optind, argv[optind]);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">printf</span>(<span class="string">"result = %d, optind = %d\n"</span>, result, optind);</div><div class="line">  <span class="keyword">for</span> (result = optind; result &lt; argc; result++) &#123;</div><div class="line">    <span class="keyword">printf</span>(<span class="string">"----argv[%d] = %s\n"</span>, result, argv[result]);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">printf</span>(<span class="string">"\n"</span>);</div><div class="line">  <span class="keyword">for</span> (result = <span class="number">0</span>; result &lt; argc; result++) &#123;</div><div class="line">    <span class="keyword">printf</span>(<span class="string">"---- argv[%d] = %s\n"</span>, result, argv[result]);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">$ r -a --aarg -b bbb --barg bbbbb more</div><div class="line"><span class="attr">option</span> = a, <span class="attr">optopt</span> = , <span class="attr">optarg</span> = (<span class="literal">null</span>), <span class="attr">optind</span> = <span class="number">2</span>, <span class="attr">longIndex</span> = -<span class="number">1</span></div><div class="line">argv[<span class="number">2</span>] = --aarg</div><div class="line"></div><div class="line"><span class="attr">option</span> = a, <span class="attr">optopt</span> = , <span class="attr">optarg</span> = (<span class="literal">null</span>), <span class="attr">optind</span> = <span class="number">3</span>, <span class="attr">longIndex</span> = <span class="number">0</span></div><div class="line">argv[<span class="number">3</span>] = -b</div><div class="line"></div><div class="line"><span class="attr">option</span> = b, <span class="attr">optopt</span> = , <span class="attr">optarg</span> = bbb, <span class="attr">optind</span> = <span class="number">5</span>, <span class="attr">longIndex</span> = <span class="number">0</span></div><div class="line">argv[<span class="number">5</span>] = --barg</div><div class="line"></div><div class="line"><span class="attr">option</span> = b, <span class="attr">optopt</span> = , <span class="attr">optarg</span> = bbbbb, <span class="attr">optind</span> = <span class="number">7</span>, <span class="attr">longIndex</span> = <span class="number">1</span></div><div class="line">argv[<span class="number">7</span>] = more</div><div class="line"></div><div class="line"><span class="attr">result</span> = -<span class="number">1</span>, <span class="attr">optind</span> = <span class="number">7</span></div><div class="line">----argv[<span class="number">7</span>] = more</div><div class="line"></div><div class="line">---- argv[<span class="number">0</span>] = ./a.out</div><div class="line">---- argv[<span class="number">1</span>] = -a</div><div class="line">---- argv[<span class="number">2</span>] = --aarg</div><div class="line">---- argv[<span class="number">3</span>] = -b</div><div class="line">---- argv[<span class="number">4</span>] = bbb</div><div class="line">---- argv[<span class="number">5</span>] = --barg</div><div class="line">---- argv[<span class="number">6</span>] = bbbbb</div><div class="line">---- argv[<span class="number">7</span>] = more</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[拉普拉斯的魔女-东野圭吾]]></title>
      <url>https://beim.github.io/2017/02/01/%E6%8B%89%E6%99%AE%E6%8B%89%E6%96%AF%E7%9A%84%E9%AD%94%E5%A5%B3-%E4%B8%9C%E9%87%8E%E5%9C%AD%E5%90%BE/</url>
      <content type="html"><![CDATA[<p><img src="http://ob4a6y748.bkt.clouddn.com/lapulasi-IMG_4722.JPG" alt="lapulasi"></p>
<blockquote>
<p>人类是原子，即使每一个个体都很平凡，无自觉地活在世上，然而一旦成为集合体，就会戏剧性地实现物理法则。</p>
</blockquote>
<a id="more"></a>
<p>承载在高县的记忆的书~</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[西川之南]]></title>
      <url>https://beim.github.io/2017/01/26/%E8%A5%BF%E5%B7%9D%E4%B9%8B%E5%8D%97/</url>
      <content type="html"><![CDATA[<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-title-IMG_4336.JPG" alt="title"></p>
<blockquote>
<p><strong>2017年1月23日</strong></p>
</blockquote>
<a id="more"></a>
<p>飞机上邻座骂骂咧咧的可爱大叔</p>
<p>凌晨两点的我在市中心一脸懵逼</p>
<p>不接电话的鱼</p>
<p>川A车牌</p>
<p>路过了川大，过两天去看hhh</p>
<p>然后我去了一家24小时书店，连司机师傅都不晓得在哪里呢hhh<br>书店里静地我不敢说话，左右顾盼，和看起来像老板的葛优躺男子大眼瞪小眼，然后还是他先开口hhh<br>挑了一本挪威的森林</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-shudian-IMG_4435.JPG" alt="shudian"></p>
<p>成都人对于成都话真是有一种不可言说的执念</p>
<p>早6点  在成都街头</p>
<p>天呐撸 8点还没天亮</p>
<p>逛太古里看到宜宾燃面。。好想吃！！可是我要去宜宾吃正宗的燃面哼╭(╯^╰)╮</p>
<p>这几天都好冷呢</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-taiguli-IMG_4323.JPG" alt="taiguli"></p>
<p>洗个头 好爽2333  小哥炒鸡有耐心的按摩<br>果然很安逸呢</p>
<p>炒鸡幸福的火锅！<br>小龙坎居然要排200桌！</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-xiaolongkan1-IMG_4353.JPG" alt="xiaolongkan1"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-xiaolongkan2-IMG_4464.JPG" alt="xiaolongkan2"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-xiaolongkan3-IMG_hahaha.JPG" alt="xiaolongkan3"></p>
<p>鱼逼：明天早上的话先去一下杜甫澡堂。。澡。。澡堂？？？？(／。＼)</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-ifs-IMG_4352.JPG" alt="ifs"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-ifs1-IMG_4431.JPG" alt="ifs1"></p>
<p>遍地五分好评的店呀！太幸福！</p>
<p>宽窄巷子~~</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-kuanzhai1-IMG_4409.JPG" alt="kuanzhai1"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-kuanzhai2-IMG_4410.JPG" alt="kuanzhai2"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-kuanzhai3-IMG_4411.JPG" alt="kuanzhai3"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-kuanzhai4-IMG_4412.JPG" alt="kuanzhai4"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-kuanzhai5-IMG_4425.JPG" alt="kuanzhai5"></p>
<p>崇德里~~</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-chongdeli-IMG_4433.JPG" alt="chongdeli"></p>
<p>凉糕，叶儿粑，抄手，担担面，钵钵鸡。锦里的小吃真是好吃到发抖！hhhh</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-jinli-IMG_4396.JPG" alt="jinli"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-jinli1-IMG_4398.JPG" alt="jinli1"></p>
<p>出师未捷身先死，长使英雄泪满襟。</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-whc1-IMG_4375.JPG" alt="whc1"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-whc2-IMG_4376.JPG" alt="whc2"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-whc3-IMG_4379.JPG" alt="whc3"></p>
<p>能攻心则反侧自消，从古知兵非好战；不审势即宽严皆误，后来治蜀要深思。</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-whc4-IMG_4385.JPG" alt="whc4"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-whc5-IMG_4383.JPG" alt="whc5"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-whc6-IMG_4388.JPG" alt="whc6"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-whc8-IMG_4394.JPG" alt="whc8"></p>
<p>兔兔那么可爱，你们怎么能吃兔兔呢！</p>
<p>安得广厦千万间！</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-dufucaotang-IMG_4406.JPG" alt="dufucaotang1"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-dufucaotang-IMG_4408.JPG" alt="dufucaotang2"></p>
<p>在成都的每一顿都能吃到幸福(*￣︶￣)</p>
<p>干锅芋儿太完美！</p>
<p>QAQ 吃太饱晚上怎么刷小龙坎副本！！战略性失误！可是太好吃(ﾉﾟ0ﾟ)ﾉ~老板再来一碗！</p>
<p>袁记串串香还是熟悉的味道~</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-yuanji-IMG_4451.JPG" alt="yuanji"></p>
<p>今天准备把包裹寄出去QAQ</p>
<p>上车！adventure to 宜宾~<br>从这里开始要一个人了哈哈哈</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-yibin-IMG_4469.JPG" alt="yibin"></p>
<p>啊那两个人居然已经吃上燃面了！哼我要去宜宾吃QAQ</p>
<p>天哪春运高速堵车，意料之外</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-yibin-IMG_4472.PNG" alt="yibin1"></p>
<p>烟雨朦胧</p>
<p>小孩子的眼睛里有星星</p>
<p>车上遇到一个从成都回符江的老爷爷</p>
<p>这里西餐厅环境不错哦</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian1-IMG_4478.JPG" alt="gaoxian1"></p>
<p>过小年哟</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian2-IMG_4477.JPG" alt="gaoxian2"></p>
<p>梦幻网吧？诶诶诶我是被网管调戏了吗？？我说开50有什么问题吗？？？？</p>
<p>梦见<br>天晴了</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian3-IMG_4484.JPG" alt="gaoxian3"></p>
<p>出太阳就在公园里摆上桌椅，喝茶聊天(〃’▽’〃)  好安逸噢。 清茶还是绿茶？</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian4-IMG_4486.JPG" alt="gaoxian4"></p>
<p>年轻人在哪儿呢？</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian5-IMG_4489.JPG" alt="gaoxian5"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian6-IMG_4490.JPG" alt="gaoxian6"></p>
<p>与火车擦身而过，让我想起了安娜。</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian7-IMG_4492.JPG" alt="gaoxian7"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian8-IMG_4493.JPG" alt="gaoxian8"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian9-IMG_4499.JPG" alt="gaoxian9"></p>
<p>三轮小车蛮有意思</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian10-IMG_4500.JPG" alt="gaoxian10"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian11-IMG_4502.JPG" alt="gaoxian11"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian12-IMG_4503.JPG" alt="gaoxian12"></p>
<p>河边也能喝茶hhh<br>真是度假的好地方(*￣︶￣)</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian13-IMG_4504.JPG" alt="gaoxian13"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian14-IMG_4509.JPG" alt="gaoxian14"></p>
<p>我见他们准备下班了，就把盘子端过去给服务员，小妹妹一脸懵逼以为薯条有问题我兴师问罪来的呢(〃’▽’〃)</p>
<p>在高县最后一晚（好吧我又续了一天）看一场后会无期。(／。＼)</p>
<p>当一艘船沉入海底，当一个人成了谜。</p>
<p>小年快乐</p>
<p>小三轮车的价钱真是个谜。。。</p>
<p>东野圭吾的拉普拉斯的魔女<br>初到成都时在轩客会看见的书，第二次去却找不着了，没想到在高县的书店里又见到了它。</p>
<p>阴天。河边没有茶座。只能坐在石墩上看书咯。</p>
<p>续住一天，明天还是得走啦</p>
<p>idrink的饮料好喝噢！多点几杯好了，以后喝不到了呢。</p>
<p>idrink的阿姨送我一杯奶茶诶(〃’▽’〃)</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian15-IMG_4548.JPG" alt="gaoxian15"></p>
<p>兔子兔子</p>
<p>兔子啊好像长大了一点点</p>
<p>兔子送我的青年文摘(／。＼)</p>
<p>曾经心心念念的四川、宜宾、高县，在这之后，逐渐褪去了神秘的纱幕；曾经触不可及的，变得那么近，就像星星靠近月亮，几乎伸出手就能抓到。梦里的情感搭建的道路，用路上每一片漂亮羽毛作装饰，如今和现实重合，有，不知所措，在她出现的那一刻，所有的念头变成空白，她是那么光鲜靓丽，像珠宝发出熠熠光彩。我伸手，神秘的魅力从我指尖流去。继续划动双桨吧，总有一天，能到达身后的梦的起点。</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian16-IMG_4574.JPG" alt="gaoxian16"></p>
<p>今日的宜宾，相比初到时要明媚许多呢。</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian17-IMG_4589.PNG" alt="gaoxian17"></p>
<p>万里长江第一城。</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian18-IMG_4591.JPG" alt="gaoxian18"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian19-IMG_4592.JPG" alt="gaoxian19"></p>
<p>地标广场宜宾赋</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian20-IMG_4598.JPG" alt="gaoxian20"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian21-IMG_4600.JPG" alt="gaoxian21"></p>
<p>古城墙 冠英街古民居  千年放生池</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian22-IMG_4604.JPG" alt="gaoxian22"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian23-IMG_4608.JPG" alt="gaoxian23"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian24-IMG_4609.JPG" alt="gaoxian24"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian25-IMG_4610.JPG" alt="gaoxian25"></p>
<p>东街好热闹哒</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian26-IMG_4613.JPG" alt="gaoxian26"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian27-IMG_4614.JPG" alt="gaoxian27"></p>
<p>这里也有川西坝子和小龙坎哈哈哈</p>
<p>哇塞 东街的台湾无骨鸡柳和六中的味道一样！！！！！！瞬间找回童年！！！！（这个无骨鸡柳我在台湾都没见到过，居然在这里又吃到了哈哈哈）</p>
<p>铁板豆腐带汤汁的嘞厉害了</p>
<p>一百多秒的红灯，行人提前二十秒抱团闯红灯这是惯例吗2333</p>
<p>淡黄色的路灯真好看</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian28-IMG_4621.JPG" alt="gaoxian28"></p>
<p>刚看完后会无期就给我塞这种卡片啊哈哈哈</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian29-IMG_4623.JPG" alt="gaoxian29"></p>
<p>为什么天气冷没有白肉了嘞</p>
<p>蜀地处处可寻丞相祠堂呢</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian30-IMG_4627.JPG" alt="gaoxian30"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian31-IMG_4628.JPG" alt="gaoxian31"></p>
<p>非淡泊无以明志，非宁静无以致远。</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian32-IMG_4630.JPG" alt="gaoxian32"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian33-IMG_4631.JPG" alt="gaoxian33"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian34-IMG_4632.JPG" alt="gaoxian34"></p>
<p>飞机上可爱的成都大叔，大巴上可爱的符江老爷爷，吾饮良品里可爱的奶茶阿姨。</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian35-IMG_4635.JPG" alt="gaoxian35"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian36-IMG_4634.JPG" alt="gaoxian36"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian37-IMG_4636.JPG" alt="gaoxian37"></p>
<p>好看的叫阿姨，不好看的叫娘娘2333</p>
<p>一中可能放假不让进去参观，可惜了</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian38-IMG_4637.JPG" alt="gaoxian38"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian39-IMG_4638.JPG" alt="gaoxian39"></p>
<p>真希望是在这里长大，这样，就可以早点认识你了。</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian40-IMG_4639.JPG" alt="gaoxian40"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian41-IMG_4643.JPG" alt="gaoxian41"><br><img src="http://ob4a6y748.bkt.clouddn.com/xc-gaoxian42-IMG_4644.JPG" alt="gaoxian42"></p>
<p>最后来两燃面</p>
<p>萍乡我回来了~</p>
<p><strong>I’ll miss you terribly.</strong></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[C-可变参数]]></title>
      <url>https://beim.github.io/2017/01/11/C-%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0/</url>
      <content type="html"><![CDATA[<p>在看<code>C和指针</code>时发现的一个有趣的地方：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdarg.h&gt;</span></span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">var_args_func</span><span class="params">(<span class="keyword">int</span> n_values, ...)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"n_values is %d\n"</span>, n_values);</div><div class="line">    va_list args;</div><div class="line">    va_start(args, n_values);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n_values; i++) &#123;</div><div class="line">        <span class="keyword">double</span> arg = va_arg(args, <span class="keyword">double</span>);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"arg is %lf\n"</span>, arg);</div><div class="line">        <span class="keyword">int</span> arg1 = va_arg(args, <span class="keyword">int</span>);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"arg is %d\n"</span>, arg1);</div><div class="line">    &#125;</div><div class="line">    va_end(args);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">test_var_args_func</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">float</span> f = <span class="number">6</span>;</div><div class="line">    var_args_func(<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4.0</span>, <span class="number">5.0</span>, f);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    test_var_args_func();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面这段代码输出是<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">n_values <span class="keyword">is</span> <span class="number">3</span></div><div class="line">arg <span class="keyword">is</span> <span class="number">4.000000</span></div><div class="line">arg <span class="keyword">is</span> <span class="number">1</span></div><div class="line">arg <span class="keyword">is</span> <span class="number">5.000000</span></div><div class="line">arg <span class="keyword">is</span> <span class="number">2</span></div><div class="line">arg <span class="keyword">is</span> <span class="number">6.000000</span></div><div class="line">arg <span class="keyword">is</span> <span class="number">3</span></div></pre></td></tr></table></figure></p>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[NSGA-相关]]></title>
      <url>https://beim.github.io/2017/01/07/NSGA-%E7%9B%B8%E5%85%B3/</url>
      <content type="html"><![CDATA[<h1 id="一"><a href="#一" class="headerlink" title="一"></a>一</h1><h2 id="1-1-选题：A-Fast-and-Elitist-Multiobjective-Genetic-Algorithm-NSGA-II"><a href="#1-1-选题：A-Fast-and-Elitist-Multiobjective-Genetic-Algorithm-NSGA-II" class="headerlink" title="1.1 选题：A Fast and Elitist Multiobjective Genetic Algorithm: NSGA-II"></a>1.1 选题：A Fast and Elitist Multiobjective Genetic Algorithm: NSGA-II</h2><h2 id="1-2-本文解决了什么问题"><a href="#1-2-本文解决了什么问题" class="headerlink" title="1.2 本文解决了什么问题"></a>1.2 本文解决了什么问题</h2><p>本文提出了一种计算复杂度为O(MN^2) 的快速的基于非支配排序的多目标进化算法（MOEA），该算法可以用来解决多目标优化问题。<br>该算法解决了非支配排序遗传算法（NSGA）所显现的三个问题：</p>
<ol>
<li>计算支配排序的复杂度高：NSGA 的计算支配排序复杂度为O(MN^3)（其中M 是目标函数的数量，N 是种群的数量）。若种群的数量大，则会使得NSGA 的计算代价非常大。产生这种大复杂度的原因是每一个子代中都有非支配排序的程序。而本文提出的NSGA-II 算法的计算复杂度可以优化到O(MN^2)。</li>
<li>缺少精英机制(elitism)：精英机制可以显著提高遗传算法的性能，同时还能够防止较优解被发现后却丢失的情况。</li>
<li>需要共享参数(sharing parameter)：传统的保存种群多样性的机制为了得到多种多样的等价的解非常依赖共享的概念。而共享主要的问题是它需要制定共享参数。而NSGA-II 使用拥挤比较的方法替换了共享函数方法。</li>
</ol>
<h2 id="1-3-采用什么思想解决这个问题"><a href="#1-3-采用什么思想解决这个问题" class="headerlink" title="1.3 采用什么思想解决这个问题"></a>1.3 采用什么思想解决这个问题</h2><p>为了解决上面提到的三种问题，NSGA-II 采用了以下改进：</p>
<ol>
<li>首先，NSGA-II 采用快速非支配排序方法，将一个种群排序为不同的支配等级，优先选择支配等级低的解，该过程需要O(MN^2) 次比较。</li>
<li>其次，采用精英机制，在每一次产生新的一代时，将当前最优解（即支配等级为1的解）原封不动的复制到新的一代中。这种机制可以防止进化过程中产生的最优解被交叉和变异所破坏，可以大幅提高运算速度，防止丢失找到的最优解。</li>
<li>最后，用拥挤比较的方法替换了共享函数的方法，在相同支配等级的解中优先选择拥挤程度低的解，这个新方法不需要用户定义任何维持种群多样性的参数，同时，这个方法有更好的复杂度。</li>
</ol>
<a id="more"></a>
<h2 id="1-4-基本算法的描述"><a href="#1-4-基本算法的描述" class="headerlink" title="1.4 基本算法的描述"></a>1.4 基本算法的描述</h2><p>有两个主要的算法和一个主循环，分别是：</p>
<ul>
<li>快速非支配排序方法，fast-non-dominated-sort(P)</li>
<li>拥挤距离计算，crowding-distance-assignment(I)</li>
<li>主循环</li>
</ul>
<p>算法主要过程如下图：<br><img src="http://ob4a6y748.bkt.clouddn.com/NSGA-II-2017-01-08%2017-01-16%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="NSGA-II 算法流程"></p>
<p><strong>快速非支配排序算法</strong><br>为了描述快速非支配排序方法，首先描述一个简单且缓慢的步骤，再描述一个快速的方法。<br>这个简单方法中，为了在大小为N 的种群中找到没有被支配的成员集合(第一支配等级)，将每一个解与种群中其他的解比较，直到找到所有没有被支配的成员，对每个解需要O(MN) 次比较，因此找到第一支配等级复杂度为O(MN^2)；现在找到了第一前沿面的解，将这些解在种群中屏蔽，重复上述程序，找到第二前沿面的解；因此，最坏情况下有N 个前沿面，需要O(MN^3) 此比较。<br>下面介绍一个快速的方法：首先对每一个解计算两个实体：1）支配计数np，即支配这个解的解的数量，2）Sp，解所支配的解的集合。所有第一非支配前沿面解的支配计数np 都为0.现在对每一个解p 都有np = 0，访问每一个成员q 和他的集合Sq（它所支配的解的集合），并且逐一减少支配计数nq。这样，如果任何成员q 的支配计数nq 达到0，我们就把它加入到一个单独集合Q。这些成员属于第二非支配前沿面。重复上述过程直到找到所有前沿面。</p>
<p>伪代码：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">fast-non-dominated-sort</span><span class="params">(P)</span></span></div><div class="line"><span class="keyword">for</span> each <span class="selector-tag">p</span> <span class="keyword">in</span> P</div><div class="line">    Sp = &#123;&#125; <span class="comment">// 初始化为空集合</span></div><div class="line">    np = <span class="number">0</span>  <span class="comment">// 成员p 的支配计数为0</span></div><div class="line">    <span class="keyword">for</span> each <span class="selector-tag">q</span> <span class="keyword">in</span> P</div><div class="line">        <span class="keyword">if</span> <span class="selector-tag">p</span> &lt; <span class="selector-tag">q</span> then  <span class="comment">// p 支配q</span></div><div class="line">            Sp = Sp + &#123;q&#125;  <span class="comment">// 将成员q 加入Sp</span></div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> <span class="selector-tag">q</span> &lt; <span class="selector-tag">p</span> then  <span class="comment">// q 支配p</span></div><div class="line">            np = np + <span class="number">1</span>  <span class="comment">// p 成员被支配的数量加一</span></div><div class="line">    <span class="keyword">if</span> np = <span class="number">0</span> then</div><div class="line">        prank = <span class="number">1</span></div><div class="line">        F1 = F1 + &#123;p&#125;  <span class="comment">// 将没有被支配的成员加入第一非支配前沿面</span></div><div class="line"><span class="selector-tag">i</span> = <span class="number">1</span></div><div class="line">while Fi != &#123;&#125; <span class="comment">// Fi 不为空集合</span></div><div class="line">    Q = &#123;&#125;  <span class="comment">// Q初始化为空集合，用来存储下一个前沿面的成员</span></div><div class="line">    <span class="keyword">for</span> each <span class="selector-tag">p</span> <span class="keyword">in</span> Fi</div><div class="line">        <span class="keyword">for</span> each <span class="selector-tag">q</span> <span class="keyword">in</span> Sp  <span class="comment">// 遍历p 所支配的成员集合</span></div><div class="line">            nq = nq - <span class="number">1</span>  <span class="comment">// 逐一减少支配计数</span></div><div class="line">            <span class="keyword">if</span> nq == <span class="number">0</span> then  <span class="comment">// 支配计数为0，即属于下一个前沿面</span></div><div class="line">                qrank = <span class="selector-tag">i</span> + <span class="number">1</span></div><div class="line">                Q = Q + &#123;q&#125;</div><div class="line">    <span class="selector-tag">i</span> = <span class="selector-tag">i</span> + <span class="number">1</span></div><div class="line">    Fi = Q</div></pre></td></tr></table></figure></p>
<p><strong>拥挤距离计算</strong><br>在两个处于不同前沿面中的解中，NSGA-II 选择排名更前的解；而对于两个相同前沿面的解，NSGA-II 用拥挤距离来选择更好的解（拥挤距离大的解，为了保留多样性）。<br>NSGA-II 中，用拥挤比较的方法替换了共享函数的方法。这个新方法不需要用户定义任何维持种群多样新的参数。为了描述这种方法，定义了密度估计的准则并展示了拥挤比较算子。<br>1）密度估计：为了得到种群中特定解周围的解的密度估计，根据每个目标函数计算这点两侧的两个点的平均距离。这个数值作为拥挤系数。拥挤系数的计算需要根据每个目标函数值的大小的升序顺序对种群进行排序。因此，对每一个目标函数，处于边界的解（最大和最小值的解）被指定为无穷大距离的值。所有其他中间的解被指定为两个相邻解的函数值归一化后的绝对差值。在集合I 中所有种群的成员都被指定了一个拥挤距离，用这个距离来对比两个解与其他解的接近程度，拥挤距离小的解在一定程度上会被其他解挤到。因此为了保留多样性，选择拥挤距离大的解。<br>2）拥挤比较算子(Crowded-Comparison Operator)：拥挤比较算子将选择的过程导向均匀分布的最优前沿面。假设每个个体有两个属性：1）非支配排名(irank)；2）拥挤系数(idistance)；现在定义一个偏序<code>&lt;n</code>: <code>i &lt;n j if (irank &lt; jrank) or ((irank == jrank) and (idistance &gt; jdistance))</code>。也就是说，对于不同前沿面的解，选择非支配排名(irank)更前的解；对于相同前沿面的解，选择拥挤系数(idistance)大的解。</p>
<p>伪代码：<br><figure class="highlight sqf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">crowding-<span class="built_in">distance</span>-assignment(I)</div><div class="line">l = |I|  <span class="comment">// I 中解的数量</span></div><div class="line"><span class="keyword">for</span> each i <span class="built_in">in</span> I</div><div class="line">    <span class="built_in">set</span> I[i].<span class="built_in">distance</span> = <span class="number">0</span>  <span class="comment">// 初始化拥挤距离</span></div><div class="line"><span class="keyword">for</span> each objective m  <span class="comment">// 对每个目标函数m</span></div><div class="line">    I = <span class="built_in">sort</span>(I, m)  <span class="comment">// 利用目标函数值对种群I 进行排序</span></div><div class="line">    I[<span class="number">1</span>].<span class="built_in">distance</span> = I[l].<span class="built_in">distance</span> = 无穷  <span class="comment">// 将边界点的拥挤距离设为无穷</span></div><div class="line">    <span class="keyword">for</span> i = <span class="number">2</span> <span class="keyword">to</span> (l - <span class="number">1</span>)  <span class="comment">// 遍历非边界点</span></div><div class="line">        <span class="comment">// I[i].m 代表集合I中第i个个体的第m个目标函数值，fm-max 和fm-min 是第m个目标函数值的最大和最小值。</span></div><div class="line">        I[i].<span class="built_in">distance</span> = I[i].<span class="built_in">distance</span> + (I[i + <span class="number">1</span>].m - I[i - <span class="number">1</span>].m) / (fm-<span class="built_in">max</span> - fm-<span class="built_in">min</span>)</div></pre></td></tr></table></figure></p>
<p><strong>主循环</strong><br>最初随机创建父代种群P0。种群根据非支配情况排序(使用fast-non-dominated-sort )，每一个解都被指定一个等于它自身非支配等级的排名（1代表最高等级，2次之，依次类推）。然后通过常用的选择，重组以及变异来生成与父代种群P0大小相同(N)的子代种群Q0。对于第t代，合成种群Rt=Pt + Qt(合并)，种群Rt 大小为2N。然后将Rt 根据非支配度排序，现在属于最优非支配度集合F1 的解是合成种群的最优解。如果F1 大小比N 小，则将F1 中所有成员归入新种群Pt+1 中。种群Pt+1 剩余成员在后来按派闽个排序的非支配前沿面选择，因此接下来选择F2 中的解，然后F3 中的解，直到选择出刚好N 个种群成员。接下来大小为N 的新种群Pt+1 被用来进行选择交叉和变异操作从而产生大小为N 的新种群Qt+1。</p>
<p>伪代码：<br><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Rt = Pt + Qt  <span class="comment">// 将父代和子代种群合并</span></div><div class="line">F = fast-non-dominated-sort(Rt)  <span class="comment">// F = (F1, F2, ...)，进行快速非支配排序，返回前沿面</span></div><div class="line">util |Pt+<span class="number">1</span>| + |Fi| &lt;= N  <span class="comment">// 直到父代种群被填满</span></div><div class="line">    crowding-distance-assignment(Fi)  <span class="comment">// 计算前沿面i 的拥挤距离</span></div><div class="line">    Pt+1 = Pt+<span class="number">1</span> + Fi  <span class="comment">// 将第i个前沿面的成员加入下一个父代种群Pt+1 中</span></div><div class="line">    i = i + <span class="number">1</span></div><div class="line">sort(Fi, &lt;n)  <span class="comment">// 将第i 个前沿面的成员根据拥挤比较算子`&lt;n` 进行降序排列</span></div><div class="line">Pt+1 = Pt+<span class="number">1</span> + Fi[<span class="number">1</span>:(N - |Pt+<span class="number">1</span>|)]  <span class="comment">// 选择第i 个前沿面的前(N - |Pt+1|) 个成员，保证父代种群的数量为N</span></div><div class="line">Qt+1 = make-new-pop(Pt+<span class="number">1</span>)  <span class="comment">// 使用选择交叉和变异来产生新的子代种群Qt+1</span></div><div class="line">t = t + <span class="number">1</span></div></pre></td></tr></table></figure></p>
<h2 id="1-5-算法分析的结论"><a href="#1-5-算法分析的结论" class="headerlink" title="1.5 算法分析的结论"></a>1.5 算法分析的结论</h2><p>首先分析<strong>快速非支配排序</strong>算法，对每一个在第二或者更高非支配等级的解p 来说，支配计数np 最多为N-1(成员个数为N)，而一个被制定非支配等级的解不会被再次访问，因此每一个解p 在它的支配计数达到0时最多被访问N-1 次。由于存在这样的解最多有N-1 个，所以全部复杂度为O(N^2)。因此整体排序算法的复杂度为O(MN^2)。</p>
<p>然后分析<strong>拥挤距离计算</strong>算法，M 为目标函数的个数，由于有M次独立的排序，每次最多有N个解，因此拥挤距离计算的算法复杂度为O(MNlogN)。</p>
<p>对于主循环，考虑算法一次迭代的计算复杂度。主要操作以及最坏情况的复杂度为：1）非支配排序O(M(2N)^2)；2）拥挤距离计算O(M(2N)log(2N))；3）拥挤比较算子<code>&lt;n</code> 上的排序O(2Nlog2N)；因此算法整体的复杂度为O(MN^2)，其中非支配排序占据了主导地位。</p>
<h2 id="1-6-用一个例子说明相关算法。"><a href="#1-6-用一个例子说明相关算法。" class="headerlink" title="1.6 用一个例子说明相关算法。"></a>1.6 用一个例子说明相关算法。</h2><p>下面以一个简单的栗子说明遗传算法。<br>以目标函数<code>f(x) = x + 10sin(5x) + 7cos(4x), x in [0, 9]</code>为例，使用遗传算法求解它在区间[0,9]的最大值。<br>这个函数大概长这样：<br><img src="http://ob4a6y748.bkt.clouddn.com/%E5%85%B3%E7%B3%BB%E6%9B%B2%E7%BA%BF-c461e04cdc0b8947bad5f1a47fc322e6_b.png" alt="函数"><br>假设解的精度为小数点后4 位，可以将x 的解空间划分为<code>(9-0)*(1e+4) = 90000</code> 个等分<br><code>2^16 &lt; 90000 &lt; 2^17</code>，因此用17位 二进制数来表示这些解。<br>一开始，这些二进制串是随机生成的。<br>一个这样的二进制串代表一条染色体串，这里染色体串的长度为17。<br>对于任何一条这样的染色体chromosome，使用公式<code>x = 0 + decimal(chromosome)*(9-0)/(2^17-1)</code>将它解码到<code>[0,9]</code>这个区间的数值。（decimal()将二进制数转化为十进制数）<br>一个个体就是一条染色体，许多个体组成种群，在这里是一个一维点集(x轴上[0,9]的线段)。<br>个体的适应度函数就是f(x)，在这里函数值越大，解的质量越高。<br>接下来通过上述函数的进化，选择，交叉和变异，多次迭代后平均适应度达到收敛。如下图：<br>迭代次数与平均适应度关系曲线（横轴：迭代次数，纵轴：平均适应度）<br><img src="http://ob4a6y748.bkt.clouddn.com/%E9%81%97%E4%BC%A0%E7%BB%93%E6%9E%9C-c4626ac1a2fea41ceb2f7face7764afe_b.png" alt="关系曲线"></p>
<h1 id="二"><a href="#二" class="headerlink" title="二"></a>二</h1><h2 id="2-1-分类"><a href="#2-1-分类" class="headerlink" title="2.1 分类"></a>2.1 分类</h2><p>进化计算包括以下几种</p>
<ul>
<li>遗传算法（Genetic Algorithms）</li>
<li>遗传规划（Genetic Programming）</li>
<li>进化策略（Evolution Strategies）</li>
<li>进化规划（Evolution Programming）</li>
</ul>
<h2 id="2-2-简介"><a href="#2-2-简介" class="headerlink" title="2.2 简介"></a>2.2 简介</h2><p><strong>遗传算法</strong>: 遗传算法是模拟达尔文生物进化论的自然选择和遗传学机理的生物进化过程的计算模型，是一种通过模拟自然进化过程搜索最优解的方法。遗传算法是从代表问题可能潜在的解集的一个种群开始的，而一个种群则经过基因编码的一定数目的个体组成。每个个体实际上是染色体带有特征的实体。染色体作为遗传物质的主要载体，即多个基因的集合，其内部表现是某种基因组合，它决定了个体形状的外部表现，如黑头发的特征是由染色体中控制这一特征的某种基因组合决定的。因此在一开始需要实现从表现型到基因型的映射即编码工作。由于仿照基因编码的工作很复杂，我们往往进行简化，如二进制编码，初代种群产生之后，按照适者生存和优胜劣汰的原理，逐代（generation）演化产生出越来越好的近似解，在每一代，根据问题域中个体的适应度（fitness）大小选择（selection）个体，并借助于自然遗传学的遗传算子（genetic operators）进行组合交叉（crossover）和变异（mutation），产生出代表新的解集的种群。这个过程将导致种群像自然进化一样的后生代种群比前代更加适应于环境，末代种群中的最优个体经过解码（decoding），可以作为问题近似最优解。</p>
<p><strong>遗传规划</strong>: 遗传规划是一种特殊的利用进化算法的机器学习技术，它开始于一群由随机生成的千百万个计算机程序组成的“人群”，然后根据一个程序完成给定的任务的能力来确定某个程序的适合度，应用达尔文的自然选择（适者生存）确定胜出的程序，计算机程序间也模拟两性组合，变异，基因复制，基因删除等代代进化，直到达到预先确定的某个中止条件为止。</p>
<p><strong>进化策略</strong>: 进化策略(Evolutionary Strategies,ES)是由德国的I. Rechenberg和HP. Schwefel于1963年提出的。ES作为一种求解参数优化问题的方法，模仿生物进化原理，假设不论基因发生何种变化，产生的结果（性状）总遵循零均值、某一方差的高斯分布。</p>
<p><strong>进化规划</strong>: 进化规划是一种随机优化方法,它的目标是通过进化达到行为智能化。但在最初的发展中,进化规划并未得到足够的重视。直到20世纪90年代,进化规划方法得到改善,并作为进化算法的一个分支开始得到广泛的应用。进化规划算法从一组随机产生的个体开始进行搜索,通过变异、选择等操作使个体向着搜索空间中越来越靠近全局最优值的区域进化。类似于遗传算法,进化规划算法也很容易早熟收敛。因此,避免早熟收敛,均衡算法的探索和执行能力,已成为进化规划研究的主要内容之一。</p>
<h2 id="2-3-比较"><a href="#2-3-比较" class="headerlink" title="2.3 比较"></a>2.3 比较</h2><p>遗传算法的主要基因操作是选种、交配和突变，而在进化规则、进化策略中，进化机制源于选种和突变。就适应度的角度来说遗传算法用于选择优秀的父代(优秀的父代产生优秀的子代)，而进化规则和进化策略则用于选择子代(优秀的子代才能存在)。遗传算法与遗传规划强调的是父代对子代的遗传链，而进化规则和进化策略则着重于子代本身的行为特性，即行为链。进化规则和进化策略一般都不采用编码，省去了运作过程中的编码—解码手续更适用于连续优化问题，但因此也不能进行非数值优化。进化策略可以确定机制产生出用于繁殖的父代，而遗传算法和进化规则强调对个体适应度和概率的依赖。</p>
<h1 id="三"><a href="#三" class="headerlink" title="三"></a>三</h1><p>NSGA-II 只能用来处理静态优化问题，而对于现实世界中大多数的优化问题，它们的目标函数，约束，和参数都是随时间不断变化的。处理诸如静态优化问题的问题需要先验地知道变化模式，并且即使那样，该过程也可能在计算上是昂贵的。<br>动态优化问题包括可随时间变化的目标函数，约束函数和问题参数。这些问题通常出现在现实世界的问题中，特别是在最佳控制问题或需要在线优化的问题中。通常有两种计算程序，在一种方法中，通过解决大量真实场景的解决方案，形成离线优化问题，以此来制定最优控制规则，这种方法对于那些使用在线优化算法的计算代价过于昂贵的问题是有效的。另一种方法是在线直接优化程序。在这种情况下，问题在一段时间内被认为是静止的，并且允许优化算法在问题保持静止的时间间隔内找到最优解。然后，基于当前问题场景构件新问题，并且对新时间段执行新的优化，其可以在少量迭代中跟踪最优解，使得所需的固定时间段该问题小并且近似误差减小。</p>
<h1 id="四"><a href="#四" class="headerlink" title="四"></a>四</h1><p>我们可以对原始的NSGA-II 过程进行一些更改以处理动态优化问题。<br>首先，需要有一个测试来确定问题是否发生变化。为此，我们从父群体中随机选择一些解决方案，并重新评估它们。如果任何目标和约束函数发生变化，则可以确定问题有变化。在发生更改的情况下，所有父解决方案都将重新评估，然后将父和子群体合并到一起。<br>其次，每当出现问题经历目标和约束的大的变化时，我们引入新的随机解。新的群体的x% 被随机解替换。这有助于在问题发生变化时引入新的（随机）解决方案。若问题只是有小的改变，则不引入随机解，而是用现有的解的突变解（随机选择）替换种群的x%。这样，种群中引入的新解决方案与现有种群相关。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[apue-note]]></title>
      <url>https://beim.github.io/2016/12/23/apue-note/</url>
      <content type="html"><![CDATA[<center><embed src="//music.163.com/style/swf/widget.swf?sid=33516497&type=2&auto=0&width=320&height=66" width="340" height="86" allownetworking="all"></center>

<blockquote>
<p>反正神也不會管我的事，那就更加如此吧。</p>
</blockquote>
<h1 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h1><p><code>原子操作</code> 指的是由多步组成的一个操作。如果该操作原子地执行，则要么执行完所有的步骤，要么一步也不执行，不可能只执行所有步骤的一个子集。</p>
<p><code>STDIN_FILENO</code> <code>int fd</code></p>
<p><code>stdin</code> <code>FILE *stream</code></p>
<a id="more"></a>
<hr>
<h1 id="第一章-UNIX基础"><a href="#第一章-UNIX基础" class="headerlink" title="第一章-UNIX基础"></a>第一章-UNIX基础</h1><h2 id="strerror"><a href="#strerror" class="headerlink" title="strerror"></a>strerror</h2><p>用于打印出错信息; p12</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">char</span> *<span class="title">strerror</span> <span class="params">(<span class="keyword">int</span> errnum)</span></span>;</div><div class="line"><span class="comment">// 返回指向消息字符串的指针</span></div></pre></td></tr></table></figure>
<h2 id="perror"><a href="#perror" class="headerlink" title="perror"></a>perror</h2><p>用于打印出错信息; p12</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">perror</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *msg)</span></span>;</div></pre></td></tr></table></figure>
<hr>
<h1 id="第三章-文件I-O"><a href="#第三章-文件I-O" class="headerlink" title="第三章-文件I/O"></a>第三章-文件I/O</h1><p><code>open, read, write, lseek, close</code></p>
<h2 id="open-openat"><a href="#open-openat" class="headerlink" title="open, openat"></a>open, openat</h2><p>打开或创建文件; p50</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fcntl.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">open</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *path, <span class="keyword">int</span> oflag, ... <span class="comment">/* mode_t mode */</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">openat</span><span class="params">(<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">char</span> *path, <span class="keyword">int</span> oflag, ... <span class="comment">/* mode_t mode */</span>)</span></span>;</div><div class="line"><span class="comment">// 返回新的文件描述符，错误返回-1</span></div></pre></td></tr></table></figure>
<h2 id="create"><a href="#create" class="headerlink" title="create"></a>create</h2><p>创建新文件; p52</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fcntl.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">create</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *path, <span class="keyword">mode_t</span> mode)</span></span>;</div><div class="line"><span class="comment">// 返回为只写的文件描述符， 错误返回-1</span></div><div class="line"><span class="comment">// 此函数等效于</span></div><div class="line">open(path, O_WRONLY | O_CREATE | O_TRUNC, mode);</div><div class="line"><span class="comment">// create 函数是为了弥补早期open 函数第二个参数只能为0，1, 2而无法打开一个尚未存在的文件的缺陷。</span></div><div class="line"><span class="comment">// 现在open 函数提供了选项O_CREATE 和O_TRUNC，于是也就不再需要单独的create 函数</span></div></pre></td></tr></table></figure>
<h2 id="close"><a href="#close" class="headerlink" title="close"></a>close</h2><p>关闭一个打开文件; p53</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">close</span> <span class="params">(<span class="keyword">int</span> fd)</span></span>;</div><div class="line"><span class="comment">// 成功返回0， 错误返回-1</span></div></pre></td></tr></table></figure>
<h2 id="lseek"><a href="#lseek" class="headerlink" title="lseek"></a>lseek</h2><p>显式地为一个打开文件设置偏移量; p53</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">off_t</span> lseek (<span class="keyword">int</span> fd, <span class="keyword">off_t</span> offset, <span class="keyword">int</span> whence);</div><div class="line"><span class="comment">// 成功返回新的文件偏移量， 错误返回-1</span></div></pre></td></tr></table></figure>
<h2 id="read-write"><a href="#read-write" class="headerlink" title="read, write"></a>read, write</h2><p>p57</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">ssize_t</span> read (<span class="keyword">int</span> fd, <span class="keyword">void</span> *buf, <span class="keyword">size_t</span> nbytes);</div><div class="line"><span class="comment">// read 成功返回读到的字节数，到达文件尾端返回0</span></div><div class="line"></div><div class="line"><span class="keyword">ssize_t</span> write (<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">void</span> *buf, <span class="keyword">size_t</span> nbytes);</div><div class="line"><span class="comment">// 成功返回已写的字节数，通常与参数nytes 相同，出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="pread-pwrite"><a href="#pread-pwrite" class="headerlink" title="pread, pwrite"></a>pread, pwrite</h2><p>p63</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">ssize_t</span> pread (<span class="keyword">int</span> fd, <span class="keyword">void</span> *buf, <span class="keyword">size_t</span> nytes, <span class="keyword">off_t</span> offset);</div><div class="line"><span class="comment">// 返回读到的字节数，若读到文件尾返回0；出错返回-1</span></div><div class="line"></div><div class="line"><span class="keyword">ssize_t</span> pwrite (<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">void</span> *buf, <span class="keyword">size_t</span> nbytes, <span class="keyword">off_t</span> offset);</div><div class="line"><span class="comment">// 返回成功写入的字节数； 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="dup-和-dup2"><a href="#dup-和-dup2" class="headerlink" title="dup 和 dup2"></a>dup 和 dup2</h2><p>下面两个函数都可用来复制一个现有的文件描述符<br>p63</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dup</span> <span class="params">(<span class="keyword">int</span> fd)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dup2</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">int</span> fd2)</span></span>;</div><div class="line"><span class="comment">// 两函数的返回值： 若成功，返回新的文件描述符；若出错，返回-1</span></div></pre></td></tr></table></figure>
<h2 id="sync-fsync-和-fdatasync"><a href="#sync-fsync-和-fdatasync" class="headerlink" title="sync, fsync 和 fdatasync"></a>sync, fsync 和 fdatasync</h2><p>p65</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="comment">// 只对fd 指定的一个文件起作用，并等待写磁盘操作结束才返回</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fsync</span> <span class="params">(<span class="keyword">int</span> fd)</span></span>;</div><div class="line"><span class="comment">// 成功返回0，出错返回-1</span></div><div class="line"></div><div class="line"><span class="comment">// 类似fsync，但是只影响文件的数据部分。而fsync 还会同步更新文件的属性</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fdatasync</span> <span class="params">(<span class="keyword">int</span> fd)</span></span>;</div><div class="line"><span class="comment">// 成功返回0，出错返回-1</span></div><div class="line"></div><div class="line"><span class="comment">// 将所有修改过的块缓冲区排入写队列，然后返回，不等待实际写磁盘操作结束</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">sync</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="fcntl"><a href="#fcntl" class="headerlink" title="fcntl"></a>fcntl</h2><p>p65</p>
<p>函数fcntl 可以改变已经打开文件的属性<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fcntl.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fcntl</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">int</span> cmd, ... <span class="comment">/* int arg */</span>)</span></span>;</div><div class="line"><span class="comment">// 成功返回值依赖于cmd，出错返回-1</span></div></pre></td></tr></table></figure></p>
<h2 id="ioctl"><a href="#ioctl" class="headerlink" title="ioctl"></a>ioctl</h2><p>p70</p>
<p>ioctl 函数一直是I/O 操作的杂物箱。不能用本章其他函数表示的I/O 操作通常都能用ioctl 表示。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span> <span class="comment">/* System V */</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/ioctl.h&gt;</span> <span class="comment">/* BSD and Linux */</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">ioctl</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">int</span> request, ...)</span></span>; <span class="comment">/* POSIX.1 */</span></div><div class="line"><span class="comment">// 出错返回-1，成功返回其他值</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">ioctl</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">unsigned</span> <span class="keyword">long</span> request, ...)</span></span>; <span class="comment">/* FreeBSD 8.0, Mac OS X 10.6.8, Linux */</span></div></pre></td></tr></table></figure></p>
<h1 id="第四章-文件和目录"><a href="#第四章-文件和目录" class="headerlink" title="第四章 文件和目录"></a>第四章 文件和目录</h1><h2 id="函数stat-fstat-fstatat-lstat"><a href="#函数stat-fstat-fstatat-lstat" class="headerlink" title="函数stat, fstat, fstatat, lstat"></a>函数stat, fstat, fstatat, lstat</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/stat.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">stat</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> pathname, <span class="keyword">struct</span> stat *<span class="keyword">restrict</span> buf)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fstat</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">struct</span> stat *buf)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lstat</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> pathname, <span class="keyword">struct</span> stat *<span class="keyword">restrict</span> buf)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fstatat</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> pathname, <span class="keyword">struct</span> stat *<span class="keyword">restrict</span> buf, <span class="keyword">int</span> flag)</span></span>;</div></pre></td></tr></table></figure>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">疑问(已解决)：</div><div class="line">图<span class="number">4</span><span class="number">-3</span> 的程序</div><div class="line">用lstat 输出与stat 输出不同</div><div class="line"></div><div class="line">lstat：</div><div class="line"><span class="regexp">/etc/</span><span class="string">passwd:</span> regular</div><div class="line">/<span class="string">etc:</span> directory</div><div class="line"><span class="regexp">/dev/</span><span class="string">log:</span> symbolic link   <span class="comment">/* 不同 */</span></div><div class="line"><span class="regexp">/dev/</span><span class="string">tty:</span> character special  </div><div class="line"><span class="regexp">/dev/</span><span class="string">sr0:</span> block special</div><div class="line"><span class="regexp">/dev/</span><span class="string">cdrom:</span> symbolic link  <span class="comment">/* 不同 */</span></div><div class="line"><span class="regexp">/dev/</span><span class="string">null:</span> character special</div><div class="line"><span class="symbol"></span></div><div class="line">stat:</div><div class="line"><span class="regexp">/etc/</span><span class="string">passwd:</span> regular</div><div class="line">/<span class="string">etc:</span> directory</div><div class="line"><span class="regexp">/dev/</span><span class="string">log:</span> socket    <span class="comment">/* 不同 */</span></div><div class="line"><span class="regexp">/dev/</span><span class="string">tty:</span> character special</div><div class="line"><span class="regexp">/dev/</span><span class="string">sr0:</span> block special</div><div class="line"><span class="regexp">/dev/</span><span class="string">cdrom:</span> block special   <span class="comment">/* 不同 */</span></div><div class="line"><span class="regexp">/dev/</span><span class="string">null:</span> character special</div><div class="line"></div><div class="line">对于<span class="regexp">/dev/</span>log</div><div class="line">lrwxrwxrwx <span class="number">1</span> root root <span class="number">28</span> Dec <span class="number">19</span> <span class="number">12</span>:<span class="number">57</span> <span class="regexp">/dev/</span>log -&gt; <span class="regexp">/run/</span>systemd<span class="regexp">/journal/</span>dev-log=</div><div class="line"></div><div class="line">对于<span class="regexp">/dev/</span>cdrom</div><div class="line">lrwxrwxrwx <span class="number">1</span> root root <span class="number">3</span> Dec <span class="number">19</span> <span class="number">12</span>:<span class="number">57</span> <span class="regexp">/dev/</span>cdrom -&gt; sr0</div><div class="line"></div><div class="line">lstat 和stat 结果不同的原因：</div><div class="line">当命名的文件是一个符号链接时，lstat 返回该符号链接的有关信息，而不是由该符号链接引用的文件的信息</div></pre></td></tr></table></figure>
<h2 id="函数access，faccessat"><a href="#函数access，faccessat" class="headerlink" title="函数access，faccessat"></a>函数access，faccessat</h2><p>access 和faccessat 函数按实际用户ID 和实际组ID 进行访问权限测试。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">access</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname, <span class="keyword">int</span> mode)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">faccessat</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">char</span> *pathname, <span class="keyword">int</span> mode, <span class="keyword">int</span> flag)</span></span>;</div><div class="line"><span class="comment">// 两个函数的返回值： 成功返回0；出错返回-1</span></div><div class="line"><span class="comment">// 如果测试文件是否已经存在，mode 就为F_OK;</span></div><div class="line"><span class="comment">// 否则mode 是R_OK, W_OK, X_OK 的按位或</span></div></pre></td></tr></table></figure>
<p>对程序4-8 的实验(r 是./a.out 的别名)<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">$ mv a.<span class="keyword">out</span> b.<span class="keyword">out</span></div><div class="line"></div><div class="line">$ ll b.<span class="keyword">out</span> </div><div class="line">-rwsrwxr-x 1 root beim 13912 <span class="keyword">Dec</span> 26 14:41 b.<span class="keyword">out</span>*</div><div class="line"><span class="comment">// mv 保留了rws 和root</span></div><div class="line"></div><div class="line">$ cp b.<span class="keyword">out</span> a.<span class="keyword">out</span></div><div class="line"></div><div class="line">$ ll *.<span class="keyword">out</span></div><div class="line">-rwxrwxr-x 1 beim beim 13912 <span class="keyword">Dec</span> 26 14:45 a.<span class="keyword">out</span>*</div><div class="line">-rwsrwxr-x 1 root beim 13912 <span class="keyword">Dec</span> 26 14:41 b.<span class="keyword">out</span>*</div><div class="line"><span class="comment">// cp 没有保留rws 和root</span></div><div class="line"></div><div class="line">$ <span class="keyword">rm</span> b.<span class="keyword">out</span> </div><div class="line"></div><div class="line">$ r /etc/shadow</div><div class="line">access <span class="keyword">error</span> <span class="keyword">for</span> /etc/shadow: Permission denied</div><div class="line"><span class="keyword">open</span> <span class="keyword">error</span> <span class="keyword">for</span> /etc/shadow: Permission denied</div><div class="line"></div><div class="line">$ sudo chmod <span class="keyword">u</span>+s a.<span class="keyword">out</span></div><div class="line"><span class="comment">// 打开设置用户ID 位</span></div><div class="line"></div><div class="line">$ ll a.<span class="keyword">out</span></div><div class="line">-rwsrwxr-x 1 beim beim 13912 <span class="keyword">Dec</span> 26 14:45 a.<span class="keyword">out</span>*</div><div class="line"><span class="comment">// rwx 变成了rws</span></div><div class="line"></div><div class="line">$ r /etc/shadow</div><div class="line">access <span class="keyword">error</span> <span class="keyword">for</span> /etc/shadow: Permission denied</div><div class="line"><span class="keyword">open</span> <span class="keyword">error</span> <span class="keyword">for</span> /etc/shadow: Permission denied</div><div class="line"><span class="comment">// 此时用户仍然是beim</span></div><div class="line"></div><div class="line">$ sudo chown root a.<span class="keyword">out</span></div><div class="line"></div><div class="line">$ ll a.<span class="keyword">out</span></div><div class="line">-rwxrwxr-x 1 root beim 13912 <span class="keyword">Dec</span> 26 14:45 a.<span class="keyword">out</span>*</div><div class="line"></div><div class="line">$ r /etc/shadow</div><div class="line">access <span class="keyword">error</span> <span class="keyword">for</span> /etc/shadow: Permission denied</div><div class="line"><span class="keyword">open</span> <span class="keyword">error</span> <span class="keyword">for</span> /etc/shadow: Permission denied</div><div class="line"><span class="comment">// 先设置rws 再设置用户为root 之后依旧没有权限</span></div><div class="line"></div><div class="line">$ ll a.<span class="keyword">out</span> </div><div class="line">-rwxrwxr-x 1 root beim 13912 <span class="keyword">Dec</span> 26 14:45 a.<span class="keyword">out</span>*</div><div class="line"><span class="comment">// 因为rws 被还原到rwx 了</span></div><div class="line"></div><div class="line">$ sudo chmod <span class="keyword">u</span>+s a.<span class="keyword">out</span> </div><div class="line"><span class="comment">// 再把设置用户ID 位打开</span></div><div class="line"></div><div class="line">$ ll a.<span class="keyword">out</span></div><div class="line">-rwsrwxr-x 1 root beim 13912 <span class="keyword">Dec</span> 26 14:45 a.<span class="keyword">out</span>*</div><div class="line"></div><div class="line">$ r /etc/shadow</div><div class="line">access <span class="keyword">error</span> <span class="keyword">for</span> /etc/shadow: Permission denied</div><div class="line"><span class="keyword">open</span> <span class="keyword">for</span> reading OK</div><div class="line"><span class="comment">// 可以open，通过设置用户ID 程序可以确定实际用户不能正常读指定的文件</span></div></pre></td></tr></table></figure></p>
<h2 id="函数umask"><a href="#函数umask" class="headerlink" title="函数umask"></a>函数umask</h2><p>umask 函数为进程设置文件模式创建屏蔽字，并返回之前的值<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/stat.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">mode_t</span> umask (<span class="keyword">mode_t</span> cmask);</div><div class="line"><span class="comment">// 返回值： 之前的文件模式创建屏蔽字</span></div></pre></td></tr></table></figure></p>
<h2 id="函数chmod，fchmod，fchmodat"><a href="#函数chmod，fchmod，fchmodat" class="headerlink" title="函数chmod，fchmod，fchmodat"></a>函数chmod，fchmod，fchmodat</h2><p>这三个函数使我们可以更改现有文件的权限<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/stat.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">chmod</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname, <span class="keyword">mode_t</span> mode)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fchmod</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">mode_t</span> mode)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fchmodat</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">char</span> *pathname, <span class="keyword">mode_t</span> mode, <span class="keyword">int</span> flag)</span></span>;</div><div class="line"><span class="comment">// 三个函数的返回值：成功返回0；出错返回-1</span></div></pre></td></tr></table></figure></p>
<h2 id="函数chown-fchown-fchownat-lchown"><a href="#函数chown-fchown-fchownat-lchown" class="headerlink" title="函数chown, fchown, fchownat, lchown"></a>函数chown, fchown, fchownat, lchown</h2><p>下面几个chown 函数可用于更改文件的用户ID 和组ID。如果两个参数owner 或group 中的任意一个是-1，则对应的ID 不变<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">chown</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname, <span class="keyword">uid_t</span> owner, <span class="keyword">gid_t</span> group)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fchown</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">uid_t</span> owner, <span class="keyword">gid_t</span> group)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fchownat</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">char</span> *pathname, <span class="keyword">uid_t</span> owner, <span class="keyword">gid_t</span> group, <span class="keyword">int</span> flag)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lchown</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname, <span class="keyword">uid_t</span> owner, <span class="keyword">gid_t</span> group)</span></span>;</div><div class="line"><span class="comment">// 4个函数的返回值：成功返回0，出错返回-1</span></div></pre></td></tr></table></figure></p>
<h2 id="函数-truncate-和-ftruncate"><a href="#函数-truncate-和-ftruncate" class="headerlink" title="函数 truncate 和 ftruncate"></a>函数 truncate 和 ftruncate</h2><p>为了截断或扩展文件可以调用truncate 和ftruncate, 打开文件时使用<code>O_TRUNC</code> 标志<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">truncate</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname, <span class="keyword">off_t</span> length)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">ftruncate</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">off_t</span> length)</span></span>;</div><div class="line"><span class="comment">// 两个函数的返回值：成功返回0，出错返回-1</span></div></pre></td></tr></table></figure></p>
<h2 id="函数link-linkat-unlink-unlinkat-remove"><a href="#函数link-linkat-unlink-unlinkat-remove" class="headerlink" title="函数link, linkat, unlink, unlinkat, remove"></a>函数link, linkat, unlink, unlinkat, remove</h2><p>使用link 或者linkat 函数创建一个指向现有文件的链接<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">link</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *existingpath, <span class="keyword">const</span> <span class="keyword">char</span> *newpath)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">linkat</span> <span class="params">(<span class="keyword">int</span> efd, <span class="keyword">const</span> <span class="keyword">char</span> *existingpath, <span class="keyword">int</span> nfd, <span class="keyword">const</span> <span class="keyword">char</span> *newpath, <span class="keyword">int</span> flag)</span></span>;</div><div class="line"><span class="comment">// 两个函数的返回值：成功返回0； 出错返回-1</span></div></pre></td></tr></table></figure></p>
<p>使用unlink 和unlinkat 函数删除一个现有的目录项<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">unlink</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">unlinkat</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">char</span> *pathname, <span class="keyword">int</span> flag)</span></span>;</div><div class="line"><span class="comment">// 两个函数的返回值： 成功返回0；出错返回-1</span></div></pre></td></tr></table></figure></p>
<p>用remove 函数解除对一个文件或目录的链接<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">remove</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname)</span></span>;</div><div class="line"><span class="comment">// 成功返回0；出错返回-1</span></div></pre></td></tr></table></figure></p>
<h2 id="函数rename-和renameat"><a href="#函数rename-和renameat" class="headerlink" title="函数rename 和renameat"></a>函数rename 和renameat</h2><p>文件或者目录可以用rename ，renameat 函数进行重命名<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">rename</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *oldname, constchar *newname)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">renameat</span> <span class="params">(<span class="keyword">int</span> oldfd, <span class="keyword">const</span> <span class="keyword">char</span> *oldname, <span class="keyword">int</span> newfd, <span class="keyword">const</span> <span class="keyword">char</span> *newname)</span></span>;</div><div class="line"><span class="comment">// 两个函数的返回值：成功返回0；出错返回-1</span></div></pre></td></tr></table></figure></p>
<h2 id="函数symlink，-symlinkat"><a href="#函数symlink，-symlinkat" class="headerlink" title="函数symlink， symlinkat"></a>函数symlink， symlinkat</h2><p>用于创建一个符号链接<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">symlink</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *actualpath, <span class="keyword">const</span> <span class="keyword">char</span> *sympath)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">symlinkat</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *actualpath, <span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">char</span> *sympath)</span></span>;</div><div class="line"><span class="comment">// 两个函数的返回值：成功返回0；出错返回-1</span></div></pre></td></tr></table></figure></p>
<h2 id="函数readlink-readlinkat"><a href="#函数readlink-readlinkat" class="headerlink" title="函数readlink, readlinkat"></a>函数readlink, readlinkat</h2><p>因为open 函数跟随符号链接，所以需要有一种方法打开链接本身。并读该链接中的名字：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">ssize_t</span> readlink (<span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> pathname, <span class="keyword">char</span> *<span class="keyword">restrict</span> buf, <span class="keyword">size_t</span> bufsize);</div><div class="line"><span class="keyword">ssize_t</span> readlinkat (<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">char</span>* <span class="keyword">restrict</span> pathname, <span class="keyword">char</span> *<span class="keyword">restrict</span> buf, <span class="keyword">size_t</span> bufsize);</div><div class="line">两个函数的返回值：成功返回读取的字节数；出错返回<span class="number">-1</span></div></pre></td></tr></table></figure></p>
<h2 id="函数futimens-utimensat-utimes"><a href="#函数futimens-utimensat-utimes" class="headerlink" title="函数futimens, utimensat, utimes"></a>函数futimens, utimensat, utimes</h2><p>用以下几个函数修改文件的访问时间和修改时间<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/stat.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">futimens</span><span class="params">(<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">struct</span> timespec times[<span class="number">2</span>])</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">utimensat</span><span class="params">(<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">char</span> *path, <span class="keyword">const</span> <span class="keyword">struct</span> timespec times[<span class="number">2</span>], <span class="keyword">int</span> flag)</span></span>;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/times.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">utimes</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname, <span class="keyword">const</span> <span class="keyword">struct</span> timeval times[<span class="number">2</span>])</span></span>;</div><div class="line"><span class="comment">// 上述函数返回值：成功返回0；出错返回-1</span></div></pre></td></tr></table></figure></p>
<h2 id="函数mkdir-mkdirat-rmdir"><a href="#函数mkdir-mkdirat-rmdir" class="headerlink" title="函数mkdir, mkdirat, rmdir"></a>函数mkdir, mkdirat, rmdir</h2><p>用mkdir, mkdirat 函数创建目录，rmdir 删除目录<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/stat.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">mkdir</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname, <span class="keyword">mode_t</span> mode)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">mkdir</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">char</span> *pthname, <span class="keyword">mode_t</span> mode)</span></span>;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">rmdir</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname)</span></span>;</div><div class="line"><span class="comment">// 上述函数返回值：成功返回0；出错返回-1</span></div></pre></td></tr></table></figure></p>
<h2 id="读目录"><a href="#读目录" class="headerlink" title="读目录"></a>读目录</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;dirent.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function">DIR *<span class="title">opendir</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname)</span></span>;</div><div class="line"><span class="function">DIR *<span class="title">fopendir</span><span class="params">(<span class="keyword">int</span> fd)</span></span>;</div><div class="line"><span class="comment">// 两个函数返回值：成功返回指针；出错返回NULL</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">struct</span> dirent *<span class="title">readdir</span><span class="params">(DIR *dp)</span></span>;</div><div class="line"><span class="comment">// 返回值：成功返回指针；若在目录尾或出错，返回NULL</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">rewinddir</span> <span class="params">(DIR *dp)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">closedir</span> <span class="params">(DIR *dp)</span></span>;</div><div class="line"><span class="comment">// 返回值：成功返回0；出错返回-1</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">long</span> <span class="title">telldir</span> <span class="params">(DIR *dp)</span></span>;</div><div class="line"><span class="comment">// 返回值： 与dpguanlian的目录中的单签位置</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">seekdir</span><span class="params">(DIR *dp, <span class="keyword">long</span> loc)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="函数chdir-fchdir-getcwd"><a href="#函数chdir-fchdir-getcwd" class="headerlink" title="函数chdir,fchdir,getcwd"></a>函数chdir,fchdir,getcwd</h2><p>调用chdir 或fchdir 更改当前工作目录<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">chdir</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fchdir</span><span class="params">(<span class="keyword">int</span> fd)</span></span>;</div><div class="line"><span class="comment">// 两个函数返回值：成功返回0；出错返回-1</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">char</span> *<span class="title">getcwd</span><span class="params">(<span class="keyword">char</span> *buf, <span class="keyword">size_t</span> size)</span></span>;</div><div class="line"><span class="comment">// 返回值： 成功返回buf，出错返回NULL</span></div></pre></td></tr></table></figure></p>
<hr>
<h1 id="第五章-标准I-O库"><a href="#第五章-标准I-O库" class="headerlink" title="第五章-标准I/O库"></a>第五章-标准I/O库</h1><h2 id="fwide"><a href="#fwide" class="headerlink" title="fwide"></a>fwide</h2><p>设置流的定向; p115</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;wchar.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fwide</span> <span class="params">(FILE *fp, <span class="keyword">int</span> mode)</span></span>;</div><div class="line"><span class="comment">// 返回值: 若流是宽定向返回正值;若流是字节定向的返回负值;若流是未定向的返回0</span></div></pre></td></tr></table></figure>
<h2 id="setbuf-setvbuf"><a href="#setbuf-setvbuf" class="headerlink" title="setbuf, setvbuf"></a>setbuf, setvbuf</h2><p>更改缓冲类型; p117</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setbuf</span><span class="params">(FILE *<span class="keyword">restrict</span> fp, <span class="keyword">char</span> *<span class="keyword">restrict</span> buf)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">setvbuf</span><span class="params">(FILE *<span class="keyword">restrict</span> fp, <span class="keyword">char</span> *<span class="keyword">restrict</span> buf, <span class="keyword">int</span> mode, <span class="keyword">size_t</span> size)</span></span>;</div><div class="line"><span class="comment">// 返回值:成功返回0; 出错返回非0</span></div></pre></td></tr></table></figure>
<h2 id="fflush"><a href="#fflush" class="headerlink" title="fflush"></a>fflush</h2><p>冲洗流; p118</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fflush</span><span class="params">(FILE *fp)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回EOF</span></div></pre></td></tr></table></figure>
<h2 id="fopen-freopen-fdopen"><a href="#fopen-freopen-fdopen" class="headerlink" title="fopen, freopen, fdopen"></a>fopen, freopen, fdopen</h2><p>打开流; p118</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function">FILE *<span class="title">fopen</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> pathname, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> type)</span></span>;</div><div class="line"><span class="function">FILE *<span class="title">freopen</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> pathname, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> type, FILE *<span class="keyword">restrict</span> fp)</span></span>;</div><div class="line"><span class="function">FILE *<span class="title">fdopen</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">char</span> *type)</span></span>;</div><div class="line"><span class="comment">// 返回值: 成功返回文件指针, 出错返回NULL</span></div></pre></td></tr></table></figure>
<h2 id="fclose"><a href="#fclose" class="headerlink" title="fclose"></a>fclose</h2><p>关闭打开的流; p120</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fclose</span> <span class="params">(FILE *fp)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回EOF</span></div></pre></td></tr></table></figure>
<h2 id="getc-fgetc-getchar"><a href="#getc-fgetc-getchar" class="headerlink" title="getc, fgetc, getchar"></a>getc, fgetc, getchar</h2><p>输入函数; p120</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getc</span> <span class="params">(FILE *fp)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fgetc</span> <span class="params">(FILE *fp)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getchar</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="comment">// 成功返回下一个字符; 到达文件尾端或者出错返回EOF</span></div></pre></td></tr></table></figure>
<h2 id="ferror-feof-clearerr"><a href="#ferror-feof-clearerr" class="headerlink" title="ferror, feof, clearerr"></a>ferror, feof, clearerr</h2><p>p121</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">ferror</span> <span class="params">(FILE *fp)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">feof</span> <span class="params">(FILE *fp)</span></span>;</div><div class="line"><span class="comment">// 若条件为真返回非0; 否则返回0</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">clearerr</span> <span class="params">(FILE *fp)</span></span>;</div></pre></td></tr></table></figure>
<p>ferror 和feof 区分出错标志和文件结束标识<br>clearerr 清除这两个标志</p>
<h2 id="ungetc"><a href="#ungetc" class="headerlink" title="ungetc"></a>ungetc</h2><p>将字符再压送回流中; p121</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">ungetc</span> <span class="params">(<span class="keyword">int</span> c, FILE *fp)</span></span>;</div><div class="line"><span class="comment">// 成功返回c, 出错返回EOF</span></div></pre></td></tr></table></figure>
<h2 id="putc-fputc-putchar"><a href="#putc-fputc-putchar" class="headerlink" title="putc, fputc, putchar"></a>putc, fputc, putchar</h2><p>p122</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">putc</span> <span class="params">(<span class="keyword">int</span> c, FILE *fp)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fputc</span> <span class="params">(<span class="keyword">int</span> c, FILE *fp)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">putchar</span> <span class="params">(<span class="keyword">int</span> c)</span></span>;</div><div class="line"><span class="comment">// 成功返回c, 出错返回EOF</span></div></pre></td></tr></table></figure>
<h2 id="fgets-gets"><a href="#fgets-gets" class="headerlink" title="fgets, gets"></a>fgets, gets</h2><p>p122</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">char</span> *<span class="title">fgets</span> <span class="params">(<span class="keyword">char</span> *<span class="keyword">restrict</span> buf, <span class="keyword">int</span> n, FILE *<span class="keyword">restrict</span> fp)</span></span>;</div><div class="line"><span class="function"><span class="keyword">char</span> *<span class="title">gets</span> <span class="params">(<span class="keyword">char</span> *buf)</span></span>;</div><div class="line"><span class="comment">// 成功返回buf, 到达文件尾端或者出错返回EOF</span></div></pre></td></tr></table></figure>
<h2 id="fputs-puts"><a href="#fputs-puts" class="headerlink" title="fputs, puts"></a>fputs, puts</h2><p>p122</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fputs</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> str, FILE *<span class="keyword">restrict</span> fp)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">puts</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *str)</span></span>;</div><div class="line"><span class="comment">// 成功返回非负值; 出错返回EOF</span></div></pre></td></tr></table></figure>
<h2 id="fread-fwrite"><a href="#fread-fwrite" class="headerlink" title="fread, fwrite"></a>fread, fwrite</h2><p>二进制I/O; p125</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">size_t</span> fread (<span class="keyword">void</span> *<span class="keyword">restrict</span> ptr, <span class="keyword">size_t</span> size, <span class="keyword">size_t</span> nobj, FILE *<span class="keyword">restrict</span> fp);</div><div class="line"><span class="keyword">size_t</span> fwrite (<span class="keyword">const</span> <span class="keyword">void</span> *<span class="keyword">restrict</span> ptr, <span class="keyword">size_t</span> size, <span class="keyword">size_t</span> nobj, FILE *<span class="keyword">restrict</span> fp);</div><div class="line"><span class="comment">// 返回值: 读或写的对象数</span></div></pre></td></tr></table></figure>
<h2 id="ftell-fseek-rewind"><a href="#ftell-fseek-rewind" class="headerlink" title="ftell, fseek, rewind"></a>ftell, fseek, rewind</h2><p>定位流; p126</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">long</span> <span class="title">ftell</span> <span class="params">(FILE *fp)</span></span>;</div><div class="line"><span class="comment">// 成功返回当前文件位置指示, 出错返回-1L</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fseek</span> <span class="params">(FILE *fp, <span class="keyword">long</span> offset, <span class="keyword">int</span> whence)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">rewind</span> <span class="params">(FILE *fp)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="ftello-fseeko"><a href="#ftello-fseeko" class="headerlink" title="ftello fseeko"></a>ftello fseeko</h2><p>p127</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">off_t</span> ftello (FILE *fp);</div><div class="line"><span class="comment">// 成功返回当前文件位置; 出错返回(off_t)-1</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fseeko</span> <span class="params">(FILE *fp, <span class="keyword">off_t</span> offset, <span class="keyword">int</span> whence)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="fgetpos-fsetpos"><a href="#fgetpos-fsetpos" class="headerlink" title="fgetpos, fsetpos"></a>fgetpos, fsetpos</h2><p>p127</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fgetpos</span> <span class="params">(FILE *<span class="keyword">restrict</span> fp, <span class="keyword">fpos_t</span> *<span class="keyword">restrict</span> pos)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fsetpos</span> <span class="params">(FILE *fp, <span class="keyword">const</span> <span class="keyword">fpos_t</span> *pos)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回非0</span></div></pre></td></tr></table></figure>
<h2 id="printf-fprintf-dprintf-sprintf-snprintf"><a href="#printf-fprintf-dprintf-sprintf-snprintf" class="headerlink" title="printf, fprintf, dprintf, sprintf, snprintf"></a>printf, fprintf, dprintf, sprintf, snprintf</h2><p>格式化输出; p127</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">printf</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format, ...)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fprintf</span> <span class="params">(FILE *<span class="keyword">restrict</span> fp, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format, ...)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dprintf</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format, ...)</span></span>;</div><div class="line"><span class="comment">// 成功返回输出字符数; 出错返回负值</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sprintf</span> <span class="params">(<span class="keyword">char</span> *<span class="keyword">restrict</span> buf, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format, ...)</span></span>;</div><div class="line"><span class="comment">// 成功返回存入数组的字符数; 编码出错返回负值</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">snprintf</span> <span class="params">(<span class="keyword">char</span> *<span class="keyword">restrict</span> buf, <span class="keyword">size_t</span> n, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format, ...)</span></span>;</div><div class="line"><span class="comment">// 若缓冲区足够大, 返回将要存入数组的字符数; 若编码出错, 返回负值</span></div></pre></td></tr></table></figure>
<h2 id="vprintf-vfprintf-vdprintf-vsprintf-vsnprintf"><a href="#vprintf-vfprintf-vdprintf-vsprintf-vsnprintf" class="headerlink" title="vprintf, vfprintf, vdprintf, vsprintf, vsnprintf"></a>vprintf, vfprintf, vdprintf, vsprintf, vsnprintf</h2><p>与上面5 种类似, 但是可变参数表(…) 替换成了arg; p129</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdarg.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">vprintf</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format, va_list arg)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">vfprintf</span> <span class="params">(FILE *<span class="keyword">restrict</span> fp, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format, va_list arg)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">vdprintf</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format, va_list arg)</span></span>;</div><div class="line"><span class="comment">// 成功返回输出字符数; 出错返回负值</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">vsprintf</span> <span class="params">(<span class="keyword">char</span> *<span class="keyword">restrict</span> buf, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format, va_list arg)</span></span>;</div><div class="line"><span class="comment">// 成功返回存入数组的字符数; 编码出错返回负值</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">vsnprintf</span> <span class="params">(<span class="keyword">char</span> <span class="number">8</span><span class="keyword">restrict</span> buf, <span class="keyword">size_t</span> n, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format, va_list arg)</span></span>;</div><div class="line"><span class="comment">// 若缓冲区足够大, 返回将要存入数组的字符数; 若编码出错, 返回负值</span></div></pre></td></tr></table></figure>
<h2 id="scanf-fscanf-sscanf"><a href="#scanf-fscanf-sscanf" class="headerlink" title="scanf, fscanf, sscanf"></a>scanf, fscanf, sscanf</h2><p>格式化输入; p129</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">scanf</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format, ...)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fscanf</span> <span class="params">(FILE *<span class="keyword">restrict</span> fp, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format, ...)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sscanf</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> buf, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format, ...)</span></span>;</div><div class="line"><span class="comment">// 返回值:赋值的输入项数; 若输入出错或在任一转换前已到达文件尾端, 返回EOF</span></div></pre></td></tr></table></figure>
<h2 id="vscanf-vfscanf-vsscanf"><a href="#vscanf-vfscanf-vsscanf" class="headerlink" title="vscanf, vfscanf, vsscanf"></a>vscanf, vfscanf, vsscanf</h2><p>p131</p>
<h2 id="fileno"><a href="#fileno" class="headerlink" title="fileno"></a>fileno</h2><p>获取I/O 流相关联的文件描述符; p131</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fileno</span> <span class="params">(FILE *fp)</span></span>;</div><div class="line"><span class="comment">// 返回与该流相关联的文件描述符</span></div></pre></td></tr></table></figure>
<h2 id="tmpnam-tmpfile"><a href="#tmpnam-tmpfile" class="headerlink" title="tmpnam, tmpfile"></a>tmpnam, tmpfile</h2><p>创建临时文件; p134</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">char</span> *<span class="title">tmpnam</span> <span class="params">(<span class="keyword">char</span> *ptr)</span></span>;</div><div class="line"><span class="comment">// 返回指向唯一路径名的指针</span></div><div class="line"><span class="function">FILE *<span class="title">tmpfile</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="comment">// 成功返回文件指针; 出错返回NULL</span></div></pre></td></tr></table></figure>
<h2 id="mkdtemp-mkstemp"><a href="#mkdtemp-mkstemp" class="headerlink" title="mkdtemp, mkstemp"></a>mkdtemp, mkstemp</h2><p>p135</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">char</span> *<span class="title">mkdtemp</span> <span class="params">(<span class="keyword">char</span> *<span class="keyword">template</span>)</span></span>;</div><div class="line"><span class="comment">// 成功返回指向目录名的指针; 出错返回NULL</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">mkstemp</span> <span class="params">(<span class="keyword">char</span> *<span class="keyword">template</span>)</span></span>;</div><div class="line"><span class="comment">// 成功返回文件描述符; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="fmemopen"><a href="#fmemopen" class="headerlink" title="fmemopen"></a>fmemopen</h2><p>创建内存流; p137</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function">FILE *<span class="title">fmemopen</span> <span class="params">(<span class="keyword">void</span> *<span class="keyword">restrict</span> buf, <span class="keyword">size_t</span> size, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> type)</span></span>;</div><div class="line"><span class="comment">// 成功返回流指针; 错误返回NULL</span></div></pre></td></tr></table></figure>
<h2 id="open-memstream-open-wmemstream"><a href="#open-memstream-open-wmemstream" class="headerlink" title="open_memstream, open_wmemstream"></a>open_memstream, open_wmemstream</h2><p>创建内存流(面向字节和面向宽字节); p139</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function">FILE *<span class="title">open_memstream</span> <span class="params">(<span class="keyword">char</span> **bufp, <span class="keyword">size_t</span> *sizep)</span></span>;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;wchar.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function">FILE *<span class="title">open_wmemstream</span> <span class="params">(<span class="keyword">wchar_t</span> **bufp, <span class="keyword">size_t</span> *sizep)</span></span>;</div><div class="line"><span class="comment">// 两个函数返回值: 成功返回流指针; 出错返回NULL</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="第六章-系统数据文件和信息"><a href="#第六章-系统数据文件和信息" class="headerlink" title="第六章 - 系统数据文件和信息"></a>第六章 - 系统数据文件和信息</h1><h2 id="getpwuid-getpwnam"><a href="#getpwuid-getpwnam" class="headerlink" title="getpwuid, getpwnam"></a>getpwuid, getpwnam</h2><p>使用用户id 或者用户登录名 获取口令文件项</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pwd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">struct</span> passwd *<span class="title">getpwuid</span> <span class="params">(<span class="keyword">uid_t</span> uid)</span></span>;</div><div class="line"><span class="function"><span class="keyword">struct</span> passwd *<span class="title">getpwnam</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *name)</span></span>;</div><div class="line"><span class="comment">// 成功返回指针; 出错返回NULL</span></div></pre></td></tr></table></figure>
<h2 id="getpwent-setpwent-endpwent"><a href="#getpwent-setpwent-endpwent" class="headerlink" title="getpwent, setpwent, endpwent"></a>getpwent, setpwent, endpwent</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">struct</span> passwd *<span class="title">getpwent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="comment">// 成功返回指针; 出错或到达文件尾端则返回NULL</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setpwent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">endpwent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="getspnam-getspent-setspent-endspent"><a href="#getspnam-getspent-setspent-endspent" class="headerlink" title="getspnam, getspent, setspent, endspent"></a>getspnam, getspent, setspent, endspent</h2><p>访问阴影口令文件</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;shadow.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">struct</span> spwd *<span class="title">getspnam</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *name)</span></span>;</div><div class="line"><span class="function"><span class="keyword">struct</span> spwd *<span class="title">getspent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="comment">// 成功返回指针; 出错返回NULL</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setspent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">endspent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="getgrgid-getgrnam"><a href="#getgrgid-getgrnam" class="headerlink" title="getgrgid, getgrnam"></a>getgrgid, getgrnam</h2><p>通过组名或者组id 查看组信息</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;grp.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">struct</span> group *<span class="title">getgrgid</span> <span class="params">(<span class="keyword">gid_t</span> gid)</span></span>;</div><div class="line"><span class="function"><span class="keyword">struct</span> group *<span class="title">getgrnam</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *name)</span></span>;</div><div class="line"><span class="comment">// 成功返回指针; 出错返回NULL</span></div></pre></td></tr></table></figure>
<h2 id="getgrent-setgrent-endgrent"><a href="#getgrent-setgrent-endgrent" class="headerlink" title="getgrent, setgrent, endgrent"></a>getgrent, setgrent, endgrent</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;grp.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">struct</span> group *<span class="title">getgrent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="comment">// 成功返回指针; 出错或到达文件尾端返回NULL</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setgrent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">endgrent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="getgroups-setgroups-initgroups"><a href="#getgroups-setgroups-initgroups" class="headerlink" title="getgroups, setgroups, initgroups"></a>getgroups, setgroups, initgroups</h2><p>获取和设置附属组ID</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getgroups</span> <span class="params">(<span class="keyword">int</span> gidsetsize, <span class="keyword">gid_t</span> grouplist[])</span></span>;</div><div class="line"><span class="comment">// 成功返回附属组ID 数量; 出错返回-1</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;grp.h&gt;</span> <span class="comment">/* on Linux */</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span> <span class="comment">/* on FreeBSD, Mac OS X, and Solaris */</span></span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">setgroups</span> <span class="params">(<span class="keyword">int</span> ngroups, <span class="keyword">const</span> <span class="keyword">gid_t</span> grouplist[])</span></span>;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;grp.h&gt;</span> <span class="comment">/* on Linux and Solaris */</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span> <span class="comment">/* on FreeBSD and Mac OS X */</span></span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">initgroups</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *username, <span class="keyword">gid_t</span> basegid)</span></span>;</div><div class="line"><span class="comment">// 两个函数返回值: 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="uname"><a href="#uname" class="headerlink" title="uname"></a>uname</h2><p>获取与主机和操作系统有关的信息</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/utsname.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">uname</span> <span class="params">(<span class="keyword">struct</span> utsname *name)</span></span>;</div><div class="line"><span class="comment">// 成功返回非负值; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="gethostname"><a href="#gethostname" class="headerlink" title="gethostname"></a>gethostname</h2><p>获取主机名</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">gethostname</span> <span class="params">(<span class="keyword">char</span> *name, <span class="keyword">int</span> namelen)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="time"><a href="#time" class="headerlink" title="time"></a>time</h2><p>返回当前时间和日期</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">time_t</span> time (<span class="keyword">time_t</span> *calptr);</div><div class="line"><span class="comment">// 成功返回时间值; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="clock-gettime"><a href="#clock-gettime" class="headerlink" title="clock_gettime"></a>clock_gettime</h2><p>获取指定时钟的时间</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/time.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">clock_gettime</span> <span class="params">(<span class="keyword">clockid_t</span> clock_id, <span class="keyword">struct</span> timespec *tsp)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="clock-getres"><a href="#clock-getres" class="headerlink" title="clock_getres"></a>clock_getres</h2><p>把timespec 结构初始化为与clock_id 对应的时钟精度</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/time.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">clock_getres</span> <span class="params">(<span class="keyword">clockid_t</span> clock_id, <span class="keyword">struct</span> timespec *tsp)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="clock-settime"><a href="#clock-settime" class="headerlink" title="clock_settime"></a>clock_settime</h2><p>对特定时钟设置时间</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/time.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">clock_settime</span> <span class="params">(<span class="keyword">clockid_t</span> clock_id, <span class="keyword">const</span> <span class="keyword">struct</span> timespec *tsp)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="gettimeofday"><a href="#gettimeofday" class="headerlink" title="gettimeofday"></a>gettimeofday</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/time.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">gettimeofday</span> <span class="params">(<span class="keyword">struct</span> timeval *<span class="keyword">restrict</span> tp, <span class="keyword">void</span> *<span class="keyword">restrict</span> tzp)</span></span>;</div><div class="line"><span class="comment">// 总是返回0</span></div></pre></td></tr></table></figure>
<h2 id="gmtime-localtime"><a href="#gmtime-localtime" class="headerlink" title="gmtime, localtime"></a>gmtime, localtime</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">struct</span> tm *<span class="title">gmtime</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">time_t</span> *calptr)</span></span>;</div><div class="line"><span class="function"><span class="keyword">struct</span> tm *<span class="title">localtime</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">time_t</span> *calptr)</span></span>;</div><div class="line"><span class="comment">// 返回值: 指向分解的tm 结构的指针; 若出错, 返回NULL</span></div></pre></td></tr></table></figure>
<h2 id="mktime"><a href="#mktime" class="headerlink" title="mktime"></a>mktime</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">time_t</span> mktime (<span class="keyword">struct</span> tm *tmptr);</div><div class="line"><span class="comment">// 成功返回日历时间; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="strftime-strftime-1"><a href="#strftime-strftime-1" class="headerlink" title="strftime, strftime_1"></a>strftime, strftime_1</h2><p>将分解时间转换为字符串时间</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">size_t</span> strftime (<span class="keyword">char</span> *<span class="keyword">restrict</span> buf, <span class="keyword">size_t</span> maxsize,</div><div class="line">                <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format, </div><div class="line">                <span class="keyword">const</span> <span class="keyword">struct</span> tm *<span class="keyword">restrict</span> tmptr);</div><div class="line"><span class="keyword">size_t</span> strftime_1 (<span class="keyword">char</span> *<span class="keyword">restrict</span> buf, <span class="keyword">size_t</span> maxsize,</div><div class="line">                    <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format,</div><div class="line">                    <span class="keyword">const</span> <span class="keyword">struct</span> tm *<span class="keyword">restrict</span> tmptr, <span class="keyword">locale_t</span> locale);</div><div class="line"><span class="comment">// 返回值: 若有空间, 返回存入数组的字符数; 否则, 返回0;</span></div></pre></td></tr></table></figure>
<h2 id="strptime"><a href="#strptime" class="headerlink" title="strptime"></a>strptime</h2><p>将字符串时间转换为分解时间</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">char</span> *<span class="title">strptime</span> <span class="params">(<span class="keyword">const</span> *<span class="keyword">restrict</span> buf, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> format, </span></span></div><div class="line">                <span class="keyword">struct</span> tm *<span class="keyword">restrict</span> tmptr);</div><div class="line"><span class="comment">// 返回指向上次解析的字符的下一个字符的指针; 否则返回NULL</span></div></pre></td></tr></table></figure>
<h1 id="第七章-进程环境"><a href="#第七章-进程环境" class="headerlink" title="第七章 - 进程环境"></a>第七章 - 进程环境</h1><h2 id="exit-Exit-exit"><a href="#exit-Exit-exit" class="headerlink" title="exit, _Exit, _exit"></a>exit, _Exit, _exit</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">exit</span> <span class="params">(<span class="keyword">int</span> status)</span></span>;</div><div class="line"><span class="keyword">void</span> <span class="number">_</span>Exit (<span class="keyword">int</span> status);</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">void</span> <span class="number">_</span><span class="built_in">exit</span> (<span class="keyword">int</span> status);</div></pre></td></tr></table></figure>
<h2 id="atexit"><a href="#atexit" class="headerlink" title="atexit"></a>atexit</h2><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="built_in">int</span> atexit (void (*<span class="function"><span class="keyword">func</span>)<span class="params">(void)</span>);</span></div><div class="line">// 成功返回<span class="number">0</span><span class="comment">; 出错返回非0</span></div></pre></td></tr></table></figure>
<h2 id="malloc-calloc-realloc-free"><a href="#malloc-calloc-realloc-free" class="headerlink" title="malloc, calloc, realloc, free"></a>malloc, calloc, realloc, free</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> *<span class="title">malloc</span> <span class="params">(<span class="keyword">size_t</span> size)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> *<span class="title">calloc</span> <span class="params">(<span class="keyword">size_t</span> nobj, <span class="keyword">size_t</span> size)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> *<span class="title">realloc</span> <span class="params">(<span class="keyword">void</span> *ptr, <span class="keyword">size_t</span> newsize)</span></span>;</div><div class="line"><span class="comment">// 成功返回非空指针; 出错返回NULL</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">free</span> <span class="params">(<span class="keyword">void</span> *ptr)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="getenv"><a href="#getenv" class="headerlink" title="getenv"></a>getenv</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">char</span> *<span class="title">getenv</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *name)</span></span>;</div><div class="line"><span class="comment">// 成功返回指向与name 关联的value 的指针; 未找到返回NULL</span></div></pre></td></tr></table></figure>
<h2 id="putenv-setenv-unsetenv"><a href="#putenv-setenv-unsetenv" class="headerlink" title="putenv, setenv, unsetenv"></a>putenv, setenv, unsetenv</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">putenv</span> <span class="params">(<span class="keyword">char</span> *str)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回非0</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">setenv</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *name, <span class="keyword">const</span> <span class="keyword">char</span> *value, <span class="keyword">int</span> rewrite)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">unsetenv</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *name)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="setjmp-longjmp"><a href="#setjmp-longjmp" class="headerlink" title="setjmp, longjmp"></a>setjmp, longjmp</h2><p>非局部goto</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;setjmp.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">setjmp</span> <span class="params">(jmp_buf env)</span></span>;</div><div class="line"><span class="comment">// 若直接调用, 返回0; 若从longjmp 返回, 则为非0</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">longjmp</span> <span class="params">(jmp_buf env, <span class="keyword">int</span> val)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="getrlimit-setrlimit"><a href="#getrlimit-setrlimit" class="headerlink" title="getrlimit, setrlimit"></a>getrlimit, setrlimit</h2><p>查询和更改资源限制</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/resource.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getrlimit</span> <span class="params">(<span class="keyword">int</span> resource, <span class="keyword">struct</span> rlimit *rlptr)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">setrlimit</span> <span class="params">(<span class="keyword">int</span> resource, <span class="keyword">const</span> <span class="keyword">struct</span> rlimit *rlptr)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回非0</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="第八章-进程控制"><a href="#第八章-进程控制" class="headerlink" title="第八章 - 进程控制"></a>第八章 - 进程控制</h1><h2 id="getpid-getppid-getuid-geteuid-getgid-getegid"><a href="#getpid-getppid-getuid-geteuid-getgid-getegid" class="headerlink" title="getpid, getppid, getuid, geteuid, getgid, getegid"></a>getpid, getppid, getuid, geteuid, getgid, getegid</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">pid_t</span> getpid (<span class="keyword">void</span>);</div><div class="line"><span class="comment">// 返回调用进程的进程ID</span></div><div class="line"></div><div class="line"><span class="keyword">pid_t</span> getppid (<span class="keyword">void</span>);</div><div class="line"><span class="comment">// 返回调用进程的父进程ID</span></div><div class="line"></div><div class="line"><span class="keyword">uid_t</span> getuid (<span class="keyword">void</span>);</div><div class="line"><span class="comment">// 返回调用进程的实际用户ID</span></div><div class="line"></div><div class="line"><span class="keyword">uid_t</span> geteuid (<span class="keyword">void</span>);</div><div class="line"><span class="comment">// 返回调用进程的有效用户ID</span></div><div class="line"></div><div class="line"><span class="keyword">gid_t</span> getgid (<span class="keyword">void</span>);</div><div class="line"><span class="comment">// 返回调用进程的实际组ID</span></div><div class="line"></div><div class="line"><span class="keyword">gid_t</span> getegid (<span class="keyword">void</span>);</div><div class="line"><span class="comment">// 返回调用进程的有效组ID</span></div></pre></td></tr></table></figure>
<h2 id="fork-vfork"><a href="#fork-vfork" class="headerlink" title="fork, vfork"></a>fork, vfork</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">pid_t</span> fork (<span class="keyword">void</span>);</div><div class="line"><span class="keyword">pid_t</span> vfork (<span class="keyword">void</span>);</div><div class="line"><span class="comment">// 子进程返回0; 父进程返回子进程ID; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="wait-waitpid"><a href="#wait-waitpid" class="headerlink" title="wait, waitpid"></a>wait, waitpid</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">pid_t</span> wait (<span class="keyword">int</span> *statloc);</div><div class="line"><span class="keyword">pid_t</span> waitpid (<span class="keyword">pid_t</span> pid, <span class="keyword">int</span> *statloc, <span class="keyword">int</span> options);</div><div class="line"></div><div class="line"><span class="comment">// 成功返回进程ID; 出错返回0 或-1</span></div></pre></td></tr></table></figure>
<h2 id="waitid"><a href="#waitid" class="headerlink" title="waitid"></a>waitid</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">waitid</span> <span class="params">(<span class="keyword">idtype_t</span> idtype, <span class="keyword">id_t</span> id, <span class="keyword">siginfo_t</span> *infop, <span class="keyword">int</span> options)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="wait3-wait4"><a href="#wait3-wait4" class="headerlink" title="wait3, wait4"></a>wait3, wait4</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/time.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/resource.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></div><div class="line"><span class="keyword">pid_t</span> wait3(<span class="keyword">int</span> *status, <span class="keyword">int</span> options,</div><div class="line">       <span class="keyword">struct</span> rusage *rusage);</div><div class="line"></div><div class="line"><span class="keyword">pid_t</span> wait4(<span class="keyword">pid_t</span> pid, <span class="keyword">int</span> *status, <span class="keyword">int</span> options,</div><div class="line">        <span class="keyword">struct</span> rusage *rusage);</div></pre></td></tr></table></figure>
<h2 id="execl-execv-execle-execve-execlp-execvp-fexecve"><a href="#execl-execv-execle-execve-execlp-execvp-fexecve" class="headerlink" title="execl, execv, execle, execve, execlp, execvp, fexecve"></a>execl, execv, execle, execve, execlp, execvp, fexecve</h2><p>7个函数之间的关系 p202</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">extern</span> <span class="keyword">char</span> **environ;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">execl</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *path, <span class="keyword">const</span> <span class="keyword">char</span> *arg, ...</span></span></div><div class="line">                <span class="comment">/* (char  *) NULL */</span>);</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">execlp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *file, <span class="keyword">const</span> <span class="keyword">char</span> *arg, ...</span></span></div><div class="line">                <span class="comment">/* (char  *) NULL */</span>);</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">execle</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *path, <span class="keyword">const</span> <span class="keyword">char</span> *arg, ...</span></span></div><div class="line">                <span class="comment">/*, (char *) NULL, char * const envp[] */</span>);</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">execv</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *path, <span class="keyword">char</span> *<span class="keyword">const</span> argv[])</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">execvp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *file, <span class="keyword">char</span> *<span class="keyword">const</span> argv[])</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">execvpe</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *file, <span class="keyword">char</span> *<span class="keyword">const</span> argv[],</span></span></div><div class="line">                <span class="keyword">char</span> *<span class="keyword">const</span> envp[]);</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fexecve</span><span class="params">(<span class="keyword">int</span> fd, <span class="keyword">char</span> *<span class="keyword">const</span> argv[], <span class="keyword">char</span> *<span class="keyword">const</span> envp[])</span></span>;</div><div class="line"><span class="comment">// 出错返回-1; 成功不返回</span></div></pre></td></tr></table></figure>
<h2 id="setuid-setgid"><a href="#setuid-setgid" class="headerlink" title="setuid, setgid"></a>setuid, setgid</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">setuid</span> <span class="params">(<span class="keyword">uid_t</span> uid)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">setgid</span> <span class="params">(<span class="keyword">gid_t</span> gid)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="setreuid-setregid"><a href="#setreuid-setregid" class="headerlink" title="setreuid, setregid"></a>setreuid, setregid</h2><p>交换实际用户ID 和有效用户ID 的值</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">setreuid</span> <span class="params">(<span class="keyword">uid_t</span> ruid, <span class="keyword">uid_t</span> euid)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">setregid</span> <span class="params">(<span class="keyword">gid_t</span> rgid, <span class="keyword">gid_t</span> egid)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="seteuid-setegid"><a href="#seteuid-setegid" class="headerlink" title="seteuid, setegid"></a>seteuid, setegid</h2><p>只更改有效用户ID 和有效组ID</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">seteuid</span> <span class="params">(<span class="keyword">uid_t</span> uid)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">setegid</span> <span class="params">(<span class="keyword">gid_t</span> gid)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="system"><a href="#system" class="headerlink" title="system"></a>system</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">system</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *cmdstring)</span></span>;</div><div class="line"><span class="comment">// 返回值见p211</span></div></pre></td></tr></table></figure>
<h2 id="getlogin"><a href="#getlogin" class="headerlink" title="getlogin"></a>getlogin</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">char</span> *<span class="title">getlogin</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="comment">// 成功返回指向登陆名字符串的指针; 出错返回NULL</span></div></pre></td></tr></table></figure>
<h2 id="nice"><a href="#nice" class="headerlink" title="nice"></a>nice</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">nice</span> <span class="params">(<span class="keyword">int</span> incr)</span></span>;</div><div class="line"><span class="comment">// 成功返回新的nice 值 NZERO; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="getpriority"><a href="#getpriority" class="headerlink" title="getpriority"></a>getpriority</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/resource.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getpriority</span> <span class="params">(<span class="keyword">int</span> which, <span class="keyword">id_t</span> who)</span></span>;</div><div class="line"><span class="comment">// 成功返回-NZERO ~ NZERO - 1 之间的nice 值; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="times"><a href="#times" class="headerlink" title="times"></a>times</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/times.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">clock_t</span> times (<span class="keyword">struct</span> tms *buf);</div><div class="line"><span class="comment">// 成功返回流逝的墙上时钟时间(以时钟滴答数为单位); 出错返回-1</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="第九章-进程关系"><a href="#第九章-进程关系" class="headerlink" title="第九章-进程关系"></a>第九章-进程关系</h1><hr>
<h2 id="getpgrp"><a href="#getpgrp" class="headerlink" title="getpgrp"></a>getpgrp</h2><p>获取调用进程的进程组ID</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">pid_t</span> getpgrp (<span class="keyword">void</span>);</div><div class="line"><span class="comment">// 返回调用进程的进程组ID</span></div></pre></td></tr></table></figure>
<h2 id="getpgid"><a href="#getpgid" class="headerlink" title="getpgid"></a>getpgid</h2><p>返回指定进程的进程组ID</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">pid_t</span> getpgid (<span class="keyword">pid_t</span> pid);</div><div class="line"><span class="comment">// 成功返回进程组ID; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="setpgid"><a href="#setpgid" class="headerlink" title="setpgid"></a>setpgid</h2><p>加入一个现有的进程组或者创建一个新进程组</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">setpgid</span> <span class="params">(<span class="keyword">pid_t</span> pid, <span class="keyword">pid_t</span> pgid)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="setsid"><a href="#setsid" class="headerlink" title="setsid"></a>setsid</h2><p>建立一个新会话</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">pid_t</span> setsid (<span class="keyword">void</span>);</div><div class="line"><span class="comment">// 成功返回进程组ID; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="getsid"><a href="#getsid" class="headerlink" title="getsid"></a>getsid</h2><p>获取会话首进程的进程组ID</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">pid_t</span> getsid (<span class="keyword">pid_t</span> pid);</div><div class="line"><span class="comment">// 成功返回会话的首进程的进程组ID; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="tcgetpgrp-tcsetpgrp"><a href="#tcgetpgrp-tcsetpgrp" class="headerlink" title="tcgetpgrp, tcsetpgrp"></a>tcgetpgrp, tcsetpgrp</h2><p>获取和设置前台进程组ID</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">pid_t</span> tcgetpgrp (<span class="keyword">int</span> fd);</div><div class="line"><span class="comment">// 成功返回前台进程组ID; 出错返回-1</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">tcsetpgrp</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">pid_t</span> pgrpid)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="tcgetsid"><a href="#tcgetsid" class="headerlink" title="tcgetsid"></a>tcgetsid</h2><p>通过控制TTY 的文件描述符, 获取会话首进程的进程组ID</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;termios.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">pid_t</span> tcgetsid (<span class="keyword">int</span> fd);</div><div class="line"><span class="comment">// 成功返回会话的首进程的进程组ID; 出错返回-1</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="第十章-信号"><a href="#第十章-信号" class="headerlink" title="第十章-信号"></a>第十章-信号</h1><hr>
<h2 id="signal"><a href="#signal" class="headerlink" title="signal"></a>signal</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">void</span> (*signal (<span class="keyword">int</span> signo, <span class="keyword">void</span> (*func)(<span class="keyword">int</span>))) (<span class="keyword">int</span>);</div><div class="line"><span class="comment">// 成功返回以前的信号处理配置; 出错返回SIG_ERR</span></div></pre></td></tr></table></figure>
<h2 id="kill-raise"><a href="#kill-raise" class="headerlink" title="kill, raise"></a>kill, raise</h2><p>kill 将信号发送给进程或进程组; raise 允许进程向自身发送信号</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">kill</span> <span class="params">(<span class="keyword">pid_t</span> pid, <span class="keyword">int</span> signo)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">raise</span> <span class="params">(<span class="keyword">int</span> signo)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="alarm"><a href="#alarm" class="headerlink" title="alarm"></a>alarm</h2><p>设置定时器, 在n秒后产生SIGALRM 信号</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">alarm</span> <span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> seconds)</span></span>;</div><div class="line"><span class="comment">// 返回0 或以前设置的闹钟时间的余留秒数</span></div></pre></td></tr></table></figure>
<h2 id="pause"><a href="#pause" class="headerlink" title="pause"></a>pause</h2><p>使调用进程挂起, 直到捕捉到一个信号</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pause</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="comment">// 返回-1, errno 设置为EINTR;</span></div></pre></td></tr></table></figure>
<h2 id="sigemptyset-sigfillset-sigaddset-sigdelset-sigismember"><a href="#sigemptyset-sigfillset-sigaddset-sigdelset-sigismember" class="headerlink" title="sigemptyset, sigfillset, sigaddset, sigdelset, sigismember"></a>sigemptyset, sigfillset, sigaddset, sigdelset, sigismember</h2><p>处理信号集函数p273</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigemptyset</span> <span class="params">(<span class="keyword">sigset_t</span> *<span class="built_in">set</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigfillset</span> <span class="params">(<span class="keyword">sigset_t</span> *<span class="built_in">set</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigaddset</span> <span class="params">(<span class="keyword">sigset_t</span> *<span class="built_in">set</span>, <span class="keyword">int</span> signo)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigdelset</span> <span class="params">(<span class="keyword">sigset_t</span> *<span class="built_in">set</span>, <span class="keyword">int</span> signo)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigismember</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">sigset_t</span> *<span class="built_in">set</span>, <span class="keyword">int</span> signo)</span></span>;</div><div class="line"><span class="comment">// 若真返回1; 若假返回0</span></div></pre></td></tr></table></figure>
<h2 id="sigprocmask"><a href="#sigprocmask" class="headerlink" title="sigprocmask"></a>sigprocmask</h2><p>检测或更改, 或同时进行检测和更改进程的信号屏蔽字; 仅为单线程进程定义<br>p275</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigprocmask</span> <span class="params">(<span class="keyword">int</span> how, <span class="keyword">const</span> <span class="keyword">sigset_t</span> *<span class="keyword">restrict</span> <span class="built_in">set</span>, <span class="keyword">sigset_t</span> *<span class="keyword">restrict</span> oset)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="sigpending"><a href="#sigpending" class="headerlink" title="sigpending"></a>sigpending</h2><p>返回处于pending 状态的信号集<br>p276</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigpending</span> <span class="params">(<span class="keyword">sigset_t</span> *<span class="built_in">set</span>)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="sigaction"><a href="#sigaction" class="headerlink" title="sigaction"></a>sigaction</h2><p>检查或修改(或检查并修改)与指定信号相关联的处理动作. 取代了UNIX 早期版本的signal 函数.<br>p278</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigaction</span> <span class="params">(<span class="keyword">int</span> signo, <span class="keyword">const</span> <span class="keyword">struct</span> sigaction *<span class="keyword">restrict</span> act,</span></span></div><div class="line">    <span class="keyword">struct</span> sigaction *<span class="keyword">restrict</span> oact);</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="sigsetjmp-siglongjmp"><a href="#sigsetjmp-siglongjmp" class="headerlink" title="sigsetjmp, siglongjmp"></a>sigsetjmp, siglongjmp</h2><p>在信号处理程序中进行非局部转移时使用这两个函数<br>p283</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;setjmp.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigsetjmp</span> <span class="params">(sigjmp_buf env, <span class="keyword">int</span> savemask)</span></span>;</div><div class="line"><span class="comment">// 若直接调用返回0; 若从siglongjmp 调用返回, 返回非0</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">siglongjmp</span> <span class="params">(sigjmp_buf env, <span class="keyword">int</span> val)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="sigsuspend"><a href="#sigsuspend" class="headerlink" title="sigsuspend"></a>sigsuspend</h2><p>在一个原子操作中先恢复信号屏蔽字, 然后使进程休眠.<br>p286</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigsuspend</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">sigset_t</span> *sigmask)</span></span>;</div><div class="line"><span class="comment">// 返回-1, 并将errno 设置为EINTR; 没有成功返回值</span></div></pre></td></tr></table></figure>
<h2 id="abort"><a href="#abort" class="headerlink" title="abort"></a>abort</h2><p>使程序异常终止<br>p291</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">abort</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="sleep"><a href="#sleep" class="headerlink" title="sleep"></a>sleep</h2><p>p298</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">sleep</span> <span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> seconds)</span></span>;</div><div class="line"><span class="comment">// 0或未休眠完的秒数</span></div></pre></td></tr></table></figure>
<h2 id="nanosleep"><a href="#nanosleep" class="headerlink" title="nanosleep"></a>nanosleep</h2><p>提供纳秒级精度的sleep; p299</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">nanosleep</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">struct</span> timespec *reqtp, <span class="keyword">struct</span> timespec *remtp)</span></span>;</div><div class="line"><span class="comment">// 返回值: 若休眠到要求的时间, 返回0; 若出错, 返回-1</span></div></pre></td></tr></table></figure>
<h2 id="clock-nanosleep"><a href="#clock-nanosleep" class="headerlink" title="clock_nanosleep"></a>clock_nanosleep</h2><p>支持使用特定时钟的nanosleep; p300</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">clock_nanosleep</span> <span class="params">(<span class="keyword">clockid_t</span> clock_id, <span class="keyword">int</span> flags,</span></span></div><div class="line">                    <span class="keyword">const</span> <span class="keyword">struct</span> timespec *reqtp, <span class="keyword">struct</span> timespec *remtp);</div><div class="line"><span class="comment">// 返回值: 若休眠到要求的时间, 返回0; 若出错, 返回出错码</span></div></pre></td></tr></table></figure>
<h2 id="sigqueue"><a href="#sigqueue" class="headerlink" title="sigqueue"></a>sigqueue</h2><p>发送排队信号; p301</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#include &lt;signal.h&gt;</span></div><div class="line"></div><div class="line">int sigqueue (pid_t pid, int signo, const <span class="class"><span class="keyword">union</span> <span class="title">sigval</span> <span class="title">value</span>);</span></div><div class="line">/<span class="regexp">/ 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="psignal"><a href="#psignal" class="headerlink" title="psignal"></a>psignal</h2><p>打印与信号编号对应的字符串, 类似perror; p304</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">psignal</span> <span class="params">(<span class="keyword">int</span> signo, <span class="keyword">const</span> <span class="keyword">char</span> *msg)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="strsignal"><a href="#strsignal" class="headerlink" title="strsignal"></a>strsignal</h2><p>获取信号的字符描述部分, 类似strerror; p304</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">char</span> *<span class="title">strsignal</span> <span class="params">(<span class="keyword">int</span> signo)</span></span>;</div><div class="line"><span class="comment">// 返回指向描述该信号的字符串的指针</span></div></pre></td></tr></table></figure>
<h2 id="sig2str-str2sig"><a href="#sig2str-str2sig" class="headerlink" title="sig2str, str2sig"></a>sig2str, str2sig</h2><p>将信号编号映射为信号名; 另一个反之; p304</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sig2str</span> <span class="params">(<span class="keyword">int</span> signo, <span class="keyword">char</span> *str)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">str2sig</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *str, <span class="keyword">int</span> *signop)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="第十一章-线程"><a href="#第十一章-线程" class="headerlink" title="第十一章-线程"></a>第十一章-线程</h1><h2 id="pthread-equal"><a href="#pthread-equal" class="headerlink" title="pthread_equal"></a>pthread_equal</h2><p>比较两个线程ID 是否相等; p308</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_equal</span> <span class="params">(<span class="keyword">pthread_t</span> tid1, <span class="keyword">pthread_t</span> tid2)</span></span>;</div><div class="line"><span class="comment">// 若相等返回非0数值; 否则返回0</span></div></pre></td></tr></table></figure>
<h2 id="pthread-self"><a href="#pthread-self" class="headerlink" title="pthread_self"></a>pthread_self</h2><p>获得自身的ID; p308</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">pthread_t</span> pthread_self (<span class="keyword">void</span>);</div><div class="line"><span class="comment">// 返回调用线程的线程ID</span></div></pre></td></tr></table></figure>
<h2 id="pthread-create"><a href="#pthread-create" class="headerlink" title="pthread_create"></a>pthread_create</h2><p>创建新线程; p309</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">int</span> pthread_create (pthread_t *<span class="keyword">restrict</span> tidp,</div><div class="line">                <span class="keyword">const</span> pthread_attr_t *<span class="keyword">restrict</span> attr,</div><div class="line">                <span class="keyword">void</span> *(*start_rtn) (<span class="keyword">void</span> *), <span class="keyword">void</span> *<span class="keyword">restrict</span> arg);</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="疑问p310"><a href="#疑问p310" class="headerlink" title="疑问p310"></a>疑问p310</h2><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">11</span><span class="number">-2.</span>c 程序中</div><div class="line">注释掉sleep(<span class="number">1</span>);</div><div class="line">子线程可能不运行, 可能运行一次, 可能运行两次</div><div class="line">???</div></pre></td></tr></table></figure>
<h2 id="pthread-exit"><a href="#pthread-exit" class="headerlink" title="pthread_exit"></a>pthread_exit</h2><p>终止调用线程; p312</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">pthread_exit</span> <span class="params">(<span class="keyword">void</span> *rval_ptr)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="pthread-join"><a href="#pthread-join" class="headerlink" title="pthread_join"></a>pthread_join</h2><p>阻塞调用线程, 等待制定线程调用<code>pthread_exit</code>, 或从启动例程中返回, 或被取消<br>p312</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_join</span> <span class="params">(<span class="keyword">pthread_t</span> thread, <span class="keyword">void</span> **rval_ptr)</span></span>;</div><div class="line"><span class="comment">// 若成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="pthread-cancel"><a href="#pthread-cancel" class="headerlink" title="pthread_cancel"></a>pthread_cancel</h2><p>线程通过此函数来请求取消同一进程中的其他线程<br>p316</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_cancel</span> <span class="params">(<span class="keyword">pthread_t</span> tid)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="pthread-cleanup-push-pthread-cleanup-pop"><a href="#pthread-cleanup-push-pthread-cleanup-pop" class="headerlink" title="pthread_cleanup_push, pthread_cleanup_pop"></a>pthread_cleanup_push, pthread_cleanup_pop</h2><p>线程安排它退出时需要调用的函数, 与进程的atexit 类似;<br>p316</p>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#include &lt;pthread.h&gt;</div><div class="line"></div><div class="line">void pthread_cleanup_push (void <span class="comment">(*rtn) (void *)</span>, void *arg);</div><div class="line">void pthread_cleanup_pop (int execute);</div></pre></td></tr></table></figure>
<h2 id="pthread-detach"><a href="#pthread-detach" class="headerlink" title="pthread_detach"></a>pthread_detach</h2><p>默认情况下, 线程的终止状态会保存知道对该线程调用<code>pthread_join</code><br>但是如果线程被分离, 线程的资源可以在线程终止时及时回收<br>p316</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_detach</span> <span class="params">(<span class="keyword">pthread_t</span> tid)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="pthread-mutex-init-pthread-mutex-destroy"><a href="#pthread-mutex-init-pthread-mutex-destroy" class="headerlink" title="pthread_mutex_init, pthread_mutex_destroy"></a>pthread_mutex_init, pthread_mutex_destroy</h2><p>初始化和销毁互斥变量; p321</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_mutex_init</span> <span class="params">(<span class="keyword">pthread_mutex_t</span> *<span class="keyword">restrict</span> mutex,</span></span></div><div class="line">                    <span class="keyword">const</span> <span class="keyword">pthread_mutexattr_t</span> *<span class="keyword">restrict</span> attr);</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_mutex_destroy</span> <span class="params">(<span class="keyword">pthread_mutex_t</span> *mutex)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="pthread-mutex-lock-pthread-mutex-trylock-pthread-mutex-unlock"><a href="#pthread-mutex-lock-pthread-mutex-trylock-pthread-mutex-unlock" class="headerlink" title="pthread_mutex_lock, pthread_mutex_trylock, pthread_mutex_unlock"></a>pthread_mutex_lock, pthread_mutex_trylock, pthread_mutex_unlock</h2><p>对互斥量进行加锁; 尝试加锁; 解锁; p321</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_mutex_lock</span> <span class="params">(<span class="keyword">pthread_mutex_t</span> *mutex)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_mutex_trylock</span> <span class="params">(<span class="keyword">pthread_mutex_t</span> *mutex)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_mutex_unlock</span> <span class="params">(<span class="keyword">pthread_mutex_t</span> *mutex)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="pthread-mutex-timelock"><a href="#pthread-mutex-timelock" class="headerlink" title="pthread_mutex_timelock"></a>pthread_mutex_timelock</h2><p>绑定线程阻塞时间; p327</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_mutex_timelock</span> <span class="params">(<span class="keyword">pthread_mutex_t</span> *<span class="keyword">restrict</span> mutex,</span></span></div><div class="line">                            <span class="keyword">const</span> <span class="keyword">struct</span> timespec *<span class="keyword">restrict</span> tsptr);</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="pthread-rwlock-init-pthread-rwlock-destroy"><a href="#pthread-rwlock-init-pthread-rwlock-destroy" class="headerlink" title="pthread_rwlock_init, pthread_rwlock_destroy"></a>pthread_rwlock_init, pthread_rwlock_destroy</h2><p>初始化和销毁读写锁; p329</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_rwlock_init</span> <span class="params">(<span class="keyword">pthread_rwlock_t</span> *<span class="keyword">restrict</span> rwlock,</span></span></div><div class="line">                        <span class="keyword">const</span> <span class="keyword">pthread_rwlockattr_t</span> *<span class="keyword">restrict</span> attr);</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_rwlock_destroy</span> <span class="params">(<span class="keyword">pthread_rwlock_t</span> *rwlock)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="pthread-rwlock-rdlock-pthread-rwlock-wrlock-pthread-rwlock-unlock"><a href="#pthread-rwlock-rdlock-pthread-rwlock-wrlock-pthread-rwlock-unlock" class="headerlink" title="pthread_rwlock_rdlock, pthread_rwlock_wrlock, pthread_rwlock_unlock"></a>pthread_rwlock_rdlock, pthread_rwlock_wrlock, pthread_rwlock_unlock</h2><p>锁定读写锁和解锁; p329</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_rwlock_rdlock</span> <span class="params">(<span class="keyword">pthread_rwlock_t</span> *rwlock)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_rwlock_wrlock</span> <span class="params">(<span class="keyword">pthread_rwlock_t</span> *rwlock)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_rwlock_unlock</span> <span class="params">(<span class="keyword">pthread_rwlock_t</span> *rwlock)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="pthread-rwlock-tryrdlock-pthread-rwlock-trywrlock"><a href="#pthread-rwlock-tryrdlock-pthread-rwlock-trywrlock" class="headerlink" title="pthread_rwlock_tryrdlock, pthread_rwlock_trywrlock"></a>pthread_rwlock_tryrdlock, pthread_rwlock_trywrlock</h2><p>读写锁原语的条件版本; p330</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_rwlock_tryrdlock</span> <span class="params">(<span class="keyword">pthread_rwlock_t</span> *rwlock)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_rwlock_trywrlock</span> <span class="params">(<span class="keyword">pthread_rwlock_t</span> *rwlock)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="pthread-rwlock-timedrdlock-pthread-rwlock-timedwrlock"><a href="#pthread-rwlock-timedrdlock-pthread-rwlock-timedwrlock" class="headerlink" title="pthread_rwlock_timedrdlock, pthread_rwlock_timedwrlock"></a>pthread_rwlock_timedrdlock, pthread_rwlock_timedwrlock</h2><p>带有超时的读写锁; p332</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_rwlock_timedrdlock</span> <span class="params">(<span class="keyword">pthread_rwlock_t</span> *<span class="keyword">restrict</span>, rwlock,</span></span></div><div class="line">                            <span class="keyword">const</span> <span class="keyword">struct</span> timespec *<span class="keyword">restrict</span> tsptr);</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_rwlock_timedwrlock</span> <span class="params">(<span class="keyword">pthread_rwlock_t</span> *<span class="keyword">restrict</span> rwlock,</span></span></div><div class="line">                            <span class="keyword">const</span> <span class="keyword">struct</span> timespec *<span class="keyword">restrict</span> tsptr);</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="pthread-cond-init-pthread-cond-destroy"><a href="#pthread-cond-init-pthread-cond-destroy" class="headerlink" title="pthread_cond_init, pthread_cond_destroy"></a>pthread_cond_init, pthread_cond_destroy</h2><p>条件变量的初始化和反初始化(deinitialize); p333</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_cond_init</span> <span class="params">(<span class="keyword">pthread_cond_t</span> *<span class="keyword">restrict</span> cond,</span></span></div><div class="line">                    <span class="keyword">const</span> <span class="keyword">pthread_condattr_t</span> *<span class="keyword">restrict</span> attr);</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_cond_destroy</span> <span class="params">(<span class="keyword">pthread_cond_t</span> *cond)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="phtread-cond-wait-pthread-cond-timedwait"><a href="#phtread-cond-wait-pthread-cond-timedwait" class="headerlink" title="phtread_cond_wait, pthread_cond_timedwait"></a>phtread_cond_wait, pthread_cond_timedwait</h2><p>等待条件变量变为真; p333</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_cond_wait</span> <span class="params">(<span class="keyword">pthread_cond_t</span> *<span class="keyword">restrict</span> cond,</span></span></div><div class="line">                <span class="keyword">pthread_mutex_t</span> *<span class="keyword">restrict</span> mutex);</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_cond_timewait</span> <span class="params">(<span class="keyword">pthread_cond_t</span> *<span class="keyword">restrict</span> cond,</span></span></div><div class="line">                        <span class="keyword">pthread_mutex_t</span> *<span class="keyword">restrict</span> mutex,</div><div class="line">                        <span class="keyword">const</span> <span class="keyword">struct</span> timespec *<span class="keyword">restrict</span> tsptr);</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="pthread-cond-signal-pthread-cond-broadcast"><a href="#pthread-cond-signal-pthread-cond-broadcast" class="headerlink" title="pthread_cond_signal, pthread_cond_broadcast"></a>pthread_cond_signal, pthread_cond_broadcast</h2><p>通知线程条件已经满足; p334</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_cond_siganl</span> <span class="params">(<span class="keyword">pthread_cond_t</span> *cond)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_cond_broadcast</span> <span class="params">(<span class="keyword">pthread_cond_t</span> *cond)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="pthread-spin-init-pthread-spin-destroy"><a href="#pthread-spin-init-pthread-spin-destroy" class="headerlink" title="pthread_spin_init, pthread_spin_destroy"></a>pthread_spin_init, pthread_spin_destroy</h2><p>自旋锁的初始化和反初始化; p336</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_spin_init</span> <span class="params">(<span class="keyword">pthread_spinlock_t</span> *lock, <span class="keyword">int</span> pshared)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_spin_destroy</span> <span class="params">(<span class="keyword">pthread_spinlock_t</span> *lock)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="pthread-spin-lock-pthread-spin-trylock-pthread-spin-unlock"><a href="#pthread-spin-lock-pthread-spin-trylock-pthread-spin-unlock" class="headerlink" title="pthread_spin_lock, pthread_spin_trylock, pthread_spin_unlock"></a>pthread_spin_lock, pthread_spin_trylock, pthread_spin_unlock</h2><p>加锁, 尝试加锁, 解锁; p336</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_spin_lock</span> <span class="params">(<span class="keyword">pthread_spinlock_t</span> *lock)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_spin_trylock</span> <span class="params">(<span class="keyword">pthread_spinlock_t</span> *lock)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_spin_unlock</span> <span class="params">(<span class="keyword">pthread_spinlock_t</span> *lock)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="pthread-barrier-init-pthread-barrier-destroy"><a href="#pthread-barrier-init-pthread-barrier-destroy" class="headerlink" title="pthread_barrier_init, pthread_barrier_destroy"></a>pthread_barrier_init, pthread_barrier_destroy</h2><p>屏障的初始化和反初始化; p336</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;phtread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_barrier_init</span> <span class="params">(<span class="keyword">phtread_barrier_t</span> *<span class="keyword">restrict</span> barrier,</span></span></div><div class="line">                <span class="keyword">const</span> <span class="keyword">pthread_barrierattr_t</span> *<span class="keyword">restrict</span> attr,</div><div class="line">                <span class="keyword">unsigned</span> <span class="keyword">int</span> count);</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_barrier_destroy</span> <span class="params">(<span class="keyword">pthread_barrier_t</span> *barrier)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<h2 id="pthread-barrier-wait"><a href="#pthread-barrier-wait" class="headerlink" title="pthread_barrier_wait"></a>pthread_barrier_wait</h2><p>表明线程已完成工作, 准备等所有其他线程赶上来; p337</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_wait</span> <span class="params">(<span class="keyword">pthread_barrier_t</span> *barrier)</span></span>;</div><div class="line"><span class="comment">// 成功返回0 或者PTHREAD_BARRIER_SERIAL_THREAD; 否则返回错误编号</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="第十四章-高级I-O-未完成"><a href="#第十四章-高级I-O-未完成" class="headerlink" title="第十四章-高级I/O (未完成)"></a>第十四章-高级I/O (未完成)</h1><h2 id="fcntl-1"><a href="#fcntl-1" class="headerlink" title="fcntl"></a>fcntl</h2><p>3.14节有介绍; 这里用作记录锁; p392</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fcntl.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">fcntl</span> <span class="params">(<span class="keyword">int</span> fd, <span class="keyword">int</span> cmd, ...<span class="comment">/* struct flock *flockptr */</span>)</span></span>;</div><div class="line"><span class="comment">// 返回值: 成功, 依赖于cmd, 否则返回-1</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="第十五章-进程间通信（未完成）"><a href="#第十五章-进程间通信（未完成）" class="headerlink" title="第十五章-进程间通信（未完成）"></a>第十五章-进程间通信（未完成）</h1><h2 id="pipe"><a href="#pipe" class="headerlink" title="pipe"></a>pipe</h2><p>创建管道；p430</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pipe</span> <span class="params">(<span class="keyword">int</span> fd[<span class="number">2</span>])</span></span>;</div><div class="line"><span class="comment">// 成功返回0； 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="popen-pclose"><a href="#popen-pclose" class="headerlink" title="popen, pclose"></a>popen, pclose</h2><p>创建一个连接到另一个进程的管道，然后读其输出或向其输入端发送数据<br>p436</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function">FILE *<span class="title">popen</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *cmdstring, <span class="keyword">const</span> <span class="keyword">char</span> *type)</span></span>;</div><div class="line"><span class="comment">// 成功返回文件指针；出错返回NULL</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pclose</span> <span class="params">(FILE *fp)</span></span>;</div><div class="line"><span class="comment">// 成功返回cmdstring 的终止状态；出错返回-1</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="第十六章-网络IPC-套接字"><a href="#第十六章-网络IPC-套接字" class="headerlink" title="第十六章-网络IPC:套接字"></a>第十六章-网络IPC:套接字</h1><h2 id="socket"><a href="#socket" class="headerlink" title="socket"></a>socket</h2><p>创建套接字;p474</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">socket</span> <span class="params">(<span class="keyword">int</span> domain, <span class="keyword">int</span> type, <span class="keyword">int</span> protocol)</span></span>;</div><div class="line"><span class="comment">// 成功返回文件(套接字)描述符; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="shutdown"><a href="#shutdown" class="headerlink" title="shutdown"></a>shutdown</h2><p>禁止一个套接字的I/O; p476</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">shutdown</span> <span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">int</span> how)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="htonl-htons-ntohl-ntohs"><a href="#htonl-htons-ntohl-ntohs" class="headerlink" title="htonl, htons, ntohl, ntohs"></a>htonl, htons, ntohl, ntohs</h2><p>处理器字节序和网络字节序之间转换;p478</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">uint32_t</span> htonl (<span class="keyword">uint32_t</span> hostint32);</div><div class="line"><span class="comment">// 返回以网络字节序表示的32 位整数</span></div><div class="line"><span class="keyword">uint16_t</span> htons (<span class="keyword">uint16_t</span> hostint16);</div><div class="line"><span class="comment">// 返回以网络字节序表示的16 位整数</span></div><div class="line"><span class="keyword">uint32_t</span> ntohl (<span class="keyword">uint32_t</span> netint32);</div><div class="line"><span class="comment">// 返回以主机字节序表示的32 位整数</span></div><div class="line"><span class="keyword">uint16_t</span> ntohs (<span class="keyword">uint16_t</span> netint16);</div><div class="line"><span class="comment">// 返回以主机字节序表示的16 位整数</span></div></pre></td></tr></table></figure>
<h2 id="inet-ntop-inet-pton"><a href="#inet-ntop-inet-pton" class="headerlink" title="inet_ntop, inet_pton"></a>inet_ntop, inet_pton</h2><p>网络地址和打印出能被人理解的地址之间的转换; p479</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">const</span> <span class="keyword">char</span> *<span class="title">inet_ntop</span> <span class="params">(<span class="keyword">int</span> domain, <span class="keyword">const</span> <span class="keyword">void</span> *<span class="keyword">restrict</span> addr,</span></span></div><div class="line">                <span class="keyword">char</span> *<span class="keyword">restrict</span> str, <span class="keyword">socklen_t</span> size);</div><div class="line"><span class="comment">// 成功返回地址字符串指针; 出错返回NULL</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">inet_pton</span> <span class="params">(<span class="keyword">int</span> domain, <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> str,</span></span></div><div class="line">            <span class="keyword">void</span> *<span class="keyword">restrict</span> addr);</div><div class="line"><span class="comment">// 成功返回1; 若格式无效返回0; 若出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="gethostent-sethostent-endhostent"><a href="#gethostent-sethostent-endhostent" class="headerlink" title="gethostent, sethostent, endhostent"></a>gethostent, sethostent, endhostent</h2><p>找到给定计算机系统的主机信息; p480</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">struct</span> hostent *<span class="title">gethostent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="comment">// 成功返回指针; 出错返回NULL</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">sethostent</span> <span class="params">(<span class="keyword">int</span> stayopen)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">endhostent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="getnetbyaddr-getnetbyname-getnetent-setnetent-endnetent"><a href="#getnetbyaddr-getnetbyname-getnetent-setnetent-endnetent" class="headerlink" title="getnetbyaddr, getnetbyname, getnetent, setnetent, endnetent"></a>getnetbyaddr, getnetbyname, getnetent, setnetent, endnetent</h2><p>gethostbyname, gethostbyaddr 被认为过时, 用下面一套接口来获得网络名字和网络编号<br>p480</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">struct</span> netent *<span class="title">getnetbyaddr</span> <span class="params">(<span class="keyword">uint32_t</span> net, <span class="keyword">int</span> type)</span></span>;</div><div class="line"><span class="function"><span class="keyword">struct</span> netent *<span class="title">getnetbyname</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *name)</span></span>;</div><div class="line"><span class="function"><span class="keyword">struct</span> netent *<span class="title">getnetent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="comment">// 三个函数的返回值: 成功返回指针; 出错返回NULL</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setnetent</span> <span class="params">(<span class="keyword">int</span> stayopen)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">endnetent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="getprotobyname-getprotobynumber-getprotoent-setprotoent-endprotoent"><a href="#getprotobyname-getprotobynumber-getprotoent-setprotoent-endprotoent" class="headerlink" title="getprotobyname, getprotobynumber, getprotoent, setprotoent, endprotoent"></a>getprotobyname, getprotobynumber, getprotoent, setprotoent, endprotoent</h2><p>用以下函数在协议名字和协议编号之间进行映射; p481</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">struct</span> protoent *<span class="title">getprotobyname</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *name)</span></span>;</div><div class="line"><span class="function"><span class="keyword">struct</span> protoent *<span class="title">getprotobynumber</span> <span class="params">(<span class="keyword">int</span> proto)</span></span>;</div><div class="line"><span class="function"><span class="keyword">struct</span> protoent *<span class="title">getprotoent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="comment">// 三个函数的返回值: 成功返回指针; 出错返回NULL</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setprotoent</span> <span class="params">(<span class="keyword">int</span> stayopen)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">endprotoent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="getservbyname-getservbyport-getservent-setservent-endservent"><a href="#getservbyname-getservbyport-getservent-setservent-endservent" class="headerlink" title="getservbyname, getservbyport, getservent, setservent, endservent"></a>getservbyname, getservbyport, getservent, setservent, endservent</h2><p>服务名和服务端口号的映射; p481</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">struct</span> servent *<span class="title">getservbyname</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *name, <span class="keyword">const</span> <span class="keyword">char</span> *proto)</span></span>;</div><div class="line"><span class="function"><span class="keyword">struct</span> servent *<span class="title">getservbyport</span> <span class="params">(<span class="keyword">int</span> port, <span class="keyword">const</span> <span class="keyword">char</span> *proto)</span></span>;</div><div class="line"><span class="function"><span class="keyword">struct</span> servent *<span class="title">getservent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="comment">// 三个函数的返回值: 成功返回指针; 出错返回NULL</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setservent</span> <span class="params">(<span class="keyword">int</span> stayopen)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">endservent</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="getaddrinfo-freeaddrinfo"><a href="#getaddrinfo-freeaddrinfo" class="headerlink" title="getaddrinfo, freeaddrinfo"></a>getaddrinfo, freeaddrinfo</h2><p>将一个主机名和一个服务名映射到一个地址; p482</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getaddrinfo</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> host, <span class="comment">// e.g. "www.example.com" or IP</span></span></span></div><div class="line">            <span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> service, <span class="comment">// e.g. "http" or port number</span></div><div class="line">            <span class="keyword">const</span> <span class="keyword">struct</span> addrinfo *<span class="keyword">restrict</span> hint,</div><div class="line">            <span class="keyword">struct</span> addrinfo **<span class="keyword">restrict</span> res);</div><div class="line"><span class="comment">// 成功返回0; 出错返回非0错误码</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">freeaddrinfo</span> <span class="params">(<span class="keyword">struct</span> addrinfo *ai)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="gai-strerror"><a href="#gai-strerror" class="headerlink" title="gai_strerror"></a>gai_strerror</h2><p>将getaddrinfo 的错误码转换成错误消息; p483</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">const</span> <span class="keyword">char</span> *<span class="title">gai_strerror</span> <span class="params">(<span class="keyword">int</span> error)</span></span>;</div><div class="line"><span class="comment">// 返回指向描述错误的字符串的指针</span></div></pre></td></tr></table></figure>
<h2 id="getnameinfo"><a href="#getnameinfo" class="headerlink" title="getnameinfo"></a>getnameinfo</h2><p>将一个地址转换成一个主机名和一个服务名; p483</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getnameinfo</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">struct</span> sockaddr *<span class="keyword">restrict</span> addr, <span class="keyword">socklen_t</span> alen,</span></span></div><div class="line">            <span class="keyword">char</span> *<span class="keyword">restrict</span> host, <span class="keyword">socklen_t</span> hostlen,</div><div class="line">            <span class="keyword">char</span> *<span class="keyword">restrict</span> service, <span class="keyword">socklen_t</span> servlen, <span class="keyword">int</span> flags);</div><div class="line"><span class="comment">// 成功返回0; 出错返回非0值</span></div></pre></td></tr></table></figure>
<h2 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h2><p>关联地址和套接字; p486</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">bind</span> <span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">const</span> <span class="keyword">struct</span> sockaddr *addr, <span class="keyword">socklen_t</span> len)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="getsockname"><a href="#getsockname" class="headerlink" title="getsockname"></a>getsockname</h2><p>用此函数来发现绑定到套接字上的地址; p487</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getsockname</span> <span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">struct</span> sockaddr *<span class="keyword">restrict</span> addr,</span></span></div><div class="line">            <span class="keyword">socklen_t</span> *<span class="keyword">restrict</span> alenp);</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="getpeername"><a href="#getpeername" class="headerlink" title="getpeername"></a>getpeername</h2><p>如果套接字已经和对等方连接, 可以调用getpeername 函数来找到对方的地址<br>p487</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getpeername</span> <span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">struct</span> sockaddr *<span class="keyword">restrict</span> addr,</span></span></div><div class="line">            <span class="keyword">socklen_t</span> *<span class="keyword">restrict</span> alenp);</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="connect"><a href="#connect" class="headerlink" title="connect"></a>connect</h2><p>建立连接; p487</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">connect</span> <span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">const</span> <span class="keyword">struct</span> sockaddr *addr, <span class="keyword">socklen_t</span> len)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="listen"><a href="#listen" class="headerlink" title="listen"></a>listen</h2><p>服务器调用listen 来宣告它愿意接受连接请求; p489</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">listen</span> <span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">int</span> backlog)</span></span>;</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="accept"><a href="#accept" class="headerlink" title="accept"></a>accept</h2><p>调用listen 之后可以使用accept 获得连接请求并建立连接; p489</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">accept</span> <span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">struct</span> sockaddr *<span class="keyword">restrict</span> addr,</span></span></div><div class="line">        <span class="keyword">socklen_t</span> *<span class="keyword">restrict</span> len);</div><div class="line"><span class="comment">// 成功返回文件(套接字)</span></div></pre></td></tr></table></figure>
<h2 id="send"><a href="#send" class="headerlink" title="send"></a>send</h2><p>和write 类似, 但是可以制定标志来改变处理数据的方式; p491</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">ssize_t</span> send (<span class="keyword">int</span> sockfd, <span class="keyword">const</span> <span class="keyword">void</span> *buf, <span class="keyword">size_t</span> nbytes, <span class="keyword">int</span> flags);</div><div class="line"><span class="comment">// 成功返回发送的字节数; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="sendto"><a href="#sendto" class="headerlink" title="sendto"></a>sendto</h2><p>与send 类似; 但是可以在无连接的套接字上指定一个目标地址; p492</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">ssize_t</span> sendto (<span class="keyword">int</span> sockfd, <span class="keyword">const</span> <span class="keyword">void</span> *buf, <span class="keyword">size_t</span> nbytes, <span class="keyword">int</span> flags,</div><div class="line">            <span class="keyword">const</span> <span class="keyword">struct</span> sockaddr *destadr, <span class="keyword">socklen_t</span> destlen);</div><div class="line"><span class="comment">// 成功返回发送的字节数; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="sendmsg"><a href="#sendmsg" class="headerlink" title="sendmsg"></a>sendmsg</h2><p>可以调用带有msghdr 结构的sendmsg 函数来制定多重缓冲区传输数据; 与writev 函数类似;<br>p492</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">ssize_t</span> sendmsg (<span class="keyword">int</span> sockfd, <span class="keyword">const</span> <span class="keyword">struct</span> msghdr *msg, <span class="keyword">int</span> flags);</div><div class="line"><span class="comment">// 成功返回发送的字节数; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="recv"><a href="#recv" class="headerlink" title="recv"></a>recv</h2><p>和read 相似, 但是recv 可以制定标志来控制如何接收数据<br>p492</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">ssize_t</span> recv (<span class="keyword">int</span> sockfd, <span class="keyword">void</span> *buf, <span class="keyword">size_t</span> nbytes, <span class="keyword">int</span> flags);</div><div class="line"><span class="comment">// 返回数据的字节长度; 若无可用数据或对等方已经按序结束, 返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="recvfrom"><a href="#recvfrom" class="headerlink" title="recvfrom"></a>recvfrom</h2><p>如果有兴趣定位发送者, 可以使用recvfrom 来得到数据发送者的源地址<br>p493</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">ssize_t</span> recvfrom (<span class="keyword">int</span> sockfd, <span class="keyword">void</span> *<span class="keyword">restrict</span> buf, <span class="keyword">size_t</span> len, <span class="keyword">int</span> flags,</div><div class="line">                <span class="keyword">struct</span> sockaddr *<span class="keyword">restrict</span> addr,</div><div class="line">                <span class="keyword">socklen_t</span> *<span class="keyword">restrict</span> addrlen);</div><div class="line"><span class="comment">// 返回数据的字节长度; 若无可用数据或对等方已经按序结束, 返回0; 若出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="recvmsg"><a href="#recvmsg" class="headerlink" title="recvmsg"></a>recvmsg</h2><p>为了将接收到的数据送入多个缓冲区, 类似readv, 或者想接收辅助数据, 可以使用recvmsg<br>p493</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">ssize_t</span> recvmsg (<span class="keyword">int</span> sockfd, <span class="keyword">struct</span> msghdr *msg, <span class="keyword">int</span> flags);</div><div class="line"><span class="comment">// 返回数据的字节长度; 若无可用数据或对等方已经按序结束, 返回0; 若出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="setsockopt-getsockopt"><a href="#setsockopt-getsockopt" class="headerlink" title="setsockopt, getsockopt"></a>setsockopt, getsockopt</h2><p>设置套接字选项和获取套接字选项当前值; p502</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">setsockopt</span> <span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">int</span> level, <span class="keyword">int</span> option, <span class="keyword">const</span> <span class="keyword">void</span> *val,</span></span></div><div class="line">            <span class="keyword">socklen_t</span> len);</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getsockopt</span> <span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">int</span> level, <span class="keyword">int</span> option, <span class="keyword">void</span> *<span class="keyword">restrict</span> val,</span></span></div><div class="line">            <span class="keyword">socklen_t</span> *<span class="keyword">restrict</span> lenp);</div><div class="line"><span class="comment">// 成功返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
<h2 id="sockatmark"><a href="#sockatmark" class="headerlink" title="sockatmark"></a>sockatmark</h2><p>判断是否已经到达紧急标记; p505</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sockatmark</span> <span class="params">(<span class="keyword">int</span> sockfd)</span></span>;</div><div class="line"><span class="comment">// 若在标记处返回1; 不在返回0; 出错返回-1</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[服务学概论第四次作业]]></title>
      <url>https://beim.github.io/2016/12/22/%E6%9C%8D%E5%8A%A1%E5%AD%A6%E6%A6%82%E8%AE%BA%E7%AC%AC%E5%9B%9B%E6%AC%A1%E4%BD%9C%E4%B8%9A/</url>
      <content type="html"><![CDATA[<p>作业要求:<br>阐述面向服务的体系结构SOA的含义及技术内容</p>
<h1 id="1-SOA-定义与介绍"><a href="#1-SOA-定义与介绍" class="headerlink" title="1. SOA 定义与介绍"></a>1. SOA 定义与介绍</h1><p>面向服务的体系结构SOA 是一种<em>IT 体系结构风格</em>, 支持将商务业务转换为一组相互链接的服务或可重复业务任务, 并在需要时通过网络访问这些服务和业务任务.<br>SOA 是异类分布式系统的体系结构, 是实现由构建组成系统的模型. 它将应用程序的不同功能单元(称为服务)通过服务之间定义好的接口和规范按<em>松散耦合</em>方式联系起来, 通过网络整合成一个新的系统.<br>接口是采用<em>中立</em>的方式进行定义的, 独立于实现服务的硬件平台, 才做系统和编程语言. 这使得构建在各种系统中的服务可以以统一和通用的方式进行交互.</p>
<h1 id="2-SOA-应用目标"><a href="#2-SOA-应用目标" class="headerlink" title="2. SOA 应用目标:"></a>2. SOA 应用目标:</h1><table>
<thead>
<tr>
<th>层次</th>
<th>服务层次名称</th>
<th>内容描述 </th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>实现单独的Web 服务</td>
<td>由新的或现有的应用程序中所包含的任务来创建服务</td>
</tr>
<tr>
<td>2</td>
<td>面向服务的业务功能集成</td>
<td>通过跨企业内外的多个应用程序集成服务来实现业务目标</td>
</tr>
<tr>
<td>3</td>
<td>整个企业范围的IT 映射/转换</td>
<td>支持跨整个企业业务功能集成的体系结构实现</td>
</tr>
<tr>
<td>4</td>
<td>随需应变的业务转换</td>
<td>现有业务模型的广泛转换或者新业务模型的部署</td>
</tr>
</tbody>
</table>
<a id="more"></a>
<h1 id="3-创建SOA-的六种方法"><a href="#3-创建SOA-的六种方法" class="headerlink" title="3. 创建SOA 的六种方法"></a>3. 创建SOA 的六种方法</h1><table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
<th>限制条件</th>
</tr>
</thead>
<tbody>
<tr>
<td>业务流程驱动</td>
<td>业务流程需要接进资源, 每个活动都需要调用IT 功能; 希望该功能能够以一种灵活的, 可替代的方式使用</td>
<td>自顶向下</td>
</tr>
<tr>
<td>基于工具的MDA</td>
<td>希望定义一个业务模型, 然后由工具生成细节</td>
<td>自顶向下</td>
</tr>
<tr>
<td>包装遗留</td>
<td>拥有已经进行了大规模投资的现有系统, 但是它们不具有可伸缩性.</td>
<td>自底向上</td>
</tr>
<tr>
<td>组件化遗留</td>
<td>使用基于变一起的工具将整个庞大的遗留系统分解成模块</td>
<td>自底向上</td>
</tr>
<tr>
<td>数据驱动</td>
<td>使用服务来提供对信息的访问, 而不必在提供者端公开Schema 或者实现决策</td>
<td>专注于数据</td>
</tr>
<tr>
<td>消息驱动</td>
<td>仅仅希望这些系统通过标准的, 非专有的协议进行集成, 通信</td>
<td>应用程序和系统的面向服务的集成</td>
</tr>
</tbody>
</table>
<h1 id="4-SOA-的基本构件是服务"><a href="#4-SOA-的基本构件是服务" class="headerlink" title="4. SOA 的基本构件是服务"></a>4. SOA 的基本构件是服务</h1><ul>
<li>从外特性上看, 一个服务被定义为显式的, 独立于服务具体实现的技术细节的接口.</li>
<li>从内特性上看, 服务封装了可复用的业务功能 它们通常是大粒度业务, 如业务过程, 业务活动等.</li>
<li>服务实现可采用任何技术平台, 如J2EE, .Net等.</li>
</ul>
<h1 id="5-基本体系结构模式"><a href="#5-基本体系结构模式" class="headerlink" title="5. 基本体系结构模式:"></a>5. 基本体系结构模式:</h1><ul>
<li>发布-访问机制</li>
<li>适配器模式</li>
<li>远程服务策略</li>
<li>服务集成器</li>
<li>企业服务总线</li>
</ul>
<p><strong>5.1. 发布-访问机制</strong></p>
<ul>
<li>发布: 为了使服务可访问, 需要发布服务描述以使服务使用者可以发现它.</li>
<li>发现: 服务请求者定位服务; 通过查询服务注册中心来找到满足其标准的服务.</li>
<li>绑定和调用: 在检测到服务描述之后, 服务使用者将根据服务描述中的信息来调用服务.</li>
</ul>
<p>Web Service 基本实现机制</p>
<ul>
<li>WSDL: Web 服务描述语言, 用于服务接口的描述</li>
<li>UDDI: 统一描述, 发现和集成协议, 服务使用者通过UDDI 发现相应的服务并据此将服务集成在自身的系统中</li>
<li>SOAP: 简单对象访问协议, 用户在服务客户端与服务提供者之间传递信息; 通过HTTP 或JMS 等各类基于文本的消息传递协议来运输.</li>
</ul>
<p><strong>5.2. 适配器模式</strong></p>
<p>针对问题:</p>
<ul>
<li>企业中存在若干遗存系统;</li>
<li>遗存系统采用较传统的技术开发, 无法提供清晰的WS 接口;</li>
<li>其他系统仍需访问这些遗留系统的功能;</li>
</ul>
<p>解决途径:</p>
<ul>
<li>通过构造适配器, 将遗存系统中的功能进行二次封装, 并开放出接口供其他系统使用; 从而使非面向服务的系统也能够参与到面向服务的体系结构之中.</li>
</ul>
<p>典型技术:</p>
<ul>
<li>Java 2 Connector</li>
<li>IBM WebSphere Business Integration Adaptor</li>
</ul>
<p><strong>5.3. 远程服务策略</strong></p>
<ul>
<li>客户端直接绑定服务接口(WSDL/URI)</li>
<li>客户端通过”Service Registry” 来访问服务; 当希望访问其他服务时, 只要手工修改该Registry 即可– 相当于一个配置文件</li>
<li>客户端通过”Service Broker” 来动态决定需访问哪个服务; – 难以实现完全动态的服务选择, 需要用到服务语义的相关技术.</li>
</ul>
<p>存在的问题:</p>
<ul>
<li>如果客户端需要同时或连续调用多个服务的功能, 它必须在自己的系统中分别写出多个调用; 对多个服务的调用次序也容易发生变化, 需要频繁的修改.</li>
</ul>
<p>解决方法:</p>
<ul>
<li>将Remote Service Strategy 的思想进一步发挥, 客户端不去逐一调用服务, 而是首先将这些被调用的服务按逻辑关系集成起来, 形成一个集成的, 大粒度的服务;</li>
<li>客户端只需调用这一个服务即可;</li>
<li>当该服务执行时, 集成器依靠配置信息来分别调用一个个小粒度的服务;</li>
<li>对这些配置信息进行修改, 即可方便地做到变更.</li>
</ul>
<p><strong>5.4. 服务集成器</strong></p>
<p>处于服务提供者的生态系统，其中的现有功能通常是脆弱的和特别开发的：连接常常是“一次性的”。集成是专有的和特别的；没有单一访问点来合成服务。当前的系统没有提供具有合适粒度级别的接口。因此可以将一个特定的集成层引入服务集成的体系结构中，并通过服务集成器来管理这一层。服务集成器向其他的冗余服务提供单一访问点。</p>
<p><strong>5.5. 企业服务总线</strong></p>
<p>企业服务总线是一个整合应用和服务的灵活的连接基础架构，支持服务、服务组合和服务协同。随着组织越来越多地采用跨应用程序、遗留系统、通道技术等等的面向服务的体系结构，支持服务所需要的中间件以及用于支持它们的服务和技术的管理就成为复杂的问题。管理这种复杂性的解决方案的一个重要部分就是提供一个用于服务通信、协调、转换和集成的基础设施。这个基础设施同样也可以作为控制点，将服务管理、安全、监视和规范应用于面向服务的体系结构。这种公共的基础设施是由企业服务总线描述的。</p>
<p>ESB 的标准功能：</p>
<ul>
<li>通信： 路由、寻址、协议、消息传递等；</li>
<li>服务交互：服务接口定义、服务目录、服务发现等；</li>
<li>集成：服务适配、服务聚合、服务映射、数据库集成、协议转换等；</li>
<li>服务质量QoS、安全性、服务级别、消息处理、管理自治、建模、基础架构智能等功能。</li>
</ul>
<p>ESB 在请求者和服务之间实现了：</p>
<ul>
<li>路由服务间的消息；</li>
<li>转化请求者和服务之间的传输协议</li>
<li>转换请求者和服务之间的消息格式；</li>
<li>处理分离资源间的业务事件。</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[C-函数指针-简单使用]]></title>
      <url>https://beim.github.io/2016/12/22/C-%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88-%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>代码如下：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="meta">#include &lt;stdlib.h&gt;</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">func1</span> (<span class="params"></span>) </span></div><div class="line">&#123;</div><div class="line">    printf(<span class="string">"this is func1 call\n"</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">func2</span> (<span class="params"><span class="keyword">int</span> k, <span class="keyword">char</span> c</span>) </span></div><div class="line">&#123;</div><div class="line">    printf(<span class="string">"this is func2 call:%d %c\n"</span>, k, c);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">func3</span> (<span class="params"><span class="keyword">void</span> (*pfunc</span>) (<span class="params"><span class="keyword">int</span>, <span class="keyword">char</span></span>), <span class="keyword">int</span> a, <span class="keyword">char</span> c)</span></div><div class="line">&#123;</div><div class="line">    printf(<span class="string">"in func3\n"</span>);</div><div class="line">    pfunc(a, c);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> (*func4 (<span class="keyword">double</span> d)) (<span class="keyword">int</span>, <span class="keyword">char</span>) </div><div class="line">&#123;</div><div class="line">    printf(<span class="string">"in func4, double: %f\n"</span>, d);</div><div class="line">    <span class="keyword">return</span> func2;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">float</span> <span class="title">add</span> (<span class="params"><span class="keyword">float</span> a, <span class="keyword">float</span> b</span>)</span></div><div class="line">&#123;</div><div class="line">    printf(<span class="string">"in func add, %f + %f = %f\n"</span>, a, b, a + b);</div><div class="line">    <span class="keyword">return</span> a + b;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">float</span> <span class="title">minu</span> (<span class="params"><span class="keyword">float</span> a, <span class="keyword">float</span> b</span>) </span></div><div class="line">&#123;</div><div class="line">    printf(<span class="string">"in func min, %f - %f = %f\n"</span>, a, b, a - b);</div><div class="line">    <span class="keyword">return</span> a - b;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">typedef <span class="title">float</span> (<span class="params">*pfuncType</span>) (<span class="params"><span class="keyword">float</span>, <span class="keyword">float</span></span>)</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> (<span class="params"></span>) </span></div><div class="line">&#123;</div><div class="line"></div><div class="line">    <span class="comment">// 第一种赋值方法</span></div><div class="line">    <span class="keyword">int</span> (*pfunc1) () = func1;</div><div class="line">    <span class="comment">// 第一种调用方法</span></div><div class="line">    pfunc1();</div><div class="line">    <span class="comment">// 第二种调用方法</span></div><div class="line">    (*pfunc1)();</div><div class="line">    printf(<span class="string">"\n"</span>);</div><div class="line"></div><div class="line">    <span class="comment">// 第二种赋值方法</span></div><div class="line">    <span class="keyword">void</span> (*pfunc2) (<span class="keyword">int</span>, <span class="keyword">char</span>) = func2;</div><div class="line">    pfunc2(<span class="number">1</span>, <span class="string">'A'</span>);</div><div class="line">    (*pfunc2)(<span class="number">1</span>, <span class="string">'A'</span>);</div><div class="line">    printf(<span class="string">"\n"</span>);</div><div class="line"></div><div class="line">    <span class="comment">// 函数指针作为参数</span></div><div class="line">    func3(func2, <span class="number">1</span>, <span class="string">'B'</span>);</div><div class="line">    printf(<span class="string">"\n"</span>);</div><div class="line"></div><div class="line">    <span class="comment">// 函数指针作为参数的函数的赋值</span></div><div class="line">    <span class="keyword">void</span> (*pfunc3) (<span class="keyword">void</span> (*pp) (<span class="keyword">int</span>, <span class="keyword">char</span>), <span class="keyword">int</span>, <span class="keyword">char</span>) = func3;</div><div class="line">    pfunc3(func2, <span class="number">1</span>, <span class="string">'C'</span>);</div><div class="line">    printf(<span class="string">"\n"</span>);</div><div class="line"></div><div class="line">    <span class="comment">// 函数指针作为返回值</span></div><div class="line">    <span class="keyword">void</span> (*pfunc5) (<span class="keyword">int</span>, <span class="keyword">char</span>) = func4(<span class="number">3.33</span>);</div><div class="line">    pfunc5(<span class="number">1</span>, <span class="string">'D'</span>);</div><div class="line">    printf(<span class="string">"\n"</span>);</div><div class="line"></div><div class="line">    <span class="comment">// 函数指针数组</span></div><div class="line">    <span class="keyword">float</span> (*pfuncArr1[<span class="number">2</span>]) (<span class="keyword">float</span>, <span class="keyword">float</span>) = &#123;&amp;add, &amp;minu&#125;;</div><div class="line">    pfuncArr1[<span class="number">0</span>](<span class="number">1.2</span>, <span class="number">1.0</span>);</div><div class="line">    pfuncArr1[<span class="number">1</span>](<span class="number">1.2</span>, <span class="number">1.0</span>);</div><div class="line">    printf(<span class="string">"\n"</span>);</div><div class="line"></div><div class="line">    <span class="comment">// typedef 简化函数指针类型</span></div><div class="line">    pfuncType pfunc6 = &amp;add;</div><div class="line">    pfunc6(<span class="number">1.2</span>, <span class="number">1.0</span>);</div><div class="line">    pfuncType pfuncArr2[<span class="number">2</span>] = &#123;&amp;add, minu&#125;;</div><div class="line">    pfuncArr1[<span class="number">1</span>](<span class="number">1.2</span>, <span class="number">1.0</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">输出:</div><div class="line">this is func1 call</div><div class="line">this is func1 call</div><div class="line"></div><div class="line">this is func2 call:1 A</div><div class="line">this is func2 call:1 A</div><div class="line"></div><div class="line">in func3</div><div class="line">this is func2 call:1 B</div><div class="line"></div><div class="line">in func3</div><div class="line">this is func2 call:1 C</div><div class="line"></div><div class="line">in func4, double: 3.330000</div><div class="line">this is func2 call:1 D</div><div class="line"></div><div class="line">in func add, 1.200000 + 1.000000 = 2.200000</div><div class="line">in func min, 1.200000 - 1.000000 = 0.200000</div><div class="line"></div><div class="line">in func add, 1.200000 + 1.000000 = 2.200000</div><div class="line">in func min, 1.200000 - 1.000000 = 0.200000</div><div class="line">*/</div></pre></td></tr></table></figure>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[docker-mongodb-使用]]></title>
      <url>https://beim.github.io/2016/12/19/docker-mongodb-%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p><a href="https://dev.aliyun.com/detail.html?repoId=1237" target="_blank" rel="external">阿里云仓库</a></p>
<p><strong>启动</strong>(要求认证)<br><code>docker run --name docker0 -d -p 27017:27017 mongo:latest --auth</code></p>
<p><strong>添加用户</strong>(以mongo 客户端, admin身份登入; 也可以用bash, 再mongo )<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">docker</span> <span class="selector-tag">exec</span> <span class="selector-tag">-it</span> <span class="selector-tag">mongo0</span> <span class="selector-tag">mongo</span> <span class="selector-tag">admin</span></div><div class="line"><span class="selector-tag">docker</span> <span class="selector-tag">createUser</span>(&#123;</div><div class="line">    <span class="attribute">user</span>: <span class="string">'superuser'</span>,</div><div class="line">    <span class="attribute">pwd</span>: <span class="string">'123456'</span>,</div><div class="line">    <span class="attribute">roles</span>: [&#123;</div><div class="line">        <span class="attribute">role</span>: <span class="string">'root'</span>, <span class="attribute">db</span>: <span class="string">'admin'</span></div><div class="line">    &#125;]</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p><strong>备份</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 开启mongo0 容器</span></div><div class="line">docker start mongo0</div><div class="line"></div><div class="line"><span class="comment"># 将test 数据库备份到back 文件夹下</span></div><div class="line">mongodump <span class="_">-d</span> <span class="built_in">test</span> -o back</div><div class="line"></div><div class="line"><span class="comment"># 将back/test 文件夹下的bson 还原到数据库</span></div><div class="line">mongorestore <span class="_">-d</span> <span class="built_in">test</span> back/<span class="built_in">test</span></div></pre></td></tr></table></figure>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[服务学概论第三次作业]]></title>
      <url>https://beim.github.io/2016/12/17/%E6%9C%8D%E5%8A%A1%E5%AD%A6%E6%A6%82%E8%AE%BA%E7%AC%AC%E4%B8%89%E6%AC%A1%E4%BD%9C%E4%B8%9A/</url>
      <content type="html"><![CDATA[<ul>
<li>阐述服务构件概念及各服务构件类型的描述</li>
<li>举例说明服务发现、选择与服务组合的关系</li>
</ul>
<h1 id="服务构件的概念"><a href="#服务构件的概念" class="headerlink" title="服务构件的概念"></a>服务构件的概念</h1><ul>
<li>可被重复使用的, 用来构造服务系统的基本单元.</li>
<li>具有一系列特定的接口和描述.</li>
</ul>
<p>为什么要提出服务构件?<br>因为服务系统内部包含的服务要素种类繁多, 多服务提供者来说, 这些服务要素是可以被复用的, 以构造面向不同需求的服务系统. 例如服务系统需要有给服务人员分配班制的服务, 此时需要查询服务人员现有的班制与要分配的班制是否冲突, 与其他服务人员的班制是否冲突, 提供这个服务时我们不可能将服务人员和班制这些服务要素的所有属性都拿出来一一比较, 这时候就需要将这些服务要素进行全面的描述和封装, 对外提供接口和描述, 以便于进行选取和组合.</p>
<h1 id="常见的服务构建类型"><a href="#常见的服务构建类型" class="headerlink" title="常见的服务构建类型"></a>常见的服务构建类型</h1><ul>
<li>软件服务 Web Services</li>
<li>人工服务 WS-HumanTask</li>
<li>表述性状态转移 REST (REpresentational State Transfer)</li>
<li>服务构建 SCA (Service Component Architecture)</li>
<li>服务数据对象 SDO (Service Data Object)</li>
<li>Web 服务资源 WS-Resource</li>
</ul>
<a id="more"></a>
<h2 id="软件服务-Web-Services"><a href="#软件服务-Web-Services" class="headerlink" title="软件服务 Web Services"></a>软件服务 Web Services</h2><p>Web Service 是一种服务导向架构的技术, 通过标准的Web 协议提供服务, 目的是保证不同平台的应用服务可以互操作.<br>根据W3C 的定义, Web Service 应当是一个软件系统, 用以支持网络间不同机器之间的互动操作. 网络服务通常是许多应用程序接口(API)所组成的, 它们透过网络, 例如Internet 的远程服务器端, 执行客户所提交服务的请求.<br>Web Service 通常包括:</p>
<ul>
<li>SOAP, 一个基于XML 的可扩展消息信封格式, 需同时绑定一个网络传输协议. 这个协议通常是HTTP 或HTTPS, 但可能是SMTP 或者XMPP.</li>
<li>WSDL, 一个XML 格式文档, 用以描述服务端口访问方式和使用协议的细节, 通常用来辅佐生成服务器和客户端代码以及配置信息.</li>
<li>UDDI, 一个用来发布和搜索WEB 服务的协议, 应用程序可借由此协议在设计或者运行时找到目标WEB 服务.</li>
</ul>
<h2 id="人工服务-WS-HumanTask"><a href="#人工服务-WS-HumanTask" class="headerlink" title="人工服务 WS-HumanTask"></a>人工服务 WS-HumanTask</h2><p>在Web Service 基础上扩展, 支持异步执行的人工活动(对人工活动的虚拟化).<br>WS-HumanTask规范引入了人工活动和通知的定义，包括它们的属性，行为特性，和一系列用于操纵人工活动的操作。同时，引入了一个协调协议，用于控制互操作方式下的人工任务服务的自治和生命周期管理。<br><em>BPEL4People</em> (WS-BPEL Extension for People) 是BPEL 在人工活动方面的扩展, 同时支持Web service 和基于角色的人工活动进行编排.<br>BPEL4People规范引入了一个WS-BPEL的扩展，用于在WS-BPEL中引入人员交互。扩展定义了一种新的基本活动，允许由人工任务作为其实现，并允许指定过程局部的任务或使用过程定义外的任务。这一扩展基于WS-HumanTask规范。<br>在业务流程方面, BPEL4People 通过以额外的独立语法和语义扩展BPEL, 提供以下功能:</p>
<ul>
<li>支持基于角色的人员交互</li>
<li>提供将人员活动指派个人员角色的方法</li>
</ul>
<h2 id="表述性状态转移-REST-REpresentational-State-Transfer"><a href="#表述性状态转移-REST-REpresentational-State-Transfer" class="headerlink" title="表述性状态转移 REST (REpresentational State Transfer)"></a>表述性状态转移 REST (REpresentational State Transfer)</h2><p>REST 是一种轻量级的Web Service 架构风格, 其实现和操作简洁, 完全通过HTTP 协议实现, 利用缓存Cache 来提高相应速度, 其性能, 效率和易用性上都优于基于SOAP 的Web Service.<br>REST 的基本机制:</p>
<ul>
<li>网络上的所有失误都被抽象为资源</li>
<li>每个资源对应一个唯一资源标识符, 但具有不同具体表现形式</li>
<li>通过通用的连接器接口对资源进行操作</li>
<li>对资源的各种操作不会改变资源标识符</li>
<li>所有操作都无状态的</li>
</ul>
<h2 id="服务构建-SCA-Service-Component-Architecture"><a href="#服务构建-SCA-Service-Component-Architecture" class="headerlink" title="服务构建 SCA (Service Component Architecture)"></a>服务构建 SCA (Service Component Architecture)</h2><p>SCA 是一种变成模型, 能够方便快速地构建服务系统和应用.<br>SCA 将构建面向服务的应用程序的步骤划分为两部分:</p>
<ul>
<li>实现提供服务和使用其他服务的构件</li>
<li>组装构建, 以通过服务引用其他服务的方式来构建业务应用程序.</li>
</ul>
<h2 id="数据对象-SDO-Service-Data-Object"><a href="#数据对象-SDO-Service-Data-Object" class="headerlink" title="数据对象 SDO (Service Data Object)"></a>数据对象 SDO (Service Data Object)</h2><p>SDO 用于简化和统一应用程序处理数据方式. 变成人员可采用统一方式访问和操作来自异类数据源的数据, 包括关系数据库, XML 数据源, Web 服务以及企业信息系统等.</p>
<p>SDO 的基本构成要素:</p>
<ul>
<li>数据对象: 保存具体的数据, 包括原始数据以及指向其他数据对象的引用. 数据对象也包含了指向元数据的引用, 这使得SDO 元数据能够被读取, 包括数据的类型, 关系和约束等.</li>
<li>数据图: 一个概念上的数据集合. 数据图是一个有多个树根的数据对象集合, 可以记录所有对数据对象的操作.</li>
<li>元数据: 元数据使得开发工具或运行环境能够动态的或者静态的查看数据的属性, 包括数据类型, 关系和约束等, 同时提供了一组与数据无关的元数据API.</li>
<li>数据终结服务: 数据访问服务负责与后台数据源进行通信, 完成构造数据图, 更新数据图等操作.</li>
</ul>
<h2 id="Web-服务资源-WS-Resource"><a href="#Web-服务资源-WS-Resource" class="headerlink" title="Web 服务资源 WS-Resource"></a>Web 服务资源 WS-Resource</h2><p>Web Service 是无状态的, 而Web 服务资源是对一个有状态资源(数据库, 物理资源等)和它与之交互的Web 服务的组合.</p>
<ul>
<li>资源具有属性和状态, 表达为XML 的形式</li>
<li>资源具有特定的生命周期, 可被创建和销毁.</li>
<li>通过若干特定的web service 对资源进行操作, 改变其属性与状态</li>
</ul>
<p>Web 服务资源框架定义了使用　Web 服务来访问有状态资源的一系列规范。它包括 Web 服务资源特性（WS-ResourceProperties）、Web 服务资源生命周期（WS-ResourceLifetime）、Web 服务基本故障（WS-BaseFaults）和 Web 服务服务组（WS-ServiceGroup）规范。这些新规范的动机是，虽然 Web 服务实现在它们交互的过程中并不维护状态信息，但是它们的交互必须经常性地为状态操作考虑，也就是说，数据的值通过 Web 服务交互得以持久化，并且作为 Web 服务交互的结果而保存。例如，一个在线的航空订票系统必须维持有关飞行状态、具体顾客的订票以及系统本身状态（它当前的位置、负载和性能）等信息。Web 服务接口如果要允许请求者查询飞行的状态、进行订票、改变订票的状态以及管理订票系统，它就必须提供对状态的访问。在 Web 服务资源框架（Web Services Resource Framework）中，我们把状态作为有状态资源来建模并且通过一个隐含的资源模式使 Web 服务之间的关系条文化。</p>
<h1 id="以Airbnb-为例说明服务发现-服务选择与服务组合的关系"><a href="#以Airbnb-为例说明服务发现-服务选择与服务组合的关系" class="headerlink" title="以Airbnb 为例说明服务发现, 服务选择与服务组合的关系"></a>以Airbnb 为例说明服务发现, 服务选择与服务组合的关系</h1><p>Airbnb 是一个让大众出租住宿民宿的网站, 让旅行者可以通过网站或手机发布, 发掘和预定世界各地的独特房源, 为近年来共享经济的代表.</p>
<p><strong>服务发现</strong>过程:</p>
<ol>
<li>客户输入自己的需求, 如目的地, 城市, 地址, 入住日期, 退房日期, 房间类型, 价格方位, 房间规模大小, 房间设施等, 向服务器发起服务请求. </li>
<li>服务器根据服务请求进行服务发现的描述, 即Airbnb 根据客户提供的需求, 查找对应的符合条件的民宿, 依据服务匹配算法进行服务查找和服务匹配, 进行服务选择与排序.</li>
</ol>
<p><strong>服务选择</strong>过程:<br>服务选择在满足需求的多个候选服务中, 选择出满足度最高的服务. 在Airbnb 中选择满足度高的服务会考虑以下因素: </p>
<ul>
<li><em>房源品质</em>, 房主发布房源的方式以及房主是否照顾好房客</li>
<li><em>预定吸引力</em>, 如果房客经常点击到该房源页面或者试图预定该房源, 这会对该房源在搜索结果中的排名有正面影响.</li>
<li><em>评价</em>: 过往房客的评价数量与评价质量都会影响到房源在搜索结果中的表现</li>
<li><em>能否轻松预定</em>: 房客能否可靠, 轻松地预定房源也会影响到搜索结果.</li>
<li><em>位置相关性</em>: 房客可以在城市级别广泛搜索, 也可以缩小到街区范围进行搜索, 因此, Airbnb 会尽可能显示与房客选择的位置偏好相关度最高的搜索结果. 可能会使用过往的预定信息来决定哪些位置与具体的搜索相关度最高.</li>
<li><em>个性化的搜索结果</em>: Airbnb 会尽量去了解房客的偏好和旅程特点, 因此搜索结果会随具体的人或者旅程详情而发生变化.</li>
</ul>
<p><strong>服务组合</strong>过程:<br>服务组合 是将已有的服务组合为一个新服务的过程, 以增加服务的可复用性, 功能和性能.<br>房客在Airbnb 浏览房源时会用到房源的基本信息, 房主的基本信息, 房源的评论, 在预定房源时有支付服务, 购买保险, 与房主打招呼等服务而这些服务通过服务组合, 将服务集成并组织起来形成一个流程或更大粒度的服务.<br>服务组合的价值在于服务重用, 以解决更加复杂的问题, 使服务得到增值.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[docker入门笔记]]></title>
      <url>https://beim.github.io/2016/12/14/docker%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<blockquote>
<p>Docker is the world’s leading software containerization platform</p>
</blockquote>
<h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><p><strong>镜像</strong><br>Docker 镜像是一个特殊的文件系统，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像不包含任何动态数据，其内容在构建之后也不会被改变。<br><em>分层存储</em>: 镜像并非是像一个 ISO 那样的打包文件，镜像只是一个虚拟的概念，其实际体现并非由一个文件组成，而是由一组文件系统组成，或者说，由多层文件系统联合组成。</p>
<p><strong>容器</strong><br>镜像和容器, 就像类和实例一样. 镜像是静态的定义, 容器是镜像运行时的实体.<br>镜像是分层存储, 容器也是, 每一个容器运行时，是以镜像为基础层，在其上创建一个当前容器的存储层，我们可以称这个为容器运行时读写而准备的存储层为容器存储层。<br>容器存储层的生存周期和容器一样，容器消亡时，容器存储层也随之消亡。因此，任何保存于容器存储层的信息都会随容器删除而丢失。<br>按照 Docker 最佳实践的要求，容器不应该向其存储层内写入任何数据，容器存储层要保持无状态化。所有的文件写入操作，都应该使用 数据卷（Volume）、或者绑定宿主目录，在这些位置的读写会跳过容器存储层，直接对宿主(或网络存储)发生读写，其性能和稳定性更高。<br>数据卷的生存周期独立于容器，容器消亡，数据卷不会消亡。因此，使用数据卷后，容器可以随意删除、重新 run，数据却不会丢失。</p>
<p><strong>仓库</strong><br>仓库是集中,分发镜像的服务, 一个 Docker Registry 中可以包含多个仓库（Repository）；每个仓库可以包含多个标签（Tag）；每个标签对应一个镜像。</p>
<a id="more"></a>
<p><strong>虚悬镜像 dangling image</strong><br><code>docker images</code> 显示有仓库名和标签都为none 的镜像<br>该镜像原来有仓库名和标签, 但是随着官方镜像维护, 原来的名字被转移到新的镜像身上, 旧的镜像的名字则被取消.<br><code>docker pull</code> 和<code>docker build</code> 都可能导致这种现象<br>使用命令专门显示这类镜像: <code>docker images -f dangling=true</code><br>删除这类镜像<code>docker rmi $(docker images -q -f dangling=true)</code></p>
<p><strong>中间层镜像</strong><br>为了加速镜像构建、重复利用资源，Docker 会利用 中间层镜像。所以在使用一段时间后，可能会看到一些依赖的中间层镜像<br>显示包括中间层镜像的所有镜像<code>docker images -a</code></p>
<p><strong>Dockerfile</strong><br>Dockerfile 是一个文本文件，其内包含了一条条的指令(Instruction)，每一条指令构建一层，因此每一条指令的内容，就是描述该层应当如何构建。<br>栗子:<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># FORM 制定基础镜像</span></div><div class="line">FROM nginx</div><div class="line"><span class="comment"># RUN 执行命令</span></div><div class="line"><span class="comment"># RUN 有shell 模式和 exec 模式</span></div><div class="line"><span class="comment"># shell: RUN &lt;命令&gt;</span></div><div class="line"><span class="comment"># exec: RUN ["可执行文件", "参数1", "参数2"]</span></div><div class="line">RUN echo <span class="string">'&lt;h1&gt;Hello, Docker!&lt;/h1&gt;'</span> &gt; <span class="regexp">/usr/share</span><span class="regexp">/nginx/html</span><span class="regexp">/index.html</span></div><div class="line"></div><div class="line"># 更复杂的栗子</div><div class="line">FROM debian:jessie</div><div class="line"></div><div class="line">RUN buildDeps='gcc libc6-dev make' \</div><div class="line">    &amp;&amp; apt-get update \</div><div class="line">    &amp;&amp; apt-get install -y $buildDeps \</div><div class="line">    &amp;&amp; wget -O redis.tar.gz "http:/<span class="regexp">/download.redis.io/releases</span><span class="regexp">/redis-3.2.5.tar.gz" \</span></div><div class="line">    &amp;&amp; mkdir -p /usr<span class="regexp">/src/redis</span> \</div><div class="line">    &amp;&amp; tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=<span class="number">1</span> \</div><div class="line">    &amp;&amp; make -C /usr/src/redis \</div><div class="line">    &amp;&amp; make -C /usr/src/redis install \</div><div class="line">    &amp;&amp; rm -rf /var/<span class="class"><span class="keyword">lib</span>/<span class="title">apt</span>/<span class="title">lists</span>/* \</span></div><div class="line">    &amp;&amp; rm redis.tar.gz \</div><div class="line">    &amp;&amp; rm -r /usr/src/redis \</div><div class="line">    &amp;&amp; apt-get purge -y --auto-remove $buildDeps</div></pre></td></tr></table></figure></p>
<hr>
<h1 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h1><h2 id="pull-获取镜像"><a href="#pull-获取镜像" class="headerlink" title="pull 获取镜像"></a>pull 获取镜像</h2><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker pull <span class="string">[选项]</span> <span class="string">[Docker Registry地址]</span>&lt;仓库名&gt;:&lt;标签&gt;</div></pre></td></tr></table></figure>
<ul>
<li>Docker Registry地址：地址的格式一般是 &lt;域名/IP&gt;[:端口号]。默认地址是 Docker Hub。</li>
<li>仓库名：如之前所说，这里的仓库名是两段式名称，既 &lt;用户名&gt;/&lt;软件名&gt;。对于 Docker Hub，如果不给出用户名，则默认为 library，也就是官方镜像。</li>
</ul>
<h2 id="run-运行"><a href="#run-运行" class="headerlink" title="run 运行"></a>run 运行</h2><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">docker <span class="built_in">run</span> -<span class="keyword">it</span> <span class="comment">--rm ubuntu:14.04 bash</span></div><div class="line"></div><div class="line">docker <span class="built_in">run</span> <span class="comment">--name ub1 -it -d ubuntu:latest bash</span></div><div class="line"></div><div class="line"><span class="comment"># 服务名为web2, 映射到81 端口, 访问http://localhost:81 可以看到结果</span></div><div class="line">docker <span class="built_in">run</span> <span class="comment">--name web2 -d -p 81:80 nginx:v2</span></div></pre></td></tr></table></figure>
<ul>
<li>-it, -i 是让容器的标准输入打开, -t 是终端, </li>
<li>–rm, 容器退出后将其删除, 默认情况退出的容器不会立即删除, 除非手动<code>docker rm</code></li>
<li>ubuntu:14.04, 使用<code>ubuntu:14.04</code> 镜像作为基础来启动容器</li>
<li>bash, 放在镜像名后面的是<em>命令</em></li>
</ul>
<h2 id="start-启动已终止容器"><a href="#start-启动已终止容器" class="headerlink" title="start  启动已终止容器"></a>start  启动已终止容器</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker <span class="literal">start</span> web2</div></pre></td></tr></table></figure>
<h2 id="stop"><a href="#stop" class="headerlink" title="stop"></a>stop</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker <span class="built_in">stop</span> web2</div></pre></td></tr></table></figure>
<h2 id="logs"><a href="#logs" class="headerlink" title="logs"></a>logs</h2><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker logs <span class="string">[container ID or NAMES]</span></div></pre></td></tr></table></figure>
<h2 id="images-列出镜像"><a href="#images-列出镜像" class="headerlink" title="images 列出镜像"></a>images 列出镜像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">docker images</div><div class="line"></div><div class="line"><span class="comment"># 显示虚悬镜像</span></div><div class="line">docker images <span class="_">-f</span> dangling=<span class="literal">true</span></div><div class="line"></div><div class="line"><span class="comment"># 显示包括中间层的所有镜像</span></div><div class="line">docker images <span class="_">-a</span></div><div class="line"></div><div class="line"><span class="comment"># 列出部分镜像</span></div><div class="line">docker images ubuntu <span class="comment"># 根据仓库名</span></div><div class="line">docker images ubuntu:16.04 <span class="comment"># 根据仓库名和标签</span></div><div class="line">docker images <span class="_">-f</span> since=mongo:3.2 <span class="comment"># 在mongo3.2 之后建立的镜像, -f 为`--filter`, 之前-&gt;before, 之后-&gt;since</span></div><div class="line">docker images -q <span class="comment"># 只显示虚悬镜像的ID</span></div><div class="line">docker images --format <span class="string">"&#123;&#123;.ID&#125;&#125;: &#123;&#123;.Repository&#125;&#125;"</span> <span class="comment"># 设置格式, 只列出镜像ID 和仓库名</span></div><div class="line"></div><div class="line"><span class="comment"># 显示镜像摘要</span></div><div class="line">docker images --digests</div></pre></td></tr></table></figure>
<p>镜像 ID 则是镜像的唯一标识，一个镜像可以对应多个标签。</p>
<h2 id="ps-列出容器"><a href="#ps-列出容器" class="headerlink" title="ps 列出容器"></a>ps 列出容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">docker ps <span class="comment"># 列出正在运行的容器</span></div><div class="line">docker ps <span class="_">-a</span> <span class="comment"># 列出所有容器</span></div></pre></td></tr></table></figure>
<h2 id="exec"><a href="#exec" class="headerlink" title="exec"></a>exec</h2><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker exec -<span class="keyword">it</span> webserver bash</div></pre></td></tr></table></figure>
<h2 id="commit-保存"><a href="#commit-保存" class="headerlink" title="commit 保存"></a>commit 保存</h2><p>容器的存储层保存下来成为镜像, 也就是在原有镜像的基础上, 再叠加上容器的存储层, 构成新的镜像. 以后运行这个新镜像的时候, 就会拥有原有容器最后的文件变化<br><code>docker commit [选项] &lt;容器ID或容器名&gt; [&lt;仓库名&gt;[:&lt;标签&gt;]]</code><br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ docker commit <span class="string">\</span></div><div class="line">    --author <span class="string">"Tao Wang &lt;twang2218@gmail.com&gt;"</span> <span class="string">\</span></div><div class="line">    --message <span class="string">"修改了默认网页"</span> <span class="string">\</span></div><div class="line">    webserver <span class="string">\</span></div><div class="line">    nginx:v2</div><div class="line">sha256:<span class="number">07e</span>33465974800ce65751acc279adc6ed2dc5ed4e0838f8b86f0c87aa1795214</div><div class="line"></div><div class="line"><span class="comment"># 可以看到新定值的镜像, 仓库: nginx, tag: v2</span></div><div class="line">docker images nginx</div></pre></td></tr></table></figure></p>
<h2 id="diff-查看改动"><a href="#diff-查看改动" class="headerlink" title="diff 查看改动"></a>diff 查看改动</h2><p>查看对容器存储层的改动<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker <span class="built_in">diff</span> webserver</div></pre></td></tr></table></figure></p>
<h2 id="history-查看镜像内的历史记录"><a href="#history-查看镜像内的历史记录" class="headerlink" title="history 查看镜像内的历史记录"></a>history 查看镜像内的历史记录</h2><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">beim@userver:~$ docker history nginx:v2</div><div class="line">IMAGE               CREATED              CREATED <span class="keyword">BY</span>                                      SIZE                COMMENT</div><div class="line">18ac1bcb1bf3        <span class="keyword">About</span> a minute ago   nginx -<span class="keyword">g</span> daemon off;                            243 B               修改默认网页</div><div class="line">abf312888d13        2 weeks ago          /bin/<span class="keyword">sh</span> -c #(nop)  CMD [<span class="string">"nginx"</span> <span class="string">"-g"</span> "daemon    0 B                 </div><div class="line">&lt;missing&gt;           2 weeks ago          /bin/<span class="keyword">sh</span> -c #(nop)  EXPOSE 443/tcp 80/tcp        0 B                 </div><div class="line">&lt;missing&gt;           2 weeks ago          /bin/<span class="keyword">sh</span> -c ln -sf /dev/stdout /<span class="keyword">var</span>/<span class="keyword">log</span>/nginx/   22 B                </div><div class="line">&lt;missing&gt;           2 weeks ago          /bin/<span class="keyword">sh</span> -c apt-key adv --keyserver hkp:<span class="comment">//pgp.   58.48 MB            </span></div><div class="line">&lt;missing&gt;           2 weeks ago          /bin/<span class="keyword">sh</span> -c #(nop)  ENV NGINX_VERSION=1.11.6-1   0 B                 </div><div class="line">&lt;missing&gt;           5 weeks ago          /bin/<span class="keyword">sh</span> -c #(nop)  MAINTAINER NGINX Docker <span class="keyword">Ma</span>   0 B                 </div><div class="line">&lt;missing&gt;           5 weeks ago          /bin/<span class="keyword">sh</span> -c #(nop)  CMD [<span class="string">"/bin/bash"</span>]            0 B                 </div><div class="line">&lt;missing&gt;           5 weeks ago          /bin/<span class="keyword">sh</span> -c #(nop) ADD <span class="keyword">file</span>:41ea5187c50116884c   123 MB</div></pre></td></tr></table></figure>
<h2 id="build-构建镜像"><a href="#build-构建镜像" class="headerlink" title="build 构建镜像"></a>build 构建镜像</h2><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">docker build [选项] &lt;上下文路径/URL/-&gt;</div><div class="line"></div><div class="line"><span class="meta"># 如:</span></div><div class="line">$ docker build -t nginx:v3 .</div><div class="line"><span class="meta"># -t 指定最终镜像的名称</span></div><div class="line"><span class="meta"># . 指定上下文路径</span></div><div class="line"></div><div class="line"><span class="meta"># 还可以从git repo 中创建</span></div><div class="line">docker build https:<span class="comment">//github.com/twang2218/gitlab-ce-zh.git#:8.14</span></div><div class="line"></div><div class="line"><span class="meta"># 从tar 压缩包创建</span></div><div class="line">docker build http:<span class="comment">//server/context.tar.gz</span></div><div class="line"></div><div class="line"><span class="meta"># 从标准读入中创建</span></div><div class="line">docker build - &lt; Dockerfile</div><div class="line"><span class="meta"># 或</span></div><div class="line">cat Dockerfile | docker build -</div></pre></td></tr></table></figure>
<h2 id="export"><a href="#export" class="headerlink" title="export"></a>export</h2><p>导出容器快照到本地文件<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">docker</span> <span class="selector-tag">export</span> <span class="selector-attr">[container ID]</span> &gt; <span class="selector-tag">ubuntu</span><span class="selector-class">.tar</span></div></pre></td></tr></table></figure></p>
<h2 id="import"><a href="#import" class="headerlink" title="import"></a>import</h2><p>将容器快照文件导入为镜像<br><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">docker import [选项] &lt;文件&gt;|&lt;URL&gt;|- <span class="meta">[&lt;仓库名&gt;[:&lt;标签&gt;]</span>]</div><div class="line"></div><div class="line">cat ubuntu.tar | docker import - test/ubuntu:v1<span class="number">.0</span></div></pre></td></tr></table></figure></p>
<h2 id="save-amp-amp-loda"><a href="#save-amp-amp-loda" class="headerlink" title="save &amp;&amp; loda"></a>save &amp;&amp; loda</h2><p>save将镜像保存为tar 文件<br>可以传输到另一个位置, 再加载进来<br><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">docker save alpine | gzip &gt; alpine-latest.tar.gz</div><div class="line"></div><div class="line">docker <span class="built_in">load</span> -i alpine-latest.tar.gz</div><div class="line"></div><div class="line"><span class="comment"># 利用ssh 和pv, 将镜像从一个机器迁移到另一个机器</span></div><div class="line">docker save <span class="variable">&lt;镜像名&gt;</span> | bzip2 | pv | ssh <span class="variable">&lt;用户名&gt;</span>@<span class="variable">&lt;主机名&gt;</span> 'cat | docker <span class="built_in">load</span>'</div></pre></td></tr></table></figure></p>
<h2 id="rm-删除容器"><a href="#rm-删除容器" class="headerlink" title="rm 删除容器"></a>rm 删除容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">docker rm ubuntu1</div><div class="line"></div><div class="line"><span class="comment"># 删除运行中的容器</span></div><div class="line">docker rm <span class="_">-f</span> ubuntu1</div><div class="line"></div><div class="line"><span class="comment"># 删除所有已经创建的终止状态的容器</span></div><div class="line">docker rm $(docker ps <span class="_">-a</span> -q)</div></pre></td></tr></table></figure>
<h2 id="rmi-删除镜像"><a href="#rmi-删除镜像" class="headerlink" title="rmi 删除镜像"></a>rmi 删除镜像</h2><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">docker rmi [选项] &lt;镜像<span class="number">1</span>&gt; [&lt;镜像<span class="number">2</span>&gt; ...]</div><div class="line"></div><div class="line"><span class="meta"># docker images 命令来配合</span></div><div class="line"><span class="meta"># 删除虚悬镜像</span></div><div class="line">docker rmi $(docker images -q -f dangling=<span class="literal">true</span>)</div><div class="line"><span class="meta"># 删除所有仓库名为redis 的镜像</span></div><div class="line">docker rmi $(docker images -q redis)</div><div class="line"><span class="meta"># 删除所有在mongo:3.2 之前的镜像</span></div><div class="line">docker rmi $(docker images -q -f before=mongo:<span class="number">3.2</span>)</div></pre></td></tr></table></figure>
<h2 id="logs-查看应用信息"><a href="#logs-查看应用信息" class="headerlink" title="logs 查看应用信息"></a>logs 查看应用信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker logs <span class="_">-f</span> webserver</div></pre></td></tr></table></figure>
<h2 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h2><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">docker cp &lt;containerId&gt;<span class="symbol">:/file/path</span> /host/file/path</div><div class="line"></div><div class="line">docker cp /host/file/path &lt;containerId&gt;<span class="symbol">:/file/path</span></div></pre></td></tr></table></figure>
<h2 id="volume"><a href="#volume" class="headerlink" title="volume"></a>volume</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">docker <span class="keyword">volume</span> ls</div><div class="line"></div><div class="line">~/<span class="keyword">user</span>$ docker <span class="keyword">run</span> --name ub2 -p 2335:80 -d -it -v ~/<span class="keyword">user</span>/webapp:/webapp ubuntu:latest </div><div class="line">ddd5a9647e053b401e757ea858b16512dd609582c6bdc20363eb5fac8e8ebf2a</div><div class="line">~/<span class="keyword">user</span>$ docker ps</div><div class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                  NAMES</div><div class="line">ddd5a9647e05        ubuntu:latest       "/bin/bash"         4 seconds ago       Up 2 seconds        0.0.0.0:2335-&gt;80/tcp   ub2</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[安装docker]]></title>
      <url>https://beim.github.io/2016/12/14/%E5%AE%89%E8%A3%85docker/</url>
      <content type="html"><![CDATA[<p><a href="https://docs.docker.com/engine/installation/linux/ubuntulinux/" target="_blank" rel="external">ubuntu 安装Docker 指南 - 官网</a></p>
<p>在添加GPG 这一步报错， 无法获取<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">beim<span class="variable">@userver:</span>/etc/apt$ sudo apt-key adv \</div><div class="line">&gt;                --keyserver <span class="attribute">hkp</span>:<span class="comment">//ha.pool.sks-keyservers.net:80 \</span></div><div class="line">&gt;                --recv-keys <span class="number">58118</span>E89F3A912897C070ADBF76221572C52609D</div><div class="line"><span class="attribute">Executing</span>: /tmp/tmp.N2eCGO93Kl/gpg.<span class="number">1</span>.sh --keyserver</div><div class="line"><span class="attribute">hkp</span>:<span class="comment">//ha.pool.sks-keyservers.net:80</span></div><div class="line">--recv-keys</div><div class="line"><span class="number">58118</span>E89F3A912897C070ADBF76221572C52609D</div><div class="line"><span class="attribute">gpg</span>: requesting key <span class="number">2</span>C52609D from hkp server ha.pool.sks-keyservers.net</div><div class="line"><span class="attribute">gpg</span>: keyserver timed out</div><div class="line"><span class="attribute">gpg</span>: keyserver receive <span class="attribute">failed</span>: keyserver error</div></pre></td></tr></table></figure></p>
<p>于是参考<a href="https://yeasy.gitbooks.io/docker_practice/content/install/ubuntu.html" target="_blank" rel="external">Ubuntu、Debian 系列安装 Docker - gitbook</a></p>
<a id="more"></a>
<p>使用阿里云的安装脚本<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -sSL http://acs-public-mirror.oss-<span class="keyword">cn</span>-hangzhou.aliyuncs.<span class="keyword">com</span>/docker-engine/internet | <span class="keyword">sh</span> -</div></pre></td></tr></table></figure></p>
<p>安装完成<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">+ sudo -E sh -c docker version</div><div class="line">Client:</div><div class="line"> Version:      1.12.4</div><div class="line"> API version:  1.24</div><div class="line"> Go version:   go1.6.4</div><div class="line"> Git <span class="keyword">commit</span>:   <span class="number">1564</span>f02</div><div class="line"> Built:        Tue <span class="built_in">Dec</span> <span class="number">13</span> <span class="number">00</span>:<span class="number">08</span>:<span class="number">34</span> <span class="number">2016</span></div><div class="line"> OS/Arch:      linux/amd64</div><div class="line"></div><div class="line"><span class="keyword">Server</span>:</div><div class="line"> <span class="keyword">Version</span>:      <span class="number">1.12</span><span class="number">.4</span></div><div class="line"> API <span class="keyword">version</span>:  <span class="number">1.24</span></div><div class="line"> <span class="keyword">Go</span> <span class="keyword">version</span>:   go1<span class="number">.6</span><span class="number">.4</span></div><div class="line"> Git <span class="keyword">commit</span>:   <span class="number">1564</span>f02</div><div class="line"> Built:        Tue <span class="built_in">Dec</span> <span class="number">13</span> <span class="number">00</span>:<span class="number">08</span>:<span class="number">34</span> <span class="number">2016</span></div><div class="line"> OS/Arch:      linux/amd64</div><div class="line"></div><div class="line"><span class="keyword">If</span> you would <span class="keyword">like</span> <span class="keyword">to</span> <span class="keyword">use</span> Docker <span class="keyword">as</span> a non-root <span class="keyword">user</span>, you should <span class="keyword">now</span> <span class="keyword">consider</span></div><div class="line">adding your <span class="keyword">user</span> <span class="keyword">to</span> the <span class="string">"docker"</span> <span class="keyword">group</span> <span class="keyword">with</span> something <span class="keyword">like</span>:</div><div class="line"></div><div class="line">  sudo usermod -aG docker beim</div><div class="line"></div><div class="line">Remember that you will have <span class="keyword">to</span> <span class="keyword">log</span> <span class="keyword">out</span> <span class="keyword">and</span> back <span class="keyword">in</span> <span class="keyword">for</span> this <span class="keyword">to</span> take effect!</div></pre></td></tr></table></figure></p>
<p>根据上面的提示， 使用<code>sudo usermod -aG docker beim</code></p>
<p>现在可以运行hello-world了<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker <span class="built_in">run</span> hello-world</div></pre></td></tr></table></figure></p>
<p>成功<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">beim@userver:~$ docker run hello-world</div><div class="line"></div><div class="line">Hello <span class="built_in">from</span> Docker!</div><div class="line">This message shows that your installation appears <span class="built_in">to</span> be working correctly.</div><div class="line"></div><div class="line">To generate this message, Docker took <span class="keyword">the</span> following steps:</div><div class="line"> <span class="number">1.</span> The Docker client contacted <span class="keyword">the</span> Docker daemon.</div><div class="line"> <span class="number">2.</span> The Docker daemon pulled <span class="keyword">the</span> <span class="string">"hello-world"</span> image <span class="built_in">from</span> <span class="keyword">the</span> Docker Hub.</div><div class="line"> <span class="number">3.</span> The Docker daemon created <span class="keyword">a</span> <span class="built_in">new</span> container <span class="built_in">from</span> that image which runs <span class="keyword">the</span></div><div class="line">    executable that produces <span class="keyword">the</span> output you are currently reading.</div><div class="line"> <span class="number">4.</span> The Docker daemon streamed that output <span class="built_in">to</span> <span class="keyword">the</span> Docker client, which sent <span class="keyword">it</span></div><div class="line">    <span class="built_in">to</span> your terminal.</div><div class="line"></div><div class="line">To <span class="keyword">try</span> something more ambitious, you can run <span class="keyword">an</span> Ubuntu container <span class="keyword">with</span>:</div><div class="line"> $ docker run -<span class="keyword">it</span> ubuntu bash</div><div class="line"></div><div class="line">Share images, automate workflows, <span class="keyword">and</span> more <span class="keyword">with</span> <span class="keyword">a</span> free Docker Hub account:</div><div class="line"> <span class="keyword">https</span>://hub.docker.com</div><div class="line"></div><div class="line">For more examples <span class="keyword">and</span> ideas, visit:</div><div class="line"> <span class="keyword">https</span>://docs.docker.com/engine/userguide/</div></pre></td></tr></table></figure></p>
<p>尝试pull 下ubuntu16.04<br><code>docker pull ubuntu:16.04</code><br>发现速度非常慢， 因为默认是Docker Hub 的仓库</p>
<p>于是参考<a href="https://yeasy.gitbooks.io/docker_practice/content/install/mirror.html" target="_blank" rel="external">镜像加速器 - gitbook</a><br>到<a href="https://cr.console.aliyun.com/#/accelerator" target="_blank" rel="external">阿里云， 配置加速器</a><br>执行<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">sudo mkdir -<span class="selector-tag">p</span> /etc/systemd/system/docker<span class="selector-class">.service</span><span class="selector-class">.d</span></div><div class="line">sudo tee /etc/systemd/system/docker<span class="selector-class">.service</span><span class="selector-class">.d</span>/mirror<span class="selector-class">.conf</span> &lt;&lt;-<span class="string">'EOF'</span></div><div class="line">[Service]</div><div class="line">ExecStart=</div><div class="line">ExecStart=/usr/bin/docker daemon -H fd:<span class="comment">// --registry-mirror=https://oysy0l7g.mirror.aliyuncs.com</span></div><div class="line">EOF</div><div class="line">sudo systemctl daemon-reload</div><div class="line">sudo systemctl restart docker</div></pre></td></tr></table></figure></p>
<p>再次尝试pull ubuntu16.04, 这次就很快了<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">beim<span class="variable">@userver:</span>~$ docker pull <span class="attribute">ubuntu</span>:<span class="number">16.04</span></div><div class="line"><span class="number">16.04</span>: Pulling from library/ubuntu</div><div class="line"><span class="attribute">af49a5ceb2a5</span>: Pull complete </div><div class="line"><span class="number">8</span><span class="attribute">f9757b472e7</span>: Pull complete </div><div class="line"><span class="attribute">e931b117db38</span>: Pull complete </div><div class="line"><span class="number">47</span><span class="attribute">b5e16c0811</span>: Pull complete </div><div class="line"><span class="number">9332</span><span class="attribute">eaf1a55b</span>: Pull complete </div><div class="line"><span class="attribute">Digest</span>: <span class="attribute">sha256</span>:<span class="number">3</span>b64c309deae7ab0f7dbdd42b6b326261ccd6261da5d88396439353162703fb5</div><div class="line"><span class="attribute">Status</span>: Downloaded newer image for <span class="attribute">ubuntu</span>:<span class="number">16.04</span></div></pre></td></tr></table></figure></p>
<p>查看镜像<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">beim<span class="variable">@userver:</span>~$ docker images</div><div class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</div><div class="line">ubuntu              <span class="number">16.04</span>               <span class="number">4</span>ca3a192ff2a        <span class="number">2</span> weeks ago         <span class="number">128.2</span> MB</div><div class="line">hello-world         latest              c54a2cc56cbb        <span class="number">5</span> months ago        <span class="number">1.848</span> kB</div></pre></td></tr></table></figure></p>
<p>现在运行ubuntu16.04<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">beim<span class="variable">@userver:</span>~$ docker run -it <span class="attribute">ubuntu</span>:<span class="number">16.04</span> </div><div class="line">root<span class="variable">@41f0f5b8ff95</span>:/# uname -r</div><div class="line"><span class="number">4.4</span>.<span class="number">0</span>-<span class="number">31</span>-generic</div><div class="line">root<span class="variable">@41f0f5b8ff95</span>:/# exit</div><div class="line">exit</div></pre></td></tr></table></figure></p>
<p>看来是成功了～～～撒花<br>继续准备编译考试了QAQ</p>
<h1 id="参考连接"><a href="#参考连接" class="headerlink" title="参考连接"></a>参考连接</h1><p><a href="https://docs.docker.com/engine/installation/linux/ubuntulinux/" target="_blank" rel="external">Install Docker on Ubuntu - 官网</a><br><a href="https://yq.aliyun.com/articles/66488" target="_blank" rel="external">Ubuntu 12.04上享用新版本Linux的功能 - 云栖社区</a><br><a href="https://yeasy.gitbooks.io/docker_practice/content/" target="_blank" rel="external">Docker 从入门到实践 - gitbook</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[shadowsocks配置]]></title>
      <url>https://beim.github.io/2016/12/10/shadowsocks%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p><a href="https://github.com/shadowsocks/shadowsocks/blob/master/README.md" target="_blank" rel="external">shadowsocks - Tutorial - Github</a></p>
<h1 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h1><p>给出一份客户端的配置文件<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># shadow.json</span></div><div class="line">&#123;</div><div class="line">    <span class="string">"server"</span>: <span class="string">"sg03-31.ssv7.net"</span>,</div><div class="line">    <span class="string">"server_port"</span>: <span class="number">40696</span>,</div><div class="line">    <span class="string">"local"</span>: <span class="string">"127.0.0.1"</span>,</div><div class="line">    <span class="string">"local_port"</span>: <span class="number">1080</span>,</div><div class="line">    <span class="string">"password"</span>: <span class="string">"your password"</span>,</div><div class="line">    <span class="string">"timeout"</span>: <span class="number">600</span>,</div><div class="line">    <span class="string">"method"</span>: <span class="string">"aes-256-cfb"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>执行命令<code>sslocal -c /home/beim/.shadow.json</code> 即可连接至服务器</p>
<p>执行<code>gnome-session-properties</code> 命令, 将上一条命令加入到开机自启，也有其他办法加入自启，见<a href="http://blog.beim.site/2016/08/05/ubuntu-%E5%90%AF%E5%8A%A8%E5%88%9D%E5%A7%8B%E5%8C%96/" target="_blank" rel="external">另一篇文章</a></p>
<a id="more"></a>
<hr>
<h1 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h1><p><a href="https://github.com/shadowsocks/shadowsocks/blob/master/README.md" target="_blank" rel="external">基本操作 - Tutorial - Github</a></p>
<p>给出一份服务端的配置文件, <a href="https://github.com/shadowsocks/shadowsocks/wiki/Configuration-via-Config-File" target="_blank" rel="external">Configuration via Config File</a><br><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># shadowsocks.conf</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"method"</span>: <span class="string">"aes-256-cfb"</span>,</div><div class="line">  <span class="string">"server_address"</span>: <span class="string">"127.0.0.1"</span>,</div><div class="line">  <span class="string">"port_password"</span>: &#123;</div><div class="line">      <span class="string">"138"</span>: <span class="string">"1111000"</span>,</div><div class="line">      <span class="string">"137"</span>: <span class="string">"111111"</span>,</div><div class="line">      <span class="string">"264"</span>: <span class="string">"10110100"</span>,</div><div class="line">      <span class="string">"524"</span>: <span class="string">"10110100"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"timeout"</span>: <span class="number">300</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>执行命令<code>ssserver -c shadowsocks.conf</code> 即可开启服务(<code>-d</code> 选项可以后台运行)<br>或者<a href="https://github.com/shadowsocks/shadowsocks/wiki/%E7%94%A8-Supervisor-%E8%BF%90%E8%A1%8C-Shadowsocks" target="_blank" rel="external">用 Supervisor 运行 Shadowsocks</a></p>
<p>查看日志 <code>sudo less /var/log/shadowsocks.log</code></p>
<p><a href="https://github.com/shadowsocks/shadowsocks/wiki/Optimizing-Shadowsocks" target="_blank" rel="external">shadowsocks 优化</a></p>
<p><a href="https://blog.bingxuecandong.com/?p=199" target="_blank" rel="external">shadowsocks 监控流量</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[云免流的尝试]]></title>
      <url>https://beim.github.io/2016/12/10/%E4%BA%91%E5%85%8D%E6%B5%81%E7%9A%84%E5%B0%9D%E8%AF%95/</url>
      <content type="html"><![CDATA[<h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><h2 id="修改HTTP头"><a href="#修改HTTP头" class="headerlink" title="修改HTTP头"></a>修改HTTP头</h2><p>运营商有免费流量的套餐，比如咪咕音乐，在使用咪咕音乐软件的时候用的流量是不收费的。<br>为什么？<br>运营商在检测手机流量的时候检查HTTP头，如URL，HOST，还有X-Request-with这个运营商自己的参数，如果符合免流量费用的条件（比如访问的是移动自己的页面），则对相关的流量不收费。<br>知道了这个，我们就可以在HTTP上面做点修改，达到免流的目的了 ohhh （具体修改的内容在下面介绍）</p>
<h2 id="修改端口"><a href="#修改端口" class="headerlink" title="修改端口"></a>修改端口</h2><p>运营商还有一种判断免费流量的方法，即访问的端口，如137/138/139等端口，如果流量是指向这些端口的，运营商就不对这些流量计费。<br>那么我们也可以让我们网络请求的端口都设置成这些特定的端口，以达到免流效果。</p>
<a id="more"></a>
<hr>
<h1 id="实验1"><a href="#实验1" class="headerlink" title="实验1"></a>实验1</h1><p><strong>OpenVPN + Squid 搭建HTTP代理，修改头信息</strong></p>
<h2 id="系统环境-：ubuntu14-04"><a href="#系统环境-：ubuntu14-04" class="headerlink" title="系统环境 ：ubuntu14.04"></a>系统环境 ：ubuntu14.04</h2><p>首先<a href="https://linux.cn/article-3706-2.html" target="_blank" rel="external">搭建OpenVPN</a><br>然后安装<code>squid</code>, 直接apt-get即可安装<br>相关目录：</p>
<ul>
<li><code>/etc/squid3</code> // squid的配置文件</li>
<li><code>/var/log/squid3/</code> // squid的日志文件</li>
</ul>
<h2 id="给出一份squid的配置文件"><a href="#给出一份squid的配置文件" class="headerlink" title="给出一份squid的配置文件"></a>给出一份squid的配置文件</h2><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># squid.conf</span></div><div class="line"></div><div class="line">acl SSL_ports <span class="keyword">port</span> <span class="number">443</span></div><div class="line">acl Safe_ports <span class="keyword">port</span> <span class="number">138</span></div><div class="line">acl Safe_ports <span class="keyword">port</span> <span class="number">80</span></div><div class="line">acl Safe_ports <span class="keyword">port</span> <span class="number">21</span></div><div class="line">acl Safe_ports <span class="keyword">port</span> <span class="number">443</span></div><div class="line">acl Safe_ports <span class="keyword">port</span> <span class="number">70</span></div><div class="line">acl Safe_ports <span class="keyword">port</span> <span class="number">210</span></div><div class="line">acl Safe_ports <span class="keyword">port</span> <span class="number">1025</span>-<span class="number">65535</span></div><div class="line">acl Safe_ports <span class="keyword">port</span> <span class="number">280</span></div><div class="line">acl Safe_ports <span class="keyword">port</span> <span class="number">488</span></div><div class="line">acl Safe_ports <span class="keyword">port</span> <span class="number">591</span></div><div class="line">acl Safe_ports <span class="keyword">port</span> <span class="number">777</span></div><div class="line">acl CONNECT method CONNECT</div><div class="line"><span class="comment"># acl CONNECT method GET</span></div><div class="line"><span class="comment"># acl CONNECT method POST</span></div><div class="line"><span class="comment"># acl CONNECT method PUT</span></div><div class="line"><span class="comment"># acl CONNECT method DELETE</span></div><div class="line"><span class="comment"># acl CONNECT method HEAD</span></div><div class="line"></div><div class="line">via <span class="keyword">on</span></div><div class="line">request_header_access X-Forwarded-For deny <span class="literal">all</span></div><div class="line">request_header_access user-agent  deny <span class="literal">all</span></div><div class="line">reply_header_access X-Forwarded-For deny <span class="literal">all</span></div><div class="line">reply_header_access user-agent  deny <span class="literal">all</span></div><div class="line">http_port <span class="number">2333</span></div><div class="line">http_access allow  <span class="literal">all</span></div><div class="line">access_log /var/<span class="keyword">log</span>/squid/access.<span class="keyword">log</span></div><div class="line">visible_hostname TD-LTE/FDD-LTE</div><div class="line">cache_mgr Welcome_to_use_OpenVPN</div></pre></td></tr></table></figure>
<p>开启和关闭squid服务的方法<br><code>service squid3 start/stop/restart/status</code></p>
<h2 id="给出一份openvpn客户端的配置文件"><a href="#给出一份openvpn客户端的配置文件" class="headerlink" title="给出一份openvpn客户端的配置文件"></a>给出一份openvpn<strong>客户端</strong>的配置文件</h2><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># client.ovpn</span></div><div class="line"><span class="meta"># 最下面3个标签里把你自己的证书文件内容复制进去替代TODO</span></div><div class="line"><span class="meta"># 免流代码即修改的HTTP头信息</span></div><div class="line">client</div><div class="line">dev tun</div><div class="line">proto tcp</div><div class="line">remote beim.site <span class="number">1194</span></div><div class="line">;remote my-server<span class="number">-2</span> <span class="number">1194</span></div><div class="line">resolv-retry infinite</div><div class="line">nobind</div><div class="line">persist-key</div><div class="line">persist-tun</div><div class="line">ns-cert-type server</div><div class="line">comp-lzo</div><div class="line">verb <span class="number">3</span></div><div class="line"></div><div class="line"><span class="meta">########免流代码########</span></div><div class="line">remote wap<span class="number">.10086</span>.cn <span class="number">80</span> tcp</div><div class="line">http-proxy-option EXT1 POST http:<span class="comment">//wap.10086.cn</span></div><div class="line">http-proxy-option EXT1 VPN <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">443</span></div><div class="line">http-proxy-option EXT1 POST http:<span class="comment">//wap.10086.cn</span></div><div class="line"><span class="meta"># http-proxy 10.0.0.172 80</span></div><div class="line">http-proxy beim.site <span class="number">138</span></div><div class="line"><span class="meta">########免流代码########</span></div><div class="line"></div><div class="line"><span class="meta"># &lt;http-proxy-user-pass&gt;</span></div><div class="line"><span class="meta"># lpss</span></div><div class="line"><span class="meta"># lpss</span></div><div class="line"><span class="meta"># &lt;/http-proxy-user-pass&gt;</span></div><div class="line"></div><div class="line"><span class="meta"># ca keys/ca.crt</span></div><div class="line">&lt;ca&gt;</div><div class="line"><span class="comment">// TODO</span></div><div class="line">&lt;/ca&gt;</div><div class="line"><span class="meta"># cert keys/laptop.crt</span></div><div class="line">&lt;cert&gt;</div><div class="line"><span class="comment">// TODO</span></div><div class="line">&lt;/cert&gt;</div><div class="line"><span class="meta"># key keys/laptop.key</span></div><div class="line">&lt;key&gt;</div><div class="line"><span class="comment">// TODO</span></div><div class="line">&lt;/key&gt;</div></pre></td></tr></table></figure>
<h2 id="再给出一份openvpn服务器的配置文件-大体上是没有什么问题的"><a href="#再给出一份openvpn服务器的配置文件-大体上是没有什么问题的" class="headerlink" title="再给出一份openvpn服务器的配置文件(大体上是没有什么问题的)"></a>再给出一份openvpn<strong>服务器</strong>的配置文件(大体上是没有什么问题的)</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">port <span class="number">1194</span></div><div class="line">proto tcp</div><div class="line">dev tun</div><div class="line">ca ./keys/ca<span class="selector-class">.crt</span></div><div class="line">cert ./keys/server<span class="selector-class">.crt</span></div><div class="line">key ./keys/server<span class="selector-class">.key</span></div><div class="line">dh ./keys/dh2048<span class="selector-class">.pem</span></div><div class="line">server <span class="number">10.8</span>.<span class="number">0.0</span> <span class="number">255.255</span>.<span class="number">255.0</span></div><div class="line">ifconfig-pool-persist ipp<span class="selector-class">.txt</span></div><div class="line">push <span class="string">"redirect-gateway def1 bypass-dhcp"</span></div><div class="line">push <span class="string">"dhcp-option DNS 8.8.8.8"</span></div><div class="line">duplicate-cn</div><div class="line">keepalive <span class="number">10</span> <span class="number">120</span></div><div class="line">comp-lzo</div><div class="line">max-clients <span class="number">10</span></div><div class="line">persist-key</div><div class="line">persist-tun</div><div class="line">status openvpn-status<span class="selector-class">.log</span></div><div class="line">log         openvpn<span class="selector-class">.log</span></div><div class="line">log-append  openvpn<span class="selector-class">.log</span></div><div class="line">verb <span class="number">3</span></div></pre></td></tr></table></figure>
<h2 id="操作方法"><a href="#操作方法" class="headerlink" title="操作方法"></a>操作方法</h2><p>配置文件都准备好以后，将openvpn和squid的服务都开启<br>将客户端的配置文件导入到客户端（如ios 的app ：openVPN (需要国外的apple id 才能下载)）<br>客户端连接代理，可以看到ip转换</p>
<h2 id="实验结果"><a href="#实验结果" class="headerlink" title="实验结果"></a>实验结果</h2><p>但是。。<br>不幸的是。。<br>实验失败 。。<br>虽然IP确实改变了，squid和openvpn的代理确实有效，但是流量依旧扣除了，说明免流的代码无效。<br>但是我在TB上买的免流代码是有效的，它的remote没有设置成自己的而是10086，HTTP-PROXY还是设置成自己的服务器。<br>把它的客户端配置文件贴出来</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># &lt;ca&gt;部分太长，我把它省略掉了，重点在免流代码</span></div><div class="line">client</div><div class="line">dev tun</div><div class="line">proto tcp</div><div class="line">keepalive <span class="number">10</span> <span class="number">120</span></div><div class="line">ns-cert-type server</div><div class="line">resolv-retry infinite</div><div class="line">nobind</div><div class="line">persist-key</div><div class="line">persist-tun</div><div class="line"><span class="comment">########免流代码########</span></div><div class="line">remote wap<span class="number">.10086</span>.cn <span class="number">80</span> tcp</div><div class="line"><span class="keyword">http</span>-proxy-option EXT1 POST <span class="keyword">http</span>://wap<span class="number">.10086</span>.cn</div><div class="line"><span class="keyword">http</span>-proxy-option EXT1 VPN <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">443</span></div><div class="line"><span class="keyword">http</span>-proxy-option EXT1 POST <span class="keyword">http</span>://wap<span class="number">.10086</span>.cn</div><div class="line"><span class="keyword">http</span>-proxy <span class="number">3.</span>love9999.top <span class="number">138</span></div><div class="line"><span class="comment">########免流代码########</span></div><div class="line"></div><div class="line">&lt;<span class="keyword">http</span>-proxy-user-pass&gt;</div><div class="line">lpss</div><div class="line">lpss</div><div class="line">&lt;/<span class="keyword">http</span>-proxy-user-pass&gt;</div><div class="line"></div><div class="line">&lt;ca&gt;<span class="comment"></span></div><div class="line">// TODO </div><div class="line">&lt;/ca&gt;</div><div class="line">auth-user-pass</div><div class="line">comp-lzo</div><div class="line">verb <span class="number">3</span></div></pre></td></tr></table></figure>
<p>我把remote和http-proxy分别设置成：</p>
<table>
<thead>
<tr>
<th>remote</th>
<th>http-proxy</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>myserver:1194(openvpn默认端口)</td>
<td>myserver:3128(squid默认端口)</td>
<td>连接成功，ip更改，流量照扣</td>
</tr>
<tr>
<td>myserver:1194</td>
<td>10.0.0.172:80</td>
<td>连接成功，ip更改，流量照扣</td>
</tr>
<tr>
<td>wap.10086.cn:80</td>
<td>myserver:3128</td>
<td>连接失败</td>
</tr>
<tr>
<td>wap.10086.cn:80</td>
<td>10.0.0.172:80</td>
<td>连接失败</td>
</tr>
</tbody>
</table>
<p>于是我尝试将http代理绑定到138端口，尝试了<code>squid</code>和<code>polipo</code>，均失败，而绑定到其他非常用端口如<code>2333</code>是可以的<br>下面是polipo的日志：</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Couldn<span class="symbol">'t</span> bind: Permission denied</div><div class="line">Couldn<span class="symbol">'t</span> establish listening socket: Permission denied</div></pre></td></tr></table></figure>
<hr>
<h1 id="实验2"><a href="#实验2" class="headerlink" title="实验2"></a>实验2</h1><p>于是我想起了我的老朋友 shadowsocks （socks5代理软件，有服务端和客户端，翻墙一直用它，稳定高速）<br><a href="https://github.com/shadowsocks/shadowsocks/blob/master/README.md" target="_blank" rel="external">shadowsocks usage</a></p>
<h2 id="操作方法-1"><a href="#操作方法-1" class="headerlink" title="操作方法"></a>操作方法</h2><p>在服务器上执行命令,开启<code>shadowsocks 服务器</code><br><code>sudo ssserver -p 138 -k password -m aes-256-cfb -d start</code></p>
<p>在客户端进行连接（ios 上有surge（￥328）和<code>shadowrocket</code> ，安卓上有shadowsocks ）</p>
<p>然后。。就。。成功。。了。。吧。。</p>
<hr>
<h2 id="实验结果-1"><a href="#实验结果-1" class="headerlink" title="实验结果"></a>实验结果</h2><p>日期：<code>2016-12-10</code><br>地区：<code>哈尔滨</code><br>连接shadowsocks一个多小时，<br>测试：网页，QQ，微信，bilibili直播，bilibili视频（这个比较慢原因未知），斗鱼直播，微云下载。<br>除了b站视频以外，其他的体验都和正常4g相同。</p>
<p>经过代理的流量<strong>125.19M</strong><br>实际扣除的流量为<strong>0.09M</strong>(可能是某些shadowsocks 所不能处理的协议)</p>
<p>如图<br><img src="http://ob4a6y748.bkt.clouddn.com/ml1-IMG_3921.PNG" alt="图片"><br><img src="http://ob4a6y748.bkt.clouddn.com/ml2-IMG_3922.PNG" alt="图片"><br><img src="http://ob4a6y748.bkt.clouddn.com/ml-IMG_3920.PNG" alt="图片"></p>
<hr>
<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>好奇为主，免流为次<br>且用且珍惜</p>
<hr>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="http://www.wooyun.org/bugs/wooyun-2010-0176249" target="_blank" rel="external">乌云提交云免流漏洞</a><br><a href="http://blog.lanyus.com/archives/248.html" target="_blank" rel="external">深入分析免流(非小白教程)</a><br><a href="https://github.com/shadowsocks/shadowsocks/blob/master/README.md" target="_blank" rel="external">shadowsocks wiki - github</a></p>
<hr>
<h1 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h1><p>手机上<code>shadowrocket</code> 连了一整天没断<br>在手机亮屏的时候, 流量是完全不会扣的<br>黑屏的时候会扣少量流量, 可能是系统推送服务的, 一小时也不到0.1M, 可以忽略</p>
<p>手机用<code>shadowrocket</code> 连接, 开热点, 电脑连接热点,<br>可以连接成功, 但是电脑不能上网, 原因未知.</p>
<p>手机不连接代理, 开热点, 电脑用<code>shadowsocks</code> 连接代理服务器, 并连接手机热点,<br>手机电脑都可以上网<br>手机走的流量会正常扣除<br>电脑上通过代理的流量免费, 没通过代理的流量正常扣除</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[服务学概论第二次作业]]></title>
      <url>https://beim.github.io/2016/12/08/%E6%9C%8D%E5%8A%A1%E5%AD%A6%E6%A6%82%E8%AE%BA%E7%AC%AC%E4%BA%8C%E6%AC%A1%E4%BD%9C%E4%B8%9A/</url>
      <content type="html"><![CDATA[<h1 id="1-Big-Data-Sensing-and-Services-A-Tutorial"><a href="#1-Big-Data-Sensing-and-Services-A-Tutorial" class="headerlink" title="1. Big Data Sensing and Services: A Tutorial"></a>1. Big Data Sensing and Services: A Tutorial</h1><h2 id="1-1-文章重点内容"><a href="#1-1-文章重点内容" class="headerlink" title="1.1. 文章重点内容"></a>1.1. 文章重点内容</h2><h3 id="1-1-1-big-data-sensing-是什么"><a href="#1-1-1-big-data-sensing-是什么" class="headerlink" title="1.1.1. big data sensing 是什么"></a>1.1.1. big data sensing 是什么</h3><p>big data sensing 包含大数据计算和服务；传感器云计算和服务；传感器和传感器网络。</p>
<p>big data sensing 为不同的应用程序提供了按需分配的灵活的大数据分析服务。</p>
<hr>
<h3 id="1-1-2-big-data-sensing-and-service-架构（自底向上）"><a href="#1-1-2-big-data-sensing-and-service-架构（自底向上）" class="headerlink" title="1.1.2. big data sensing and service 架构（自底向上）"></a>1.1.2. big data sensing and service 架构（自底向上）</h3><ul>
<li><p>资源池（包含传感器，传感器网络，存储和计算服务，网络）</p>
</li>
<li><p>网络基础设施（无线网络和因特网）</p>
</li>
<li><p>业务服务模型</p>
</li>
<li><p>部署模型（包含四种不同的部署模型：私有的大数据传感；公开的大数据传感；社区大数据传感；混合大数据传感）</p>
</li>
</ul>
<hr>
<h3 id="1-1-3-big-data-sensing-的特点"><a href="#1-1-3-big-data-sensing-的特点" class="headerlink" title="1.1.3. big data sensing 的特点"></a>1.1.3. big data sensing 的特点</h3><ul>
<li>大数据传感云</li>
<li>自动数据传感预测</li>
<li>大数据传感安全</li>
<li>按需数据传感服务</li>
<li>可扩展的数据传感</li>
<li>服务的监控，测量和计费</li>
<li>多租户的接入和服务</li>
<li>大数据手机和管理</li>
<li>大数据传感的虚拟化</li>
</ul>
<a id="more"></a>
<hr>
<h3 id="1-1-4-big-data-sensing-and-services-的研究内容"><a href="#1-1-4-big-data-sensing-and-services-的研究内容" class="headerlink" title="1.1.4. big data sensing and services 的研究内容"></a>1.1.4. big data sensing and services 的研究内容</h3><ul>
<li>大数据传感资源层（提供硬件资源：传感器和传感器网络，因特网和移动网络，用于计算的服务器，用于数据存储的服务器）</li>
<li>大数据传感基础设施层（提供基于云的虚拟化的传感器设施）</li>
<li>大数据传感服务层（提供三种服务：传感数据服务，传感数据平台服务，传感数据分析服务）</li>
<li>大数据传感应用服务层（提供面向传感器的应用程序）</li>
</ul>
<hr>
<h3 id="1-1-5-big-data-sensing-service-的分类"><a href="#1-1-5-big-data-sensing-service-的分类" class="headerlink" title="1.1.5. big data sensing service 的分类"></a>1.1.5. big data sensing service 的分类</h3><h4 id="1-1-5-1-SIaaS-Sensor-cloud-Infrastructure-as-a-Service"><a href="#1-1-5-1-SIaaS-Sensor-cloud-Infrastructure-as-a-Service" class="headerlink" title="1.1.5.1. SIaaS(Sensor cloud Infrastructure as a Service)"></a>1.1.5.1. SIaaS(Sensor cloud Infrastructure as a Service)</h4><p>传感器云基础设施即服务，它提供给用户一个虚拟化的传感设施作为服务。<br>传感器云是一个传感器数据存储，虚拟化和管理平台，它通过云计算技术提供可扩展性的数据，快速可视化和用户可编程的分析。通过传感器云服务可以为多租户提供虚拟化的传感器基础设施，使用按需付费的付费模型。 它的主要目标是通过减少支出来增加传感器的共享和使用。</p>
<p>传感器云提供了以下四种功能性服务：</p>
<ul>
<li>获取： 这个服务使用REST API直接将聚合的无线传感器数据上传到云数据存储中。</li>
<li>可视化：将之前上传到传感器云的数据可视化。因为实际的传感器有不同的类型，部署在不同的位置，为了让客户端能无视传感器的物理位置和传感器网络的细节，需要将传感器云上的数据进行可视化。</li>
<li>监控：用户可以自定义对数据的监控提醒。</li>
<li>分析：这项服务帮助用户使用开放数据分析应用来分析预处理数据。用户可以自定义接口，对数据进行过滤。</li>
</ul>
<hr>
<h4 id="1-1-5-2-SDaaS-Sensing-Data-Service-as-a-Service"><a href="#1-1-5-2-SDaaS-Sensing-Data-Service-as-a-Service" class="headerlink" title="1.1.5.2. SDaaS(Sensing Data Service as a Service)"></a>1.1.5.2. SDaaS(Sensing Data Service as a Service)</h4><p>传感数据即服务。<br>SDaaS指一个线上的传感数据服务系统。这个系统基于传感器云基础设施和环境，提供多种传感器数据收集，存储，管理和传输服务。它的主要目标是为租户和应用程序提供一个中心化的接口，使租户和应用可以获取基于传感器的数据而不需要考虑传感器网络和传感器云的细节。这些数据服务可以采用按需付费的模式，根据不同的请求来做出相应的回应。</p>
<p><code>数据传感服务</code>需要考虑以下几个问题：</p>
<ul>
<li>数据传感模式：有两种支持数据传感操作的模式，（1）实时动态和（2）静态分批次操作。</li>
<li>数据感知频次和大小：这些对用户和数据的处理和存储来说都是重要的参数。为不同的租户提供不同的数据感知频次和大小需要对数据集合，数据存储和传感器虚拟化进行特殊的处理。</li>
<li>不同的传感器的数据类型：在传感器云中，不同的传感器和传感器网络通常在物理层面进行连接，因此它们可能使用不同的数据类型。</li>
<li>传感数据传输：和无线传感器网络类似，大数据感知必须支持在传感器/传感器网络和后端服务器和数据存储之间的数据传输。数据的传输有两种模型：a）同步模型，传感器实时动态地传输；b）异步模型，数据异步地进行收集。</li>
</ul>
<p><strong>服务模型</strong>：对于大数据感知服务，云计算和无线传感器网络是两个主要的服务。该服务模型关注对于终端用户的服务可用性。每个服务提供者都为请求者提供一个服务目录的模板，请求者可以根据他们的需要来配置服务。因此每个服务实体都会根据它们选择的服务模板来生成。这种方法可以很好的满足不同用户对不同服务的需求。</p>
<p><strong>数据存储服务</strong>：面向传感器的数据服务是大数据感知中的另一个关键服务。因为该服务需要在物理层面与传感器和传感器网络进行连接，通过大数据技术和设施存取。由于不同的传感器网络可能使用不同的协议，数据格式和数据结构；不同的用户对于传感服务的数据有不同的要求，因此这些问题需要由该服务来解决。</p>
<p><strong>服务计费</strong>：在大数据感知中，传感器数据是对用于有价值的资源。因此需要针对不同的业务采用不同的计费模型。</p>
<hr>
<h4 id="1-1-5-3-DSPaaS-Data-Sensing-Platform-as-a-Service"><a href="#1-1-5-3-DSPaaS-Data-Sensing-Platform-as-a-Service" class="headerlink" title="1.1.5.3. DSPaaS(Data Sensing Platform as a Service)"></a>1.1.5.3. DSPaaS(Data Sensing Platform as a Service)</h4><p>数据传感平台即服务<br>DSPaaS指的是一个给用户提供开发模式和工具，允许用户开发，部署和托管面向传感器的数据服务应用的服务平台。</p>
<hr>
<h3 id="1-1-6-big-data-sensing-service-存在的问题"><a href="#1-1-6-big-data-sensing-service-存在的问题" class="headerlink" title="1.1.6. big data sensing service 存在的问题"></a>1.1.6. big data sensing service 存在的问题</h3><ul>
<li>传感网络的多样性</li>
<li>缺乏标准</li>
<li>缺乏低成本的数据安全和隐私的解决方法</li>
<li>多租户的按需服务</li>
<li>数据传感和分析服务的质量保证</li>
</ul>
<hr>
<h2 id="1-2-文章观点的分析"><a href="#1-2-文章观点的分析" class="headerlink" title="1.2. 文章观点的分析"></a>1.2. 文章观点的分析</h2><h3 id="1-2-1-赞同-计费模式"><a href="#1-2-1-赞同-计费模式" class="headerlink" title="1.2.1. 赞同 计费模式"></a>1.2.1. <em>赞同</em> 计费模式</h3><p>文中提到传感器的数据服务采用按需付费的计费模式或者是订阅模式，我认为按需付费模式是更加合理的。<br>对于用户来说，传感器的数据，面向传感器数据的分析计算服务，传感器的监控提醒服务等都是有价值的资源。而这些资源，根据传感器的位置不同，传感器数据的收集频次不同，数据量，媒体类型和数据管理方法不同，所产生的成本和价值不同，用户对它们的需求也是不同的。因此需要有合理的按需付费的计费模式，让用户自由组合所需要的服务，通过参数来配置服务类型，从而获取相应的服务。这么做不仅节省了成本，也减少了资源的浪费。</p>
<h3 id="1-2-2-赞同-数据可视化"><a href="#1-2-2-赞同-数据可视化" class="headerlink" title="1.2.2. 赞同 数据可视化"></a>1.2.2. <em>赞同</em> 数据可视化</h3><p>文中提到数据的可视化服务，即将上传到传感器云的数据进行可视化。<br>由于实际的传感器部署的方式不同，所在的位置，传感器网络，和它们收集到的数据格式不同，因此为了让用户对一个虚拟的传感器组的数据进行使用，而不需要考虑以上物理的差异性，需要对传感器的数据进行可视化。</p>
<hr>
<h1 id="2-From-Big-Data-to-Big-Service"><a href="#2-From-Big-Data-to-Big-Service" class="headerlink" title="2. From Big Data to Big Service"></a>2. From Big Data to Big Service</h1><h2 id="2-1-文章重点内容"><a href="#2-1-文章重点内容" class="headerlink" title="2.1. 文章重点内容"></a>2.1. 文章重点内容</h2><h3 id="2-1-1-大服务的特征"><a href="#2-1-1-大服务的特征" class="headerlink" title="2.1.1. 大服务的特征"></a>2.1.1. 大服务的特征</h3><p>大服务的七种特征</p>
<ul>
<li>质量</li>
<li>异质性</li>
<li>复杂性</li>
<li>融合</li>
<li>客户关注</li>
<li>信誉</li>
<li>价值</li>
</ul>
<p>大服务是顾客导向的，当它收到顾客的请求时，它根据需要创建组合的服务，将服务资源合并以满足服务任务的需求。同时，在用户的需求变更时，这些组合的服务也会进行相应的调整。</p>
<hr>
<h3 id="2-1-2-大服务的参考架构"><a href="#2-1-2-大服务的参考架构" class="headerlink" title="2.1.2. 大服务的参考架构"></a>2.1.2. 大服务的参考架构</h3><p>三层架构：</p>
<ul>
<li>本地服务</li>
<li>领域导向服务</li>
<li>需求导向服务</li>
</ul>
<p><strong>本地服务层</strong>中，使用服务封装和虚拟化，将基础服务设施封装成服务。这些封装后的原子性服务和组合的服务，可以通过服务链进行互连和整合，然后运行在云平台上。</p>
<p><strong>领域导向服务层</strong>中，根据不同领域的业务需求和实际业务关系，将本地服务整合成更强大的组合服务。</p>
<p><strong>需求导向服务</strong>中，服务方案是面向顾客，价值驱动的，因为用户的需求是因人而异，个性化的。</p>
<hr>
<h3 id="2-1-3-大服务研究主题"><a href="#2-1-3-大服务研究主题" class="headerlink" title="2.1.3. 大服务研究主题"></a>2.1.3. 大服务研究主题</h3><ul>
<li>系统架构</li>
<li>复杂服务建模和表现</li>
<li>新服务工程和方法论范式</li>
<li>服务组合和写作</li>
<li>服务价值模型和转换</li>
<li>上下文相关的服务构成和交付</li>
<li>服务智能推荐</li>
<li>服务可靠性和可信度</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[1997-安娜·卡列尼娜]]></title>
      <url>https://beim.github.io/2016/12/02/1997-%E5%AE%89%E5%A8%9C%C2%B7%E5%8D%A1%E5%88%97%E5%B0%BC%E5%A8%9C/</url>
      <content type="html"><![CDATA[<p><img src="http://ob4a6y748.bkt.clouddn.com/anklnn-p2321150779.jpg" alt="title"></p>
<blockquote>
<p>死时还未懂得爱的真谛，那就比死亡本身更可怕了。</p>
</blockquote>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[说谎的女人-苏菲·玛索]]></title>
      <url>https://beim.github.io/2016/12/01/%E8%AF%B4%E8%B0%8E%E7%9A%84%E5%A5%B3%E4%BA%BA-%E8%8B%8F%E8%8F%B2%C2%B7%E7%8E%9B%E7%B4%A2/</url>
      <content type="html"><![CDATA[<p><img src="http://ob4a6y748.bkt.clouddn.com/shdnr-1140806153.jpg" alt="title"></p>
<blockquote>
<p>我是撒谎大王。撒的谎天衣无缝。时不时的，一天几次，事先想好或者不假思索，出于本能或不顾羞耻，我瞪着又圆又亮的眼睛撒谎。</p>
</blockquote>
<a id="more"></a>
<hr>
<blockquote>
<p>他们说话，是免得冷场；冷场，就不自在，像烈酒流过喉咙，烧灼胸口。</p>
</blockquote>
<hr>
<blockquote>
<p>回忆，傲慢而固执，紧拽不放，在我拥抱男友的半秒钟里闪回，我的心都揪紧了。</p>
<p>生活现在自行行进。像带轮子的布景，经过同样的街角，同样的广场，同样的教室，同样的花园。车轮上足了油，我毋需费什么力，所该惋惜的，是错过了人生的驿站。</p>
</blockquote>
<hr>
<blockquote>
<p>各人有各人的生活，各人都自成一格又独一无二。最终都是一个零，都是孤立无援的伟大的零。</p>
</blockquote>
<hr>
<blockquote>
<p>你走之前，碰了哪个插头，什么都开不亮。</p>
</blockquote>
<hr>
<blockquote>
<p>守护神我尽量躲着，不去理会。能溜则溜，能逃则逃。然而，一旦生活拽住我，我就摇身一变，只是真相自会显现。我不喜欢讲自己`这是我最大的谎言，也是我最妙的秘密。</p>
</blockquote>
<hr>
<p>一个人即使撒谎，一写下来，还是暴露了自己。</p>
<hr>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2011-萤火之森]]></title>
      <url>https://beim.github.io/2016/12/01/2011-%E8%90%A4%E7%81%AB%E4%B9%8B%E6%A3%AE/</url>
      <content type="html"><![CDATA[<p><img src="http://ob4a6y748.bkt.clouddn.com/yhzs-0.jpg" alt="title"></p>
<blockquote>
<p>我啊，已经等不及夏天的到来了。</p>
</blockquote>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2010-遭遇陌生人]]></title>
      <url>https://beim.github.io/2016/11/29/2010-%E9%81%AD%E9%81%87%E9%99%8C%E7%94%9F%E4%BA%BA/</url>
      <content type="html"><![CDATA[<p><img src="http://ob4a6y748.bkt.clouddn.com/zymsr-p864586568.jpg" alt="title"></p>
<blockquote>
<p>喧嚣和躁动的生活</p>
</blockquote>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[1980-初吻]]></title>
      <url>https://beim.github.io/2016/11/26/1980-%E5%88%9D%E5%90%BB/</url>
      <content type="html"><![CDATA[<p><img src="http://ob4a6y748.bkt.clouddn.com/cw-p614899172.jpg" alt="t"></p>
<blockquote>
<p>苏菲玛索</p>
</blockquote>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[安德的游戏-奥森·斯科特·卡德]]></title>
      <url>https://beim.github.io/2016/11/26/%E5%AE%89%E5%BE%B7%E7%9A%84%E6%B8%B8%E6%88%8F-%E5%A5%A5%E6%A3%AE%C2%B7%E6%96%AF%E7%A7%91%E7%89%B9%C2%B7%E5%8D%A1%E5%BE%B7/</url>
      <content type="html"><![CDATA[<p><img src="http://1.im.guokr.com/Q0a7VCCxyh8bzJtJH35Nu3g5bVvETfk8J38me8HeAuOAAgAA4AEAAEpQ.jpg" alt="title"></p>
<blockquote>
<p>你年轻，聪明，而且不计后果。这就是你出生的目的。</p>
</blockquote>
<a id="more"></a>
<blockquote>
<p>我痛苦地过了一生，一旦没有痛苦，我就不知道自己是谁。</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[命令行传输文件]]></title>
      <url>https://beim.github.io/2016/11/25/%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6/</url>
      <content type="html"><![CDATA[<h1 id="scp"><a href="#scp" class="headerlink" title="scp"></a>scp</h1><p>在linux下一般用scp这个命令来通过ssh传输文件。</p>
<p>1、从服务器上下载文件<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">scp username<span class="variable">@servername:</span>/path/filename /var/www/local_dir（本地目录）</div><div class="line"></div><div class="line"> 例如scp root<span class="variable">@192</span>.<span class="number">168.0</span>.<span class="number">101</span>:/var/www/test.txt  把<span class="number">192.168</span>.<span class="number">0.101</span>上的/var/www/test.txt 的文件下载到/var/www/local_dir（本地目录）</div></pre></td></tr></table></figure></p>
<p>2、上传本地文件到服务器<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">scp /path/filename username<span class="variable">@servername</span><span class="symbol">:/path</span>   </div><div class="line"></div><div class="line">例如scp /var/www/test.php  root<span class="variable">@192</span>.<span class="number">168.0</span>.<span class="number">101</span><span class="symbol">:/var/www/</span>  把本机/var/www/目录下的test.php文件上传到<span class="number">192.168</span>.<span class="number">0</span>.<span class="number">101</span>这台服务器上的/var/www/目录中</div></pre></td></tr></table></figure></p>
<p>3、从服务器下载整个目录<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">scp -r username<span class="variable">@servername:</span>/var/www/remote_dir/（远程目录） /var/www/local_dir（本地目录）</div><div class="line"></div><div class="line">例如:scp -r root<span class="variable">@192</span>.<span class="number">168.0</span>.<span class="number">101</span>:/var/www/test  /var/www/</div></pre></td></tr></table></figure></p>
<p>4、上传目录到服务器<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">scp  -r local_dir username<span class="variable">@servername:</span>remote_dir</div><div class="line"></div><div class="line">例如：scp -r test  root<span class="variable">@192</span>.<span class="number">168.0</span>.<span class="number">101</span>:/var/www/   把当前目录下的test目录上传到服务器的/var/www/ 目录</div></pre></td></tr></table></figure></p>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ubuntu下mongodb安装使用]]></title>
      <url>https://beim.github.io/2016/11/24/ubuntu%E4%B8%8Bmongodb%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p><a href="https://docs.mongodb.com/master/tutorial/install-mongodb-on-ubuntu/?_ga=1.183956006.1858520870.1479944396" target="_blank" rel="external">官网链接</a></p>
<blockquote>
<p>Ubuntu16的systemd启动服务在<code>/lib/systemd/system/mongod.service</code><br>MongoDB数据存储在 <code>/var/lib/mongodb</code><br>日志文件在 <code>/var/log/mongodb</code><br>配置文件在 <code>/etc/mongod.conf</code></p>
</blockquote>
<h1 id="security"><a href="#security" class="headerlink" title="security"></a>security</h1><p><a href="https://docs.mongodb.com/manual/tutorial/enable-authentication/" target="_blank" rel="external">开启认证</a><br>在<code>/etc/mongod.conf</code>中增加<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">security:</span></div><div class="line"><span class="symbol">  authorization:</span> enabled</div></pre></td></tr></table></figure></p>
<p><a href="https://docs.mongodb.com/manual/reference/method/db.createUser/" target="_blank" rel="external">增加用户</a></p>
<blockquote>
<p>提示: shell下登陆后切换到对应的db进行auth, 在哪个db创建的用户就在哪个db进行auth<br>show users<br>db.auth<br>db.createUser<br>db.dropUser</p>
</blockquote>
<p>登陆<br><code>mongo dbName -u username -p password</code></p>
<h1 id="others"><a href="#others" class="headerlink" title="others"></a>others</h1><p><a href="http://chenzhou123520.iteye.com/blog/1634676" target="_blank" rel="external">mongod 后台启动</a> <code>mongod --fork --syslog</code></p>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[seafile-搭建私人网盘]]></title>
      <url>https://beim.github.io/2016/11/23/seafile-%E6%90%AD%E5%BB%BA%E7%A7%81%E4%BA%BA%E7%BD%91%E7%9B%98/</url>
      <content type="html"><![CDATA[<p><img src="http://ob4a6y748.bkt.clouddn.com/seafile-2016-11-23%2010-04-44%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="效果图"></p>
<p><a href="https://www.seafile.com/download/" target="_blank" rel="external">官网下载</a></p>
<p><a href="http://www.jianshu.com/p/d7635d0ecfbd" target="_blank" rel="external">搭建教程</a></p>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ubuntu下安装chromium]]></title>
      <url>https://beim.github.io/2016/11/14/ubuntu%E4%B8%8B%E5%AE%89%E8%A3%85chromium/</url>
      <content type="html"><![CDATA[<h1 id="chromium"><a href="#chromium" class="headerlink" title="chromium"></a>chromium</h1><h2 id="下载chromium"><a href="#下载chromium" class="headerlink" title="下载chromium"></a>下载chromium</h2><p>从<a href="https://github.com/scheib/chromium-latest-linux" target="_blank" rel="external">github</a>上下载这几个脚本<br>放置在<code>/usr/local/src/</code>目录下</p>
<p>运行<code>./update.sh</code><br>此时将最新版本的chromium下载到了<code>/usr/local/src/chromium-latest-linux/latest</code>目录下</p>
<h2 id="设置别名"><a href="#设置别名" class="headerlink" title="设置别名"></a>设置别名</h2><p><code>vi ~/.bashrc</code><br>在最后添加<br><code>alias chromium=&#39;/usr/local/src/chromium-latest-linux/run.sh&#39;</code></p>
<p>这时在终端中输入<code>chromium</code>即可打开chromium浏览器</p>
<h2 id="更新chromium"><a href="#更新chromium" class="headerlink" title="更新chromium"></a>更新chromium</h2><p>只需要再运行<code>chromium-latest-linux</code>目录下的<code>update.sh</code>脚本就可以了</p>
<h2 id="更改desktop下的chromium"><a href="#更改desktop下的chromium" class="headerlink" title="更改desktop下的chromium"></a>更改desktop下的chromium</h2><p><code>~/.local/share/applications</code>下找<code>chromium-browser.desktop</code>文件, 看其中的参数是否和安装的<code>run.sh</code>中的参数相同</p>
<a id="more"></a>
<hr>
<h1 id="flash"><a href="#flash" class="headerlink" title="flash"></a>flash</h1><h2 id="下载adobe-flash"><a href="#下载adobe-flash" class="headerlink" title="下载adobe flash"></a>下载adobe flash</h2><p>从<a href="https://get.adobe.com/cn/flashplayer/?no_redirect" target="_blank" rel="external">flash 官网</a>下载合适版本的flash<br>解压到<code>/usr/local/src/chromium-latest-linux/flash</code>目录下<br>将其中的<code>libpepflashplayer.so</code>复制到<code>/usr/local/src/chromium-latest-linux/latest</code>目录下</p>
<h2 id="启用flash"><a href="#启用flash" class="headerlink" title="启用flash"></a>启用flash</h2><p>修改<code>run.sh</code>, <code>vi ./run.sh</code><br>将其中的<code>$BASEDIR/latest/chrome --user-data-dir=&quot;$BASEDIR/user-data-dir&quot; $* &amp;&gt; /dev/null &amp;</code><br>改为<code>$BASEDIR/latest/chrome --ppapi-flash-path=&quot;$BASEDIR/latest/libpepflashplayer.so&quot; --user-data-dir=&quot;$BASEDIR/user-data-dir&quot; $* &amp;&gt; /dev/null &amp;</code></p>
<p>打开chromium, 进入<code>chrome://plugins</code>, 找到<code>Adobe Flash Player</code>, 点击<code>允许始终运行</code></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[计网实验准备]]></title>
      <url>https://beim.github.io/2016/11/08/%E8%AE%A1%E7%BD%91%E5%AE%9E%E9%AA%8C%E5%87%86%E5%A4%87/</url>
      <content type="html"><![CDATA[<h1 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a><strong>实验目的</strong></h1><p>(1)按照图 4-1 所示,将网络设备用适当的线路连接好,注意 console 控制线和双绞<br>线不要混淆。<br>(2)通过“超级终端”软件连接到路由器或交换机的控制口,进入 IOS 系统。初步了<br>解 IOS 系统特性,为路由器或交换机配置名称、密码等,启用 telnet 服务,使以后的配置可<br>以通过 telnet 方式进行。<br>(3)通过 telnet 方式进入 IOS 的 CLI 配置界面,分别对三台网络设置进行适当的配置,<br>使局域网的四台计算机可以互相 ping 通。</p>
<h1 id="实验说明"><a href="#实验说明" class="headerlink" title="实验说明"></a><strong>实验说明</strong></h1><ul>
<li>本次实验划分了4个子网，分别为192.168.1.0/24,  2.2.2.0/24,  1.1.1.0/24,  202.118.232.0/24</li>
<li>PC1, PC2, PC3, PC4均处于单独的冲突域中，因为它们都通过网络设备(交换机和三层交换机)隔开了，只有共享介质的设备(通过集线器连接)才处于同一冲突域。</li>
<li>PC1和PC2在同一广播域，因为他们通过二层交换机相连，处于同一子网。PC3和PC4分别在单独的广播域中，因为他们处于不同的子网。</li>
</ul>
<h1 id="直通线和交叉线的区别"><a href="#直通线和交叉线的区别" class="headerlink" title="直通线和交叉线的区别"></a><strong>直通线和交叉线的区别</strong></h1><p>直通线，两端线序一样。<br>交叉线，一端为直通线的线序，另一端为白绿，绿，白橙，蓝，白蓝，橙，白棕，棕。<br>同种类型设备之间使用交叉线连接, 不同类型设备使用直通连接. <a href="http://www.360doc.com/content/10/0910/18/3266301_52693210.shtml" target="_blank" rel="external">http://www.360doc.com/content/10/0910/18/3266301_52693210.shtml</a></p>
<h1 id="telnet-和超级终端"><a href="#telnet-和超级终端" class="headerlink" title="telnet 和超级终端"></a><strong>telnet 和超级终端</strong></h1><p>通过telnet设置交换机是通过网络登录交换机，也叫带内管理，要求先配置交换机能登录及你电脑能通过网络连接访问到交换机。通过超级终端配置是电脑com口连接交换机console设置，不需要通过网络连接，故叫带外管理。通常初始设置要通过超级终端设置，设置好了后就可以通过telnet设置了。</p>
<a id="more"></a>
<h1 id="vlan"><a href="#vlan" class="headerlink" title="vlan"></a><strong>vlan</strong></h1><p>创建vlan(检查配置 show vlan)<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># vlan database <span class="comment">// 建立vlan</span></span></div><div class="line">(vlan)<span class="meta"># vlan vlan-num name vlan-name <span class="comment">// 给vlan命名, 编号为vlan-num, 名称为vlan-name</span></span></div><div class="line">(vlan)<span class="meta"># exit</span></div><div class="line"><span class="comment">// # no vlan vlan-num // 删除vlan 20</span></div><div class="line"></div><div class="line"><span class="comment">// 进入接口, 为接口分配vlan</span></div><div class="line"><span class="meta"># configure terminal</span></div><div class="line">(<span class="built_in">config</span>)<span class="meta"># interface interfaceName module/number </span></div><div class="line"><span class="comment">// (config)# interface fastEthernet 0/0 // 进入接口快速以太网0槽位的0号端口</span></div><div class="line">(<span class="built_in">config</span>-<span class="built_in">if</span>)<span class="meta"># switchport mode access <span class="comment">// 设置端口为access 模式, 交换机的端口模式分为access, trunk, multi模式, 默认情况是access模式.</span></span></div><div class="line">(<span class="built_in">config</span>-<span class="built_in">if</span>)<span class="meta"># switchport access vlan vlan-num <span class="comment">// 将端口分配给vlan-num对应的vlan</span></span></div><div class="line"><span class="comment">// (config-if)# switchport access vlan 2 // 将端口映射到 Vlan 2</span></div><div class="line"><span class="comment">// # show interface f0/0 // 查看快速以太网0/0端口的信息</span></div><div class="line">(<span class="built_in">config</span>-<span class="built_in">if</span>)<span class="meta"># end</span></div><div class="line"></div><div class="line"><span class="meta"># configure terminal</span></div><div class="line">(<span class="built_in">config</span>)<span class="meta">#interface range fastEthernet 0/6-10 <span class="comment">// 选择接口0模块的6-10模块</span></span></div><div class="line">(<span class="built_in">config</span>-<span class="built_in">if</span>)<span class="meta"># switchport mode access <span class="comment">// 将交换机端口模式设置为access模式</span></span></div><div class="line">(<span class="built_in">config</span>-<span class="built_in">if</span>)<span class="meta"># swtichport access vlan 10 <span class="comment">// 将0模块的6-10端口划分为vlan10</span></span></div><div class="line">(<span class="built_in">config</span>-<span class="built_in">if</span>)<span class="meta"># exit</span></div><div class="line"><span class="meta"># configure terminal</span></div><div class="line">(<span class="built_in">config</span>)<span class="meta"># interface fastEthernet 0/11-15</span></div><div class="line">(<span class="built_in">config</span>-<span class="built_in">if</span>)<span class="meta"># switchport mode access</span></div><div class="line">(<span class="built_in">config</span>-<span class="built_in">if</span>)<span class="meta"># switchport access vlan 20</span></div><div class="line">(<span class="built_in">config</span>-<span class="built_in">if</span>)<span class="meta"># exit</span></div></pre></td></tr></table></figure></p>
<p><code>no switchport</code>(把物理端口变成三层口, 即把三层口当成路由器上的口, 当将一个端口配置成三层端口之后, 就可以在此端口上分配IP地址了)<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># configure terminal</span></div><div class="line">(<span class="built_in">config</span>)<span class="meta"># interface gigabitethernet 0/2</span></div><div class="line">(<span class="built_in">config</span>-<span class="built_in">if</span>)<span class="meta"># no switchport</span></div><div class="line">(<span class="built_in">config</span>-<span class="built_in">if</span>)<span class="meta"># ip address 192.20.135.21 255.255.255.0 <span class="comment">// 配置ip地址</span></span></div><div class="line">(<span class="built_in">config</span>-<span class="built_in">if</span>)<span class="meta"># no shutdown <span class="comment">// 激活接口</span></span></div><div class="line">(<span class="built_in">config</span>-<span class="built_in">if</span>)<span class="meta"># end</span></div></pre></td></tr></table></figure></p>
<p>show interfaces [interface-id] switchport // 显示二层端口的状态, 可以用来决定此口是否为二层或三层口<br><code># show interfaces fastethernet 0/1 swtichport</code></p>
<p><code>在三层交换机上开启路由功能</code><br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># configure terminal</div><div class="line">(config)# ip routing <span class="comment">// 开启路由</span></div><div class="line"></div><div class="line"># configure terminal</div><div class="line">(config)# ip route <span class="number">192.168</span><span class="number">.0</span><span class="number">.0</span> <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.252</span> <span class="comment">// 设置子网掩码,网关</span></div><div class="line">(config)# ip route <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span> <span class="number">202.118</span><span class="number">.232</span><span class="number">.254</span> <span class="comment">// 设置缺省路由</span></div></pre></td></tr></table></figure></p>
<p><img src="http://www.cisco.com/image/gif/paws/41860/howto_3550_intervlanrouting.gif" alt="cisco"></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JS-for-in遍历和prototype]]></title>
      <url>https://beim.github.io/2016/11/04/JS-for-in%E9%81%8D%E5%8E%86%E5%92%8Cprototype/</url>
      <content type="html"><![CDATA[<pre><code>for (let i in arr) 
</code></pre><p>会将原型链上面的属性也一一遍历<br>所以在这时候修改 <code>Array.prototype</code><br>如</p>
<pre><code>Array.prototype.top = () =&gt; {...}
</code></pre><p>则i会遍历到top属性</p>
<p>= = 被这个略坑了一把</p>
<p>以后要注意不要扩展内置类型的原型, 或者for in 遍历时使用hasOwnProperty 进行筛选</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Enumerability_and_ownership_of_properties" target="_blank" rel="external">MDN-属性的可枚举性和所有权</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[修改next主题]]></title>
      <url>https://beim.github.io/2016/11/02/%E4%BF%AE%E6%94%B9next%E4%B8%BB%E9%A2%98/</url>
      <content type="html"><![CDATA[<h1 id="自定义css"><a href="#自定义css" class="headerlink" title="自定义css"></a>自定义css</h1><p>下面目录是为自定义css 文件准备<br>    themes/next/source/css/_custom/</p>
<h1 id="自定义js"><a href="#自定义js" class="headerlink" title="自定义js"></a>自定义js</h1><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">$ <span class="keyword">cd</span> themes/<span class="keyword">next</span>/layout/_scripts</div><div class="line"></div><div class="line">$ <span class="built_in">mkdir</span> myscript</div><div class="line"></div><div class="line">$ touch myscript/myscript.swig</div><div class="line"></div><div class="line">$ <span class="keyword">vi</span> myscript/myscript.swig</div><div class="line">添加  &lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span> src=<span class="string">"/js/src/beim/test.js"</span>&gt;&lt;/script&gt;</div><div class="line"></div><div class="line">$ <span class="keyword">vi</span> themes/<span class="keyword">next</span>/layout/_layout.swig</div><div class="line">添加 &#123;% include <span class="string">'_scripts/myscript/myscript.swig'</span> %&#125;</div><div class="line"></div><div class="line">$ <span class="keyword">cd</span> themes/<span class="keyword">next</span>/<span class="keyword">source</span>/js/src</div><div class="line"></div><div class="line">$ makir beim</div><div class="line"></div><div class="line">$ touch beim/test.js</div><div class="line"></div><div class="line">$ <span class="keyword">vi</span> beim/test.js</div><div class="line">添加 console.<span class="built_in">log</span>(<span class="string">'HELO'</span>)</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[服务学概论-笔记]]></title>
      <url>https://beim.github.io/2016/11/02/%E6%9C%8D%E5%8A%A1%E5%AD%A6%E6%A6%82%E8%AE%BA-%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h1 id="服务学考试准备"><a href="#服务学考试准备" class="headerlink" title="服务学考试准备"></a>服务学考试准备</h1><h2 id="第一章-现代服务产业与服务学"><a href="#第一章-现代服务产业与服务学" class="headerlink" title="第一章 现代服务产业与服务学"></a>第一章 现代服务产业与服务学</h2><p>服务业四大领域：基础服务，生产服务，生活服务，公共服务</p>
<p>现代服务业的发展趋势：服务外包，服务聚合，服务虚拟化-EaaS，SoLoMo 社会化，位置化，移动化</p>
<p>服务的概念</p>
<p>对IT使能服务的理解</p>
<p>服务的六个侧面</p>
<p>服务的分类</p>
<p>服务的特性：不可分离性，不可贮存性，异构性，无形性</p>
<p>需求与能力不匹配： 策略1：根据需求调整能力 策略2：根据能力引导和调整需求，使需求适应企业的产能</p>
<p>服务科学，服务管理，服务工程</p>
<hr>
<h2 id="第二章-服务工程方法论及服务建模"><a href="#第二章-服务工程方法论及服务建模" class="headerlink" title="第二章 服务工程方法论及服务建模"></a>第二章 服务工程方法论及服务建模</h2><p>服务系统</p>
<p>服务系统的九大组成要素（顾客-目标-输入-输出-过程-人力使能者-物理使能者-信息使能者-环境）</p>
<p>IBM 认为的服务系统构成要素：三大要素：人-技术-共享信息<br>服务系统的要素：服务参与者-服务资源-服务信息-服务交互行为</p>
<p>系统的生命周期</p>
<p>服务工程核心：服务方法论。</p>
<ul>
<li>SOA 服务方法论</li>
<li>模型驱动的服务方法论 （SDMA 的服务模型）</li>
<li>基于领域工程的服务方法论</li>
<li>语义驱动的服务方法论</li>
</ul>
<p>服务创新 (带栗子); 常见的服务创新模式；服务创新四要素</p>
<p>典型的服务模型</p>
<p>服务蓝图描述的业务范畴（商务服务）服务蓝图模型；服务蓝图的建模过程</p>
<p>SOA 模型描述的业务范畴（计算服务）基于SOA 的软件服务建模方法<br>WSDL : Web 服务描述语言<br>OWL-S：Web 服务的本体语言<br>服务组合 (WS-CDL;Web 服务编舞描述语言)<br>服务编排（BPEL（4WS）面向Web 服务的过程建模语言）</p>
<p>BPMN(业务流程建模标注) 建模方法描述的业务范畴（商务服务和计算服务之间）<br>流对象-连接对象-泳道-描述对象/器物</p>
<hr>
<h2 id="第三章-服务组合与服务构件"><a href="#第三章-服务组合与服务构件" class="headerlink" title="第三章 服务组合与服务构件"></a>第三章 服务组合与服务构件</h2><p>服务要素的分类</p>
<p>服务构件；服务构件的分类；常用的服务构件类型</p>
<ul>
<li>Web Service</li>
<li>WS-HumanTask(BPEL4People)</li>
<li>REST 表述性状态转移</li>
<li>SCA 服务构件体系结构</li>
<li>SDO 服务数据对象</li>
<li>Web 服务资源 Web resource </li>
</ul>
<p>服务构件的描述 (OWL-S: 用本体来描述Web 服务的标记语言； 基于OWL-S 的服务描述的作用)</p>
<p>Web 服务协议等级（WSLA）</p>
<p>服务组合方法（服务发现-服务选择-服务组合）</p>
<hr>
<h2 id="第四章-服务系统体系结构及质量评价"><a href="#第四章-服务系统体系结构及质量评价" class="headerlink" title="第四章 服务系统体系结构及质量评价"></a>第四章 服务系统体系结构及质量评价</h2><p>服务系统体系结构（设计一个服务系统需要关注：。。。）<br>服务系统体系结构设计核心问题（将多个小粒度构件连接在一起，做到高效的交换信息和控制）<br>传统的三个实现方式（RPC，ORB，异步消息传递）</p>
<p>服务集成成熟度模型（SIMM）</p>
<p>面向服务的体系结构SOA<br>SOA 的应用目标（对应4个层次）<br>基本体系结构模式（发布-访问；适配器；远程服务策略；服务集成器；企业服务总线ESB）<br>SOA 的多层架构</p>
<p>CAP 理论（CP和AP）</p>
<p>服务的交付渠道</p>
<p>服务质量；服务质量的特征（过程质量，产出质量）；服务质量的维度；服务质量产生差距的原因；服务质量SERVQUAL理论: Servqual = 实际感受 - 期望</p>
<p>服务级协议（SLA）</p>
<p>SOA 服务系统的质量评价（几个指标）</p>
<hr>
<h2 id="第五章-服务学新进展"><a href="#第五章-服务学新进展" class="headerlink" title="第五章 服务学新进展"></a>第五章 服务学新进展</h2><p>服务工程研究热点</p>
<p>软件服务工程新范型：RE2SEP</p>
<p>SMDA：模型驱动的服务体系结构与系统构建</p>
<p>服务语义模型</p>
<p>服务计算及其新进展</p>
<hr>
<h2 id="第六章-服务学应用案例"><a href="#第六章-服务学应用案例" class="headerlink" title="第六章 服务学应用案例"></a>第六章 服务学应用案例</h2><p>携程网服务案例分析</p>
<p>海运物流服务案例分析</p>
<hr>
<h1 id="现代服务产业与服务学"><a href="#现代服务产业与服务学" class="headerlink" title="现代服务产业与服务学"></a>现代服务产业与服务学</h1><p>什么是现代服务业</p>
<ul>
<li>基础服务 (通信服务和信息服务)</li>
<li>生产服务 (制造服务, 产品服务, 物流, 金融等)</li>
<li>生活服务 (医疗\保健, 教育, 旅游, 住宿)</li>
<li>公共服务 (政府的公共管理服务, 基础教育, 公共卫生)</li>
</ul>
<hr>
<h2 id="现代服务业的发展趋势"><a href="#现代服务业的发展趋势" class="headerlink" title="现代服务业的发展趋势"></a>现代服务业的发展趋势</h2><ul>
<li><p>服务外包 (将非核心的业务外包出去)</p>
</li>
<li><p>服务聚合 (将分散的,相互独立的服务整合在一起, 形成新的服务, 创造新的服务价值.)(例如: 百度地图, 优酷, 淘宝, 百度)<br><strong>BIRIS 模式</strong>(Bilateral Resource Integrated Service)<br>一种基于第三方的双边顾客资源整合的服务聚合创新模式</p>
</li>
<li><p>服务虚拟化, 万物皆服务(EaaS)(将实体服务变为虚拟服务, 例如: 云计算)</p>
<blockquote>
<p>遗存系统(legacy system)<br>适配器(接口)<br>Human as a Service</p>
</blockquote>
</li>
<li><p>社会化, 位置化移动化(<strong>SOLOMO</strong>, Social, Local, Mobile, 社交 + 位置化/本地化 + 移动)(例如: 微信, 支付宝, 微博)<br>SoLoMo + 娱乐 =&gt; 改写社交<br>SoLoMo + O2O =&gt; 改写零售</p>
</li>
</ul>
<hr>
<h2 id="服务案例"><a href="#服务案例" class="headerlink" title="服务案例"></a>服务案例</h2><p><strong>案例: 物流服务</strong><br>第一方物流/第二方物流(产商, 客户)<br>第三方物流(顺丰, 申通)<br>第四方物流(菜鸟物流)</p>
<p><strong>案例: 航空售票服务</strong><br>机票直销<br>机票代售点<br>第三方代理商(携程: 客户-航空公司)<br>第四方代理商(去哪儿: 客户-第三方/代售点)</p>
<blockquote>
<p>中航信</p>
</blockquote>
<p><strong>案例: 呼叫中心服务</strong><br>专家:有高技能的人守在电话旁(1970)<br>工具: 接线员无需高技能, 使用FAQ手册(1980)<br>市场: 低成本外包(在印度建立呼叫中心)(2000)<br>Automate(2010)</p>
<p><strong>案例: 商品零售服务</strong><br>小卖店<br>百货商店<br>连锁店<br>大型连锁超市</p>
<p><strong>案例: 在线信息共享服务</strong><br>论坛<br>BBS<br>博客<br>微博<br>微信</p>
<p><strong>服务外包企业案例: 印度Bangalore 的服务外包</strong><br>基础操作的外包服务<br>中断技能型的外包服务(人力资源, 财务外包)<br>高端智力型外包服务(研发设计, 数据挖掘)</p>
<p><strong>企业服务案例: IBM的IT服务管理</strong><br>从销售大型服务器, 硬件设备, 软件产品的IT厂商<br>转变为<br>全球最大的IT服务提供商</p>
<p><strong>服务聚合企业案例: 携程网</strong><br>机票<br>车票<br>酒店<br>门票</p>
<p><strong>服务聚合企业案例: COSCO(中国远洋物流有限公司)</strong> (中国最大的第三方物流企业)</p>
<blockquote>
<p>海运物流</p>
</blockquote>
<p><strong>EaaS企业案例: 亚马逊</strong><br>从用户书评中挖掘信息<br>开放API, 允许处理用户,收藏列表和购物车, 允许对亚马逊产品目录主要产品的访问, 其他公司或者个人的应用系统可以直接调用Amazon API<br>云基础设施服务, Amazon EC2, S3, SQS</p>
<p><strong>EaaS企业案例: Rolls-Royce的 TotalCare</strong><br>卖产品-&gt; 卖服务</p>
<p><strong>EaaS企业案例: 健康医疗保健服务</strong><br>监控 - 评估 - 规划 - 治疗</p>
<p><strong>SoLoMo企业案例: SNS社交网络服务</strong><br>人人网<br>微信<br>知乎</p>
<p><strong>SoLoMo企业案例: 基于位置的服务LBS</strong><br><a href="http://baike.baidu.com/item/LBS/1742" target="_blank" rel="external">LBS</a><br>Foursquare 街旁 在哪等待</p>
<p><strong>SoLoMo企业案例: 情境感知的服务</strong><br>通过传感器采集服务对象的情境信息<br>根据情境信息判断对象的状态, 提供响应的服务</p>
<p><strong>SoLoMo企业案例: 面向云服务交付的移动应用</strong><br>典型代表: 云手机(阿里, 华为), 用友移动mERP</p>
<p><strong>SoLoMo企业案例: LBS+购物信息推送</strong><br>美团, 大众点评</p>
<p><strong>SoLoMo企业案例: 地铁虚拟货架</strong></p>
<p><strong>SoLoMo企业案例: SNS+电子商务服务</strong><br>微商</p>
<h2 id="服务的概念-特征与分类"><a href="#服务的概念-特征与分类" class="headerlink" title="服务的概念, 特征与分类"></a>服务的概念, 特征与分类</h2><h3 id="服务概念"><a href="#服务概念" class="headerlink" title="服务概念"></a>服务概念</h3><p>Philip Kotler: 服务是一方向另一方提供的任意活动或好处. 它是不可触知的, 不形成所有权问题, 其生产可能与物质产品有关, 也可能无关.</p>
<p>ISO 9004-2: 服务是为满足客户需要, 供方与顾客接触的活动和供方内部活动所产生的结果</p>
<p>其他: 服务是供应商与客户协同工作以转换某对象(如商品, 信息)的<strong>状态</strong>, 这些客户具有某种隶属关系.</p>
<p>其他: 服务是一种客户直接参与其中作为合作生产者的时间<strong>易逝性</strong>的无形体验.<br>(水杯是产品, 水杯可供人喝水是服务)</p>
<p>服务: 一种促进顾客发生”改变” 的过程, 这种”改变” 包括物理的和无形的占有物的状态改善</p>
<p>“IT使能业务服务” 常用服务运作模型和计费模式来刻画.</p>
<p>服务的内涵:</p>
<ul>
<li>顾客, 提供者(可能是人, 软件, 资源等)</li>
<li>价值(有形的(产品, 信息, 金钱, 资源等), 无形的(经验, 知识, 享受, 影响力等))</li>
<li>协同生产(复制的交互过程)</li>
</ul>
<blockquote>
<p>服务的特性: 无形性, 生产消费同步性, 非储存性, 差异性</p>
</blockquote>
<p>服务的表示: 服务运作模型(如何完成), 计费模型(服务如何收费)</p>
<p>对IT使能(IT化)的理解: <strong>过程的封装</strong><br>栗子: B2B服务: 买方卖方, B2B平台之间的交互, 完成电子商务功能和过程;<br>Web Service: 客户端与服务器端程序之间的交互</p>
<p>服务内在特征:</p>
<ul>
<li>多方之间</li>
<li>交互</li>
<li>实现各自目标</li>
<li>付出代价</li>
</ul>
<p>服务的六个侧面<br>组织-行为-技术-信息-价值-质量</p>
<p>服务提供者和顾客之间的关系</p>
<ul>
<li>顾客参与服务过程</li>
<li>协同创造价值</li>
<li>服务质量取决于顾客的需求,期望和感受</li>
</ul>
<h3 id="服务的分类模式"><a href="#服务的分类模式" class="headerlink" title="服务的分类模式"></a>服务的分类模式</h3><p><code>按照以下方式进行分类</code></p>
<ul>
<li><p><em>服务过程</em>(按照<code>劳力密集程度</code>, <code>交互性/客户化</code>的程度 两个维度来划分)(<em>服务工厂</em>(航空,旅馆), <em>服务商店</em>(医院,汽车维修), <em>大规模服务</em>(零售业, 学校), <em>职业化服务</em>(IT,医生,律师))</p>
</li>
<li><p><em>服务行为的本质</em>(<code>按照服务行为的本质</code>(有形,无形), <code>服务的接受者</code>(人, 事物) 两个维度划分)</p>
</li>
<li><p><em>服务提供者与顾客之间的关系</em>(<code>客户关系的类型</code>(会员,非会员), <code>服务交互的类型</code>(离散的, 连续的))</p>
</li>
<li><p><em>服务的可提供性</em>(<code>服务地点的数目</code>(单一地点, 多地点), <code>客户与服务提供者之间交互所发生的地点</code>(客户移动(宾馆), 提供者移动(网约车), 在客户可达范围内(手机信号)))</p>
</li>
<li><p><em>服务需求的可变性</em>(<code>需求波动情况</code>(大,小), <code>服务能力的限制</code>(高峰需求时无延迟, 高峰需求时超过能力))</p>
</li>
<li><p><em>服务交付的方式</em>(<code>定制化程度</code>(高, 低), <code>服务雇员能力的重要性</code>(高,低))</p>
</li>
<li><p><em>服务自动化的程度</em>(<code>谁来做</code>(人/工具), <code>完成程度</code>(全部,部分))</p>
</li>
</ul>
<p><code>!服务的特性</code></p>
<ul>
<li><p><em>不可分离性</em>(生产与消费同时进行)(服务无法被存储)(无法通过库存来解决需求波动问题)(在消费之前无法进行质量控制)</p>
</li>
<li><p><em>不可贮存性</em>(任何服务能力如果不被使用,那么它将无法再使用)(服务无法存储,所以当服务能力不足时,提供者将失去机会)<br>(春节期间快递行业的困扰, 服务能力不足)(策略1: 根据需求调整能力(提高快递工人工资水平,招收更多快递工人, 或共享产能:如顺丰和EMS工人共享), 策略2: 通过能力引导需求(改变用户购物习惯, 尽量将春节的购物需求引导到春节前后, 提高商品价格或提高快递价格))</p>
</li>
<li><p><em>异构性</em>(从顾客的角度看, 服务有很大不同)(服务的个性化-&gt;异构性)(不同顾客所感知到的服务质量都是不同的)</p>
</li>
<li><p><em>无形性</em>(服务没有具体的物质存在形式)(顾客通常需要借助服务提供者的名声和对其的信任来预测服务质量,进而做出选择)(规则和法律使服务质量达到标准)</p>
<blockquote>
<p>为了进行质量控制, 要追求标准化, 又和异构性产生冲突, 怎么解决?</p>
</blockquote>
</li>
</ul>
<p>基于服务本质特征的服务分类(服务本质特征: 服务提供者, 顾客, 交互, 价值目标)</p>
<ul>
<li>人工服务(人来执行的服务)</li>
<li>软件服务(自动化软件来执行的服务)</li>
<li>复合服务(二者结合在一起的服务)</li>
</ul>
<p><strong>服务接触的三种类型</strong></p>
<ul>
<li>服务组织支配的服务接触()</li>
<li>与顾客接触的员工支配的服务接触(医院-医生-病人)</li>
<li>顾客支配的服务接触(自助服务)</li>
</ul>
<p><strong>排队系统的基本特征</strong></p>
<hr>
<h2 id="服务学概述"><a href="#服务学概述" class="headerlink" title="服务学概述"></a>服务学概述</h2><h3 id="服务科学-管理与工程-SSME"><a href="#服务科学-管理与工程-SSME" class="headerlink" title="服务科学, 管理与工程(SSME)"></a>服务科学, 管理与工程(SSME)</h3><p><strong>SSME</strong> (Service Science, Management and Engineering): 服务科学, 管理与工程, 将科学, 管理, 工程相关学科知识应用与服务领域的一门新的交叉学科, 后在中国被称为<strong>服务学</strong>(Serviceology)</p>
<p>目标: 改善服务及服务系统</p>
<p>方式: 改善服务在生产率, 质量, 性能, 增长点, 创新等方面的可预测性与可调控性</p>
<p>服务学三大组成部分</p>
<ul>
<li>服务科学(SS)(分析现实服务世界的现象,数据, 转换为知识)</li>
<li>服务工程(SE)(将知识解决实际服务问题, 创造价值)</li>
<li>服务管理(SM)(监视与分析创造服务价值的过程, 对服务进行有效管理优化和改善, 使其进一步增值.)</li>
</ul>
<h3 id="服务科学-Service-Science"><a href="#服务科学-Service-Science" class="headerlink" title="服务科学(Service Science)"></a>服务科学(Service Science)</h3><p>研究对象: 现实世界中有关服务的现象、数据与信息(即服务系统)。</p>
<p>目的: 建立一套严格、完备、理论化的服务模型及其理论，从各类服务系统中抽象出其内在、本质的规律，使服务提供者和需求者能深入理解和认识服务，并采用科学的方法来指导服务系统的设计、构建与运作。</p>
<h3 id="服务管理-Service-Management"><a href="#服务管理-Service-Management" class="headerlink" title="服务管理(Service Management)"></a>服务管理(Service Management)</h3><p>应用服务科学的相关理论、模型和方法，研究服务系统的运作机制及管理方法，改善服务质量，提高顾客的体验与满意度。</p>
<h3 id="服务工程-Service-Engineering"><a href="#服务工程-Service-Engineering" class="headerlink" title="服务工程(Service Engineering)"></a>服务工程(Service Engineering)</h3><p>运用服务科学相关理论和知识，面向服务生命周期，描述和定义、设计、建立、实施、运行维护和动态重构服务系统，并提供相关服务系统支撑工具和平台/环境，进而创造服务价值。</p>
<h3 id="软件服务工程及其学科范畴"><a href="#软件服务工程及其学科范畴" class="headerlink" title="软件服务工程及其学科范畴"></a>软件服务工程及其学科范畴</h3><p>服务工程相关内容</p>
<ul>
<li>服务开发方法</li>
<li>服务发布与运作方法</li>
<li>服务计算</li>
</ul>
<h3 id="软件服务工程的知识体系"><a href="#软件服务工程的知识体系" class="headerlink" title="软件服务工程的知识体系"></a>软件服务工程的知识体系</h3><ul>
<li>服务体系结构与设计</li>
<li>服务使能技术</li>
<li>服务业务分析</li>
<li>服务管理</li>
<li>服务应用实践</li>
</ul>
<h3 id="服务工程与服务计算"><a href="#服务工程与服务计算" class="headerlink" title="服务工程与服务计算"></a>服务工程与服务计算</h3><ul>
<li><p>微观层面的分布式计算</p>
</li>
<li><p>宏观层面的商务计算</p>
</li>
</ul>
<p>服务计算知识体系</p>
<ul>
<li>服务与服务系统</li>
<li>服务技术</li>
<li>服务咨询与提交</li>
<li>服务解决方案与管理</li>
</ul>
<p><strong>服务计算与服务工程的关系</strong>(前者为后者提供业务, IT个层面服务系统的实现技术; 后者为前者提供了系统工程方法论上的支持)</p>
<hr>
<h1 id="服务工程方法论及服务建模"><a href="#服务工程方法论及服务建模" class="headerlink" title="服务工程方法论及服务建模"></a>服务工程方法论及服务建模</h1><h2 id="服务系统及生命周期"><a href="#服务系统及生命周期" class="headerlink" title="服务系统及生命周期"></a>服务系统及生命周期</h2><p>系统是指将零散的东西进行有序的整理,编排形成的具有整体性的整体–百度百科</p>
<p><code>系统的九大组成要素</code></p>
<ul>
<li>顾客</li>
<li>目标</li>
<li>输入 (系统要处理的各类物理,人,经济或信息的实体)</li>
<li>输出 (系统处理之后形成的各类物理,人或信息的实体)</li>
<li>过程 (从输入到输出的转换)</li>
<li>人力使能者 (拥有或操作系统的人)</li>
<li>物理使能者 (协助系统运行的物理资源)</li>
<li>信息使能者 (支持系统的信息或知识资源)</li>
<li>环境 (对系统产生影响的各类因素)</li>
</ul>
<p><code>IBM 对服务系统构成要素的观点</code>(在不同服务系统中三种占比有所不同)</p>
<ul>
<li>人</li>
<li>技术</li>
<li>共享信息</li>
</ul>
<p><code>服务系统的要素</code></p>
<ul>
<li><strong>服务参与者</strong>(包括顾客,服务提供者等)(服务参与者具有特定的<em>价值需求</em>, 掌握特定的<em>服务资源</em>, 可发出<em>服务行为</em>, 通过<em>信息共享</em>完成服务)(参与者可分为: 顾客,提供者,使能者)</li>
<li><strong>服务资源</strong>(软件,硬件或设备, 资源的能力, 服务环境)(是被动参与服务的各类支持性资源(Enabling Resources)，具备特定的能力(Capability)，在服务主体的控制下可向外提供特定的行为(Behavior)。)(产品型资源, 独占型资源, 共享型资源, 可复用资源, 消耗型资源)</li>
<li><strong>服务信息</strong>(刻画了服务交互行为过程中被创造或采集的各类信息(Shared Information)，并在服务参与者之间、资源与参与者之间相互传递和使用。)(分为<em>资源类信息</em>(如航线信息, 报价信息)和 <em>指令类信息</em>(如海运物流中的订单))</li>
<li><strong>服务交互行为</strong>(交互过程, 活动与动作)</li>
</ul>
<p><code>服务价值网</code>(service value network)(描述服务参与者之间价值交换关系的有向网络结构)</p>
<ul>
<li>节点(表示服务参与者)</li>
<li>有向边(表示参与者之间的价值交换关系及其方向)</li>
<li>边的内容(被交换的价值(产品, 知识, 金钱, 经验, 市场影响等))</li>
</ul>
<p><code>服务价值网中的价值交换模式</code>(直达顾客模式DCP)(外包链模式OCP)(聚合/聚集模式MAP)</p>
<blockquote>
<p>BlockChain(区块链)</p>
</blockquote>
<p><strong>软件系统的声明周期</strong><br>用户提出需求- 需求分析- 系统设计- 系统开发- 测试- 软件实施- 软件运行- 软件维护- 软件报废</p>
<p><strong>服务系统的狭义生命周期</strong><br>从系统运行的角度:服务价值的生命周期</p>
<ul>
<li>双方找寻</li>
<li>双方协商</li>
<li>单方准备</li>
<li>协同生产</li>
<li>传递</li>
<li>使用</li>
<li>支付</li>
</ul>
<h2 id="服务工程与方法论"><a href="#服务工程与方法论" class="headerlink" title="服务工程与方法论"></a>服务工程与方法论</h2><h3 id="系统工程与服务工程"><a href="#系统工程与服务工程" class="headerlink" title="系统工程与服务工程"></a>系统工程与服务工程</h3><p>软件工程–系统工程的具体化<br>在’软件工程’基础上的服务工程</p>
<p>服务工程核心–服务方法论</p>
<h3 id="服务工程方法论"><a href="#服务工程方法论" class="headerlink" title="服务工程方法论"></a>服务工程方法论</h3><p><strong>要素</strong></p>
<ul>
<li>服务模型</li>
<li>服务建模方法</li>
<li>服务系统构建方法</li>
<li>服务性能评价</li>
<li>支撑工具与平台</li>
<li>服务系统实施指南</li>
</ul>
<h4 id="服务模型"><a href="#服务模型" class="headerlink" title="服务模型"></a>服务模型</h4><p>作用</p>
<ul>
<li>表示服务与模型映射</li>
<li>沟通交流与协同设计</li>
</ul>
<p>主要研究内容:</p>
<ul>
<li>图形化表示规范, 多视图模型之间的关系</li>
<li>形式化模型语义描述及语义约束</li>
<li>数学化模型优化</li>
</ul>
<blockquote>
<p>业务过程管理 BPM(Business Process Management)</p>
</blockquote>
<h4 id="服务建模方法"><a href="#服务建模方法" class="headerlink" title="服务建模方法"></a>服务建模方法</h4><h4 id="服务系统构建"><a href="#服务系统构建" class="headerlink" title="服务系统构建"></a>服务系统构建</h4><p>典型的服务系统构建方法</p>
<ul>
<li>自顶向下</li>
<li>自底向上</li>
<li>基于领域工程的服务构建方法</li>
</ul>
<h4 id="服务质量与性能评价"><a href="#服务质量与性能评价" class="headerlink" title="服务质量与性能评价"></a>服务质量与性能评价</h4><h4 id="相关支持工具和平台"><a href="#相关支持工具和平台" class="headerlink" title="相关支持工具和平台"></a>相关支持工具和平台</h4><h4 id="服务系统实施指南"><a href="#服务系统实施指南" class="headerlink" title="服务系统实施指南"></a>服务系统实施指南</h4><h4 id="一-SOA服务方法论"><a href="#一-SOA服务方法论" class="headerlink" title="一: SOA服务方法论"></a>一: SOA服务方法论</h4><p>面向服务的系统方法论</p>
<p>SOA服务方法论栗子: <strong>SOMA方法论</strong>(识别 ,设计和实现服务, 用来支持服务的构建, 服务组合以及服务间的协同)</p>
<blockquote>
<p>遗存系统(遗留系统) <a href="https://en.wikipedia.org/wiki/Legacy_system" target="_blank" rel="external">legacy system</a><br>‘烟囱’<br>系统集成<br>中间件<br>P2P<br>服务api</p>
</blockquote>
<h4 id="二-模型驱动的服务方法论"><a href="#二-模型驱动的服务方法论" class="headerlink" title="二: 模型驱动的服务方法论"></a>二: 模型驱动的服务方法论</h4><blockquote>
<p><a href="https://zh.wikipedia.org/wiki/%E5%AF%B9%E8%B1%A1%E7%AE%A1%E7%90%86%E7%BB%84%E7%BB%87" target="_blank" rel="external">OMG(Object Management Group)对象管理组织</a><br>软件领域的: <a href="https://en.wikipedia.org/wiki/Model-driven_architecture" target="_blank" rel="external">MDA(Model Driven architecture)</a>模型驱动体系结构</p>
</blockquote>
<p>服务领域中有:</p>
<ul>
<li>计算模型无关模型(CIM)</li>
<li>平台独立模型(PIM)</li>
<li>平台相关模型(PSM)</li>
<li>可执行服务系统(基于IT平台的服务系统)</li>
</ul>
<blockquote>
<p><a href="https://en.wikipedia.org/wiki/Model_transformation" target="_blank" rel="external">Model Transformation</a><br><a href="https://en.wikipedia.org/wiki/Metamodeling" target="_blank" rel="external">Meta-Model</a><br>ADM(与MDA相反, 具体到抽象)<br>通过模型驱动的理论构造一个服务系统-论文-Ateret Anaby-Tavor, David Amid, Aviad Sela, Amit Fisher, Kuo Zhang, Ou Tie Jun. Towards a Model Driven Service Engineering Process. 2008 IEEE Congress on Services 2008 - Part I. </p>
</blockquote>
<h4 id="三-基于领域工程的服务方法论"><a href="#三-基于领域工程的服务方法论" class="headerlink" title="三: 基于领域工程的服务方法论"></a>三: 基于领域工程的服务方法论</h4><p>(开发某领域的服务系统时可能已经存在大量可复用的’服务构件’, 通过自底向上的方式对’服务构件’进行复用)</p>
<blockquote>
<p>可配置的服务工程方法论-论文-Jörg Becker, Daniel Beverungen, Ralf Knackstedt, Martin Matzner. Configurative Service Engineering - A Rule-Based Configuration Approach for Versatile Service Processes in Corrective Maintenance. Proceedings of the 42nd Hawaii International Conference on System Sciences - 2009. </p>
</blockquote>
<h4 id="四-语义驱动的服务方法论"><a href="#四-语义驱动的服务方法论" class="headerlink" title="四: 语义驱动的服务方法论"></a>四: 语义驱动的服务方法论</h4><blockquote>
<p><a href="https://en.wikipedia.org/wiki/Ontology" target="_blank" rel="external">Ontology</a><a href="https://zh.wikipedia.org/wiki/%E6%9C%AC%E4%BD%93%E8%AF%AD%E8%A8%80" target="_blank" rel="external">本体语言</a><br>语义网络<br>知识图谱</p>
</blockquote>
<h3 id="服务模式与服务创新"><a href="#服务模式与服务创新" class="headerlink" title="服务模式与服务创新"></a>服务模式与服务创新</h3><p><strong>服务创新</strong></p>
<ul>
<li>激进式创新</li>
<li>渐进式创新</li>
</ul>
<p><strong>服务模式</strong><br>定义服务的业务与价值目标；<br>标识参与服务的各参与者类型(顾客、提供者、使能者)；<br>定义多参与者间进行价值协同生产与价值分配的机制；<br>定义多参与者间的控制流、信息流与价值流。</p>
<ul>
<li>社会化分工: 服务外包</li>
<li>服务聚合: 聚合模式</li>
<li>Web2.0: 众包模式</li>
<li>服务虚拟化: EaaS</li>
<li>服务网络化与自组织: 物联网IoT/ 务联网IoS</li>
<li>云服务: 深度和广泛的’虚拟化’</li>
</ul>
<blockquote>
<p>Dubbox(alibaba taoba的服务框架)</p>
</blockquote>
<p><strong>基于模式的服务创新</strong></p>
<blockquote>
<p>京东白条</p>
</blockquote>
<p>服务创新的基本四要素：管理学视角</p>
<ul>
<li>目标市场(客户是谁)</li>
<li>服务概念(提供什么独特价值)</li>
<li>运作策略(如何实现价值)</li>
<li>服务传递系统(如何将价值交付给客户)</li>
</ul>
<p>服务创新的四维度模型</p>
<ul>
<li>新服务概念 (服务创新首先是一个市场驱动的“服务概念化创新”)</li>
<li>新顾客界面 (顾客界面设计：在服务提供给顾客的方式以及与顾客间交流、合作方式等方面进行创新。)</li>
<li>新服务传递系统 (服务传递系统：主要指生产和传递新服务产品的组织。侧重与服务企业内部组织安排, 通过合理安排, 确保员工有效完成工作)</li>
<li>技术选择 (服务创新的一个可选维度; 通过使用某些新技术使服务更为高效)</li>
</ul>
<h3 id="服务模型与建模方法"><a href="#服务模型与建模方法" class="headerlink" title="服务模型与建模方法"></a>服务模型与建模方法</h3><p><strong>模型</strong>是对系统中某些理论和现象的图解性描述, 并通过一组变量以及作用在这组变量之上的逻辑或数量关系来描绘其已知的或推测性质的特性，也用于深入研究它们的特点。</p>
<p>服务模型的核心内容：从各个不同的侧面来描述服务系统要素（人、资源、信息、组织、环境等）、服务过程中顾客与服务提供者之间的协同交互过程(co-production process)。</p>
<h4 id="从建模体系角度看服务模型的分类"><a href="#从建模体系角度看服务模型的分类" class="headerlink" title="从建模体系角度看服务模型的分类"></a>从建模体系角度看服务模型的分类</h4><ul>
<li><p>按照服务模型所描述服务的不同侧面(视图)进行分类：<br>过程模型、组织模型、资源模型、信息模型、价值模型、知识模型等。<br>不同的服务视图分别从某一视角关注服务，模型形态相对简单和清晰，通过视图之间的语义关联将它们形成整体。</p>
</li>
<li><p>按照服务模型所起到作用进行分类：<br>指导服务创新与设计的模型、描述服务需求的模型、指导服务系统设计与开发的模型、指导服务部署与实施的模型等。<br>战略层模型、战术层模型、操作性模型、技术层模型等。</p>
</li>
<li><p>按照服务模型的形态进行分类：<br>图形化模型，用于帮助服务设计人员之间的沟通和理解；<br>形式化模型，用于软件工具支持下的服务分析与验证，例如一致性、完备性、正确性、性能等。</p>
</li>
</ul>
<h4 id="服务模型应具有的描述能力"><a href="#服务模型应具有的描述能力" class="headerlink" title="服务模型应具有的描述能力"></a>服务模型应具有的描述能力</h4><ul>
<li>提供者与顾客之间的交互</li>
<li>私有与开放</li>
<li>实体化与虚拟化</li>
<li>耦合与解耦</li>
<li>组合与协同 (组合: 描述复杂服务内部的执行步骤以及这些步骤间的关系；)(协同: 描述多个组织或服务之间通过交互完成复杂服务的过程。)</li>
<li>价值目标与约束</li>
<li>质量与性能</li>
</ul>
<blockquote>
<p>原子服务(ATOM Service)</p>
</blockquote>
<h4 id="服务模型规范"><a href="#服务模型规范" class="headerlink" title="服务模型规范"></a>服务模型规范</h4><ul>
<li>服务蓝图(Service Blueprint) </li>
<li>结构化服务模型(SADT Model) </li>
<li>Web服务描述语言(WSDL) </li>
<li>面向服务的本体Web语言(OWL-S) </li>
<li>业务流程执行语言(BPEL)</li>
<li>Web服务编舞语言(WS-CDL)</li>
<li>业务过程建模标注(BPMN) </li>
<li>Web服务建模本体(WSMO) </li>
</ul>
<h4 id="服务蓝图-Blueprint"><a href="#服务蓝图-Blueprint" class="headerlink" title="服务蓝图(Blueprint)"></a>服务蓝图(Blueprint)</h4><p><strong>组成</strong> (服务蓝图用3条线分为4个部分，分别是：顾客行为、前台接触员工行为、后台接触员工行为以及支持过程。)</p>
<p><strong>服务蓝图的5个区域</strong></p>
<ul>
<li>顾客行为</li>
<li>前台员工行为</li>
<li>后台员工行为</li>
<li>支持过程</li>
<li>服务有形展示</li>
</ul>
<p><strong>服务蓝图的三条分界线</strong></p>
<ul>
<li>交互线 (表示顾客与组织间直接的互动。一条穿过交互分界线的垂直线表明顾客与组织间直接发生接触或一个服务接触产生。 )</li>
<li>可见线 (把顾客能看到的服务行为与看不到的分开，把服务人员在前台与后台所做的工作分开。)</li>
<li>内部互动线 (用以区分服务人员的工作和其他支持服务的工作和工作人员，穿过内部互动线的垂直线表示发生的内部服务接触。 )</li>
</ul>
<p><strong>服务蓝图的要素</strong></p>
<ul>
<li>结构要素 (定义了服务传递系统的整体规划)</li>
<li>管理要素 (明确服务接触的标准和要求, 规定了合理的服务水平、绩效评估指标、服务品质要素等。)</li>
</ul>
<p><strong>服务蓝图</strong></p>
<ul>
<li>借助于流程图，通过分解服务组织系统和架构，鉴别用户与服务人员以及服务体系内部的服务接触点；</li>
<li>在服务流程分析基础上描述服务传递的各方面，将服务提供过程、员工和顾客的角色和服务的有形证据直观地展示出来；</li>
<li>经过服务蓝图的描述，服务被合理地分解成服务提供的步骤、任务和方法，使服务提供过程中所涉及的人都能客观地理解和处理它。</li>
</ul>
<p><strong>服务蓝图的建模过程</strong></p>
<ol>
<li>识别需要制定蓝图的服务过程 </li>
<li>识别顾客(细分顾客)对服务的经历 </li>
<li>从顾客角度描绘服务过程 </li>
<li>描绘前台与后台服务雇员的行为 </li>
<li>把顾客行为、服务人员行为与支持功能相连 </li>
<li>在每个顾客行为步骤加上有形展示</li>
</ol>
<blockquote>
<p>考试- 建模题</p>
</blockquote>
<p>end 168</p>
<h4 id="基于SOA的软件服务建模方法"><a href="#基于SOA的软件服务建模方法" class="headerlink" title="基于SOA的软件服务建模方法"></a>基于SOA的软件服务建模方法</h4><p>基本服务：WSDL(Web Service Description Language) - Web服务描述语言</p>
<blockquote>
<p>XML</p>
</blockquote>
<p>WSDL元素：基于XML语法描述了与服务进行交互的基本元素</p>
<p>WSDL： Web服务描述文档结构</p>
<p>OWL-S(Ontology Web Language for Services)： Web服务的本体语言<br>三个组件：</p>
<ul>
<li>ServiceProfile：描述服务的功能，即这个服务是做什么的。服务搜寻代理通过ServiceProfile实现服务匹配，寻找到满足服务请求者需求的Web Service；</li>
<li>ServiceModel：描述服务是怎么做的，即服务的具体实现细节；</li>
<li>ServiceGrounding：描述怎样访问服务。</li>
</ul>
<h4 id="服务组合（Orchestration"><a href="#服务组合（Orchestration" class="headerlink" title="服务组合（Orchestration)"></a>服务组合（Orchestration)</h4><p>服务编排（Orchestration）(Composition = Orchestration)：将多个小粒度的Web服务按照特定的业务逻辑规则构造为一个可执行的业务过程；同时又可看作是一个大粒度的复合Web服务。</p>
<ul>
<li>使用已有的服务来构造新的服务；</li>
<li>服务由某个组织所拥有，并具有中心控制调度功能。</li>
</ul>
<p>用于服务编排的建模方法：BPEL(4WS)</p>
<ul>
<li>BPEL（Business Process Execution Language）：业务流程执行语言，是一种使用XML编写的用于自动化业务流程的编程语言。</li>
<li>BPEL4WS（BPEL for Web Services）：面向Web服务的过程建模语言。</li>
</ul>
<p>服务编排的运行模式</p>
<ol>
<li>集中式执行引擎</li>
<li>基于Hub的分布式引擎</li>
<li>无Hub的分布式引擎</li>
</ol>
<h4 id="服务协同（Choreography）"><a href="#服务协同（Choreography）" class="headerlink" title="服务协同（Choreography）"></a>服务协同（Choreography）</h4><p><code>服务协同</code>(Choreography)(Collaboration ≈ Choreography)：将多个零散的、分别由多方提供的服务/业务流程按照彼此之间的协同关系组织起来，支持多方的交互行为。</p>
<ul>
<li>侧重于不同服务之间的消息传递的次序与规则，以保证期望的协同行为。</li>
<li>无需完全由一个组织所拥有；也无需中心控制；</li>
</ul>
<p><code>服务协同模式的分类</code></p>
<ul>
<li>链式协同模式</li>
<li>嵌套协同模式</li>
<li>同步协同模式</li>
</ul>
<h4 id="BPMN-业务流程建模标注-建模方法"><a href="#BPMN-业务流程建模标注-建模方法" class="headerlink" title="BPMN(业务流程建模标注)建模方法"></a>BPMN(业务流程建模标注)建模方法</h4><p>业务流程建模标注法（BPMN, Business Process Modeling Notation）：是对象管理组织OMG/业务流程管理倡议组织BPMI开发的关于业务流程建模的行业性标准。它创建在与UML活动图相似的流程图法基础上，为特定业务流程提供了一套图形化标注法。</p>
<p>BPMN四种要素：</p>
<ul>
<li>流对象(事件(Events)、活动(Activities)、网关(Getways))</li>
<li>连接对象(顺序流(Sequence Flow)、消息流(Message Flow)、关联(Association))</li>
<li>泳道(池(Pool)、道(Lane))</li>
<li>描述对象/器物(数据对象(Data Object)、组(Group)、注释(Annotation))</li>
</ul>
<hr>
<h1 id="服务组合与服务构件"><a href="#服务组合与服务构件" class="headerlink" title="服务组合与服务构件"></a>服务组合与服务构件</h1><h2 id="服务构件"><a href="#服务构件" class="headerlink" title="服务构件"></a>服务构件</h2><p>两类服务要素：可IT化，不可IT化</p>
<ul>
<li>可被IT化的服务要素（通过web提供相应的服务行为）（具有WSDL接口描述的web services）（SCA构件）（数据库）（遗留系统legacy system）</li>
<li>不可或很难被IT化为软件的服务要素（人员）（硬件）（环境：会议室，呼叫中心）（行为：面对面培训，货物运输）</li>
</ul>
<p><em>非软件服务要素的虚拟化</em> (需要虚拟化的非软件服务要素: 人力资源及其能力, 环境, 硬件支撑设施, 软件职称设备, 人工完成的服务行为与交互过程)</p>
<h3 id="服务构件-Service-Component-将服务要素统一封装为服务构件"><a href="#服务构件-Service-Component-将服务要素统一封装为服务构件" class="headerlink" title="服务构件(Service Component) 将服务要素统一封装为服务构件"></a>服务构件(Service Component) 将服务要素统一封装为服务构件</h3><ul>
<li>可被重复使用的,用来构造服务系统的基本单元.</li>
<li>具有一系列特定的接口和描述</li>
</ul>
<p>常见的服务构件类型:</p>
<ul>
<li>软件服务 Web Services</li>
<li>人工服务 WS-HumanTask</li>
<li>表述性状态转移 REST (REpresentational State Transfer)</li>
<li>服务构建 SCA (Service Component Architecture)</li>
<li>数据对象 SDO (Service Data Object)</li>
<li>服务资源 WS-Resource</li>
</ul>
<p><strong>SDO(Service Data Object)</strong></p>
<p>服务数据对象； 用于简化和统一应用程序处理数据方式。</p>
<ul>
<li>数据对象(Data Object)</li>
<li>数据图(Data Graph)</li>
<li>元数据(Meta Data)</li>
<li>数据中介服务(Data Mediator Service)</li>
</ul>
<p><strong>Web服务资源WS-Resource</strong><br>Web Service 无状态<br>Web服务资源(WS-Resource)： 对于一个有状态资源（数据库，物理资源等）和它与之交互的Web服务的组合</p>
<hr>
<h2 id="服务组合方法"><a href="#服务组合方法" class="headerlink" title="服务组合方法"></a>服务组合方法</h2><h3 id="服务发现"><a href="#服务发现" class="headerlink" title="服务发现"></a>服务发现</h3><ol>
<li>根据服务请求进行服务发现的描述</li>
<li>一句服务匹配算法进行服务查找和服务匹配</li>
<li>进行服务选择与排序</li>
<li>确定最佳服务</li>
</ol>
<p><strong>服务发现的方法</strong></p>
<ul>
<li>语法级发现</li>
<li>语义级发现</li>
</ul>
<h3 id="服务选择"><a href="#服务选择" class="headerlink" title="服务选择"></a>服务选择</h3><ul>
<li>广义的服务选择: 通常被看做与’服务发现’等价</li>
<li>狭义的服务选择: 在满足需求的多个候选服务中, 选择出满足度最高的服务</li>
</ul>
<h3 id="服务组合"><a href="#服务组合" class="headerlink" title="服务组合"></a>服务组合</h3><p>将已有的服务组合为一个新服务的过程, 以增加服务的可复用性, 功能和性能.</p>
<p>服务组合的价值在于服务重用, 以解决更复杂的问题, 使服务得到增值.</p>
<p>服务组合三个阶段:</p>
<ul>
<li>规划阶段: 发现候选服务, 检测其服务组合的可行性与一致性, 并提供多个候选服务的组合规划</li>
<li>定义阶段: 在候选服务组合规划中选择并生成实际的服务组合结构, 并提供一个服务组合的语义规范</li>
<li>实施阶段: 根据服务组合规范来绑定组合的服务, 使这些服务能够协同工作以满足相应的任务或功能.</li>
</ul>
<p><strong>静态组合</strong>vs<strong>动态组合</strong></p>
<blockquote>
<p>ERP<br>CRM</p>
</blockquote>
<h1 id="服务系统体系结构及开发方法"><a href="#服务系统体系结构及开发方法" class="headerlink" title="服务系统体系结构及开发方法"></a>服务系统体系结构及开发方法</h1><p>服务体系结构设计核心问题: <code>如何将多个小粒度构件连接在一起,彼此高效交换信息和控制</code></p>
<p><strong>面向服务的体系结构SOA</strong></p>
<ul>
<li>发布-访问机制（发布，发现，绑定和调用）</li>
<li>适配器</li>
<li>远程服务策略（可与段绑定服务接口；客户端通过‘service registry’访问服务； 客户端通过‘service broker’动态决定访问哪个服务</li>
<li>服务集成器</li>
<li>企业服务总线（整合应用和服务的基础架构，支持服务，服务组合和服务协同）</li>
</ul>
<p><strong>ESB(Enterprise Service Bus)企业服务总线</strong></p>
<p><code>SOA Layers</code></p>
<ol>
<li>遗存系统</li>
<li>企业功能构建层</li>
<li>服务层</li>
<li>业务过程层（服务组合与协同层）</li>
<li>访问层（表现层）</li>
<li>集成（ESB）</li>
<li>服务质量（QoS）</li>
</ol>
<p>内容分发网络(CDN)</p>
<p><strong>CAP</strong>理论</p>
<ul>
<li>Consistency 一致性(任何一个读操作总是能读取到之前完成的写操作结果，也就是在分布式环境中，多点的数据是一致的；)</li>
<li>Availability 可用性(每一个操作总是能够在确定的时间内返回，也就是系统随时都是可用的；)</li>
<li>Tolerance of Network Partition 分区容忍性(在出现网络分区的情况下，分离的系统也能正常运行；)</li>
</ul>
<p>对于分布式存储系统而言，分区容错性(P)是基本需求，只有CP和AP两种模式的选择。<br><code>CP模式</code><br><code>AP模式</code></p>
<p><strong>服务交付渠道</strong></p>
<ul>
<li>前端界面简化： 固化为产品型态“客户端微件Widget”，强调可用性（Usability）；</li>
<li>后台流程标准化： 强调效率和交付质量</li>
</ul>
<p><strong>服务质量评价</strong></p>
<p><code>产品质量</code>； <code>服务质量</code></p>
<p>服务质量的两个方面</p>
<ul>
<li>过程质量</li>
<li>产出质量</li>
</ul>
<p>服务质量的维度</p>
<ul>
<li>可靠性(可靠地、准确地履行服务承诺的能力。)</li>
<li>快速相应性(帮助顾客并迅速提供服务愿望。)</li>
<li>保证性(服务人员的友好态度、所需的技能和知识，以增强顾客对企业服务质量的信心感。)</li>
<li>移情性(设身处地为顾客着想，把每一位顾客当作独特、重要的个人，给予个性化的服务。)</li>
<li>有形性(有形的设施、设备、人员的外表。)</li>
<li>可访问性</li>
<li>礼貌，沟通</li>
<li>可信性</li>
<li>安全性</li>
<li>理解性(正确理解用户的个性化需求。)</li>
</ul>
<p>服务质量差距 (top-down)</p>
<ul>
<li>预期的质量</li>
<li>感受的质量</li>
<li>实现的质量</li>
<li>表现的质量</li>
<li>定义的质量</li>
<li>理解的质量</li>
</ul>
<p><strong>SERVQUAL</strong></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[红城堡-渡边淳一]]></title>
      <url>https://beim.github.io/2016/11/01/%E7%BA%A2%E5%9F%8E%E5%A0%A1-%E6%B8%A1%E8%BE%B9%E6%B7%B3%E4%B8%80/</url>
      <content type="html"><![CDATA[<p><img src="https://img3.doubanio.com/lpic/s28069096.jpg" alt="hcb"></p>
<blockquote>
<p>爱与性都没有的时候</p>
</blockquote>
<a id="more"></a>
<p><a href="https://book.douban.com/subject/26384630/" target="_blank" rel="external">豆瓣读书</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[富士山禁恋-松本清张]]></title>
      <url>https://beim.github.io/2016/11/01/%E5%AF%8C%E5%A3%AB%E5%B1%B1%E7%A6%81%E6%81%8B-%E6%9D%BE%E6%9C%AC%E6%B8%85%E5%BC%A0/</url>
      <content type="html"><![CDATA[<p><img src="https://img3.doubanio.com/lpic/s24401753.jpg" alt="fss"></p>
<blockquote>
<p>面对注定绝望的爱情, 我们又能怎么办</p>
</blockquote>
<a id="more"></a>
<p><a href="https://book.douban.com/subject/7153418/" target="_blank" rel="external">豆瓣读书</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2013-蓝色茉莉]]></title>
      <url>https://beim.github.io/2016/11/01/2013-%E8%93%9D%E8%89%B2%E8%8C%89%E8%8E%89/</url>
      <content type="html"><![CDATA[<p><img src="http://img31.mtime.cn/pi/2014/01/10/162701.70021676_1000X1000.jpg" alt="lsml"></p>
<blockquote>
<p>看到服务员了吗, 我还想要杯斯特利*马提尼</p>
</blockquote>
<a id="more"></a>
<p><img src="http://img31.mtime.cn/pi/2014/01/10/162712.28434029_1000X1000.jpg" alt="lsml"></p>
<p><img src="http://img31.mtime.cn/pi/2013/06/28/143646.97680358_1000X1000.jpg" alt="lsml"></p>
<p><img src="http://img31.mtime.cn/pi/2013/08/09/101710.91218653_1000X1000.jpg" alt="lsml"></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[note-Beej-Network-Programming]]></title>
      <url>https://beim.github.io/2016/10/20/note-Beej-Network-Programming/</url>
      <content type="html"><![CDATA[<h1 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h1><hr>
<h1 id="What-is-a-socket"><a href="#What-is-a-socket" class="headerlink" title="What is a socket?"></a>What is a socket?</h1><p>“Stream Sockets” and “Datagram Sockets” , which may be referred to as <code>SOCK_STRAM</code> and <code>SOCK_DGRAM</code><br>Datagram sockets are sometimes called “connectionless sockets”. (Though they can be <code>connect()</code>‘d if you really want)</p>
<hr>
<h1 id="IP-Addresses-structs-and-Data-Munging-转换"><a href="#IP-Addresses-structs-and-Data-Munging-转换" class="headerlink" title="IP Addresses, structs, and Data Munging(转换)"></a>IP Addresses, structs, and Data Munging(转换)</h1><h2 id="ipv6"><a href="#ipv6" class="headerlink" title="ipv6"></a>ipv6</h2><p>ipv6, 128 bits,  Lots of times with lots of zeros in it, and can be compressed between two colons.<br>For instance:<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">2001</span>:<span class="number">0</span><span class="attribute">db8</span>:<span class="attribute">c9d2</span>:<span class="number">0012</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0051</span></div><div class="line"><span class="number">2001</span>:<span class="attribute">db8</span>:<span class="attribute">c9d2</span>:<span class="number">12</span>::<span class="number">51</span></div><div class="line"></div><div class="line"><span class="number">2001</span>:<span class="number">0</span><span class="attribute">db8</span>:<span class="attribute">ab00</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span></div><div class="line"><span class="number">2001</span>:<span class="attribute">db8</span>:<span class="attribute">ab00</span>::</div><div class="line"></div><div class="line"># It<span class="string">'s loopback address, It always means "this machine I'</span>m running on now"</div><div class="line"><span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0001</span></div><div class="line">::<span class="number">1</span></div><div class="line"></div><div class="line"># there's an ipv4-compatibility mode for ipv6 <span class="attribute">addresses</span></div><div class="line">::<span class="attribute">ffff</span>:<span class="number">192.0</span>.<span class="number">2.33</span></div></pre></td></tr></table></figure></p>
<a id="more"></a>
<hr>
<h2 id="subnets"><a href="#subnets" class="headerlink" title="subnets"></a>subnets</h2><figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="number">192.0</span>.<span class="number">2.12</span> <span class="built_in">AND</span> <span class="number">255.255</span>.<span class="number">255.0</span></div><div class="line">=&gt;</div><div class="line"><span class="number">192.0</span>.<span class="number">2.0</span> (<span class="number">255.255</span>.<span class="number">255.0</span>)</div><div class="line"></div><div class="line"># <span class="built_in">or</span></div><div class="line"><span class="number">192.0</span>.<span class="number">2.12</span>/<span class="number">24</span></div><div class="line"></div><div class="line"># for ipv6</div><div class="line"><span class="symbol">2001:db8</span><span class="symbol">:</span><span class="symbol">:</span>/<span class="number">32</span></div><div class="line"><span class="built_in">or</span></div><div class="line"><span class="symbol">2001:db8</span><span class="symbol">:5413</span><span class="symbol">:4028</span><span class="symbol">:</span><span class="symbol">:9</span>db9/<span class="number">64</span></div></pre></td></tr></table></figure>
<hr>
<h2 id="Byte-Order"><a href="#Byte-Order" class="headerlink" title="Byte Order"></a>Byte Order</h2><p>Two byte orderings: Big-Endian, Little-Endian<br>If you want to represent thw two-byte hex number, say <code>b34f</code>, you’ll store it:<br>Big-Endian : b34f<br>Little-Endian: 4fb3<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="string">`Network Byte Order`</span> </div><div class="line">        =&gt; <span class="string">`Big-Endian Order`</span></div><div class="line"><span class="string">`Host Byte Order`</span></div><div class="line">        =&gt; <span class="string">`Little-Endian Order`</span> (Intel or Intel-compatible processor)</div><div class="line">        =&gt; <span class="string">`Big-Endian`</span></div></pre></td></tr></table></figure></p>
<p>These function will do the magic conversion between <code>Network Byte Order</code> and <code>Host Byte Order</code></p>
<ul>
<li>htons()   host to network short (two bytes)</li>
<li>htonl()   host to network long (four bytes)</li>
<li>ntohs()   network to host short </li>
<li>ntohl()   network to host long</li>
</ul>
<hr>
<h2 id="struct"><a href="#struct" class="headerlink" title="struct"></a>struct</h2><p>socket descriptor =&gt; <strong>int</strong></p>
<p><strong>struct addrinfo</strong> . It’s used to prep the socket address structures for subsequent use. It’s also used in host name lookups, and service name lookups.<br><figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">addrinfo</span></span> &#123;</div><div class="line">    <span class="keyword">int</span>              ai_flags;     <span class="comment">// AI_PASSIVE, AI_CANONNAME, etc.</span></div><div class="line">    <span class="keyword">int</span>              ai_family;    <span class="comment">// AF_INET, AF_INET6, AF_UNSPEC</span></div><div class="line">    <span class="keyword">int</span>              ai_socktype;  <span class="comment">// SOCK_STREAM, SOCK_DGRAM</span></div><div class="line">    <span class="keyword">int</span>              ai_protocol;  <span class="comment">// use 0 for "any"</span></div><div class="line">    size_t           ai_addrlen;   <span class="comment">// size of ai_addr in bytes</span></div><div class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr</span></span> *ai_addr;      <span class="comment">// struct sockaddr_in or _in6</span></div><div class="line">    <span class="keyword">char</span>            *ai_canonname; <span class="comment">// full canonical hostname</span></div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">addrinfo</span></span> *ai_next;      <span class="comment">// linked list, next node</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>You’ll load this struct up a bit, and then call getaddrinfo(). It’ll return a pointer to a new linked list of these structures filled out with all the goodies you need;</p>
<p><strong>struct sockaddr</strong><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> sockaddr &#123;</div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">short</span>    sa_family;    <span class="comment">// address family, AF_xxx</span></div><div class="line">    <span class="keyword">char</span>              sa_data[<span class="number">14</span>];  <span class="comment">// 14 bytes of protocol address</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><code>sa_family</code> can be a variety of things, but it’ll be <code>AF_INET</code>(ipv4) or <code>AF_INET6</code>(ipv6) in this document.<br><code>sa_data</code> contains a destination address and port number for the socket.<br>This is rather unwieldy since you don’t want to tediously pack the address in the <code>sa_data</code> by hand.<br>To deal with this, programmers created a parallel structure: <code>struct sockaddr_in</code>(‘in’ for ‘internet’) to be used with <code>ipv4</code></p>
<blockquote>
<p>And this is the <strong>important</strong> bit: a pointer to a <code>struct sockaddr_in</code> can be cast to a pointer to a <code>struct sockaddr</code> and vice-versa. So even though <code>connect()</code> wants a <code>struct sockaddr*</code>, you can still use a <code>struct sockaddr_in</code> and cast it at the last minute</p>
</blockquote>
<p><strong>struct sockaddr_in</strong><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// (IPv4 only--see struct sockaddr_in6 for IPv6)</span></div><div class="line"></div><div class="line"><span class="keyword">struct</span> sockaddr_in &#123;</div><div class="line">    <span class="keyword">short</span> <span class="keyword">int</span>          sin_family;  <span class="comment">// Address family, AF_INET</span></div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">short</span> <span class="keyword">int</span> sin_port;    <span class="comment">// Port number</span></div><div class="line">    <span class="keyword">struct</span> in_addr     sin_addr;    <span class="comment">// Internet address</span></div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span>      sin_zero[<span class="number">8</span>]; <span class="comment">// Same size as struct sockaddr, It's included to pad the structure to the length of `struct sockaddr`</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><code>sin_zero</code> shouled be set to all zeros with the function <strong>memset()</strong><br><code>sin_family</code> corresponds to <code>sa_family</code> in a <code>struct sockaddr</code> and should be set to <code>AF_INET</code><br><code>sin_port</code> must be in <em>Network Byte Order</em> (by using <strong>htons()</strong>)</p>
<p><code>sin_addr</code> is a <code>struct in_addr</code><br><figure class="highlight thrift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// (IPv4 only--see struct in6_addr for IPv6)</span></div><div class="line"></div><div class="line"><span class="comment">// Internet address (a structure for historical reasons)</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">in_addr</span> </span>&#123;</div><div class="line">    uint32_t s_addr; <span class="comment">// that's a 32-bit int (4 bytes)</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>So if you have declared <code>ina</code> to be of type <code>struct sockaddr_in</code> then <code>ina.sin_addr.s_addr</code> references the 4-byte IP address(in Network Byte Order).</p>
<p>What about ipv6, see <strong>sockaddr_in6</strong><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// (IPv6 only--see struct sockaddr_in and struct in_addr for IPv4)</span></div><div class="line"></div><div class="line"><span class="keyword">struct</span> sockaddr_in6 &#123;</div><div class="line">    <span class="keyword">u_int16_t</span>       sin6_family;   <span class="comment">// address family, AF_INET6</span></div><div class="line">    <span class="keyword">u_int16_t</span>       sin6_port;     <span class="comment">// port number, Network Byte Order</span></div><div class="line">    <span class="keyword">u_int32_t</span>       sin6_flowinfo; <span class="comment">// IPv6 flow information</span></div><div class="line">    <span class="keyword">struct</span> in6_addr sin6_addr;     <span class="comment">// IPv6 address</span></div><div class="line">    <span class="keyword">u_int32_t</span>       sin6_scope_id; <span class="comment">// Scope ID</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> in6_addr &#123;</div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span>   s6_addr[<span class="number">16</span>];   <span class="comment">// IPv6 address</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><strong>struct sockaddr_storage</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> sockaddr_storage &#123;</div><div class="line">    <span class="keyword">sa_family_t</span>  ss_family;     <span class="comment">// address family</span></div><div class="line"></div><div class="line">    <span class="comment">// all this is padding, implementation specific, ignore it:</span></div><div class="line">    <span class="keyword">char</span>      <span class="number">__</span>ss_pad1[<span class="number">_</span>SS_PAD1SIZE];</div><div class="line">    <span class="keyword">int64_t</span>   <span class="number">__</span>ss_align;</div><div class="line">    <span class="keyword">char</span>      <span class="number">__</span>ss_pad2[<span class="number">_</span>SS_PAD2SIZE];</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p><code>struct sockaddr_storage</code> is designed to be large enough to hold both ipv4 and ipv6 structures. So you can pass this parallel structure to some calls and then cast it to the type you need;</p>
<p>You can see the addrees family <code>ss_family</code> field - check this to see if it’s <code>AF_INET</code> or <code>AF_INET6</code>, Then you can cast it to a <code>struct sockaddr_in</code> or <code>struct sockaddr_in6</code> if you wanna.</p>
<hr>
<h2 id="IP-Addresses"><a href="#IP-Addresses" class="headerlink" title="IP Addresses"></a>IP Addresses</h2><p>if you want to convert 10.12.110.57 to sa.sin_addr<br>use <strong>inet_pton()</strong>, which converts IP address in numbers-and-dots notation into either a <code>struct in_addr</code> or <code>struct in6_addr</code> depending on whether you specify <code>AF_INET</code> or <code>AF_INET6</code>  (<code>pton</code> stands for presentation to network - you can call it printable to network.)<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> sockaddr_in sa; <span class="comment">// IPv4</span></div><div class="line"><span class="keyword">struct</span> sockaddr_in6 sa6; <span class="comment">// IPv6</span></div><div class="line"></div><div class="line">inet_pton(AF_INET, <span class="string">"10.12.110.57"</span>, &amp;(sa.sin_addr)); <span class="comment">// IPv4</span></div><div class="line">inet_pton(AF_INET6, <span class="string">"2001:db8:63b3:1::3490"</span>, &amp;(sa6.sin6_addr)); <span class="comment">// IPv6</span></div></pre></td></tr></table></figure></p>
<p>(the old way of doing things used a function called <strong>inet_addr()</strong> or another function called <strong>inet_aton()</strong> these are now absolete and don’t work with ipv6)</p>
<p>if you want to convert sa.sin_addr to 10.12.110.57<br>use <strong>init_ntop()</strong>(means network to presentation, or network to printable) , like this:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// IPv4:</span></div><div class="line"></div><div class="line"><span class="keyword">char</span> ip4[INET_ADDRSTRLEN];  <span class="comment">// space to hold the IPv4 string</span></div><div class="line"><span class="keyword">struct</span> sockaddr_in sa;      <span class="comment">// pretend this is loaded with something</span></div><div class="line"></div><div class="line">inet_ntop(AF_INET, &amp;(sa.sin_addr), ip4, INET_ADDRSTRLEN);</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"The IPv4 address is: %s\n"</span>, ip4);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// IPv6:</span></div><div class="line"></div><div class="line"><span class="keyword">char</span> ip6[INET6_ADDRSTRLEN]; <span class="comment">// space to hold the IPv6 string</span></div><div class="line"><span class="keyword">struct</span> sockaddr_in6 sa6;    <span class="comment">// pretend this is loaded with something</span></div><div class="line"></div><div class="line">inet_ntop(AF_INET6, &amp;(sa6.sin6_addr), ip6, INET6_ADDRSTRLEN);</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"The address is: %s\n"</span>, ip6);</div></pre></td></tr></table></figure></p>
<p>When you call it, you will pass the address type (ipv4 or ipv6), the address, a pointer to a string to hold the result, and the maximum length of that string. (Two macros conveniently hold the size of the string : <code>INET_ADDRSTRLEN</code> and <code>INET6_ADDRSTRLEN</code>)</p>
<p>(the old way of doing things: called <strong>inet_ntoa()</strong>, it’s also absolete and won’t work with ipv6)</p>
<blockquote>
<p>NOTE: These functions only work with numeric IP addresses - they won’t do any nameserver DNS lookup on a hostname, like ‘www.example.com’. You will use <strong>getaddrinfo()</strong> to do that.</p>
</blockquote>
<hr>
<h2 id="Private-Or-Disconnected-Networks"><a href="#Private-Or-Disconnected-Networks" class="headerlink" title="Private (Or Disconnected ) Networks"></a>Private (Or Disconnected ) Networks</h2><p>ipv4: 10.x.x.x 192.168.x.x 172.y.x.x   x is 0-255  y is 16-31<br>ipv6: fsxx: (or maybe in the future fcXX:), as per <a href="http://tools.ietf.org/html/rfc4193" target="_blank" rel="external">RFC 4193</a></p>
<hr>
<h1 id="Jumping-from-ipv4-to-ipv6"><a href="#Jumping-from-ipv4-to-ipv6" class="headerlink" title="Jumping from ipv4 to ipv6"></a>Jumping from ipv4 to ipv6</h1><p><a href="http://beej.us/guide/bgnet/output/html/multipage/ip4to6.html" target="_blank" rel="external">Beej’s Guide</a></p>
<hr>
<h1 id="System-Calls-or-Bust"><a href="#System-Calls-or-Bust" class="headerlink" title="System Calls or Bust"></a>System Calls or Bust</h1><h2 id="getaddrinfo-Prepare-to-launch"><a href="#getaddrinfo-Prepare-to-launch" class="headerlink" title="getaddrinfo() ; Prepare to launch"></a>getaddrinfo() ; Prepare to launch</h2><p>It helps set up the <code>structs</code> you need later on.</p>
<p>HISTORY: it used to be that you would use a function called <strong>gethostbyname()</strong> to do DNS lookups. Then you’d load that information by hand into a <code>struct sockaddr_in</code>, and use that in calls.</p>
<p>This is no longer necessary, you now have the function <strong>getaddrinfo()</strong> that does all kinds of good stuff for you, including DNS and service name lookups, and fills out the <code>structs</code> you need, besides!</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="built_in">int</span> getaddrinfo(<span class="keyword">const</span> char *node,     // e.g. <span class="string">"www.example.com"</span> <span class="literal">or</span> IP</div><div class="line">                <span class="keyword">const</span> char *service,  // e.g. <span class="string">"http"</span> <span class="literal">or</span> port <span class="built_in">number</span></div><div class="line">                <span class="keyword">const</span> struct addrinfo *hints,</div><div class="line">                struct addrinfo **res)<span class="comment">;</span></div></pre></td></tr></table></figure>
<p>You give this function three input parameters, and it gives you a pointer to a linked-list, <code>res</code>, of result.</p>
<p>The parameter <code>service</code> can be a port number, like “80”, or the name of a particular service (found in <a href="http://www.iana.org/assignments/port-numbers" target="_blank" rel="external">THE IANA Port List</a> or the <code>/etc/services</code> file) like “http” or “ftp” or whatever.</p>
<p>The <code>hints</code> parameter points to a <code>struct addrinfo</code> that you’ve already filled out with relevant information.</p>
<p>Here’s a sample call if you’re a server who wants to listen on your host’s IP address, port 3490.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> status;</div><div class="line"><span class="keyword">struct</span> addrinfo hints;</div><div class="line"><span class="keyword">struct</span> addrinfo *servinfo;  <span class="comment">// will point to the results</span></div><div class="line"></div><div class="line"><span class="built_in">memset</span>(&amp;hints, <span class="number">0</span>, <span class="keyword">sizeof</span> hints); <span class="comment">// make sure the struct is empty</span></div><div class="line">hints.ai_family = AF_UNSPEC;     <span class="comment">// don't care IPv4 or IPv6, you can set it to AF_INET or AF_INET6 if you want one or the other specifically.</span></div><div class="line">hints.ai_socktype = SOCK_STREAM; <span class="comment">// TCP stream sockets</span></div><div class="line">hints.ai_flags = AI_PASSIVE;     <span class="comment">// fill in my IP for me</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> ((status = getaddrinfo(<span class="literal">NULL</span>, <span class="string">"3490"</span>, &amp;hints, &amp;servinfo)) != <span class="number">0</span>) &#123;</div><div class="line">    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"getaddrinfo error: %s\n"</span>, gai_strerror(status));</div><div class="line">    <span class="built_in">exit</span>(<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// servinfo now points to a linked list of 1 or more struct addrinfos</span></div><div class="line"></div><div class="line"><span class="comment">// ... do everything until you don't need servinfo anymore ....</span></div><div class="line"></div><div class="line">freeaddrinfo(servinfo); <span class="comment">// free the linked-list</span></div></pre></td></tr></table></figure>
<p>The <code>AI_PASSIVE</code> flag tells <strong>getaddrinfo()</strong> to assign the address of my local host to the socket structures. (Or you can put a specific address in as the first parameter to <strong>getaddrinfo()</strong> where I currently have NULL, up there)</p>
<p>If there’s an error (<strong>getaddrinfo()</strong> returns non-zero), we can print it out using the funciont <strong>gai_strerrr()</strong>. If everything works properly, <code>servinfo</code> will point to a linked list of <code>struct addrinfo</code>s, each of which contains a <code>struct sockaddr</code> of some kind that we can use later!</p>
<p>Finally, when we’re all done with the linked list that <strong>getaddrinfo()</strong> allocated for us, we should free it all up with a call to <strong>freeaddrinfo()</strong></p>
<p>Here’s sample call if you’re a client who wants to connect to a particular server, say “www.example.net” port 3490.<br><figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> status;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">addrinfo</span></span> hints;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">addrinfo</span></span> *servinfo;  <span class="comment">// will point to the results</span></div><div class="line"></div><div class="line">memset(&amp;hints, <span class="number">0</span>, <span class="keyword">sizeof</span> hints); <span class="comment">// make sure the struct is empty</span></div><div class="line">hints.ai_family = AF_UNSPEC;     <span class="comment">// don't care IPv4 or IPv6</span></div><div class="line">hints.ai_socktype = SOCK_STREAM; <span class="comment">// TCP stream sockets</span></div><div class="line"></div><div class="line"><span class="comment">// get ready to connect</span></div><div class="line">status = getaddrinfo(<span class="string">"www.example.net"</span>, <span class="string">"3490"</span>, &amp;hints, &amp;servinfo);</div><div class="line"></div><div class="line"><span class="comment">// servinfo now points to a linked list of 1 or more struct addrinfos</span></div><div class="line"></div><div class="line"><span class="comment">// etc.</span></div></pre></td></tr></table></figure></p>
<p>I keep saying that <code>servinfo</code> is a linked list with all kinds of address information.Here is a demo to show off this information. The <a href="http://beej.us/guide/bgnet/examples/showip.c" target="_blank" rel="external">short program</a> will print the IP address for whatever host you specified on the command line. </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">** showip.c -- show IP addresses for a host given on the command line</div><div class="line">*/</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netinet/in.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">struct</span> addrinfo hints, *res, *p;</div><div class="line">    <span class="keyword">int</span> status;</div><div class="line">    <span class="keyword">char</span> ipstr[INET6_ADDRSTRLEN];</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (argc != <span class="number">2</span>) &#123;</div><div class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>,<span class="string">"usage: showip hostname\n"</span>);</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="built_in">memset</span>(&amp;hints, <span class="number">0</span>, <span class="keyword">sizeof</span> hints);</div><div class="line">    hints.ai_family = AF_UNSPEC; <span class="comment">// AF_INET or AF_INET6 to force version</span></div><div class="line">    hints.ai_socktype = SOCK_STREAM;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> ((status = getaddrinfo(argv[<span class="number">1</span>], <span class="literal">NULL</span>, &amp;hints, &amp;res)) != <span class="number">0</span>) &#123;</div><div class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"getaddrinfo: %s\n"</span>, gai_strerror(status));</div><div class="line">        <span class="keyword">return</span> <span class="number">2</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="built_in">printf</span>(<span class="string">"IP addresses for %s:\n\n"</span>, argv[<span class="number">1</span>]);</div><div class="line"></div><div class="line">    <span class="keyword">for</span>(p = res;p != <span class="literal">NULL</span>; p = p-&gt;ai_next) &#123;</div><div class="line">        <span class="keyword">void</span> *addr;</div><div class="line">        <span class="keyword">char</span> *ipver;</div><div class="line"></div><div class="line">        <span class="comment">// get the pointer to the address itself,</span></div><div class="line">        <span class="comment">// different fields in IPv4 and IPv6:</span></div><div class="line">        <span class="keyword">if</span> (p-&gt;ai_family == AF_INET) &#123; <span class="comment">// IPv4</span></div><div class="line">            <span class="keyword">struct</span> sockaddr_in *ipv4 = (<span class="keyword">struct</span> sockaddr_in *)p-&gt;ai_addr;</div><div class="line">            addr = &amp;(ipv4-&gt;sin_addr);</div><div class="line">            ipver = <span class="string">"IPv4"</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// IPv6</span></div><div class="line">            <span class="keyword">struct</span> sockaddr_in6 *ipv6 = (<span class="keyword">struct</span> sockaddr_in6 *)p-&gt;ai_addr;</div><div class="line">            addr = &amp;(ipv6-&gt;sin6_addr);</div><div class="line">            ipver = <span class="string">"IPv6"</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// convert the IP to a string and print it:</span></div><div class="line">        inet_ntop(p-&gt;ai_family, addr, ipstr, <span class="keyword">sizeof</span> ipstr);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"  %s: %s\n"</span>, ipver, ipstr);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    freeaddrinfo(res); <span class="comment">// free the linked list</span></div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Sample run!<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ showip www<span class="selector-class">.example</span><span class="selector-class">.net</span></div><div class="line">IP addresses <span class="keyword">for</span> www<span class="selector-class">.example</span><span class="selector-class">.net</span>:</div><div class="line"></div><div class="line">  IPv4: <span class="number">192.0</span>.<span class="number">2.88</span></div><div class="line"></div><div class="line">$ showip ipv6<span class="selector-class">.example</span><span class="selector-class">.com</span></div><div class="line">IP addresses <span class="keyword">for</span> ipv6<span class="selector-class">.example</span><span class="selector-class">.com</span>:</div><div class="line"></div><div class="line">  IPv4: <span class="number">192.0</span>.<span class="number">2.101</span></div><div class="line">  IPv6: <span class="number">2001</span>:db8:<span class="number">8</span>c00:<span class="number">22</span>::<span class="number">171</span></div></pre></td></tr></table></figure></p>
<hr>
<h2 id="socket-Get-the-File-Descriptor"><a href="#socket-Get-the-File-Descriptor" class="headerlink" title="socket() ; Get the File Descriptor"></a>socket() ; Get the File Descriptor</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="comment">// arguments: ipv4 or ipv6, stream or datagram, and tcp or udp</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">socket</span><span class="params">(<span class="keyword">int</span> domain, <span class="keyword">int</span> type, <span class="keyword">int</span> protocol)</span></span>;</div></pre></td></tr></table></figure>
<p>It used to be people would hardcode these values, and you can absolutely still do that.(<code>domain</code> is <code>PF_INET</code> or <code>PF_INET6</code>, <code>type</code> is <code>SOCK_STREAM</code> or <code>SOCK_DGRAM</code>, and <code>protocol</code> can be set to 0 to choose the proper protocol for the given type. Or you can call <strong>getprotobyname()</strong> to look up the protocol you want, “tcp” or “udp”)</p>
<p>(This <code>PF_INET</code> thing is a close relative of the <code>AF_INET</code>, But the most correct thing to do is to use <code>AF_INET</code> in your <code>struct sockaddr_in</code> and <code>PF_INET</code> in your call to <strong>socket()</strong>)</p>
<p>What you really want to do is use the values from the results of the call to <strong>getaddrinfo()</strong>, and feed them into <strong>socket()</strong> directly like this.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> s;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">addrinfo</span></span> hints, *res;</div><div class="line"></div><div class="line"><span class="comment">// do the lookup</span></div><div class="line"><span class="comment">// [pretend we already filled out the "hints" struct]</span></div><div class="line">getaddrinfo(<span class="string">"www.example.com"</span>, <span class="string">"http"</span>, &amp;hints, &amp;res);</div><div class="line"></div><div class="line"><span class="comment">// [again, you should do error-checking on getaddrinfo(), and walk</span></div><div class="line"><span class="comment">// the "res" linked list looking for valid entries instead of just</span></div><div class="line"><span class="comment">// assuming the first one is good (like many of these examples do.)</span></div><div class="line"><span class="comment">// See the section on client/server for real examples.]</span></div><div class="line"></div><div class="line">s = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);</div></pre></td></tr></table></figure>
<p><strong>socket()</strong> simply returns to you a <code>socket discriptor</code> that you can use in later system calls, or <code>-1</code> on error.</p>
<hr>
<h2 id="bind-What-port-am-I-on"><a href="#bind-What-port-am-I-on" class="headerlink" title="bind() ; What port am I on ?"></a>bind() ; What port am I on ?</h2><p>Associate the socket with a port on your local machine. If you’re going to only be doing a <strong>connect()</strong>, this is probably be unnecessary.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">bind</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">struct</span> sockaddr *my_addr, <span class="keyword">int</span> addrlen)</span></span>;</div><div class="line"></div><div class="line"><span class="comment">// `sockfd` is the socket file descriptor returned by socket(). </span></div><div class="line"><span class="comment">// `my_addr` is a pointer to a `struct sockaddr` that contains information about your address, namely, port and IP address.</span></div><div class="line"><span class="comment">// `addrlen` is the length in bytes of that address.</span></div></pre></td></tr></table></figure>
<p>Let’s have an example that binds the socket to the host the program is running on, port 3490:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> addrinfo hints, *res;</div><div class="line"><span class="keyword">int</span> sockfd;</div><div class="line"></div><div class="line"><span class="comment">// first, load up address structs with getaddrinfo():</span></div><div class="line"></div><div class="line"><span class="built_in">memset</span>(&amp;hints, <span class="number">0</span>, <span class="keyword">sizeof</span> hints);</div><div class="line">hints.ai_family = AF_UNSPEC;  <span class="comment">// use IPv4 or IPv6, whichever</span></div><div class="line">hints.ai_socktype = SOCK_STREAM;</div><div class="line">hints.ai_flags = AI_PASSIVE;     <span class="comment">// fill in my IP for me</span></div><div class="line"></div><div class="line">getaddrinfo(<span class="literal">NULL</span>, <span class="string">"3490"</span>, &amp;hints, &amp;res);</div><div class="line"></div><div class="line"><span class="comment">// make a socket:</span></div><div class="line"></div><div class="line">sockfd = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);</div><div class="line"></div><div class="line"><span class="comment">// bind it to the port we passed in to getaddrinfo():</span></div><div class="line"></div><div class="line">bind(sockfd, res-&gt;ai_addr, res-&gt;ai_addrlen);</div></pre></td></tr></table></figure>
<p>By using the <code>AI_PASSIVE</code> flag, I’m telling the program to bind to the IP of the host it’s running on. If you want to bind to a specific local IP address, drop the <code>AI_PASSIVE</code> and put an IP address in for the first argument to <strong>getaddrinfo()</strong>.</p>
<p><strong>bind()</strong> also returns -1 on error and sets <code>errno</code> to the error’s value.</p>
<p>Lots of old code manually packs the <code>struct sockaddr_in</code> before calling <strong>bind()</strong>. This is ipv4-specified. The old code looks like this:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// !!! THIS IS THE OLD WAY !!!</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> sockfd;</div><div class="line"><span class="keyword">struct</span> sockaddr_in my_addr;</div><div class="line"></div><div class="line">sockfd = socket(PF_INET, SOCK_STREAM, <span class="number">0</span>);</div><div class="line"></div><div class="line">my_addr.sin_family = AF_INET;</div><div class="line">my_addr.sin_port = htons(MYPORT);     <span class="comment">// short, network byte order</span></div><div class="line">my_addr.sin_addr.s_addr = inet_addr(<span class="string">"10.12.110.57"</span>);</div><div class="line"><span class="built_in">memset</span>(my_addr.sin_zero, <span class="string">'\0'</span>, <span class="keyword">sizeof</span> my_addr.sin_zero);</div><div class="line"></div><div class="line">bind(sockfd, (<span class="keyword">struct</span> sockaddr *)&amp;my_addr, <span class="keyword">sizeof</span> my_addr);</div></pre></td></tr></table></figure></p>
<p>In the above code, you could also assign <code>INADDR_ANY</code> to the <code>s_addr</code> field if you want to bind to your local IP address (like the <code>AI_PASSIVE</code> flag, above.) The ipv6 version of <code>INADDR_ANY</code> is a global variable <code>in6addr_any</code> that is assigned into the <code>sin6_addr</code> field of your <code>struct sockadd_in6</code>. (There is also a macro <code>IN6ADDR_ANY_INIT</code> that you can use in a variable initializer.)</p>
<p>Sometimes you try to return a server and <strong>bind()</strong> fails, claiming “Address already in use”. It’s because a little bit of a socket that was connected is still hanging around in the kernel, and it’s hogging the port. You can either wait for it to clear (a minute or so), or add code to your program allowing it to reuse the port, like this:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// int setsockopt(int sockfd, int level, int optname,</span></div><div class="line"><span class="comment">//                    const void *optval, socklen_t optlen);</span></div><div class="line"><span class="keyword">int</span> yes=<span class="number">1</span>;</div><div class="line"><span class="comment">//char yes='1'; // Solaris people use this</span></div><div class="line"></div><div class="line"><span class="comment">// lose the pesky "Address already in use" error message</span></div><div class="line"><span class="keyword">if</span> (setsockopt(listener,SOL_SOCKET,SO_REUSEADDR,&amp;yes,<span class="keyword">sizeof</span> yes) == <span class="number">-1</span>) &#123;</div><div class="line">    perror(<span class="string">"setsockopt"</span>);</div><div class="line">    <span class="built_in">exit</span>(<span class="number">1</span>);</div><div class="line">&#125; </div><div class="line"></div><div class="line"><span class="comment">// then bind...</span></div></pre></td></tr></table></figure>
<hr>
<h2 id="connect-–-Hey-you"><a href="#connect-–-Hey-you" class="headerlink" title="connect() – Hey you!"></a>connect() – Hey you!</h2><p>The <strong>connect()</strong> call is as follows:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">connect</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">struct</span> sockaddr *serv_addr, <span class="keyword">int</span> addrlen)</span></span>; </div><div class="line"></div><div class="line"><span class="comment">// `sockfd` is socket file descriptor, as returned by the socket() call.</span></div><div class="line"><span class="comment">// `serv_addr` is a `struct sockaddr` containing the destination port and IP address</span></div><div class="line"><span class="comment">// `addrlen` is the length in bytes of the server address structure</span></div><div class="line"><span class="comment">// All of this information can be gleaned from the results of the **getaddrinfo()** call</span></div></pre></td></tr></table></figure></p>
<p>Here is an example where we make a socket connection to “www.example.com”, port 3490<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> addrinfo hints, *res;</div><div class="line"><span class="keyword">int</span> sockfd;</div><div class="line"></div><div class="line"><span class="comment">// first, load up address structs with getaddrinfo():</span></div><div class="line"></div><div class="line"><span class="built_in">memset</span>(&amp;hints, <span class="number">0</span>, <span class="keyword">sizeof</span> hints);</div><div class="line">hints.ai_family = AF_UNSPEC;</div><div class="line">hints.ai_socktype = SOCK_STREAM;</div><div class="line"></div><div class="line">getaddrinfo(<span class="string">"www.example.com"</span>, <span class="string">"3490"</span>, &amp;hints, &amp;res);</div><div class="line"></div><div class="line"><span class="comment">// make a socket:</span></div><div class="line"></div><div class="line">sockfd = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);</div><div class="line"></div><div class="line"><span class="comment">// connect!</span></div><div class="line"></div><div class="line">connect(sockfd, res-&gt;ai_addr, res-&gt;ai_addrlen);</div></pre></td></tr></table></figure></p>
<p>OLD WAY: Old programs filled out their own <code>struct sockaddr_in</code> to pass to <strong>connect()</strong>.</p>
<p><strong>connect()</strong> will return <strong>-1</strong> on error and set the variable <strong>errno</strong></p>
<hr>
<h2 id="listen-Will-somebody-please-call-me"><a href="#listen-Will-somebody-please-call-me" class="headerlink" title="listen() - Will somebody please call me?"></a>listen() - Will somebody please call me?</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">listen</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">int</span> backlog)</span></span>; </div><div class="line"></div><div class="line"><span class="comment">// `sockfd` is the socket file descriptor from the **socket()** system call.</span></div><div class="line"><span class="comment">// `backlog` is the number of connections allowed on the imcoming queue.</span></div><div class="line"><span class="comment">// Incoming connections are going to wait in this queue until you **accept()** them, and this is the limit on how many can queue up.</span></div><div class="line"><span class="comment">// Most systems silently limit this number to about 20; you can probably get away with setting it to 5 or 10.</span></div></pre></td></tr></table></figure>
<p><strong>listen()</strong> returns <strong>-1</strong> and sets <strong>errno</strong> on error</p>
<p>We need to call <strong>bind()</strong> before we call <strong>listen()</strong> so that the server is running on a specific port.<br>The sequence of system calls you’ll make is:<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">getaddrinfo()<span class="comment">;</span></div><div class="line">socket()<span class="comment">;</span></div><div class="line">bind()<span class="comment">;</span></div><div class="line">listen()<span class="comment">;</span></div><div class="line">/* accept() goes here */</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="accept-Thank-you-for-calling-port-3490"><a href="#accept-Thank-you-for-calling-port-3490" class="headerlink" title="accept() - Thank you for calling port 3490"></a>accept() - Thank you for calling port 3490</h2><p>Someone far far away will try to <strong>connect()</strong> to your machine on a port that you are <strong>listen()</strong>ing on. Their connection will be queued up waiting to be <strong>accept()</strong>ed. You call <strong>accept()</strong> and you tell it to get the pending connection. It’ll return to you a <code>brand new socket file descriptor</code> to use for this single connection!. The original one is still listening for more new connections, and the newly created one is finally ready to <strong>send()</strong> and <strong>recv()</strong>. </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">accept</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">struct</span> sockaddr *addr, <span class="keyword">socklen_t</span> *addrlen)</span></span>; </div><div class="line"></div><div class="line"><span class="comment">// `sockfd` is the listen()ing socket descriptor.</span></div><div class="line"><span class="comment">// `addr` will usually be a pointer to a local `struct sockaddr_storage`</span></div></pre></td></tr></table></figure>
<p>example:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netinet/in.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MYPORT <span class="meta-string">"3490"</span>  <span class="comment">// the port users will be connecting to</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> BACKLOG 10     <span class="comment">// how many pending connections queue will hold</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">struct</span> sockaddr_storage their_addr;</div><div class="line">    <span class="keyword">socklen_t</span> addr_size;</div><div class="line">    <span class="keyword">struct</span> addrinfo hints, *res;</div><div class="line">    <span class="keyword">int</span> sockfd, new_fd;</div><div class="line"></div><div class="line">    <span class="comment">// !! don't forget your error checking for these calls !!</span></div><div class="line"></div><div class="line">    <span class="comment">// first, load up address structs with getaddrinfo():</span></div><div class="line"></div><div class="line">    <span class="built_in">memset</span>(&amp;hints, <span class="number">0</span>, <span class="keyword">sizeof</span> hints);</div><div class="line">    hints.ai_family = AF_UNSPEC;  <span class="comment">// use IPv4 or IPv6, whichever</span></div><div class="line">    hints.ai_socktype = SOCK_STREAM;</div><div class="line">    hints.ai_flags = AI_PASSIVE;     <span class="comment">// fill in my IP for me</span></div><div class="line"></div><div class="line">    getaddrinfo(<span class="literal">NULL</span>, MYPORT, &amp;hints, &amp;res);</div><div class="line"></div><div class="line">    <span class="comment">// make a socket, bind it, and listen on it:</span></div><div class="line"></div><div class="line">    sockfd = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);</div><div class="line">    bind(sockfd, res-&gt;ai_addr, res-&gt;ai_addrlen);</div><div class="line">    listen(sockfd, BACKLOG);</div><div class="line"></div><div class="line">    <span class="comment">// now accept an incoming connection:</span></div><div class="line"></div><div class="line">    addr_size = <span class="keyword">sizeof</span> their_addr;</div><div class="line">    new_fd = accept(sockfd, (<span class="keyword">struct</span> sockaddr *)&amp;their_addr, &amp;addr_size);</div><div class="line"></div><div class="line">    <span class="comment">// ready to communicate on socket descriptor new_fd!</span></div><div class="line">    .</div><div class="line">    .</div><div class="line">    .</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="send-and-recv"><a href="#send-and-recv" class="headerlink" title="send() and recv()"></a>send() and recv()</h2><p>send() call:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// *sockfd* is the socket descriptor you want to send data to;</span></div><div class="line"><span class="comment">// *msg* is a pointer to the data you want to send;</span></div><div class="line"><span class="comment">// *len* is the length of that data in bytes;</span></div><div class="line"><span class="comment">// just set flags to 0; see man page for more information concerning flags</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">send</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">const</span> <span class="keyword">void</span> *msg, <span class="keyword">int</span> len, <span class="keyword">int</span> flags)</span></span>;</div></pre></td></tr></table></figure></p>
<p>sample code:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">char</span> *msg = <span class="string">"Beej was here!"</span>;</div><div class="line"><span class="keyword">int</span> len, bytes_sent;</div><div class="line">`</div><div class="line">`</div><div class="line">`</div><div class="line">len = <span class="built_in">strlen</span>(msg);</div><div class="line">bytes_sent = send(sockfd, msg, len, <span class="number">0</span>);</div><div class="line">`</div><div class="line">`</div><div class="line">`</div></pre></td></tr></table></figure></p>
<p><code>send()</code> returns the numbers of bytes actually sent out – this might be less than the number you told it to send! Because sometimes it just can’t handle it. -1 is returned on error, and <code>errno</code> is set to the error number.</p>
<p><code>recv()</code> call:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// *sockfd* is the socket descriptor to read from</span></div><div class="line"><span class="comment">// *buf* is the buffer to read the information into</span></div><div class="line"><span class="comment">// *len* is the maximum length of the buffer</span></div><div class="line"><span class="comment">// *flags* can again be set to 0</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">recv</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">void</span> *buf, <span class="keyword">int</span> len, <span class="keyword">int</span> flags)</span></span>;</div></pre></td></tr></table></figure></p>
<p><code>recv()</code> returns the number of bytes actually read into the buffer, of -1 on error (with <code>errno</code> set, accordingly.)<br><code>recv()</code> can return 0. This can mean the remote side has closed the connection on you!</p>
<hr>
<h2 id="my-code-use-send-and-recv"><a href="#my-code-use-send-and-recv" class="headerlink" title="my code use send and recv"></a>my code use send and recv</h2><p>server<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MYPORT <span class="meta-string">"3490"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> BACKLOG 10</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">struct</span> addrinfo hints, *res;</div><div class="line"></div><div class="line">    <span class="built_in">memset</span>(&amp;hints, <span class="number">0</span>, <span class="keyword">sizeof</span> hints);</div><div class="line">    hints.ai_family = AF_UNSPEC;</div><div class="line">    hints.ai_socktype = SOCK_STREAM;</div><div class="line">    hints.ai_flags = AI_PASSIVE;</div><div class="line"></div><div class="line">    getaddrinfo(<span class="literal">NULL</span>, MYPORT, &amp;hints, &amp;res);</div><div class="line"></div><div class="line">    <span class="keyword">int</span> sockfd = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);</div><div class="line">    bind(sockfd, res-&gt;ai_addr, res-&gt;ai_addrlen);</div><div class="line">    listen(sockfd, BACKLOG);</div><div class="line"></div><div class="line">    <span class="keyword">struct</span> sockaddr_storage their_addr;</div><div class="line">    <span class="keyword">socklen_t</span> addr_size = <span class="keyword">sizeof</span> their_addr;</div><div class="line">    <span class="keyword">int</span> new_fd = accept(sockfd, (<span class="keyword">struct</span> sockaddr *)&amp;their_addr, &amp;addr_size);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"haha someone connect me\n"</span>);</div><div class="line"></div><div class="line">    <span class="keyword">int</span> max_size = <span class="number">1000</span>;</div><div class="line">    <span class="keyword">char</span> buf[max_size];</div><div class="line">    <span class="keyword">int</span> resno = recv(new_fd, buf, max_size, <span class="number">0</span>);</div><div class="line">    <span class="keyword">if</span> (resno &lt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"error: %s\n"</span>, buf);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"receive %s\n"</span>, buf);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>client:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">struct</span> addrinfo hints, *res;</div><div class="line"></div><div class="line">    <span class="built_in">memset</span>(&amp;hints, <span class="number">0</span>, <span class="keyword">sizeof</span> hints);</div><div class="line">    hints.ai_family = AF_UNSPEC;</div><div class="line">    hints.ai_socktype = SOCK_STREAM;</div><div class="line"></div><div class="line">    getaddrinfo(<span class="string">"localhost"</span>, <span class="string">"3490"</span>, &amp;hints, &amp;res);</div><div class="line"></div><div class="line">    <span class="keyword">int</span> sockfd = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);</div><div class="line">    <span class="keyword">int</span> connected = connect(sockfd, res-&gt;ai_addr, res-&gt;ai_addrlen);</div><div class="line"></div><div class="line">    <span class="keyword">char</span> *msg = <span class="string">"hi im beim lalala"</span>;</div><div class="line">    <span class="keyword">int</span> sended = send(sockfd, msg, <span class="built_in">strlen</span>(msg), <span class="number">0</span>);</div><div class="line">    <span class="keyword">if</span> (sended &gt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"sended %d bytes\n"</span>, sended);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"send error\n"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="sendto-and-recvfrom"><a href="#sendto-and-recvfrom" class="headerlink" title="sendto() and recvfrom()"></a>sendto() and recvfrom()</h2><p><code>sendto()</code><br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// *to* is a pointer to a struct sockaddr (which will probably be another struct sockadr_in or struct sockaddr_in6 or struct sockaddr_storage that you cast at the last minute) which contains the destination IP address and port.</span></div><div class="line"><span class="comment">// *tolen* an int deep-down, can simply be set to sizeof *to or sizeof(struct sockaddr_storage)</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sendto</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">const</span> <span class="keyword">void</span> *msg, <span class="keyword">int</span> len, <span class="keyword">unsigned</span> <span class="keyword">int</span> flags,</span></span></div><div class="line">           <span class="keyword">const</span> <span class="keyword">struct</span> sockaddr *to, <span class="keyword">socklen_t</span> tolen);</div></pre></td></tr></table></figure></p>
<p><code>send()</code> returns the number of bytes actually sent, or -1 on error.</p>
<p><code>recvfrom()</code><br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// *from* is a pointer to a local struct sockaddr_storage that will be filled with the IP address and port of the originating machine</span></div><div class="line"><span class="comment">// *fromlen* is a pointer to a local int that should be initialized to sizeof *from or sizeof(struct sockaddr_storage)</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">recvfrom</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">void</span> *buf, <span class="keyword">int</span> len, <span class="keyword">unsigned</span> <span class="keyword">int</span> flags,</span></span></div><div class="line">             <span class="keyword">struct</span> sockaddr *from, <span class="keyword">int</span> *fromlen);</div></pre></td></tr></table></figure></p>
<p><code>recvfrom()</code> returns the number of bytes received, or -1 on error.</p>
<p>Remember, if you connect() a datagram socket, you can then simply use send() and recv() for all your transactions. The socket itself is still a datagram socket and the packets still use UDP, but the socket interface will automatically add the destination and source information for you.</p>
<h2 id="close-and-shutdown"><a href="#close-and-shutdown" class="headerlink" title="close() and shutdown()"></a>close() and shutdown()</h2><p>close():<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">close(sockfd);</div></pre></td></tr></table></figure></p>
<p>This will prevent any more reads and writes to the socket. Anyone attemping to read or write the socket on the remote end will receive an error.</p>
<p>If you want to control over how the socket closes, you can use <code>shutdown()</code> function:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">shutdown</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">int</span> how)</span></span>;</div></pre></td></tr></table></figure></p>
<p><code>sockfd</code> is the socket file descriptor you want to shudown, and <code>how</code> is one of the following</p>
<ul>
<li>0 Further receives are disallowed</li>
<li>1 Further sends are disallowed</li>
<li>2 Further sends and receives are disallowed(like close())</li>
</ul>
<p><code>shutdown()</code> returns 0 on success, and -1 on error.</p>
<p>If you deign to use <code>shutdown()</code> on unconnected datagram sockets, it will simply make the socket unavailable for further <code>send()</code> and <code>recv()</code> calls.(remember that you can use these if you <code>connect()</code> your datagram socket)</p>
<p>Is’s important to note that <code>shutdown()</code> doesn’t actually close the file descriptor, it just changes its usability. To free a socket descriptor, you need to use close().</p>
<h2 id="getpeername"><a href="#getpeername" class="headerlink" title="getpeername()"></a>getpeername()</h2><p>The function will tell you who is at the other end of a connected stream socket.<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getpeername</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">struct</span> sockaddr *addr, <span class="keyword">int</span> *addrlen)</span></span>;</div></pre></td></tr></table></figure></p>
<p>sockfd is the descriptor of the connected stream socket, addr is a pointer to a struct sockaddr (or a struct sockaddr_in) that will hold the information about the other side of the connection, and addrlen is a pointer to an int, that should be initialized to sizeof *addr or sizeof(struct sockaddr).</p>
<p>The function returns -1 on error and sets errno accordingly.</p>
<p>Once you have their address, you can use inet_ntop(), getnameinfo(), or gethostbyaddr() to print or get more information. No, you can’t get their login name. </p>
<h2 id="gethostname"><a href="#gethostname" class="headerlink" title="gethostname()"></a>gethostname()</h2><p>The function returns the name of the computer that your program is running on. The name can then be used by <code>gethostbyname()</code>, below, to determine the IP address of your local machine.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">gethostname</span><span class="params">(<span class="keyword">char</span> *hostname, <span class="keyword">size_t</span> size)</span></span>;</div></pre></td></tr></table></figure>
<p>The arguments are simple: hostname is a pointer to an array of chars that will contain the hostname upon the function’s return, and size is the length in bytes of the hostname array.</p>
<p>The function returns 0 on successful completion, and -1 on error, setting errno as usual.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[cpp-makefile体验]]></title>
      <url>https://beim.github.io/2016/10/18/cpp-makefile%E4%BD%93%E9%AA%8C/</url>
      <content type="html"><![CDATA[<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">l</span></div><div class="line">dir1/  makefile  o/  <span class="keyword">test</span>.cpp  <span class="keyword">test</span>.hpp</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">cat</span> <span class="keyword">test</span>.cpp</div><div class="line">#<span class="keyword">include</span> <span class="string">"test.hpp"</span></div><div class="line"></div><div class="line">using namespace std;</div><div class="line"></div><div class="line">int main() &#123;</div><div class="line">    int x(3);</div><div class="line">    int <span class="built_in">y</span>(5);</div><div class="line">    int c;</div><div class="line">    c = calculate(x, y);</div><div class="line">    cout &lt;&lt; c &lt;&lt; endl;</div><div class="line">&#125;</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">cat</span> <span class="keyword">test</span>.hpp</div><div class="line">#<span class="keyword">include</span> &lt;iostream&gt;</div><div class="line">#<span class="keyword">include</span> <span class="string">"./dir1/test1.hpp"</span></div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">l</span> dir1</div><div class="line">test1.cpp  test1.hpp</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">cat</span> dir1/test1.cpp</div><div class="line">#<span class="keyword">include</span> <span class="string">"test1.hpp"</span></div><div class="line"></div><div class="line">int calculate(int <span class="keyword">const</span>&amp; a, int <span class="keyword">const</span>&amp; b) &#123;</div><div class="line">    int c;</div><div class="line">    c = a + b;</div><div class="line">    <span class="keyword">return</span> c;</div><div class="line">&#125;</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">cat</span> dir1/test1.hpp </div><div class="line">#<span class="keyword">include</span> &lt;iostream&gt;</div><div class="line"></div><div class="line">int calculate(int <span class="keyword">const</span>&amp; a, int <span class="keyword">const</span>&amp; b);</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">l</span> o/</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">cat</span> makefile</div><div class="line">mycplusplus: <span class="keyword">test</span>.o test1.o</div><div class="line">	<span class="keyword">g</span>++ o/test1.o o/<span class="keyword">test</span>.o -o mycplusplus</div><div class="line">test1.o : dir1/test1.cpp</div><div class="line">	<span class="keyword">g</span>++ -c dir1/test1.cpp -o o/test1.o</div><div class="line"><span class="keyword">test</span>.o : <span class="keyword">test</span>.cpp</div><div class="line">	<span class="keyword">g</span>++ -c <span class="keyword">test</span>.cpp -o o/<span class="keyword">test</span>.o</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ make</div><div class="line"><span class="keyword">g</span>++ -c <span class="keyword">test</span>.cpp -o o/<span class="keyword">test</span>.o</div><div class="line"><span class="keyword">g</span>++ -c dir1/test1.cpp -o o/test1.o</div><div class="line"><span class="keyword">g</span>++ o/test1.o o/<span class="keyword">test</span>.o -o mycplusplus</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">l</span></div><div class="line">dir1/  makefile  mycplusplus*  o/  <span class="keyword">test</span>.cpp  <span class="keyword">test</span>.hpp</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ ./mycplusplus </div><div class="line">8</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">l</span> o/</div><div class="line">test1.o  <span class="keyword">test</span>.o</div></pre></td></tr></table></figure>
<p><a href="http://blog.csdn.net/hongkangwl/article/details/21328327" target="_blank" rel="external">参考CSDN</a></p>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2016-收藏]]></title>
      <url>https://beim.github.io/2016/10/15/2016-%E6%94%B6%E8%97%8F/</url>
      <content type="html"><![CDATA[<h1 id="语言相关"><a href="#语言相关" class="headerlink" title="语言相关"></a>语言相关</h1><h2 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h2><ul>
<li><p><a href="https://www.npmjs.com/package/koa-router-static" target="_blank" rel="external">koa-router-static - npm - 和koa-router 兼容的koa-static</a></p>
</li>
<li><p><a href="https://github.com/node-webot/co-wechat" target="_blank" rel="external">wechat for koa - github</a></p>
</li>
<li><p><a href="https://blog.risingstack.com/writing-native-node-js-modules/" target="_blank" rel="external">Writing Native Node.js Modules - Node.js at Scale</a></p>
</li>
<li><p><a href="https://blog.risingstack.com/async-await-node-js-7-nightly/" target="_blank" rel="external">Experimenting With async/await in Node.js 7 Nightly</a></p>
</li>
<li><p><a href="https://blog.risingstack.com/nodejs-at-scale-npm-best-practices/" target="_blank" rel="external">Node.js at Scale - npm Best Practices</a></p>
</li>
<li><p><a href="https://cnodejs.org/topic/5640b80d3a6aa72c5e0030b6" target="_blank" rel="external">体验异步的终极解决方案-ES7的Async/Await</a></p>
</li>
<li><p><a href="http://morning.work/page/2016-05/how-to-write-a-nodejs-api-client-package.html" target="_blank" rel="external">Nodejs 编写API 客户端</a></p>
</li>
</ul>
<a id="more"></a>
<h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><ul>
<li><p><a href="https://github.com/getify/You-Dont-Know-JS" target="_blank" rel="external">You Dont’t Know JS - github</a></p>
</li>
<li><p><a href="http://gold.xitu.io/post/57fe3db0816dfa0056d7d713" target="_blank" rel="external">JavaScript 闯关记-掘金</a></p>
</li>
</ul>
<h2 id="C"><a href="#C" class="headerlink" title="C"></a>C</h2><ul>
<li><a href="http://www.cnblogs.com/afarmer/archive/2011/05/05/2038201.html" target="_blank" rel="external">C语言typedef 的用法 - 博客园- Stephen Blaha对typedef用法做过一个总结：“建立一个类型别名的方法很简单，在传统的变量声明表达式里用类型名替代变量名，然后把关键字typedef加在该语句的开头</a></li>
</ul>
<h2 id="C-1"><a href="#C-1" class="headerlink" title="C++"></a>C++</h2><ul>
<li><p><a href="http://www.cnblogs.com/haippy/archive/2013/05/31/3111560.html" target="_blank" rel="external">C++11 lambda介绍</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/json-tutorial" target="_blank" rel="external">JSON库教程 - 知乎专栏</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/DataStructureAndAlgorithm" target="_blank" rel="external">C++数据结构 - 知乎专栏</a></p>
</li>
<li><p><a href="http://m.blog.csdn.net/article/details?id=51016126" target="_blank" rel="external">值得推荐的C/C++框架和库—造轮子前先看看现有的轮子</a></p>
</li>
<li><p><a href="http://www.ituring.com.cn/book/1203" target="_blank" rel="external">像计算机科学家一样思考（C++版)</a></p>
</li>
<li><p><a href="http://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/contents/" target="_blank" rel="external">Google 开源项目风格指南-C++ 风格指南</a></p>
</li>
</ul>
<h2 id="python"><a href="#python" class="headerlink" title="python"></a>python</h2><ul>
<li><p><a href="https://github.com/yidao620c/python3-cookbook" target="_blank" rel="external">cookbook - github</a></p>
</li>
<li><p><a href="https://docs.python.org/3/index.html" target="_blank" rel="external">官方文档 - org</a></p>
</li>
<li><p><a href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431752945034eb82ac80a3e64b9bb4929b16eeed1eb9000" target="_blank" rel="external">廖雪峰的网站</a></p>
</li>
</ul>
<h1 id="语言无关"><a href="#语言无关" class="headerlink" title="语言无关"></a>语言无关</h1><h2 id="front"><a href="#front" class="headerlink" title="front"></a>front</h2><h2 id="back"><a href="#back" class="headerlink" title="back"></a>back</h2><ul>
<li><p><a href="https://github.com/examplecode/mproxy" target="_blank" rel="external">mproxy - c 语言实现的一个最小的http代理，支持翻墙</a></p>
</li>
<li><p><a href="https://github.com/inaz2/proxy2" target="_blank" rel="external">python-http/https代理</a></p>
</li>
<li><p><a href="http://tinyhttpd.sourceforge.net/" target="_blank" rel="external">tinyhttp</a></p>
<ul>
<li><p><a href="https://github.com/cbsheng/tinyhttpd" target="_blank" rel="external">tinyhttp - 带注释 - github</a></p>
</li>
<li><p><a href="http://blog.csdn.net/cqu20093154/article/details/41025885" target="_blank" rel="external">tinyhttp - 博客园</a></p>
</li>
</ul>
</li>
</ul>
<h2 id="network"><a href="#network" class="headerlink" title="network"></a>network</h2><ul>
<li><p><a href="http://geek.csdn.net/news/detail/128017" target="_blank" rel="external">双11背后的网络自动化技术</a></p>
</li>
<li><p><a href="https://yq.aliyun.com/articles/64416?utm_campaign=wenzhang&amp;utm_medium=article&amp;utm_source=QQ-qun&amp;utm_content=m_8116" target="_blank" rel="external">Journey to HTTP/2 - blog</a></p>
</li>
</ul>
<h2 id="other"><a href="#other" class="headerlink" title="other"></a>other</h2><ul>
<li><p>修改ubuntu 终端提示信息</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">修改.bashrc</div><div class="line"></div><div class="line">if [ "<span class="formula">$color_prompt" = yes ]; then</span></div><div class="line">    # PS1='$&#123;debian_chroot:+(<span class="formula">$debian_chroot)&#125;<span class="tag">\<span class="name">[</span></span><span class="tag">\</span>033[01;32m<span class="tag">\<span class="name">]</span></span><span class="tag">\<span class="name">u</span></span>@<span class="tag">\<span class="name">h</span></span><span class="tag">\<span class="name">[</span></span><span class="tag">\</span>033[00m<span class="tag">\<span class="name">]</span></span>:<span class="tag">\<span class="name">[</span></span><span class="tag">\</span>033[01;34m<span class="tag">\<span class="name">]</span></span><span class="tag">\<span class="name">w</span></span><span class="tag">\<span class="name">[</span></span><span class="tag">\</span>033[00m<span class="tag">\<span class="name">]</span></span><span class="tag">\<span class="name">$</span></span> '</span></div><div class="line">    PS1='<span class="tag">\<span class="name">n</span></span>$&#123;debian_chroot:+(<span class="formula">$debian_chroot)&#125;<span class="tag">\<span class="name">[</span></span><span class="tag">\</span>033[01;32m<span class="tag">\<span class="name">]</span></span><span class="tag">\<span class="name">w</span></span><span class="tag">\<span class="name">[</span></span><span class="tag">\</span>033[00m<span class="tag">\<span class="name">]</span></span><span class="tag">\<span class="name">n</span></span><span class="tag">\<span class="name">$</span></span> '</span></div><div class="line">else</div><div class="line">    PS1='$&#123;debian_chroot:+(<span class="formula">$debian_chroot)&#125;<span class="tag">\<span class="name">u</span></span>@<span class="tag">\<span class="name">h</span></span>:<span class="tag">\<span class="name">w</span></span><span class="tag">\<span class="name">$</span></span> '</span></div><div class="line">fi</div></pre></td></tr></table></figure>
</li>
<li><p><a href="https://github.com/robbyrussell/oh-my-zsh/wiki/themes" target="_blank" rel="external">zsh themes - themes</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/19556676?columnSlug=mactalk" target="_blank" rel="external">zsh 介绍 - 知乎专栏 - 修改默认shell：chsh -s /usr/bin/zsh</a></p>
</li>
<li><p><a href="http://www.cnblogs.com/jyaray/archive/2011/04/30/2033362.html" target="_blank" rel="external">tar - tar 压缩命令详解</a></p>
</li>
<li><p><a href="https://github.com/iissnan/hexo-theme-next/issues/441" target="_blank" rel="external">Next 主题 显示动画取消 - github - issues</a></p>
</li>
<li><p><a href="http://www.cnblogs.com/peida/archive/2012/12/24/2831353.html" target="_blank" rel="external">top - 每天一个linux命令 - 博客园</a></p>
</li>
<li><p><a href="http://askubuntu.com/questions/463754/how-to-make-ttf-mscorefonts-installer-package-download-fonts-after-it-says-it-i" target="_blank" rel="external">ttf-mscorefonts-installer - problem - ask ubuntu</a></p>
</li>
<li><p><a href="http://www.cnblogs.com/faithchiel/articles/2917417.html" target="_blank" rel="external">Linux Ubuntu中查看网卡信息的基础命令 - 博客园</a></p>
</li>
<li><p><a href="http://mirrors.163.com/.help/ubuntu.html" target="_blank" rel="external">163 ubuntu 镜像</a></p>
</li>
<li><p><a href="https://yq.aliyun.com/articles/66488" target="_blank" rel="external">ubuntu12 - docker - 云栖博客</a></p>
</li>
<li><p><a href="http://www.cnblogs.com/yymn/p/4581897.html" target="_blank" rel="external">Ubuntu 14.04 启用休眠</a></p>
</li>
<li><p><a href="https://m.aliyun.com/yunqi/articles/66136" target="_blank" rel="external">云栖社区 - Github - MySQL Hadoop MongoDB 大数据 机器学习 资料大全</a></p>
</li>
<li><p><a href="http://rednaxelafx.iteye.com/blog/492667" target="_blank" rel="external">虚拟机随谈（一）：解释器，树遍历解释器，基于栈与基于寄存器，大杂烩</a></p>
</li>
<li><p><a href="https://aotu.io/notes/2016/02/19/ngrok/" target="_blank" rel="external">手把手教你搭建ngrok服务－轻松外网调试本机站点</a></p>
</li>
<li><p><a href="https://visualgo.net/" target="_blank" rel="external">VISUALGO 可视化算法和数据结构</a></p>
</li>
<li><p><a href="https://www.codetriage.com/" target="_blank" rel="external">CodeTriage - 帮助开源项目</a></p>
</li>
<li><p><a href="https://github.com/vic317yeh/One-Click-to-Be-Pro/blob/master/README.md" target="_blank" rel="external">语言,算法,工具, 资源集合-github-One Click to Be Pro</a></p>
</li>
<li><p><a href="https://github.com/vhf/free-programming-books/blob/master/free-programming-books-zh.md" target="_blank" rel="external">各种方向资源集合- github- free-programming-books</a></p>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[cpp-宏编写技巧]]></title>
      <url>https://beim.github.io/2016/10/13/cpp-%E5%AE%8F%E7%BC%96%E5%86%99%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<p>如果宏里有多过一个语句(statement), 就需要用do {/<em>…</em>/} while(0) 包裹成单个语句, 否则会有如下问题</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M() a(); b()</span></div><div class="line"><span class="keyword">if</span> (cond)</div><div class="line">    M();</div><div class="line"><span class="keyword">else</span></div><div class="line">    c();</div><div class="line"></div><div class="line"><span class="comment">/* 预处理后 */</span></div><div class="line"><span class="keyword">if</span> (cond)</div><div class="line">    a(); b()</div><div class="line"><span class="keyword">else</span> <span class="comment">/* else 缺乏对应if */</span></div><div class="line">    c();</div></pre></td></tr></table></figure>
<p>只用{} 也不行:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M() &#123; a(); b();&#125;</span></div><div class="line"><span class="keyword">if</span> (cond)</div><div class="line">    M();</div><div class="line"><span class="keyword">else</span></div><div class="line">    c();</div><div class="line"></div><div class="line"><span class="comment">/* 预处理后 */</span></div><div class="line"><span class="keyword">if</span> (cond)</div><div class="line">    &#123; a(); b(); &#125;; <span class="comment">/* 最后的分号代表if 语句结束 */</span></div><div class="line"><span class="keyword">else</span>   <span class="comment">/* else 缺乏对应if */</span></div><div class="line">    c();</div></pre></td></tr></table></figure>
<p>用 do while 就可以了</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M() do &#123; a(); b(); &#125; while(0)</span></div><div class="line"><span class="keyword">if</span> (cond)</div><div class="line">    M();</div><div class="line"><span class="keyword">else</span></div><div class="line">    c();</div><div class="line"></div><div class="line"><span class="comment">/* 预处理后 */</span></div><div class="line"><span class="keyword">if</span> (cond)</div><div class="line">    <span class="keyword">do</span> &#123; a(); b(); &#125; <span class="keyword">while</span>(<span class="number">0</span>);</div><div class="line"><span class="keyword">else</span></div><div class="line">    c();</div></pre></td></tr></table></figure>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[设计模式笔记]]></title>
      <url>https://beim.github.io/2016/10/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p>设计模式</p>
<h1 id="Factory-Method-Insurance"><a href="#Factory-Method-Insurance" class="headerlink" title="Factory Method - Insurance"></a>Factory Method - Insurance</h1><p>工厂方法模式</p>
<p><strong>优点</strong>:</p>
<ul>
<li>工厂方法模式将创建对象的逻辑与任务交给了工厂类</li>
<li>工厂方法模式支持开闭原则</li>
</ul>
<p><strong>适用情况</strong></p>
<ul>
<li>创建某些类的对象的逻辑比较复杂,并且有很多条件分支, 而且还可能增加新的条件.</li>
<li>一个类不能预先准确的知道它必须创建一个层次类中的哪一个子类的对象</li>
<li>一个类适用它的子类决定所要创建的对象</li>
<li>需要封装创建类的对象的逻辑, 使得这些逻辑局部化.</li>
</ul>
<p>简单工厂方法模式与工厂方法模式的区别: <strong>p15</strong></p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-12-36%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="factory"></p>
<a id="more"></a>
<hr>
<h1 id="AbstractFactory-House"><a href="#AbstractFactory-House" class="headerlink" title="AbstractFactory - House"></a>AbstractFactory - House</h1><p>抽象工厂模式</p>
<p>符合开闭原则 和不符合开闭原则的情况: <strong>p22</strong></p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-13-04%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="absfactory"></p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">BuildingFactory(<span class="keyword">abstract</span>)</div><div class="line"></div><div class="line">MediumBuildingFactor    SuperBuildingFactor</div><div class="line"></div><div class="line">MediumHouse MediumCondo    SuperHouse SuperCondo</div><div class="line"></div><div class="line">House&lt;<span class="keyword">interface</span>&gt; Condo&lt;<span class="keyword">interface</span>&gt;</div></pre></td></tr></table></figure>
<hr>
<h1 id="Adapter-CustomerInfo-check"><a href="#Adapter-CustomerInfo-check" class="headerlink" title="Adapter-CustomerInfo-check"></a>Adapter-CustomerInfo-check</h1><p>适配器模式</p>
<p>为了解决接口不一致的问题, 两个软件模块之间往往需要通过一个适配器类Adapter 进行适配, 这样的模式叫做适配器设计模式.</p>
<p><strong>适用情况</strong></p>
<ul>
<li>当系统想要使用现有的类, 但是现有类的接口不符合系统需要时.</li>
<li>当需要通过创建一个可复用的类, 使得本来接口不相容并且无关的类结合在一起工作时.</li>
<li>在设计中需要改变多个子类接口, 在作用相同但名称不同的类或方法之间进行适配时.</li>
</ul>
<p><strong>两种模式</strong></p>
<ul>
<li>类适配器模式</li>
<li>对象适配器模式 <code>和类适配器模式相同思路, 但是在Adapter 类中, 调用adaptee 的方法, 而不是继承adaptee</code></li>
</ul>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-13-28%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="adapter"></p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CusInfoValidator&lt;<span class="class"><span class="keyword">interface</span>&gt;    <span class="title">InfoValidation</span></span></div><div class="line"></div><div class="line"><span class="title">InformationAdapter</span> <span class="keyword">extends</span> ... <span class="keyword">implements</span> ...</div></pre></td></tr></table></figure>
<hr>
<h1 id="Bridge-AgentInfo"><a href="#Bridge-AgentInfo" class="headerlink" title="Bridge-AgentInfo"></a>Bridge-AgentInfo</h1><p>桥接模式</p>
<p>桥接模式是指将抽象部分与它的实现部分分离, 使它们可以独立地变化.<br>桥接模式强调对象有两个以上的维度变化, 简化多级集成关系, 但同时增加了聚合对象的内部方法, 因为它不得不多写方法以便包含它的类调用.</p>
<p><strong>优点</strong></p>
<ul>
<li>分离接口和实现部分. 一个实现不必固定的绑定一个接口. 一个抽象类的实现可以在系统运行时进行配置, 一个对象甚至可以在运行时改变它的实现.</li>
<li>提高了可扩展性. 可以独立的对Abstraction 和Implementor 层次结构进行扩展</li>
<li>实现细节对客户的透明. 可以对客户隐藏实现细节.</li>
</ul>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-14-04%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="bridge"></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">AgentInfo(<span class="keyword">abstract</span>)</div><div class="line"></div><div class="line">EncryptedInfo1  EncryptedInfo2</div><div class="line"></div><div class="line">MessageWriter&lt;<span class="class"><span class="keyword">interface</span>&gt;</span></div><div class="line"></div><div class="line">FileWriter  DBWriter</div></pre></td></tr></table></figure>
<hr>
<h1 id="Facade-usrInfoValidation"><a href="#Facade-usrInfoValidation" class="headerlink" title="Facade-usrInfoValidation"></a>Facade-usrInfoValidation</h1><p>外观模式</p>
<p>用来隐藏一个软件系统的内部细节, 为一系列复杂的接口提供一个统一的接口, 使该系统更容易使用.</p>
<p><strong>优点</strong><br>利用外观模式可以去掉子系统与客户程序之间的直接绑定, 从而提高子系统的独立性, 也降低 了客户程序与子程序的直接耦合度. 此外, 利用外观模式可以使系统层次化.</p>
<p><strong>缺点</strong><br>对于那些不需要定制的用户来说, 例如一个熟练的程序员要写一些复杂的功能, 而外观类中没有这样的功能, 因此外观模式可能对它们没有帮助. 在这种情况下, 用户程序可以直接绕过外观模式, 而直接调用子系统类库.</p>
<p><code>适配器模式</code>与<code>外观模式</code>的区别</p>
<ul>
<li>适配器模式转换接口的目的是将一个不适合使用的接口转换为可以被使用的接口, 或者将一些接口不同而功能相同或者相近的接口加以转换, 以便可以被统一使用.</li>
<li>外观模式简化接口是为了更好地使用某个类库, 为一系列复杂的接口提供一个统一的接口</li>
</ul>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-14-22%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="facade"></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="section">CustomerFacade</span> &#123;</div><div class="line">    <span class="attribute">Account</span> accountObj;</div><div class="line">    <span class="attribute">CreditCard</span> creditCardObj;</div><div class="line">    <span class="attribute">Address</span> addressObj;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="attribute">Account</span> CreditCard Address</div></pre></td></tr></table></figure>
<hr>
<h1 id="Strategy-Sorting"><a href="#Strategy-Sorting" class="headerlink" title="Strategy-Sorting"></a>Strategy-Sorting</h1><p>策略模式</p>
<p>下面定义了一系列的算法, 将每一个算法封装起来, 并且使它们之间可以相互替换. 策略模式让算法的变化不会影响到使用算法的客户.</p>
<p><strong>优点</strong></p>
<ul>
<li>得到一系列可以复用的算法, 这些算法集成一个共同的抽象类, 因此共有的功能可以放到超类中.</li>
<li>将不同算法封装在不同的策略子类中, 使逻辑更加清晰, 各个算法可以独立地变化.</li>
<li>使功能改变或者扩展更容易.</li>
</ul>
<p><strong>缺点</strong><br>客户程序必须知道不同策略接口的各个子类的行为, 必须理解每个子类有哪些不同.</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-14-40%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="strategy"></p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Context</span></div><div class="line"></div><div class="line">SortAlgorithm&lt;interface&gt;</div><div class="line"></div><div class="line"><span class="keyword">InsertionSort </span> QuickSort  <span class="keyword">BubbleSort </span> HeapSort</div></pre></td></tr></table></figure>
<hr>
<h1 id="State-BankAccount-typical-2"><a href="#State-BankAccount-typical-2" class="headerlink" title="State-BankAccount-typical-2"></a>State-BankAccount-typical-2</h1><p>状态模式</p>
<p>在面向对象设计中, 在依赖于状态的对象中, 对象的行为依赖于状态.</p>
<p>状态模式将不同状态下的行为封装在不同的类中, 每个类代表一个状态.</p>
<p><strong>优点</strong></p>
<ul>
<li>因为状态相关的代码都被封装在各个状态子类中, 所以容易添加新的状态, 只需要定义并添加新的状态子类和新的状态变化关系即可. 有时其他的类也需要较少的修改.</li>
<li>将不同的状态封装成不同的类使得状态迁移很明确, 并且可以防止Context 类将状态弄混乱了</li>
</ul>
<p><strong>适用</strong></p>
<ul>
<li>当对象的行为依赖于状态, 对象要在运行时改变状态时使用状态模式</li>
<li>当操作带有大量依赖于状态的条件语句时使用该模式. 通常许多操作都含有相同的条件结构, 状态模式将条件结构的每个分支包装成独立分支的类, 使得在不同状态下的行为可以独立变化.</li>
</ul>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-15-02%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="state"></p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">BankContext  &lt;-&gt;  State(<span class="built_in">abstract</span>)</div><div class="line"></div><div class="line">NoTransactionFeeState  TransactionFeeState  OverDrawnState</div></pre></td></tr></table></figure>
<hr>
<h1 id="Visitor-ComputerParts"><a href="#Visitor-ComputerParts" class="headerlink" title="Visitor-ComputerParts"></a>Visitor-ComputerParts</h1><p>访问者模式</p>
<p>访问者模式在处理数据结构较稳定, 但是作用于其上的操作需要经常变化的问题是非常有效的.</p>
<p>访问者模式是指作用于一个对象结构体上的元素的操作. 访问者可以使用户在不改变该结构体的类的基础上定义一个新的操作.</p>
<p><strong>优点</strong></p>
<ul>
<li>使得在访问者类中针对复杂类结构中的某个类添加新方法较为容易, 即只需要简单的添加一个新的访问者方法即可. </li>
<li>访问者将相关的方法集中在一个具体的访问者类中, 而将其他相关的方法集中在另外一个具体的访问者类中. 也就是说, 访问者子类是按照方法的类型来分类的.</li>
</ul>
<p><strong>缺点</strong><br>增加一个具体的新ConcreteElement 类比较困难. 因为此时需要在每个ConcreteVisitor 类中添加该ConcreteElement 类的访问方法.(所以其适合数据结构稳定的情况)</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-15-22%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="visitor"></p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">CompositeStructure</div><div class="line"></div><div class="line">ComputerParts</div><div class="line"></div><div class="line">Memory  VideoCard  <span class="literal">Monitor</span></div><div class="line"></div><div class="line">Visitor</div><div class="line"></div><div class="line">PriceVisitor  Parts<span class="literal">Inf</span>oVisitor</div></pre></td></tr></table></figure>
<hr>
<h1 id="Mediator-Tour-Hotel-Flight"><a href="#Mediator-Tour-Hotel-Flight" class="headerlink" title="Mediator-Tour-Hotel-Flight"></a>Mediator-Tour-Hotel-Flight</h1><p>中介者模式</p>
<p>中介者模式将所有对象之间的交互细节抽象到一个独立的类中,对象之间的交互经由这个独立的类完成.</p>
<p><strong>优点</strong></p>
<ul>
<li>所有对象的交互行为都被转入到一个独立的中介者对象中, 使得用户更容易通过中介者修改对象之间的相互关系行为. 当修改一个交互行为的时候, 可以通过修改或者更换其中一个具体的中介者子类来完成. 另外, 将对象的交互转移到一个专门的类中也提高了对象的可重用性.</li>
<li>因为对象之间不直接有交互, 使对象的单元测试更容易.</li>
<li>低耦合使得一个类的修改不会影响到其他的类.</li>
</ul>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-15-46%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="mediator"></p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">BusinessMediator</span></div><div class="line"></div><div class="line"><span class="symbol">AirlineGUI</span>  HotelGUI  TourGUI</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[dns相关的小实践]]></title>
      <url>https://beim.github.io/2016/10/07/dns%E7%9B%B8%E5%85%B3%E7%9A%84%E5%B0%8F%E5%AE%9E%E8%B7%B5/</url>
      <content type="html"><![CDATA[<p>dig 命令可以跟踪dns 查询的路径.<br>如<code>dig www.baidu.com +trace</code></p>
<p>ubuntu 系统下<code>/etc/resolv.conf</code> 配置文件, 用来设置DNS 服务器的IP 地址及DNS 域名, 还包含了主机的域名搜索顺序.</p>
<p>文件<code>/etc/resolve.conf</code> 内容如下:<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># Dynamic resolv.<span class="keyword">conf</span>(5) <span class="keyword">file</span> <span class="keyword">for</span> glibc resolver(3) generated <span class="keyword">by</span> resolvconf(8)</div><div class="line">#     <span class="keyword">DO</span> NOT <span class="keyword">EDIT</span> THIS <span class="keyword">FILE</span> <span class="keyword">BY</span> HAND -- YOUR CHANGES WILL BE OVERWRITTEN</div><div class="line">nameserver 127.0.0.1</div><div class="line"><span class="keyword">search</span> lan</div></pre></td></tr></table></figure></p>
<p>执行命令<code>dig www.kicker.com.cn + trace</code></p>
<p>输出结果:<br><figure class="highlight dns"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">; &lt;&lt;&gt;&gt; DiG 9.10.3-P4-Ubuntu &lt;&lt;&gt;&gt; www.kicker.com.cn +trace</span></div><div class="line"><span class="comment">;; global options: +cmd</span></div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	b.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	k.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	e.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	f.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	c.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	l.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	m.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	a.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	g.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	j.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	d.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	i.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	h.root-servers.net.</div><div class="line"><span class="comment">;; Received 239 bytes from 127.0.0.1#53(127.0.0.1) in 2 ms</span></div><div class="line"></div><div class="line">cn.			<span class="number">172800</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	d.dns.cn.</div><div class="line">cn.			<span class="number">172800</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	a.dns.cn.</div><div class="line">cn.			<span class="number">172800</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	e.dns.cn.</div><div class="line">cn.			<span class="number">172800</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	c.dns.cn.</div><div class="line">cn.			<span class="number">172800</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	ns.cernet.net.</div><div class="line">cn.			<span class="number">172800</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	b.dns.cn.</div><div class="line">cn.			<span class="number">86400</span>	<span class="keyword">IN</span>	<span class="keyword">DS</span>	<span class="number">41470 8 2</span> <span class="number">3623</span>FB6E3B1F69C6855DA1E48D3A38236DD2EDF0380FB018FF538650 EAC2C4DD</div><div class="line">cn.			<span class="number">86400</span>	<span class="keyword">IN</span>	<span class="keyword">RRSIG</span>	<span class="keyword">DS</span> <span class="number">8 1 86400</span> <span class="number">20161020020000</span> <span class="number">20161007010000</span> <span class="number">39291</span> . A2tSyIt/guVEItqdJgKF7h765ACBXXhA6zQGVNfYYbpeupuDju37nXm5 Z44h9TlVa2RIkM9Jq8x0SMuH5cm1G4opXU1zHZgUvhC+<span class="number">1</span>feGfEnZ26Py fXZ3hTBT+uNwU/gnRZgvEvfORwU4BNfjKyrHmk/tXKYcARXOMK9Nb3PA BBJ2vshXDn6quUtElmP3CktvXDzpC/<span class="number">7</span>pT6HMgaBOYxWYxao9W0UsEDZQ cxWpXBu7Psj7a/<span class="number">11</span>kMQGZNONU65P13e3QK8zlF6BMDZDMJH9tIBJF8v6 udnjKVx8bnkqJza//<span class="number">19</span>PxtiSDf3KHvFKE7cH5sv0G1Zr3yMLNfG5/aTs qBlX+<span class="keyword">A</span>==</div><div class="line"><span class="comment">;; Received 644 bytes from 199.7.91.13#53(d.root-servers.net) in 370 ms</span></div><div class="line"></div><div class="line">kicker.com.cn.		<span class="number">86400</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	ns.nagor.com.cn.</div><div class="line">kicker.com.cn.		<span class="number">86400</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	ns.nagor.cn.</div><div class="line">GICE14DNTMDN31G43AUGVRKTKALVB8QC.com.cn. <span class="number">21600</span> <span class="keyword">IN</span> <span class="keyword">NSEC</span><span class="number">3	1 1 10</span> AEF123AB MI2OUBFA49Q47917BR600DOL1QGRP79T <span class="keyword">NS</span> <span class="keyword">SOA</span> <span class="keyword">RRSIG</span> <span class="keyword">DNSKEY</span> <span class="keyword">NSEC3PARAM</span></div><div class="line">GICE14DNTMDN31G43AUGVRKTKALVB8QC.com.cn. <span class="number">21600</span> <span class="keyword">IN</span> <span class="keyword">RRSIG</span>	<span class="keyword">NSEC3</span> <span class="number">8 3 21600</span> <span class="number">20161020002013</span> <span class="number">20160920000126</span> <span class="number">15399</span> com.cn. jDuJAUMvAwNM3kPNu3bVyk1VMZInBfUKiD6/lutPeAjrudbIj7qFkTxM F164SK96QaYMWZMg7sHThlA9S5DoDE3rEh9vF01qcsg1pxA7+m9lDFSn Q0dQ8hU078oCPnH4JPzgB5obiSc2OmcgFml5vaIMiWT+Rpe9V3ZCkX7W z7Q=</div><div class="line">MI2OUBFA49Q47917BR600DOL1QGRP79T.com.cn. <span class="number">21600</span> <span class="keyword">IN</span> <span class="keyword">NSEC</span><span class="number">3	1 1 10</span> AEF123AB UQROTQK62NOIM5U43DMF7AMC8JJFRM7T <span class="keyword">TXT</span> <span class="keyword">RRSIG</span></div><div class="line">MI2OUBFA49Q47917BR600DOL1QGRP79T.com.cn. <span class="number">21600</span> <span class="keyword">IN</span> <span class="keyword">RRSIG</span>	<span class="keyword">NSEC3</span> <span class="number">8 3 21600</span> <span class="number">20161019013404</span> <span class="number">20160919011226</span> <span class="number">15399</span> com.cn. Rw7vfPaOa+UB9TpAHniy3XOk8UcZFHo1w7Qlq0gjX/gBBQY1vUR10BeI x0kodMsNRkHkvjvWkHfxAu/A8rR0X4xOuJkYZGBnR0YYVnP/N3YGHoz3 C6QOM47dyogMIOg/zVpnYjubpaILGpNY5ddZaJLF2sKz9SvJ0NXCQIyg lGQ=</div><div class="line"><span class="comment">;; Received 591 bytes from 203.119.25.1#53(a.dns.cn) in 22 ms</span></div><div class="line"></div><div class="line">www.kicker.com.cn.	<span class="number">600</span>	<span class="keyword">IN</span>	<span class="keyword">A</span>	<span class="number">192.161.49.88</span></div><div class="line">kicker.com.cn.		<span class="number">7200</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	ns1.dnsnw.com.</div><div class="line">kicker.com.cn.		<span class="number">7200</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	ns2.dnsnw.com.</div><div class="line">kicker.com.cn.		<span class="number">7200</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	ns.nagor.cn.</div><div class="line">kicker.com.cn.		<span class="number">7200</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	ns.nagor.com.cn.</div><div class="line"><span class="comment">;; Received 159 bytes from 218.66.171.170#53(ns.nagor.com.cn) in 54 ms</span></div></pre></td></tr></table></figure></p>
<p>解释一下过程</p>
<ol>
<li><p>访问本地域名服务器(127.0.0.1)(16行), 获得根域名服务器的记录(.)</p>
</li>
<li><p>访问(.)的域名服务器, 获得(cn.)的记录</p>
</li>
<li><p>访问(cn.)的域名服务器, 获得(kicker.com.cn.) 的记录</p>
</li>
<li><p>访问(kicker.com.cn.) 的域名服务器, 获得(www.kicker.com.cn)的ip地址</p>
</li>
</ol>
<p><strong>A记录</strong><br>A记录（即地址记录，也称为主机记录）将一个网域关联到托管该网域服务的计算机的物理IP地址。</p>
<p><strong>NS记录</strong><br>域名服务器(NS)记录用于确定哪些服务器为一个网域传达DNS信息。</p>
<a id="more"></a>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[cpp-泛型算法参考]]></title>
      <url>https://beim.github.io/2016/10/06/cpp-%E6%B3%9B%E5%9E%8B%E7%AE%97%E6%B3%95%E5%8F%82%E8%80%83/</url>
      <content type="html"><![CDATA[<p>所有的泛型算法(generic algorithm), 除了极少数外, 前两个参数皆为一组iterator, 用来标示欲遍历的容器(container) 元素的范围. 范围系为[iterator1, iterator2)</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> array_size = <span class="number">7</span>;</div><div class="line"><span class="keyword">int</span> iarray[array_size] = &#123;<span class="number">1</span>, <span class="number">10</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">14</span>, <span class="number">8</span>&#125;;</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec(iarray, iarray + array_size);</div><div class="line"></div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator it = find(vec.begin(), vec.end(), value);</div><div class="line"><span class="keyword">int</span> *pi = find(iarray, iarray + array_size, value);</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>算法通常有重载的两个版本: 版本一使用底层元素所属类型的内置运算符, 包括equality 运算符和less-than 运算符. 版本二接受function object 或function pointer 的传入, 借此提供和内置运算符不同的行为.<br>例如, 默认情形下, sort() 会使用less-than 来排序. 如果要改变这一行为, 我们可以传入预先定义好的greater function object:</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sort(<span class="name">vec</span>.begin(), vec.end())<span class="comment">;</span></div><div class="line">sort(<span class="name">vec</span>.begin(), vec.end(), greater&lt;int&gt; ())<span class="comment">;</span></div></pre></td></tr></table></figure>
<p>不过, 另有一些算法以不同的名称区分不同版本,形成两个函数; 以_if 为名称后缀的, 使用的是”可指定特定行为”的那个版本.<br>许多<code>会更改目标容器之内容</code>的算法, 都提供两种版本: 一种称为in-place (就地) 版本, 会改变容器的内容. 另一种称为copy 版本, 不改变传入容器的内容, 而是先为它制作一份副本, 再改变副本的内容, 然后返回该副本.</p>
<ul>
<li>如下array, vector, list 被用来作为下文所列泛型算法的函数参数:</li>
</ul>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">int ia[<span class="number">8</span>] = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">21</span>, <span class="number">28</span>, <span class="number">36</span>&#125;;</div><div class="line"><span class="type">vector</span>&lt;int&gt; ivec(ia, ia + <span class="number">8</span>);</div><div class="line"><span class="type">list</span>&lt;int&gt; ilist(ia, ia + <span class="number">8</span>);</div><div class="line"></div><div class="line"><span class="type">string</span> sa[<span class="number">10</span>] = &#123;<span class="string">"The"</span>, <span class="string">"light"</span>, <span class="string">"untonsured"</span>, <span class="string">"hair"</span>, <span class="string">"grained"</span>, <span class="string">"and"</span>, <span class="string">"hued"</span>, <span class="string">"like"</span>, <span class="string">"pale"</span>, <span class="string">"oak"</span>&#125;;</div><div class="line"><span class="type">vector</span>&lt;<span class="type">string</span>&gt; svec(sa, sa + <span class="number">10</span>);</div><div class="line"><span class="type">list</span>&lt;<span class="type">string</span>&gt; slist(sa, sa + <span class="number">10</span>);</div></pre></td></tr></table></figure>
<h2 id="accumulate-元素累加"><a href="#accumulate-元素累加" class="headerlink" title="accumulate() 元素累加"></a>accumulate() 元素累加</h2><p>默认情形下, 它会将容器内的所有元素相加, 再加上第三个参数所指定的初值. 也可以借由传入一个二元运算, 取代默认的”相加”操作.</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;numeric&gt;</span></span></div><div class="line"></div><div class="line">iresult = accumulate(ia, ia + <span class="number">8</span>, <span class="number">0</span>);</div><div class="line">iresult = accumulate(ilist.<span class="built_in">begin</span>, ilist.<span class="built_in">end</span>(), <span class="number">0</span>, plus&lt;<span class="keyword">int</span>&gt; ());</div></pre></td></tr></table></figure>
<h2 id="adjacent-difference-相邻元素的差额"><a href="#adjacent-difference-相邻元素的差额" class="headerlink" title="adjacent_difference() 相邻元素的差额"></a>adjacent_difference() 相邻元素的差额</h2><p>默认情形下, 它会产生一个新数列. 此数列中除了第一个元素, 每个元素都是原数列的<code>相同位置</code>及<code>前一位置</code>两元素的差额. 假设原数列为{0, 1, 2, 3, 5, 8}, 那么产生出来的新数列就是{0, 1, 0, 1, 1, 2, 3}. 它可以借由一个二元运算, 取代默认的<code>相减</code>操作. 第三个参数是个iterator, 指向一个容器, 用来放置执行结果.</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#include &lt;numeric&gt;</div><div class="line"></div><div class="line">adjacent_difference(<span class="name">ilist</span>.begin(), ilist.end(), iresult.begin())<span class="comment">;</span></div><div class="line">adjacent_difference(<span class="name">ilist</span>.begin(), ilist.end(), iresult.begin(), multiplies&lt;int&gt; ())<span class="comment">;</span></div></pre></td></tr></table></figure>
<h2 id="adjacent-find-搜寻相邻的重复元素"><a href="#adjacent-find-搜寻相邻的重复元素" class="headerlink" title="adjacent_find()  搜寻相邻的重复元素"></a>adjacent_find()  搜寻相邻的重复元素</h2><p>默认情况下, 它会搜索第一组<code>相邻且其值重复</code>的元素. 可用某个二元运算符取代内置的equality 运算符. 本函数会返回一个iterator, 指向两个重复元素中的第一个.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">class</span> TwiceOver &#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="keyword">int</span> val1, <span class="keyword">int</span> val2)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> val1 == val2 / <span class="number">2</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">piter = adjacent_find(ia, ia + <span class="number">8</span>);</div><div class="line">iter = adjacent_find(vec.begin(), vec.end(), TwiceOver());</div></pre></td></tr></table></figure>
<h2 id="binary-search-二元搜索"><a href="#binary-search-二元搜索" class="headerlink" title="binary_search()  二元搜索"></a>binary_search()  二元搜索</h2><p>binary_search() 假设其处理对象已经以less-than 运算符加以排序. 如果该容器以其他方式完成排序, 那么调用binary_search() 时就得传入该二元运算符. 此算法会返回true 或false.</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line">found_it =  binary_search(ilist.<span class="built_in">begin</span>(), ilist.<span class="built_in">end</span>(), value);</div><div class="line">found_it = binary_search(vec.<span class="built_in">begin</span>, vec.<span class="built_in">end</span>(), value, greater&lt;<span class="keyword">int</span>&gt; ());</div></pre></td></tr></table></figure>
<h2 id="copy-复制"><a href="#copy-复制" class="headerlink" title="copy() 复制"></a>copy() 复制</h2><p>将第一个容器的元素复制到第二个容器.</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line">ostream_iterator&lt;<span class="keyword">int</span>&gt; ofile(cout, <span class="string">" "</span>);</div><div class="line">copy(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>(), ofile);</div></pre></td></tr></table></figure>
<h2 id="copy-backword-逆向复制"><a href="#copy-backword-逆向复制" class="headerlink" title="copy_backword() 逆向复制"></a>copy_backword() 逆向复制</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line">copy_backword(svec.<span class="built_in">begin</span>(), svec.<span class="built_in">end</span>(), target.<span class="built_in">begin</span>());</div></pre></td></tr></table></figure>
<h2 id="count-计数"><a href="#count-计数" class="headerlink" title="count() 计数"></a>count() 计数</h2><p>返回容器中与制定值相等的元素个数</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line">cout &lt;&lt; value &lt;&lt; <span class="string">" occurs "</span></div><div class="line">     &lt;&lt; count(svec.<span class="built_in">begin</span>(), svec.<span class="built_in">end</span>(), value)</div><div class="line">     &lt;&lt; <span class="string">" times in string vector.\n"</span>;</div></pre></td></tr></table></figure>
<h2 id="count-if-在特定条件下计数"><a href="#count-if-在特定条件下计数" class="headerlink" title="count_if() 在特定条件下计数"></a>count_if() 在特定条件下计数</h2><p>返回容器中<code>元素值被某特定运算符求值为true</code>的元素个数.</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">class</span> Even &#123;</div><div class="line">    <span class="keyword">public</span>: </div><div class="line">        <span class="keyword">bool</span> <span class="keyword">operator</span>() (<span class="keyword">int</span> val) &#123;</div><div class="line">            <span class="built_in">return</span> !(val % <span class="number">2</span>);</div><div class="line">        &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">ires = count_if(ia, ia + <span class="number">8</span>, bind2nd(less&lt;<span class="keyword">int</span>&gt;(), <span class="number">10</span>));</div><div class="line">ires = count_if(ilist.<span class="built_in">begin</span>(), ilist_end(), Even());</div></pre></td></tr></table></figure>
<h2 id="equal-判断相等与否"><a href="#equal-判断相等与否" class="headerlink" title="equal() 判断相等与否"></a>equal() 判断相等与否</h2><p>如果两数列的各元素值都相同, 就返回true. 如果第二数列的元素比较多, 多出来的元素不予考虑. 默认使用equality 运算符, 但也可以传入一个二元的function object 或function pointer, 用以指定另一种比较方式.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">class</span> EqualAndOdd &#123;</div><div class="line">    <span class="keyword">public</span>: </div><div class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="keyword">int</span> v1, <span class="keyword">int</span> v2)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> ((v1 == v2) &amp;&amp; (v1 % <span class="number">2</span>));</div><div class="line">        &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">int</span> ia1[] = &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span>&#125;;</div><div class="line"><span class="keyword">int</span> ia2[] = &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">21</span>, <span class="number">34</span>&#125;;</div><div class="line">res = equal(ia1, ia1 + <span class="number">7</span>, ia2); <span class="comment">// true</span></div><div class="line">res = equal(ia1, ia1 + <span class="number">7</span>, ia2, equalAndOdd()); <span class="comment">// false</span></div></pre></td></tr></table></figure>
<h2 id="fill-改填元素值"><a href="#fill-改填元素值" class="headerlink" title="fill() 改填元素值"></a>fill() 改填元素值</h2><p>将容器内的每一个元素一一设定为某特定值.</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="built_in">fill</span>(ivec.<span class="built_in">begin</span>(), ivec.<span class="built_in">end</span>(), value);</div></pre></td></tr></table></figure>
<h2 id="fill-n-改填元素值"><a href="#fill-n-改填元素值" class="headerlink" title="fill_n() 改填元素值"></a>fill_n() 改填元素值</h2><p>将容器内的每个元素一一设为某特定值; 只设定n个元素</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#include &lt;algorithm&gt;</span></div><div class="line"></div><div class="line">fill_n(ia, <span class="built_in">count</span>, value)<span class="comment">;</span></div><div class="line">fill_n(svec.<span class="keyword">begin(), </span><span class="built_in">count</span>, string_value)<span class="comment">;</span></div></pre></td></tr></table></figure>
<h2 id="find-搜索"><a href="#find-搜索" class="headerlink" title="find() 搜索"></a>find() 搜索</h2><p>容器内的元素被一一拿出来和特定值比较. 一旦遇到相符的元素, 搜索操作便结束. find() 返回一个iterator, 指向该元素. 如果没有任何相符元素, 就返回容器的end().</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line">piter = <span class="built_in">find</span>(ia, ia + <span class="number">8</span>, value);</div><div class="line">iter = <span class="built_in">find</span>(svec.<span class="built_in">begin</span>(), svec.<span class="built_in">end</span>(), <span class="string">"rosebud"</span>);</div></pre></td></tr></table></figure>
<h2 id="find-end-搜索某个子序列的最后一次出现地点"><a href="#find-end-搜索某个子序列的最后一次出现地点" class="headerlink" title="find_end() 搜索某个子序列的最后一次出现地点"></a>find_end() 搜索某个子序列的最后一次出现地点</h2><p>此算法接受两组iterator. 第一组iterator 标示被搜索的容器范围. 第二组iterator 标示作为比对标准的一组元素序列. find_end() 会找出容器内出现<code>比对元素序列</code>的最后一次位置. 比对方式默认是equality 运算符, 但亦允许另行制定一个二元运算. 如果比对成功, 就返回iterator 指向符合条件的位置. 如果比对失败(找不到吻合序列), 就返回所指定之容器范围的末尾(亦即find_end() 的第二参数). 举个例子, 给定字符序列Mississippi 及第二序列ss, find_end() 会返回一个iterator, 指向Mississippi 中的第二个ss 子序列的第一个s 位置.</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#include &lt;algorithm&gt;</div><div class="line"></div><div class="line">int ia[<span class="number">17</span>] = &#123;<span class="number">7</span> , <span class="number">3</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">3</span>&#125;;</div><div class="line">int seq[<span class="number">3</span>] = &#123;<span class="number">3</span>, <span class="number">7</span>, <span class="number">6</span>&#125;;</div><div class="line"></div><div class="line"><span class="comment">// found_it 指向ia[10]</span></div><div class="line">found_it = find_end(ia, ia + <span class="number">17</span>, seq, seq + <span class="number">3</span>);</div></pre></td></tr></table></figure>
<h2 id="find-first-of-搜索某些元素的首次出现地点"><a href="#find-first-of-搜索某些元素的首次出现地点" class="headerlink" title="find_first_of() 搜索某些元素的首次出现地点"></a>find_first_of() 搜索某些元素的首次出现地点</h2><p>此算法接受两组iterator. 第一组iterator 标示被搜索的容器范围. 第二组iterator 标示作为比对标准的一组元素序列. 举个例子, 如果我们想找出字符串synesthesia 中的第一个元音字母, 我们把第二字符串定义为aeiou. 如果第一序列中存在第二序列的任一元素, find_first_of() 便返回一个iterator, 指向第一个出现的元素—本例为第一个e. 如果第一序列中并不存在第二序列的任何元素值, 变返回一个iterator, 指向第一序列的末尾. 可选的第五参数, 允许你指定一个二元运算, 借此改用equality 运算符以外的比较方式.</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="built_in">string</span> s_array[] = &#123;<span class="string">"Ee"</span>, <span class="string">"eE"</span>, <span class="string">"ee"</span>, <span class="string">"Oo"</span>, <span class="string">"oo"</span>, <span class="string">"ee"</span>&#125;<span class="comment">;</span></div><div class="line"><span class="built_in">string</span> to_find[] = &#123;<span class="string">"oo"</span>, <span class="string">"gg"</span>, <span class="string">"ee"</span>&#125;<span class="comment">;</span></div><div class="line"></div><div class="line">// 返回第一次出现<span class="string">"ee"</span> 的位置. 答案将是&amp;s_array[<span class="number">2</span>]</div><div class="line">found_it = find_first_of&#123;s_array, s_array + <span class="number">6</span>, to_find, to_find + <span class="number">3</span>&#125;<span class="comment">;</span></div></pre></td></tr></table></figure>
<h2 id="find-if-在特定条件下搜索"><a href="#find-if-在特定条件下搜索" class="headerlink" title="find_if() 在特定条件下搜索"></a>find_if() 在特定条件下搜索</h2><p>容器内的元素会被一一施以特定的二元运算, 测试是否符合条件. 如果找到符合条件的元素, 搜索操作便结束, 并返回一个iterator 指向该元素. 如果没有找到符合条件的元素, 就返回容器的end(). </p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> &lt;algorithm&gt;</span></div><div class="line"></div><div class="line">find_if(<span class="built_in">vec</span>.begin(), <span class="built_in">vec</span>.<span class="keyword">end</span>(), LessThanVal(ival));</div></pre></td></tr></table></figure>
<h2 id="for-each-对范围内的第一个元素应用某个操作"><a href="#for-each-对范围内的第一个元素应用某个操作" class="headerlink" title="for_each() 对范围内的第一个元素应用某个操作"></a>for_each() 对范围内的第一个元素应用某个操作</h2><p>for_each() 的第三个参数用来表示<code>将依次应用于每个元素身上</code>的运算. 这个运算不得更改元素值, 如果要更改元素值, 可使用transform(). 指定的运算如果有返回值, 该值会被忽略.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Type&gt;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_elements</span><span class="params">(Type elem)</span> </span>&#123;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; elem &lt;&lt; <span class="string">" "</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">for_each(ivec.begin(), ivec.end(), print_elements);</div></pre></td></tr></table></figure>
<h2 id="generate-以指定操作的运算结果填充特定范围内的元素"><a href="#generate-以指定操作的运算结果填充特定范围内的元素" class="headerlink" title="generate()  以指定操作的运算结果填充特定范围内的元素"></a>generate()  以指定操作的运算结果填充特定范围内的元素</h2><p>generate() 会将指定操作的运算结果, 填入序列之中.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">class</span> GenByTwo &#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span> <span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">static</span> <span class="keyword">int</span> seed = <span class="number">-1</span>;</div><div class="line">            <span class="keyword">return</span> seed +=<span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">&#125;;</div><div class="line"><span class="built_in">list</span>&lt;<span class="keyword">int</span>&gt; ilist(<span class="number">10</span>);</div><div class="line"><span class="comment">// 填入ilist 的内容为 1 3 5 7 9 11 13 15 17 19</span></div><div class="line">generate(ilist.begin(), ilist.end(), GenByTwo());</div></pre></td></tr></table></figure>
<h2 id="generate-n-以指定操作的运算结果填充n个元素的内容"><a href="#generate-n-以指定操作的运算结果填充n个元素的内容" class="headerlink" title="generate_n()  以指定操作的运算结果填充n个元素的内容"></a>generate_n()  以指定操作的运算结果填充n个元素的内容</h2><p>generate_n 会连续调用指定操作n次, 并将这n次的结果填入序列的n个元素之中.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">class</span> gen_by_two &#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        gen_by_two (<span class="keyword">int</span> seed = <span class="number">0</span>) : <span class="number">_</span>seed(seed) &#123;&#125;</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">operator</span> <span class="params">()</span> <span class="params">()</span> </span>&#123;<span class="keyword">return</span> <span class="number">_</span>seed += <span class="number">2</span>;&#125;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">int</span> <span class="number">_</span>seed;</div><div class="line">&#125;</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ivec(<span class="number">10</span>);</div><div class="line"></div><div class="line"><span class="comment">// 填入ivec的内容为 102 104 106 108 110 112 114 116 118 120</span></div><div class="line">generate_n(ivec.begin(), ivec.size(), gen_by_two(<span class="number">100</span>));</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[cpp-顺序性容器]]></title>
      <url>https://beim.github.io/2016/10/05/cpp-%E9%A1%BA%E5%BA%8F%E6%80%A7%E5%AE%B9%E5%99%A8/</url>
      <content type="html"><![CDATA[<p>要使用顺序性容器,首先必须包含相关的头文件,也就是以下三者之一:<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h1 id="定义顺序性容器对象的方式有五种"><a href="#定义顺序性容器对象的方式有五种" class="headerlink" title="定义顺序性容器对象的方式有五种"></a>定义顺序性容器对象的方式有五种</h1><ol>
<li><p>产生空的容器</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">list</span>&lt;<span class="built_in">string</span>&gt; slist;</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ivec;</div></pre></td></tr></table></figure>
</li>
<li><p>产生特定大小的容器.每个元素都以其默认值作为初值.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">list</span>&lt;<span class="keyword">int</span>&gt; ilist(<span class="number">1024</span>);</div><div class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; svec(<span class="number">32</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>产生特定大小的容器,并为每个元素赋制定初值</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ivec(<span class="number">10</span>, <span class="number">-1</span>);</div><div class="line"><span class="built_in">list</span>&lt;<span class="built_in">string</span>&gt; slist(<span class="number">16</span>, <span class="string">"unassigned"</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>通过一对iterator 产生容器. 这对iterator 用来标示一整组作为初值的元素的范围;</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">int ia[<span class="number">8</span>] = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">21</span>];</div><div class="line"><span class="type">vector</span>&lt;int&gt; fib(ia, ia + <span class="number">8</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>根据某个容器产生出新容器. 复制原容器内的元素, 作为新容器的初值.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">list</span>&lt;<span class="built_in">string</span>&gt; slist; <span class="comment">// 空容器</span></div><div class="line"><span class="comment">// 填充list...</span></div><div class="line"><span class="built_in">list</span>&lt;<span class="built_in">string</span>&gt; slist2(slist); <span class="comment">// 将slist 复制给slist2</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="操作函数"><a href="#操作函数" class="headerlink" title="操作函数:"></a>操作函数:</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">push_back()  // 在末端插入一个元素</div><div class="line">pop_back()  // 在末端删除一个元素, 不返回被删除的元素值.</div><div class="line">push_front()  // 在最前端插入一个元素(list 和deque, 不包括vector)</div><div class="line">pop_front()  // 在最前端删除一个元素(list 和deque, 不包括vector), 不返回被删除的元素值</div><div class="line">front()  // 返回最前端元素的值</div><div class="line">back()  // 返回末端元素的值</div><div class="line"></div><div class="line">iterator <span class="keyword">insert</span>(iterator <span class="keyword">position</span>, elemType <span class="keyword">value</span>) </div><div class="line">将<span class="keyword">value</span> 插入<span class="keyword">position</span> 之前. 它会返回一个iterator, 指向被插入的元素.</div><div class="line"></div><div class="line"><span class="built_in">void</span> <span class="keyword">insert</span>(iterator <span class="keyword">position</span>, <span class="built_in">int</span> <span class="keyword">count</span>, elemType <span class="keyword">value</span>) </div><div class="line">在<span class="keyword">position</span> 之前插入<span class="keyword">count</span> 个元素, 这些元素的值都和<span class="keyword">value</span> 相同.</div><div class="line"></div><div class="line"><span class="built_in">void</span> <span class="keyword">insert</span>(iterator1 <span class="keyword">position</span>, iterator2 <span class="keyword">first</span>, iterator3 <span class="keyword">last</span>)</div><div class="line">可在<span class="keyword">position</span> 之前插入[<span class="keyword">first</span>, <span class="keyword">last</span>) 所标示的各个元素.</div><div class="line"></div><div class="line">// iterator <span class="keyword">insert</span>(iterator <span class="keyword">position</span>) </div><div class="line">// 可在<span class="keyword">position</span> 之前插入元素. 元素的初值为所属类型的默认值.</div><div class="line"></div><div class="line">iterator erase(iterator posit) </div><div class="line">可删除posit 所指的元素</div><div class="line"></div><div class="line">iterator erase(iterator <span class="keyword">first</span>, iterator <span class="keyword">last</span>) </div><div class="line">删除[<span class="keyword">first</span>, <span class="keyword">last</span>) 范围内的元素</div></pre></td></tr></table></figure>
<h1 id="itertor-与-const-iterator-与-const-iterator-区别"><a href="#itertor-与-const-iterator-与-const-iterator-区别" class="headerlink" title="itertor 与 const_iterator 与 const iterator 区别"></a>itertor 与 const_iterator 与 const iterator 区别</h1><p>如果你传递过来一个const 类型的容器, 那么只能用const_iterator 来遍历<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Method</span> <span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vInt)</span> </span>&#123;</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::const_iterator iter;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>简单示例const_iterator 与const iterator<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ivec;</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::const_iterator citer1 = ivec.begin();</div><div class="line"><span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator citer2 = ivec.begin();</div><div class="line">*citer1 = <span class="number">1</span>; <span class="comment">// error</span></div><div class="line">*citer2 = <span class="number">1</span>; <span class="comment">// right</span></div><div class="line">++citer1; <span class="comment">// right</span></div><div class="line">++citer2; <span class="comment">// error</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>详见 <a href="http://www.cnblogs.com/greatverve/archive/2012/09/12/const-iterator.html" target="_blank" rel="external">博客园</a></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JS-char-code]]></title>
      <url>https://beim.github.io/2016/09/29/JS-char-code/</url>
      <content type="html"><![CDATA[<h2 id="String-fromCharCode"><a href="#String-fromCharCode" class="headerlink" title="String.fromCharCode()"></a>String.fromCharCode()</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/fromCharCode" target="_blank" rel="external">MDN</a></p>
<p>String.fromCharCode() 静态方法根据制定的Unicode 编码中的序号值来返回一个字符串<br>由于fromCharCode 是String 的静态方法, 所以应该这样使用: String.fromCharCode(), 而不是作为你创建的String 对象的方法.</p>
<blockquote>
<p>String.fromCharCode(num1, …, numN)</p>
</blockquote>
<p>参数:<br>num1, …, numN<br>    一组序列数字,表示Unicode 值.</p>
<p><code>String.fromCharCode(65, 66, 67) // &quot;ABC&quot;</code></p>
<a id="more"></a>
<hr>
<h2 id="String-fromCodePoint"><a href="#String-fromCodePoint" class="headerlink" title="String.fromCodePoint()"></a>String.fromCodePoint()</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/fromCodePoint" target="_blank" rel="external">MDN</a></p>
<p>与fromCharCode 功能类似, 但是支持的Unicode 字符更全.<br>由于fromCodePoint() 是String 的一个静态方法, 所以只能通过String.fromCodePoint() 这样的方式来使用, 不能在String 对象的实例上直接调用.</p>
<hr>
<h2 id="String-prototype-charAt"><a href="#String-prototype-charAt" class="headerlink" title="String.prototype.charAt()"></a>String.prototype.charAt()</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/charAt" target="_blank" rel="external">MDN</a></p>
<p>charAt() 方法返回字符串中指定位置的字符</p>
<blockquote>
<p>str.charAt(index)</p>
</blockquote>
<p>参数:<br>index<br>    0 到 字符串长度-1 的一个整数</p>
<p><code>&#39;abc&#39;.charAt(1) // &#39;b&#39;</code></p>
<hr>
<h2 id="String-prototype-charCodeAt"><a href="#String-prototype-charCodeAt" class="headerlink" title="String.prototype.charCodeAt()"></a>String.prototype.charCodeAt()</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt" target="_blank" rel="external">MDN</a></p>
<p>charCodeAt() 方法返回0到65535 之间的整数, 代表索引处字符的UTF-16编码单元, 如果你希望得到整点编码值, 使用codePointAt()</p>
<blockquote>
<p>str.charCodeAt(index)</p>
</blockquote>
<p>参数:<br>index<br>    一个大于等于0, 小于字符串长度的整数. 如果不是一个数值, 则默认为0</p>
<p>如果index 小于0 或不小于字符串的长度, 则返回NaN</p>
<p><code>&quot;ABC&quot;.charCodeAt(0) // 65</code></p>
<hr>
<h2 id="String-prototype-codePointAt"><a href="#String-prototype-codePointAt" class="headerlink" title="String.prototype.codePointAt()"></a>String.prototype.codePointAt()</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/codePointAt" target="_blank" rel="external">MDN</a></p>
<p>codePointAt() 方法返回一个代表unicode 编码的非负整数</p>
<blockquote>
<p>str.codePointAt(pos)</p>
</blockquote>
<p>参数:<br>pos<br>    指向字符串中需要返回编码的元素的位置</p>
<p>如果pos 指向的位置没有元素, 将返回undefined</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">'ABC'</span>.codePointAt(<span class="number">1</span>) <span class="comment">// 66</span></div><div class="line"><span class="string">'\uD800\uDC00'</span>.codePointAt(<span class="number">0</span>) <span class="comment">// 65536</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JS-正则表达式]]></title>
      <url>https://beim.github.io/2016/09/21/JS-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      <content type="html"><![CDATA[<h2 id="RegExp-方法"><a href="#RegExp-方法" class="headerlink" title="RegExp 方法"></a>RegExp 方法</h2><ul>
<li><p>RegExp.prototype.exec()</p>
</li>
<li><p>RegExp.prototype.test()</p>
</li>
<li><p>RegExp.prototype.toSource()</p>
</li>
<li><p>RegExp.prototype.toString()</p>
</li>
</ul>
<h2 id="String-方法"><a href="#String-方法" class="headerlink" title="String 方法"></a>String 方法</h2><ul>
<li><p>String.prototype.match()</p>
</li>
<li><p>String.prototype.replace()</p>
</li>
</ul>
<a id="more"></a>
<h2 id="栗子"><a href="#栗子" class="headerlink" title="栗子"></a>栗子</h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> patt = /a/</div><div class="line"><span class="keyword">let</span> <span class="keyword">str</span> = <span class="symbol">'abcabc</span>'</div><div class="line"></div><div class="line">patt.exec(<span class="keyword">str</span>) </div><div class="line"><span class="comment">// [ 'a', index: 0, input: 'abcabc' ]</span></div><div class="line">patt.test(<span class="keyword">str</span>) </div><div class="line"><span class="comment">// true </span></div><div class="line"><span class="keyword">str</span>.<span class="keyword">match</span>(patt) </div><div class="line"><span class="comment">// [ 'a', index: 0, input: 'abcabc' ]</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> patt1 = /a/g</div><div class="line">patt1.exec(<span class="keyword">str</span>)</div><div class="line"><span class="comment">// [ 'a', index: 0, input: 'abcabc' ]</span></div><div class="line">patt1.test(<span class="keyword">str</span>)</div><div class="line"><span class="comment">// true</span></div><div class="line"><span class="keyword">str</span>.<span class="keyword">match</span>(patt1)</div><div class="line"><span class="comment">// [ 'a', 'a' ]</span></div></pre></td></tr></table></figure>
<h2 id="更多栗子"><a href="#更多栗子" class="headerlink" title="更多栗子"></a>更多栗子</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> patt = /(GET) (HTTP)/</div><div class="line"><span class="keyword">let</span> str = <span class="string">'test GET HTTP'</span></div><div class="line"></div><div class="line">patt.exec(str)</div><div class="line">// [ <span class="string">'GET HTTP'</span>, <span class="string">'GET'</span>, <span class="string">'HTTP'</span>, <span class="built_in">index</span>: <span class="number">5</span>, inpu<span class="variable">t:</span> <span class="string">'test GET HTTP'</span> ]</div><div class="line"></div><div class="line">patt.test(str)</div><div class="line">// true</div><div class="line"></div><div class="line">str.<span class="keyword">match</span>(patt)</div><div class="line">// [ <span class="string">'GET HTTP'</span>, <span class="string">'GET'</span>, <span class="string">'HTTP'</span>, <span class="built_in">index</span>: <span class="number">5</span>, inpu<span class="variable">t:</span> <span class="string">'test GET HTTP'</span> ]</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">let</span> patt = /(GET) (HTTP)/g</div><div class="line"><span class="keyword">let</span> str = <span class="string">'test GET HTTP'</span></div><div class="line"></div><div class="line">patt.exec(str)</div><div class="line">// [ <span class="string">'GET HTTP'</span>, <span class="string">'GET'</span>, <span class="string">'HTTP'</span>, <span class="built_in">index</span>: <span class="number">5</span>, inpu<span class="variable">t:</span> <span class="string">'test GET HTTP'</span> ]</div><div class="line"></div><div class="line">patt.test(str)</div><div class="line">// true</div><div class="line"></div><div class="line">patt.<span class="keyword">match</span>(str)</div><div class="line">// [<span class="string">'GET HTTP'</span>]</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[编译原理2E-笔记]]></title>
      <url>https://beim.github.io/2016/09/14/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%862E-%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p><img src="http://ob4a6y748.bkt.clouddn.com/compilers.jpg" alt="compiler"><br><a id="more"></a></p>
<h1 id="考试准备"><a href="#考试准备" class="headerlink" title="考试准备"></a>考试准备</h1><ul>
<li><p><a href="http://baike.baidu.com/link?url=RPwvbYr4BJGR9Og9jmN-QngyQYRLmfF9BKXayp36S-2ZHzBu7HLBk0iS8mQQM1hbDp0fdxqXM_VEUx4z-kmkl4FgCDLffmpZmp1MlC87MjTku77hkT-PVSQ1E3mdImG0wXH8NErG6n_6K_y46_zgya" target="_blank" rel="external">面向机器语言</a></p>
</li>
<li><p>一般程序设计语言的定义都涉及<code>语法</code>, <code>语义</code>, <code>语用</code> 三个方面; <a href="https://zhidao.baidu.com/question/288438451.html" target="_blank" rel="external">关于这三个-百度知道</a></p>
</li>
<li><p>编译程序的工作过程可以划分为: <code>词法分析</code>, <code>语法分析</code>, <code>语义分析</code>, <code>中间代码生成</code>, <code>代码优化[可选]</code>, <code>为特定目标机生成代码(后端)</code>, 同时还会伴有<code>表格处理</code> 和<code>出错处理</code></p>
</li>
<li><p>编译方式与解释方式的根本区别在于<code>是否生成目标代码</code>. <a href="http://blog.csdn.net/zhu_xun/article/details/16921413" target="_blank" rel="external">解释型语言和编译型语言的区别 - csdn</a></p>
</li>
<li><p>如果编译程序生成的目标程序是<code>机器代码程序</code>, 则源程序的执行分为: <code>编译阶段</code>和<code>运行阶段</code>, 如果生成的是<code>汇编语言程序</code>, 则源程序的执行分为<code>编译阶段</code>, <code>汇编阶段</code>, <code>运行阶段</code></p>
</li>
<li><p><code>翻译程序</code>: 把某种语言转换成另一种语言程序的程序; <code>解释程序</code>: 以该语言的源程序作为输入, 但不产生目标程序, 而是边解释边执行源程序本身; <code>编译程序</code>: 将高级语言转换为诸如汇编语言或机器语言之类的’低级语言’的翻译程序;<br><code>翻译程序</code>是一种系统程序，它将计算机编程语言编写的程序翻译成另外一种计算机语言的一般来说等价的程序，主要包括<code>编译程序</code>和<code>解释程序</code>，<code>汇编程序</code>也被认为是<code>翻译程序</code>。</p>
</li>
<li><p>p6-编译器中记录<code>变量的名字</code>, 和名字的属性(存储分配, 类型, 作用域); <code>过程名字</code>, 和属性(参数数量, 类型, 每个参数的传递方法) ; <code>符号表</code>为每个变量名字创建一个记录条目</p>
</li>
<li><p><a href="http://www.voidcn.com/blog/SHENNONGZHAIZHU/article/p-6188958.html" target="_blank" rel="external">四种文法类型 - 博客</a>; 0-3分别为: 短语文法, 上下文有关文法,  上下文无关文法, 正则文法</p>
</li>
<li><p><code>短语</code>: 设G[Z]是一文法, w=xuy是一句型, 如果有<code>Z =*&gt; xUy</code> 且<code>U =+&gt; u</code>. 那么称u是一个相对于非终结符号U的句型w的短语<br><code>简单短语</code>: 若有<code>Z =*&gt; xUy</code>, 且<code>U =&gt; u</code>, 那么, 称u是一个相对于非终结符号U的句型w的简单短语<br><code>句柄</code>: 任一句型的最左简单短语称为该句型的句柄<br><code>素短语</code>: 是短语, 至少含有一个终结符, 除自身意外不在含有更小的带有终结符的短语</p>
</li>
<li><p><code>短语</code>: 树或者子树的叶子形成的符号串<br><code>简单短语</code>: 简单子树(只有叶子的子树)的叶子形成的符号串<br><code>句柄</code>: 最左简单子树的叶子形成的符号串<br><code>素短语</code>: 子树, 有终结符, 无更小子树<br><a href="http://www.apkbus.com/blog-117985-44288.html" target="_blank" rel="external">图示 - 博客</a></p>
</li>
<li><p><a href="https://zhidao.baidu.com/question/129871540.html" target="_blank" rel="external">数组的内情向量</a>; 信息包括: 数组的类型, 维数, 各维的上下界, 数组的首地址</p>
</li>
<li><p>典型的编译型语言: <code>C/C++、Pascal/Object Pascal（Delphi）</code>; 解释型语言: <code>JavaScript、VBScript、Perl、Python、Ruby、MATLAB</code></p>
</li>
<li><p><a href="https://www.zhihu.com/question/19608553" target="_blank" rel="external">JAVA是编译型语言还是解释型语言 - 知乎</a>; 个人偏向解释型, 毕竟编译之后的class文件还是要通过jvm来解释执行的</p>
</li>
<li><p>正规式M1 和M2 等价是指: M1 和M2 所识别的语言集相等</p>
</li>
<li><p>如果文法G 是无二义的, 则它的任何句子a: 最左推导和最右推导必定相同X; 最左推导和最右推导的语法树必定相同√</p>
</li>
<li><p><a href="http://metc.gdut.edu.cn/compile/nandian/n-11.htm" target="_blank" rel="external">常用代码优化技术</a></p>
</li>
<li><p><a href="http://blog.csdn.net/shiwei0124/article/details/4877546" target="_blank" rel="external">静态存储分配(FORTRAN), 动态存储分配(PASCAL, C)</a></p>
</li>
<li><p><strong>局部优化</strong> : 消除局部公共子表达式, 消除死代码, 利用代数恒等式(局部强度消减, 常量合并)</p>
</li>
<li><p><strong>全局优化</strong>: 消除全局公共子表达式, 复制传播, 常量折叠(如果推导出一个表达式是常量, 则用常量代替此表达式), 消除死代码, 删除归纳变量, 强度削弱</p>
</li>
<li><p>编译程序绝大多数时间花在<code>表格管理</code>上.</p>
</li>
<li><p>自顶向下的语法分析基本思想是: 从文法的<code>开始符号</code>开始, 根据给定的输入串并按照文法的产生式一步步向下进行<code>直接推导</code>, 试图推导出文法的<code>句子</code>, 使之与给定的输入串<code>匹配</code></p>
</li>
<li><p>常用的参数传递方式有<code>传地址</code>, <code>传值</code>和<code>传名</code></p>
</li>
<li><p>从功能上说, 程序语言的语句大体可分为<code>执行性</code>语句和<code>说明性</code>语句两大类</p>
</li>
<li><p>产生式是用于定义<code>语法范畴</code>的一种书写规则 </p>
</li>
<li><p>语法分析是一句语言的<code>语法</code>规则进行的, 中间代码产生是依据语言的<code>语义</code>规则进行的</p>
</li>
<li><p>语法分析器的输入是<code>单词符号串</code>,其输出是<code>语法单位</code></p>
</li>
<li><p>一个名字的属性包括<code>类型</code>和<code>作用域</code></p>
</li>
<li><p>一个文法能用有穷多个规则描述无穷的符号串集合(语言)是因为文法中存在有<code>递归</code>定义的规则</p>
</li>
<li><p>LR(0) 见到First集就移进, 见到终态就规约, SLR(1) 见到First集就移近, 见到终态先看Follow集, 与Follow集对应的项目规约, 其他报错</p>
</li>
</ul>
<hr>
<h1 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h1><h2 id="第三章词法分析"><a href="#第三章词法分析" class="headerlink" title="第三章词法分析"></a>第三章词法分析</h2><p><strong>3.1.1</strong></p>
<figure class="highlight bnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">&lt;float&gt;</span> <span class="attribute">&lt;id, limitedSquaare&gt;</span> <span class="attribute">&lt;(&gt;</span> <span class="attribute">&lt;id, x&gt;</span> <span class="attribute">&lt;)&gt;</span> <span class="attribute">&lt;&#123;&gt;</span></div><div class="line">  <span class="attribute">&lt;float&gt;</span> <span class="attribute">&lt;id, x&gt;</span></div><div class="line">  <span class="attribute">&lt;return&gt;</span> <span class="attribute">&lt;(&gt;</span> <span class="attribute">&lt;id, x&gt;</span> <span class="attribute">&lt;op,"&lt;="&gt;</span> <span class="attribute">&lt;num, -10.0&gt;</span> <span class="attribute">&lt;op, "||"&gt;</span> <span class="attribute">&lt;id, x&gt;</span> <span class="attribute">&lt;op, "&gt;</span>="&gt; <span class="attribute">&lt;num, 10.0&gt;</span> <span class="attribute">&lt;)&gt;</span> <span class="attribute">&lt;op, "?"&gt;</span> <span class="attribute">&lt;num, 100&gt;</span> <span class="attribute">&lt;op, ":"&gt;</span> <span class="attribute">&lt;id, x&gt;</span> <span class="attribute">&lt;op, "*"&gt;</span> <span class="attribute">&lt;id, x&gt;</span></div><div class="line"><span class="attribute">&lt;&#125;&gt;</span></div></pre></td></tr></table></figure>
<p><strong>3.1.2</strong></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="section">&lt;text, "Here is a photo of"&gt;</span> <span class="section">&lt;nodeStart, b&gt;</span> <span class="section">&lt;text, "my house"&gt;</span> <span class="section">&lt;nodeEnd, b&gt;</span></div><div class="line"><span class="section">&lt;nodeStart, p&gt;</span> <span class="section">&lt;selfEndNodeStart, IMG&gt;</span> <span class="section">&lt;SRC, "house.gif"&gt;</span> <span class="section">&lt;selfEndNodeEnd, IMG&gt;</span> <span class="section">&lt;selfEndNode, BR&gt;</span></div><div class="line"><span class="section">&lt;text, "See"&gt;</span> <span class="section">&lt;nodeStart, A&gt;</span> <span class="section">&lt;HREF, "morePix.html"&gt;</span> <span class="section">&lt;selfEndNodeEnd, A&gt;</span> <span class="section">&lt;text, "More Pictures"&gt;</span> <span class="section">&lt;nodeEnd, A&gt;</span> <span class="section">&lt;text, "if you liked that one."&gt;</span></div><div class="line"><span class="section">&lt;nodeEnd, p&gt;</span></div></pre></td></tr></table></figure>
<p><strong>3.3.2</strong></p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>) <span class="keyword">a</span>开头<span class="keyword">a</span>结尾,中间是大于等于<span class="number">0</span>个<span class="keyword">a</span>或b组成的字符串 如 abababaaba</div><div class="line"><span class="number">2</span>) 任意<span class="keyword">a</span>与b组成的字符串</div><div class="line"><span class="number">3</span>) 以<span class="keyword">a</span> 连接 <span class="keyword">a</span>或b 连接 <span class="keyword">a</span>或b 结尾的任意<span class="keyword">a</span>与b组成的字串</div><div class="line"><span class="number">4</span>) <span class="number">3</span>个b和任意个<span class="keyword">a</span>组成的字串</div><div class="line"><span class="number">5</span>) 偶数个<span class="keyword">a</span>和b组成的字串</div></pre></td></tr></table></figure>
<p><strong>3.3.3</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>) n + <span class="number">1</span></div><div class="line"><span class="number">2</span>) n + <span class="number">1</span></div><div class="line"><span class="number">3</span>) n</div><div class="line"><span class="number">4</span>) (<span class="number">1</span> + n) / <span class="number">2</span> * n + <span class="number">1</span></div><div class="line"><span class="number">5</span>) <span class="number">2</span>^n</div></pre></td></tr></table></figure>
<p><strong>3.3.4</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/select/i</div><div class="line">select -&gt; [<span class="string">Ss</span>][<span class="symbol">Ee</span>][<span class="string">Ll</span>][<span class="symbol">Ee</span>][<span class="string">Cc</span>][<span class="symbol">Tt</span>]</div></pre></td></tr></table></figure>
<p><strong>3.3.5</strong></p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>) want -&gt; other* a (other|<span class="type">a</span>)* e (other|<span class="type">e</span>)* i (other|<span class="type">i</span>)* o (other|<span class="type">o</span>)* u (other|<span class="type">u</span>)*</div><div class="line">    other -&gt; [bcdfghjklmnpqrstvwxyz]</div><div class="line"><span class="number">2</span>) a*b*...z*</div><div class="line"><span class="number">9</span>) b*a*b?a*</div></pre></td></tr></table></figure>
<p><strong>3.3.6</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>) [a-jA-J]</div><div class="line"><span class="number">2</span>) [bcdfghjklmnpqrstvwxzy]</div><div class="line"><span class="number">3</span>) [<span class="number">0</span><span class="number">-9</span>a-f]</div><div class="line"><span class="number">4</span>) [.?!]</div></pre></td></tr></table></figure>
<p><strong>3.5.2</strong></p>
<blockquote>
<p>deemo.lex</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">%&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::ofstream;</div><div class="line"><span class="function">ofstream <span class="title">out</span><span class="params">(<span class="string">"out.txt"</span>)</span></span>;</div><div class="line">%&#125;</div><div class="line"></div><div class="line">delim   [ \t\n]</div><div class="line">ws  &#123;delim&#125;+</div><div class="line"></div><div class="line">%%</div><div class="line">&#123;ws&#125;  out &lt;&lt; <span class="string">" "</span>;</div><div class="line">.  out &lt;&lt; yytext;</div><div class="line">%%</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">yywrap</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">main(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[]) &#123;</div><div class="line">    yylex();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>3.5.3</strong></p>
<blockquote>
<p>deemo.lex</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">%&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::ofstream;</div><div class="line"><span class="function">ofstream <span class="title">out</span><span class="params">(<span class="string">"out.txt"</span>)</span></span>;</div><div class="line">%&#125;</div><div class="line"></div><div class="line">delim   [ \t\n]</div><div class="line">ws  &#123;delim&#125;+</div><div class="line"></div><div class="line">%%</div><div class="line">&#123;ws&#125; &#123;out &lt;&lt; yytext;&#125;</div><div class="line"><span class="keyword">float</span>  &#123;out &lt;&lt; <span class="string">"double"</span>;&#125;</div><div class="line">.  &#123;out &lt;&lt; yytext;&#125;</div><div class="line">%%</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">yywrap</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">main(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[]) &#123;</div><div class="line">    yylex();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>3.5.4</strong></p>
<blockquote>
<p>deemo.lex</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">%&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::ofstream;</div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line"><span class="function">ofstream <span class="title">out</span><span class="params">(<span class="string">"out.txt"</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">display</span> <span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; &amp;cvec, ofstream &amp;os)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cvec.size(); i++) &#123;</div><div class="line">        os &lt;&lt; cvec[i];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">%&#125;</div><div class="line"></div><div class="line">delim   [ \t\n]</div><div class="line">ws  &#123;delim&#125;+</div><div class="line">letter  [A-Za-z]</div><div class="line">digit  [<span class="number">0</span><span class="number">-9</span>]</div><div class="line">id &#123;letter&#125;(&#123;letter&#125;|&#123;digit&#125;)*</div><div class="line">number  &#123;digit&#125;+(\.&#123;digit&#125;+)?(E[+-]?&#123;digit&#125;+)?</div><div class="line"></div><div class="line">%%</div><div class="line">&#123;ws&#125; &#123;</div><div class="line">    out &lt;&lt; yytext;</div><div class="line">&#125;</div><div class="line">&#123;letter&#125;+  &#123;</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; cvec(yytext, yytext + <span class="built_in">strlen</span>(yytext));</div><div class="line">    <span class="keyword">if</span> (cvec[<span class="number">0</span>] != <span class="string">'a'</span> &amp;&amp; cvec[<span class="number">0</span>] != <span class="string">'e'</span> &amp;&amp; cvec[<span class="number">0</span>] != <span class="string">'i'</span> &amp;&amp; cvec[<span class="number">0</span>] != <span class="string">'o'</span> &amp;&amp; cvec[<span class="number">0</span>] != <span class="string">'u'</span>) &#123;</div><div class="line">        cvec.push_back(cvec[<span class="number">0</span>]);</div><div class="line">        cvec.erase(cvec.begin());</div><div class="line">    &#125;</div><div class="line">    cvec.push_back(<span class="string">'a'</span>);</div><div class="line">    cvec.push_back(<span class="string">'y'</span>);</div><div class="line">    display(cvec, out);</div><div class="line">&#125;</div><div class="line">.  &#123;</div><div class="line">    out &lt;&lt; yytext;</div><div class="line">&#125;</div><div class="line">%%</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">yywrap</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">main(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[]) &#123;</div><div class="line">    yylex();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>3.5.5</strong></p>
<blockquote>
<p>deemo.lex</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">%&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::ofstream;</div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line"><span class="function">ofstream <span class="title">out</span><span class="params">(<span class="string">"out.txt"</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">display</span> <span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; &amp;cvec, ofstream &amp;os)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cvec.size(); i++) &#123;</div><div class="line">        os &lt;&lt; cvec[i];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">%&#125;</div><div class="line"></div><div class="line">delim   [ \t\n]</div><div class="line">ws  &#123;delim&#125;+</div><div class="line">letter  [A-Za-z]</div><div class="line">digit  [<span class="number">0</span><span class="number">-9</span>]</div><div class="line">id &#123;letter&#125;(&#123;letter&#125;|&#123;digit&#125;)*</div><div class="line">number  &#123;digit&#125;+(\.&#123;digit&#125;+)?(E[+-]?&#123;digit&#125;+)?</div><div class="line"></div><div class="line">%%</div><div class="line">&#123;ws&#125; &#123;</div><div class="line">    out &lt;&lt; yytext;</div><div class="line">&#125;</div><div class="line">[Ss][Ee][Ll][Ee][Cc][Tt]  &#123;</div><div class="line">    out &lt;&lt; <span class="string">"select"</span>;</div><div class="line">&#125;</div><div class="line">[Ff][Rr][Oo][Mm]  &#123;</div><div class="line">    out &lt;&lt; <span class="string">"from"</span>;</div><div class="line">&#125;</div><div class="line">[Ww][Hh][Ee][Rr][Ee]  &#123;</div><div class="line">    out &lt;&lt; <span class="string">"where"</span>;</div><div class="line">&#125;</div><div class="line">&#123;id&#125;  &#123;</div><div class="line">    out &lt;&lt; yytext;</div><div class="line">&#125;</div><div class="line">.  &#123;</div><div class="line">    out &lt;&lt; yytext;</div><div class="line">&#125;</div><div class="line">%%</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">yywrap</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">main(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[]) &#123;</div><div class="line">    yylex();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="第四章语法分析"><a href="#第四章语法分析" class="headerlink" title="第四章语法分析"></a>第四章语法分析</h2><p><strong>4.2.1</strong></p>
<ol>
<li><p>最左推倒</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">S -&gt; SS*</div><div class="line">  -<span class="ruby">&gt; SS+S*</span></div><div class="line">  -<span class="ruby">&gt; aS+S*</span></div><div class="line">  -<span class="ruby">&gt; aa+S*</span></div><div class="line">  -<span class="ruby">&gt; aa+a*</span></div></pre></td></tr></table></figure>
</li>
<li><p>最右推倒</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">S -&gt; SS*</div><div class="line">  -<span class="ruby">&gt; Sa*</span></div><div class="line">  -<span class="ruby">&gt; SS+a*</span></div><div class="line">  -<span class="ruby">&gt; Sa+a*</span></div><div class="line">  -<span class="ruby">&gt; aa+a*</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>4.2.3</strong></p>
<ol>
<li>S -&gt; 0T1S | 1S | null<br>T -&gt; 1T | 0T | 0</li>
</ol>
<h1 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h1><h2 id="LR语法分析算法-算法4-44-p159"><a href="#LR语法分析算法-算法4-44-p159" class="headerlink" title="LR语法分析算法(算法4.44 p159)"></a>LR语法分析算法(算法4.44 p159)</h2><p>输入: 一个输入串w 和一个LR 语法分析表, 这个标描述了文法G 的ACTION 函数和GOTO 函数.</p>
<p>输出: 如果w 在L(G) 中, 则输出w 的自底向上语法分析过程中的归约步骤; 否则给出一个错误指示.</p>
<p>文法:<br><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(<span class="number">1</span>) E -&gt; E + <span class="literal">T</span>      (<span class="number">4</span>) <span class="literal">T</span> -&gt; <span class="literal">F</span></div><div class="line">(<span class="number">2</span>) E -&gt; <span class="literal">T</span>          (<span class="number">5</span>) <span class="literal">F</span> -&gt; (E)</div><div class="line">(<span class="number">3</span>) <span class="literal">T</span> -&gt; <span class="literal">T</span> * <span class="literal">F</span>      (<span class="number">6</span>) <span class="literal">F</span> -&gt; id</div></pre></td></tr></table></figure></p>
<p>LR 语法分析程序<br><figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">令a 为w$ 的第一个符号</div><div class="line"><span class="keyword">while</span><span class="comment">(1)</span> &#123;</div><div class="line">    s = 栈顶的状态</div><div class="line">    <span class="keyword">if</span> <span class="comment">(ACTION[s, a] == 移入t)</span> &#123;</div><div class="line">        将t 压入栈中;</div><div class="line">        令a 为下一个输入符号</div><div class="line">    &#125; else <span class="keyword">if</span> <span class="comment">(ACTION[s, a] == 归约 A -&gt; β)</span> &#123;</div><div class="line">        从栈中弹出|β| 个符号;</div><div class="line">        t = 栈顶的状态</div><div class="line">        将<span class="keyword">GOTO</span>[t, A] 压入栈中</div><div class="line">        输出产生式A -&gt; β</div><div class="line">    &#125; else <span class="keyword">if</span> <span class="comment">(ACTION[s, a] = 接受)</span> &#123;</div><div class="line">        break; <span class="comment">/* 语法分析完成 */</span></div><div class="line">    &#125; else &#123;</div><div class="line">        调用错误恢复例程</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="翻译"><a href="#翻译" class="headerlink" title="翻译"></a>翻译</h2><p>声明语句的翻译</p>
<p>赋值语句的翻译</p>
<p>控制语句的翻译</p>
<p>回填</p>
<p>switch 语句的翻译</p>
<p>过程调用语句的翻译</p>
<h2 id="存储分配"><a href="#存储分配" class="headerlink" title="存储分配"></a>存储分配</h2><h3 id="静态存储分配-顺序分配法-层次分配法"><a href="#静态存储分配-顺序分配法-层次分配法" class="headerlink" title="静态存储分配(顺序分配法)(层次分配法)"></a>静态存储分配(顺序分配法)(层次分配法)</h3><h3 id="栈式存储分配"><a href="#栈式存储分配" class="headerlink" title="栈式存储分配"></a>栈式存储分配</h3><p>活动树<br>设计活动记录</p>
<p>调用序列<br>返回序列</p>
<p>变长数据</p>
<h2 id="第八章-代码优化"><a href="#第八章-代码优化" class="headerlink" title="第八章 代码优化"></a>第八章 代码优化</h2><p><strong>基本块</strong>(基本块划分算法)<br>根据<code>首指令</code>划分基本块</p>
<p><strong>流图</strong> (表示中间代码的方法)(流图的<code>节点</code>是一些<code>基本块</code>)(流图的<code>边</code> 即基本块到基本块的跳转)</p>
<h3 id="优化方法的分类"><a href="#优化方法的分类" class="headerlink" title="优化方法的分类"></a>优化方法的分类</h3><ul>
<li><p><code>删除公共子表达式</code>(局部)(全局)(也可以消除能消除的临时变量)(只有没有改变的才能替换)</p>
</li>
<li><p><code>删除无用代码</code>(复制传播: 在复制语句x=y之后尽可能的用y代替x,这样能给删除无用代码带来机会)(无用代码: )</p>
</li>
<li><p>常量合并`(编译时刻推导出一个表达式是常量, 则之后可用该常量代替该表达式)(复制传播的一个特例)</p>
</li>
</ul>
<p>-<code>代码移动</code>(<em>循环不变计算</em>: 将循环中计算结果相同的表达式)(循环不变计算的相对性)</p>
<p>-<code>强度削弱</code>(用较快的操作来替代较慢的操作, 如用加代替乘)<br><code>循环中的强度削弱</code>(<em>归纳变量</em>: 对某个常数c, 变量x每次循环都增加常数c, 则x是归纳变量)(对归纳变量进行强度削弱)</p>
<p>-<code>删除归纳变量</code>(循环运行时,如果有<em>一组归纳变量</em>的值变化保持<em>步调一致</em>,常常可以将这组变量删除为只剩一个)</p>
<h3 id="基本块的优化-局部的优化"><a href="#基本块的优化-局部的优化" class="headerlink" title="基本块的优化(局部的优化)"></a>基本块的优化(局部的优化)</h3><p><code>基本块的DAG表示</code></p>
<p><code>基于基本块的DAG 检测局部公共子表达式</code></p>
<p><code>基于基本块的DAG</code> 删除无用代码`(删除没有附加<em>活跃变量</em>的<em>根节点</em>)(活跃变量: 值可能在以后被使用)(根节点: 没有父节点的节点)(重复这个过程, 可以消除对应无用代码的节点)</p>
<p><code>数组下标指令的表示</code>(防止构造DAG时将a[i]误判为公共子表达式)(a=x[i], op:’=[]’, arg1:x, arg2:i, result: a)(被杀死的节点<em>不能再获得任何定值变量</em>, 也就不能成为一个公共子表达式)</p>
<p><code>基本块DAG的构造</code><br>从DAG中获得的信息:(确定哪些标识符在基本块中被<em>引用</em>过)(确定哪些语句计算的值可以在基本块外被引用)</p>
<h3 id="数据流分析"><a href="#数据流分析" class="headerlink" title="数据流分析"></a>数据流分析</h3><p><em>语句</em>的数据流模式 (IN[s] 语句s之前的数据流值)(OUT[s] 语句s之后的数据流值)<br><em>fs</em>: 语句s的传递函数(一个赋值语句s之前和之后的数据流值的关系)(前向传播: OUT[s] = fs(IN[s]))(逆向传播 IN[s] = fs(OUT[s]))</p>
<p><em>基本块</em>上的数据流模式(IN[B]: 紧随基本块B之前的数据流值)(OUT[B]: 紧随基本块B之后的数据流值)<br><em>fB</em>: 基本块B的传递函数(前向数据流问题: OUT[B] = fB(IN[B]) , fB = fsn<em>…</em>fs2<em>fs1)(逆向数据流问题: IN[B] = fB(OUT[B]) , `fB = fs1</em>fs2<em>…</em>fsn`)</p>
<h4 id="到达定值分析"><a href="#到达定值分析" class="headerlink" title="到达定值分析"></a>到达定值分析</h4><p><code>定值</code><br><code>到达定值</code><br>用途: (循环不变计算的检测)(常数合并)(判定变量x在p点上是否<em>未经定值</em>就被<em>引用</em>)</p>
<p><em>生成</em>与<em>杀死</em></p>
<p><code>到达定值的传递函数</code><br>(fd: 定值d: u = v + w的传递函数)(fd(x) = gend U (x - killd))(gend: 由语句d生成的定值的集合)(killd: 由语句杀死的定值的集合)(x d之前生成的定值的集合)<br>(fB: 基本块B的传递函数)(fB(x) = genB U (x - killB))(killB = kill1 U kill2 U … U killn 被基本块B中各个语句杀死的定值的集合)(genB = genn U (genn-1 - killn) U … U (gen1 - kill1 - … - killn) 基本块中没有被块中各个语句杀死的定值的集合)</p>
<p><code>到达定值的数据流方程</code></p>
<p><strong>引用定值链(Use-Definition Chains)</strong><br>引用定值链是一个<em>列表</em>, 对于变量的每一次<em>引用</em>, <em>到达该引用的所有定值</em>都在该列表中.</p>
<h4 id="活跃变量分析"><a href="#活跃变量分析" class="headerlink" title="活跃变量分析"></a>活跃变量分析</h4><p><code>活跃变量</code>(用途: <em>删除无用赋值</em>, <em>为基本块分配寄存器</em>)</p>
<p><strong>定值-引用链(definition-use chains)</strong><br>设变量x有一个定值d, 该定值所有能够到达的引用u的集合称为x在d处的<code>定值-引用链</code></p>
<h4 id="可用表达式分析"><a href="#可用表达式分析" class="headerlink" title="可用表达式分析"></a>可用表达式分析</h4><p>用途:(消除全局公共子表达式)(进行复制传播)</p>
<h3 id="流图中的循环"><a href="#流图中的循环" class="headerlink" title="流图中的循环"></a>流图中的循环</h3><p><strong>支配节点</strong></p>
<p><strong>回边</strong></p>
<p><strong>自然循环</strong></p>
<h3 id="全局优化"><a href="#全局优化" class="headerlink" title="全局优化"></a>全局优化</h3><p><strong>删除全局公共子表达式</strong><br><strong>删除复制语句</strong><br><strong>代码移动</strong></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[计算机网络-笔记]]></title>
      <url>https://beim.github.io/2016/09/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h1 id="0"><a href="#0" class="headerlink" title="0"></a>0</h1><figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">RIP协议可能产生震荡现象 <span class="comment">(X)</span></div></pre></td></tr></table></figure>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="number">41</span>判断(<span class="number">2</span>分)</div><div class="line">OSPF协议只在分区内计算路由，不能在整个AS范围内计算路由。 (X)</div><div class="line">得分/总分</div><div class="line"></div><div class="line">A.</div><div class="line"></div><div class="line">B<span class="number">.0</span><span class="number">.00</span>/<span class="number">2.00</span></div><div class="line">正确答案：A你错选为B</div></pre></td></tr></table></figure>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="number">31</span>多选(<span class="number">3</span>分)</div><div class="line">下列关于CSMA/CD协议的叙述中，正确的是</div><div class="line">得分/总分</div><div class="line"></div><div class="line">A.</div><div class="line">适用于各种广播链路，以实现链路共享</div><div class="line">该题无法得分/<span class="number">3.00</span></div><div class="line"></div><div class="line">B.</div><div class="line">需要根据网络跨距和数据传输速率限定最小帧</div><div class="line">该题无法得分/<span class="number">3.00</span></div><div class="line"></div><div class="line">C.</div><div class="line">边发送数据帧，边检测是否发生冲突</div><div class="line">该题无法得分/<span class="number">3.00</span></div><div class="line"></div><div class="line">D.</div><div class="line">基于冲突检测机制，确保帧可靠传输</div><div class="line">正确答案：B、C你错选为A、B、C</div></pre></td></tr></table></figure>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="number">32</span>多选(<span class="number">3</span>分)</div><div class="line">下列关于交换机的叙述中，错误的是</div><div class="line">得分/总分</div><div class="line"></div><div class="line">A.</div><div class="line">交换机每个端口所连网络构成一个独立的广播域</div><div class="line"><span class="number">1.00</span>/<span class="number">3.00</span></div><div class="line"></div><div class="line">B.</div><div class="line">以太网交换机可实现采用不同网络层协议的网络互联</div><div class="line"></div><div class="line">C.</div><div class="line">以太网交换机本质上是一种多端口网桥</div><div class="line"></div><div class="line">D.</div><div class="line">通过交换机互连的一组工作站构成一个冲突域</div><div class="line"><span class="number">1.00</span>/<span class="number">3.00</span></div><div class="line">正确答案：A、B、D你错选为A、D</div></pre></td></tr></table></figure>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="number">33</span>多选(<span class="number">3</span>分)</div><div class="line">下列关于交换机的叙述中，错误的是</div><div class="line">得分/总分</div><div class="line"></div><div class="line">A.</div><div class="line">以太网交换机是一种存储-转发设备</div><div class="line"></div><div class="line">B.</div><div class="line">以太网交换机可实现采用不同网络层协议的网络互联</div><div class="line"></div><div class="line">C.</div><div class="line">交换机每个端口所连网络构成一个独立的广播域</div><div class="line"><span class="number">1.00</span>/<span class="number">3.00</span></div><div class="line"></div><div class="line">D.</div><div class="line">通过交换机互连的一组工作站构成一个冲突域</div><div class="line"><span class="number">1.00</span>/<span class="number">3.00</span></div><div class="line">正确答案：B、C、D你错选为C、D</div></pre></td></tr></table></figure>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> (<span class="number">09</span> 年考研 <span class="number">34</span> 题)在无噪声情况下,若某通信链路的带宽为 <span class="number">3</span>kHz,采</div><div class="line">用 <span class="number">4</span> 个相位,每个相位具有 <span class="number">4</span> 种振幅的 QAM 调制技术,则该通信链路的最大数</div><div class="line">据传输速率是</div><div class="line">A. <span class="number">12</span> kbps</div><div class="line">B. <span class="number">24</span> kbps</div><div class="line"><span class="keyword">C</span>. <span class="number">48</span> kbps</div><div class="line"><span class="keyword">D</span>. <span class="number">96</span> kbps</div><div class="line">【解答】选 B。由奈氏准则公式:<span class="keyword">C</span>=<span class="number">2</span>Wlog <span class="number">2</span> <span class="keyword">N</span>=<span class="number">2</span> * <span class="number">3</span><span class="keyword">K</span> * log <span class="number">2</span> (<span class="number">4</span>*<span class="number">4</span>)=<span class="number">24</span>Kbps,</div><div class="line">即该信道的最大数据传输速率是 <span class="number">24</span>Kbps。</div><div class="line">【考查知识点】奈氏准则。理想低通信道的最高码元传输速率=<span class="number">2</span>W <span class="keyword">Band</span>。W</div><div class="line">是低通信道的带宽,单位为 Hz,<span class="keyword">Band</span> 是波特,是码元传输速率的单位。一个码</div><div class="line">元携带 <span class="keyword">N</span> bit 信息量,波形速率为 M <span class="keyword">Band</span>,则最高速率为 M*<span class="keyword">N</span> bit/s.</div><div class="line">香农定理指出:在有随机热噪声的信道上传输数据信号时,数据传输速率 <span class="keyword">C</span></div><div class="line">与信道带宽 W、信噪比 S/<span class="keyword">N</span> 的关系为:<span class="keyword">C</span>=W*log <span class="number">2</span> (<span class="number">1</span>+S/<span class="keyword">N</span>))。式中,<span class="keyword">C</span> 单位为</div><div class="line">bps,带宽 W 单位为 Hz,信噪比 S/<span class="keyword">N</span> 通常以 dB(分贝)数表示。</div><div class="line"></div><div class="line"><span class="number">2.</span> (<span class="number">11</span> 年考研 <span class="number">34</span> 题)若某通信链路的数据传输速率为 <span class="number">2400</span>bps,采用 <span class="number">4</span></div><div class="line">相位调制,则该链路的波特率是</div><div class="line">A. <span class="number">600</span> 波特</div><div class="line">B. <span class="number">1200</span> 波特</div><div class="line"><span class="keyword">C</span>. <span class="number">4800</span> 波特</div><div class="line"><span class="keyword">D</span>. <span class="number">9600</span> 波特</div><div class="line">【解答】选 B。有 <span class="number">4</span> 种相位,则一个码元需要由 log <span class="number">2</span> <span class="number">4</span>=<span class="number">2</span> 个 bit 表示,则波</div><div class="line">特率=比特率/<span class="number">2</span>=<span class="number">1200</span> 波特。</div><div class="line">【考查知识点】考察波特与比特率的关系;比特率和波特率之间的换算关系</div><div class="line">如下:比特率 = 波特率 * log <span class="number">2</span> n 。比特率是数字信号的传输速率——单位时间</div><div class="line">内所传输的二进制代码的有效位数。单位——比特/秒(bps)或千比特/秒(kbps)。</div><div class="line">波特率是调制速率(又称波形速率)——线路中每秒传送的波形的个数。单位—</div><div class="line">—波特(band)。</div></pre></td></tr></table></figure>
<p>路由器的体系结构包括四个部分, 分别是<code>处理器/cpu</code>, <code>输入端口</code>, <code>输出端口</code>, 和<code>交换接口</code></p>
<p>在Internet中可以将一个自治系统分为多个区的自治系统内路由协议为<code>OSPF</code></p>
<p>10BaseT以太网采用的比特编码机制是<code>曼彻斯特编码</code></p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">下列物理介质中, 易受电磁干扰的导向介质是<span class="keyword">A</span></div><div class="line"><span class="keyword">A</span>.双绞线, B 红外线 C 光纤 D 微波</div></pre></td></tr></table></figure>
<p>帧同步的方法有: <code>字节计数法</code>, <code>字符填充的首尾定界符法</code>, <code>比特填充的首尾标识法</code>, <code>违法编码法</code></p>
<p>解决无穷计数问题的方法有: <code>抑制规则(定义最大有效度量值)</code>, <code>毒性逆转的水平分割</code>, <code>触发更新</code>, <code>阻碍时钟</code>等</p>
<p>OSPF使用IP, RIP使用UDP, BGP使用TCP</p>
<p>以太网10BaseT和100BaseT使用的物理介质是<code>双绞线</code></p>
<p>计算机网络常用的有限物理介质有<code>双绞线</code>, <code>光纤</code>, <code>同轴电缆</code></p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">NRZL, 曼彻斯特, 差分曼彻斯特编码</div><div class="line"><span class="symbol">NRZL:</span> 高电平为<span class="number">1</span>, 低电平为<span class="number">0</span></div><div class="line">曼彻斯特: 低到高为<span class="number">1</span>, 高到低为<span class="number">0</span></div><div class="line">差分曼彻斯特: 在信号开始时改变信号极性表示逻辑<span class="number">0</span>, 否则表示逻辑<span class="number">1</span></div></pre></td></tr></table></figure>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Internet中域名, <span class="built_in">IP</span>地址和MAC地址关系如何? 它们之间如何进行映射</div><div class="line">域名, <span class="built_in">IP</span>地址和MAC地址都可以用于标识Internet中通信节点(或接口)</div><div class="line">域名主要用于应用层, <span class="built_in">IP</span>地址主要在网络层, MAC地址主要在数据链路层</div><div class="line">域名通过DNS解析获得<span class="built_in">IP</span>地址</div><div class="line"><span class="built_in">IP</span>地址通过ARP协议获得MAC地址</div><div class="line">DNS to <span class="built_in">IP</span>: DNS resolve</div></pre></td></tr></table></figure>
<p>两种典型的分组交换网络是<code>数据报网络</code>, <code>虚电路网络</code></p>
<p>802.11无线局域网的两种典型的网络模式是<code>基础设施模式</code>和<code>特定网模式/Ad hoc模式</code></p>
<p><a href="http://baike.baidu.com/view/672386.htm" target="_blank" rel="external">网络接入</a></p>
<p>分组交换网络传输分组的基本工作方式是<code>存储-转发</code></p>
<p>网络应用体系结构主要包括<code>client/server</code>, <code>P2P</code>, <code>端口号</code></p>
<p>流量控制关注的是<code>接收端的数据接收和缓存能力</code>, 拥塞控制关注的是<code>网络传输能力</code> </p>
<p>Web应用中引入的Cookies技术可以支持<code>身份鉴别</code>, <code>购物车</code>, <code>推荐服务</code>, 和<code>用户会话状态信息维护</code>等</p>
<p>FTP传输命令通过<code>控制</code>连接, 服务器默认端口号为<code>21</code>; 传输文件通过<code>数据连接</code>, 服务器端默认的端口号为<code>20</code></p>
<p>SMTP协议基于的传输层协议是<code>TCP</code>, 服务器默认端口号是<code>25</code>, 传输的邮件内容必须是<code>7比特的ASCII码</code></p>
<p>典型的邮件接收协议有<code>POP</code>, <code>IMAP</code>, <code>HTTP</code>等</p>
<p>DNS协议运行在UDP协议之上，使用端口号53。</p>
<p>UDP头包括<code>源端口号</code>, <code>目的端口号</code>, <code>长度</code>, <code>校验和</code>四个字段</p>
<p>UDP计算校验和时包括<code>伪头</code>, <code>UDP段头</code>, 和<code>应用层数据</code> 3部分内容</p>
<p>实现可靠传输的主要机制包括<code>差错编码</code>, <code>重传</code>, <code>计时器</code>, <code>确认</code>和 <code>序列号</code></p>
<p>滑动窗口协议的发送窗口大小为Ws, 接收窗口大小为Wr, 数据分组序列号域的比特长度为L, 则<code>Ws + Wr &lt; L</code></p>
<p>TCP和UDP校验和都要加上<code>伪头部</code>, 和<code>应用层数据</code><br>IP校验和只计算<code>首部</code></p>
<p>若不包含前导码,则以太网数据帧的最大帧长为( 1518 )字节,最小帧长为( 64 )字节,数据域最少为( 46 )字节、最大为( 1500 )字节,以太网的 MTU 为( 1500 )字节。</p>
<p><strong>tcp报文中的 Timestamp option</strong><br><a href="http://stackoverflow.com/questions/2524511/what-is-the-meaning-of-the-tsv-and-tser-fields-in-an-ethereal-dump" target="_blank" rel="external">Timestamp value 和 Timestamp echo 作用</a></p>
<p><code>网络协议的三要素</code>(语法,语义,同步)</p>
<p><code>网络工程中常用的线缆标准为568A</code>(直通线568A-568A)(交叉线568A-568B)</p>
<p><code>IEEE 802.3 CMSA/CD, IEEE 802.4 Token Bus, IEEE 802.5 Token Ring</code><br>多路访问协议(multi-access protocol)</p>
<ul>
<li>信道划分协议(TDM, FDM)</li>
<li>随机接入协议<ul>
<li>ALOHA (纯ALOHA, 分槽ALOHA(slotted ALOHA))</li>
<li>载波侦听多路访问协议(CSMA) (坚持)(非坚持)(带冲突检测的CSMA: CSMA/CD)</li>
</ul>
</li>
<li>轮流协议 <ul>
<li>polling</li>
<li>令牌传递(token passing)(令牌总线, 令牌环)</li>
</ul>
</li>
</ul>
<p><code>[ATM](https://zh.wikipedia.org/wiki/%E5%BC%82%E6%AD%A5%E4%BC%A0%E8%BE%93%E6%A8%A1%E5%BC%8F)(Asynchronous Transfer Mode)异步传输模式</code>, 又叫信元中继, ATM采用电路交换的模式, 能够支持有连接和无连接的业务, 能比较理想的实现各种QoS</p>
<p><a href="https://zh.wikipedia.org/wiki/%E5%89%8D%E5%90%91%E9%8C%AF%E8%AA%A4%E6%9B%B4%E6%AD%A3" target="_blank" rel="external">前向纠错(forward err correction)</a></p>
<p><a href="https://zh.wikipedia.org/wiki/%E5%BE%AA%E7%92%B0%E5%86%97%E9%A4%98%E6%A0%A1%E9%A9%97" target="_blank" rel="external">循环冗余校验(CRC: Cyclic redundancy check)</a></p>
<p><a href="http://baike.baidu.com/view/793550.htm" target="_blank" rel="external">混合差错控制</a></p>
<p><a href="https://zh.wikipedia.org/wiki/%E9%AB%98%E7%BA%A7%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E6%8E%A7%E5%88%B6" target="_blank" rel="external">HDLC: High-Level Data Link Control高级数据链路控制–数据链路层</a></p>
<p>局域网3要素: 传输介质, 拓扑结构, 介质访问控制方法</p>
<p>路由选择算法分为两大类, 分别为<code>适应性</code>和<code>非适应性</code>.<br>理想的路由算法应该具有的特点<em>正确性</em>, <em>简单性</em>, <em>坚定性</em>, 稳定性<em>, 公平性</em>, <em>最佳性</em>.<br>数据报服务中, 网络节点要为每个<em>分组</em>选择路由, 在虚电路服务中, 网络节点只在连接<em>建立</em>时选择路由<br>网络互联时一般要使用网络互联器, 根据网络互联器进行协议和功能转换对象的不同可以分为: <code>中继器 网桥 路由器 协议转换器</code> 四种</p>
<p><a href="https://en.wikipedia.org/wiki/Exponential_backoff#Binary_exponential_backoff_.2F_truncated_exponential_backoff" target="_blank" rel="external">CSMA/CD采用的二进制指数退避算法</a><br><a href="http://baike.baidu.com/item/%E6%88%AA%E6%96%AD%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%8C%87%E6%95%B0%E9%80%80%E9%81%BF%E7%AE%97%E6%B3%95" target="_blank" rel="external">截断二进制指数退避算法</a></p>
<p><a href="https://en.wikipedia.org/wiki/Synchronous_Data_Link_Control" target="_blank" rel="external">SDLC: Synchronous Data Link Control – layer 2, 现在已经逐渐被IP协议取代</a></p>
<p><a href="http://www.cnblogs.com/aixin0813/p/3310040.html" target="_blank" rel="external">以太网帧最小帧长与最大帧长</a><br>以太网的帧开销是18字节，是“目的MAC（6）＋源MAC（6）＋Type（2）＋CRC（4）”。以太网最小帧长为64字节，那么IP报文最小为46字节，而局域网规定IP最大传输单元1500字节，实际上加上以太网帧的18字节，就是1518字节。<br>IEEE定义了这个标准，一个碰撞域内，最远的两台机器之间的round-trip time 要小于512bit time。(来回时间小于512位时，所谓位时就是传输一个比特需要的时间）。这也是我们常说的一个碰撞域的直径。</p>
<p><strong>ICMP差错报文</strong></p>
<ul>
<li>对于携带ICMP差错报文的数据包, 不再产生ICMP差错报文</li>
<li>对于分段的数据报文, 如果不是第一个分段则不产生ICMP差错报文</li>
<li>对于多播地址的数据报文, 不产生ICMP差错报文</li>
<li>具有特殊地址的数据报文, 如127.0.0.0或0.0.0.0, 不产生ICMP差错报文</li>
</ul>
<p><strong>唯一标识一个UDP套接字的是</strong>目的端口号和目的IP地址.</p>
<p><strong>NAT</strong>服务的路由器转发一个源IP地址为10.0.0.1的IP数据分组时,可能重写的IP分组首部字段是</p>
<ul>
<li>总长度</li>
<li>源IP地址</li>
<li>源端口</li>
<li>checksum</li>
<li>TTL<br>不会改变的是</li>
<li>ID</li>
<li>目的IP地址</li>
<li>协议</li>
</ul>
<p><strong>用于实现可靠数据传输的机制有</strong></p>
<ul>
<li>确认</li>
<li>差错检测</li>
<li>重传</li>
<li>计时器</li>
<li>序列号</li>
</ul>
<p>直通交换方式是指以太网交换机可以在各端口间交换数据。它在输入端口检测到一个数据包时，检查该包的包头，获取包的目的地址，启动内部的动态查找表转换成相应的输出端口，在输入与输出交叉处接通，把数据包直通到相应的端口，实现交换功能。通常情况下，直通交换方式只检查数据包的包头即前14个字节，由于不需要考虑前导码，只需要检测目的地址的6B，所以最短的传输延迟是0.48μs。</p>
<p>由于快速以太网的最短帧长为64字节，去除首部18字节，即数据部分最短46字节。从表1中可以看出，第3号和第5号分组的总长度为40（28H）字节，小于46字节，其他分组总长度均大于46字节，所以3号和5号分组在通过快速以太网传输时需要填充。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">快速以太网最短帧长为<span class="number">64</span>字节, 首部<span class="number">18</span>字节, 因此数据部分最短<span class="number">46</span>字节.</div><div class="line"><span class="number">64</span>*<span class="number">8</span> = <span class="number">512</span>, <span class="number">10</span>Mbps以太网中按照二进制指数退避算法的退避时间单元为<span class="number">512</span>b / <span class="number">10</span>Mbps = <span class="number">51.2</span>us</div></pre></td></tr></table></figure>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="number">5.</span> (<span class="number">14</span>年考研<span class="number">37</span>题)站点A、B、C通过CDMA共享链路，A、B、C的码片序列(chipping sequence)分别是(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)、(<span class="number">1</span>，<span class="number">-1</span>,<span class="number">1</span>，<span class="number">-1</span>)和(<span class="number">1</span>，<span class="number">1</span>,<span class="number">-1</span>，<span class="number">-1</span>)，若C从链路上收到的序列是(<span class="number">2</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-2</span>,<span class="number">0</span>,<span class="number">-2</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">2</span>)，则C收到A发送的数据是</div><div class="line">A. <span class="number">000</span></div><div class="line">B. <span class="number">101</span></div><div class="line">C. <span class="number">110</span></div><div class="line">D. <span class="number">111</span></div><div class="line">【解答】选B。用A的码片与链路上的序列做规格化内积，得<span class="number">1</span>，<span class="number">-1</span>，<span class="number">1</span>对应的数据为<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>。</div><div class="line">【考查知识点】CDMA码分多址</div></pre></td></tr></table></figure>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="number">10</span>单选(<span class="number">2</span>分)</div><div class="line">不采用FDM技术的接入网络是 (D)</div><div class="line">A.</div><div class="line">IEEE802.<span class="number">11</span>（WiFi）</div><div class="line">B.</div><div class="line">HFC</div><div class="line">C.</div><div class="line">ADSL</div><div class="line">D.</div><div class="line">以太网</div></pre></td></tr></table></figure>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="number">28</span>.下列关于<span class="built_in">IP</span>路由器功能的描述中，正确的是（C ）</div><div class="line">Ⅰ.运行路由协议，设备路由表</div><div class="line">Ⅱ.检测到拥塞时，合理丢弃<span class="built_in">IP</span>分组</div><div class="line">Ⅲ.对收到的<span class="built_in">IP</span>分组头进行差错校验，确保传输的<span class="built_in">IP</span>分组不丢失</div><div class="line">Ⅳ.根据收到的<span class="built_in">IP</span>分组的目的<span class="built_in">IP</span>地址，将其转发至合适的输出线路上</div><div class="line">A.仅Ⅲ， Ⅳ</div><div class="line">B.仅Ⅰ， Ⅱ， Ⅲ</div><div class="line">C.仅Ⅰ， Ⅱ， Ⅳ</div><div class="line">D. Ⅰ， Ⅱ， Ⅲ ， Ⅳ</div><div class="line">解析：</div><div class="line">路由器的主要作用包括：</div><div class="line"><span class="number">1.</span><span class="built_in">IP</span>路由器运行路由协议，更新设备路由表。</div><div class="line"><span class="number">2</span>.当检测到网络发生拥塞时，合理丢弃<span class="built_in">IP</span>分组。</div><div class="line"><span class="number">3</span>.路由器根据收到的<span class="built_in">IP</span>分组的目的<span class="built_in">IP</span>地址，将其转发至合适的输出线路上。</div><div class="line"><span class="number">4.</span><span class="built_in">IP</span>路由器只是尽可能最大努力交付数据包，不会进行差错校验，也不能确保传输的<span class="built_in">IP</span>数据不丢失。</div></pre></td></tr></table></figure>
<p><code>DNS资源记录类型</code>(Resource Records)<br>(name, value, type, ttl)</p>
<ul>
<li><code>Type=A</code>; Name: 主机域名; Value: IP地址; (<code>jwts.hit.edu.cn.   28800   IN  A   219.217.228.102</code>)</li>
<li><code>Type=NS</code>; Name: 域(edu.cn); Value: 该域权威域名解析服务器的主机域名(edu.cn.          172800  IN  NS  dns.edu.cn.)</li>
<li><code>Type=CNAME</code>; Name: 某一真实域名的别名; Value: 真实域名 (beim.github.io.      3600    IN  CNAME   github.map.fastly.net.)</li>
<li><code>Type=MX</code>; Value是与name相对应的邮件服务器</li>
</ul>
<p>主机甲与主机乙之间使用后退N帧协议（GBN）传输数据，甲的发送窗口尺寸为1000，数据帧长为1500字节，信道带宽为100 Mbps，乙每收到一个数据帧立即利用一个短帧（忽略其传输延迟）进行确认。若甲乙之间的单向传播延迟是50 ms，则甲可以达到的最大平均数据传输速率约为<br><a href="http://www.wenku1.com/news/A7DBB26CD189B41D.html" target="_blank" rel="external">与该题类似的题的答案 - 7</a></p>
<p>FTP 协议是基于传输层 TCP 协议的。FTP 的控制连接使用端口 21,用来传输控制信息<br>(如连接请求,传送请求等)<br>;数据连接使用端口 20,用来传输数据</p>
<p><a href="https://zh.wikipedia.org/wiki/%E6%B3%A2%E7%89%B9%E7%8E%87" target="_blank" rel="external">波特率-wiki</a></p>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="number">9.</span>在物理层接口特性中，用于描述完成每种功能的时间发生顺序的是（ <span class="keyword">C</span>）。</div><div class="line">A.机械特性       B.功能特性      <span class="keyword">C</span>.过程特性     <span class="keyword">D</span>.电气特性</div><div class="line">解析：</div><div class="line">选项A：机械特性：指明引脚数目和排列</div><div class="line">选项B：功能特性：指明电压表示何种意义</div><div class="line">选项<span class="keyword">C</span>：过程特性：指明完成每种功能的时间发生顺序</div><div class="line">选项<span class="keyword">D</span>：电气特性：指明电压的范围。</div></pre></td></tr></table></figure>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="number">10.</span>HDLC协议对<span class="number">01111100</span> <span class="number">01111110</span>组帧后对应的比特串为（A）。</div><div class="line">A<span class="number">.01111100</span> <span class="number">00111110</span> <span class="number">10</span>            B<span class="number">.01111100</span> <span class="number">01111101</span> <span class="number">01111110</span></div><div class="line">C<span class="number">.01111100</span> <span class="number">01111101</span> <span class="number">0</span>             D<span class="number">.01111100</span> <span class="number">01111110</span> <span class="number">01111101</span></div><div class="line">解析：</div><div class="line">     HDLC协议对比特串进行组帧时，HDLC数据帧以位值<span class="number">0111</span> <span class="number">1110</span> 标识，每一个帧的开始和结束，</div><div class="line">因此，在帧数据中凡是出现连续五个<span class="number">1</span>时，就在输出位流末尾加<span class="number">0</span></div><div class="line">     扫描整个帧，但发现连续<span class="number">5</span>个<span class="number">1</span>时，就立即补充一个<span class="number">0</span>，显然处理后不可能出现连续的<span class="number">6</span>个<span class="number">1.</span></div></pre></td></tr></table></figure>
<p><a href="https://zh.wikipedia.org/wiki/%E9%AB%98%E7%BA%A7%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E6%8E%A7%E5%88%B6" target="_blank" rel="external">HDLC</a></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[<span class="string">8. (13年考研34题)若下图为10BaseT网卡接收到的信号波形，则该网卡收到的比特串是</span>](<span class="link">http://www.ppkao.com/shiti/4259875/</span>)</div><div class="line">A. 0011 0110 B. 1010 1101 C. 0101 0010 D. 1100 0101 【解答】选A。以太网编码采用曼彻斯特编码方式，电平由低电平到高电平跳变表示数字“0”，由高电平到低电平跳变表示数字“1”，因此网卡收到的比特串是00110110。</div></pre></td></tr></table></figure>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="number">2.</span> (<span class="number">10</span>年考研<span class="number">36</span>题)若路由器R因为拥塞丢弃IP分组，则此时R可以向发出该IP分组的源主机发送的ICMP报文件类型是</div><div class="line">A. 路由重定向</div><div class="line">B. 目的不可达</div><div class="line">C. 源抑制</div><div class="line">D. 超时</div><div class="line">【解答】选C。ICMP差错控制报文的<span class="number">5</span>种报告：<span class="number">1.</span>目的不可达——当路由器和主机不能交付数据报时就向源点发送终点不可达报文;<span class="number">2.</span>源点抑制——当路由器和主机由于拥塞而丢弃数据报时，就向源点发送源点抑制报文，是源点知道应当把数据报的发送速率放慢;<span class="number">3.</span>时间超时——当路由器收到生存时间为<span class="number">0</span>的数据报时，除了丢弃该数据报外，还要向源点发送时间超时报文。当终点在预先规定的时间内不能收到一个数据报的全部数据报片时，就把已收到的数据包片都丢弃，并向源点发送时间超时报文;<span class="number">4.</span>参数问题——当路由器或目的主机收到的数据报的首部中有的字段值不正确时，就丢弃该数据报，并向源点发送参数问题报文;<span class="number">5.</span>路由重定向——路由器把改变路由发送给主机，让主机知道下次应将数据报发送给另外的路由器(可通过更好的路由)。很明显选C。</div></pre></td></tr></table></figure>
<p><a href="http://m.kaoyanbashi.com/zhuanyeke/jsj/5374.html" target="_blank" rel="external">考研题</a></p>
<h2 id="答案暂存"><a href="#答案暂存" class="headerlink" title="答案暂存"></a>答案暂存</h2><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span><span class="number">-5</span> B A A A C</div><div class="line"><span class="number">6</span><span class="number">-10</span> C D C C B</div><div class="line"><span class="number">11</span><span class="number">-15</span> D B A A B</div><div class="line"><span class="number">16</span><span class="number">-20</span> D A C D C </div><div class="line"></div><div class="line"><span class="number">36</span>页开始</div><div class="line"></div><div class="line">一,填空题</div><div class="line"><span class="number">1.</span> 自治系统内路由, 自治系统外路由. 自适应性, 鲁棒性, </div><div class="line"><span class="number">2.</span> 报文, 建立.</div><div class="line"><span class="number">3.</span> 语法, 语义, 时序</div><div class="line"><span class="number">4.</span> 物理层, 链路层, 网络层</div><div class="line"><span class="number">5.</span> 总线, 交换机, 网桥, 路由器</div><div class="line">二, 选择题</div><div class="line"><span class="number">1</span><span class="number">-5</span> A D B B C</div><div class="line"><span class="number">6</span><span class="number">-10</span> C A B</div><div class="line">三, 简答题</div><div class="line"><span class="number">1.</span> <span class="number">1</span>, <span class="number">0</span>-L, L, 传输失败</div><div class="line"><span class="number">2.</span> <span class="number">5</span>微秒, <span class="number">10</span>微秒</div><div class="line">四, 计算题</div><div class="line"><span class="number">1.</span> <span class="number">2400</span> * <span class="number">30</span> = <span class="number">7.2</span> * <span class="number">10</span>^<span class="number">4</span>, 每个汉字<span class="number">16</span>bit, <span class="number">4.5</span>*<span class="number">10</span>^<span class="number">3</span></div><div class="line"><span class="number">2.</span> <span class="number">194.47</span><span class="number">.21</span><span class="number">.136</span>  C类 <span class="number">254</span>台</div></pre></td></tr></table></figure>
<hr>
<h1 id="计算机网络5E"><a href="#计算机网络5E" class="headerlink" title="计算机网络5E"></a>计算机网络5E</h1><h2 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h2><ul>
<li><p><strong>IP</strong> (Internet Protocol) 因特网协议</p>
</li>
<li><p><strong>ICMP</strong> (Internet Control Message Protocol) 因特网控制报文协议</p>
</li>
<li><p><strong>TCP</strong> (Transport Control Protocol) 传输控制协议</p>
</li>
<li><p><strong>UDP</strong> (User Datagram Protocol) 用户数据报协议</p>
</li>
<li><p><strong>Internet</strong> 因特网</p>
</li>
<li><p><strong>internet</strong> 互联网</p>
</li>
<li><p><strong>NAP</strong> (Network Access Point) 网络接入点</p>
</li>
<li><p><strong>DSL</strong> (Digital Subscriber Line) 数字用户线</p>
</li>
<li><p><strong>SMTP</strong> (Simple Mail Transfer Protocol) 简单邮件传输协议</p>
</li>
<li><p><strong>POP3</strong> (Post Office Protocol) 邮局协议版本3</p>
</li>
<li><p><strong>HTTP</strong> (HyperText Transfer Protocol) 超文本传输协议</p>
</li>
<li><p><strong>URL</strong> (Uniform Resource Locator) 统一资源定位符</p>
</li>
<li><p><strong>CDN</strong> (Content Dilivery Network) 内容分发网络</p>
</li>
<li><p><strong>P2P</strong> (Peer-to-Peer) 对等网络</p>
</li>
</ul>
<hr>
<h2 id="报文格式"><a href="#报文格式" class="headerlink" title="报文格式"></a>报文格式</h2><p><strong>TCP</strong><br>// 单位bit<br>source port(16) dest port(16)<br>sequence number(32)<br>ack number(32)<br>headlen(4) reserved(3) Nonce(1) CWR ECN-Echo Urgent ACK PUSH RST SYN FIN (16) Receive-window-size(16)<br>checksum(16) urgent-pointer(16)<br>Options(variable length)</p>
<p>// seq num和ack num通过bytes of data来计算<br>// 标识位中SYN值为2, ACK值为16, FIN值为1; <code>因此SYN为02H, SYN,ACK为12H, ACK为10H, 可以通过这个来判断三次握手是否完成</code><br>// <code>常用</code> seq-num, ack-num, SYN, ACK</p>
<p><strong>IP</strong><br>// 单位bit<br>版本号(4) 首部长度(4) 服务类型(TOS)(8) 总长度(16)<br>标识ID(16) 标识位(3) 片偏移(15)<br>生存时间TTL(8) 协议(8) 首部校验和(16)<br>源IP地址(32)<br>目的IP地址(32)<br>可变: 选项字段 填充<br>数据<br>// 最大IP分组总长度65535B, 最小IP分组首部20B, IP分组可以封装的最大数据65535-20=65515B<br>// 分片不改变标识(ID)<br>// 标识位占3位, (保留)(DF)(MF)<br>// 片偏移量占13位, 以8字节为单位<br>// 协议, 06为TCP, 17为UDP<br>// 首部校验和计算时该字段全置0, 采用反码算数运算求和, 和的反码作为首部校验和字段, 逐跳计算, 逐跳校验<br>// <code>常用</code>, 总长度, TTL, 上层协议, 源和目的IP地址</p>
<p><strong>ICMP</strong><br>Type(1) Code(1) Checksum(2)<br>(这4 个字节取决于ICMP 报文的类型)<br>(ICMP 的数据部分, (长度取决于类型))</p>
<p><strong>Ethernet frame</strong><br>// 单位Byte<br>preamble(8) des-address(6) source-address(6) type(2) data(payload)(46-1500) CRC(4)</p>
<p><strong>PPP Data Frame</strong><br>flag(1) address(1) control(1) protocol(1 or 2) info(variable) check(2 or 4) flag(1)</p>
<p>flag: delimiter<br>Address: does nothing<br>Control: does nothing, in the future possible multiple control fields<br>Protocol: upper layer protocol<br>info: upper layer data being carried<br>check: cyclic redundancy check for error detection<br>地址和控制字段可以经过协商省略<br>协议和校验字段可以经过协商决定长度</p>
<p><strong>ARP</strong><br>Hardware type: Ethernet<br>protocol type: IPv4<br>Hardware size: 6<br>Protocol size: 4<br>Opcode: request<br>Sender MAC address: d4:ee:07:0e:b7:ec<br>Sender IP address: 192.168.10.122<br>Target MAC address: 00:00:00:00:00:00<br>Target IP address: 192.168.10.10</p>
<hr>
<h2 id="OSI参考模型"><a href="#OSI参考模型" class="headerlink" title="OSI参考模型"></a>OSI参考模型</h2><ul>
<li><p><strong>物理层(physical layer)</strong> 关注在一条通信信道上传输原始比特。</p>
</li>
<li><p><strong>数据链路层(data link layer)</strong> 的主要任务是将一个原始的传输设施转变成一条没有漏检传输错误的线路。将真实的错误掩盖，使网络层看不到。为此，发送方将输入的数据拆分成<strong>数据帧(data frame)</strong>，则接受方必须确认正确收到每一帧，即给发送方返回一个<strong>确认帧(acknowledgement frame)</strong>。</p>
</li>
<li><p><strong>网络层(network layer)</strong> 的主要功能是控制子网的运行。关键问题是将数据包从源端路由到接受方。处理拥塞也是网络层的责任，一般还要和高层协议结合起来处理拥塞才有效。</p>
</li>
<li><p><strong>传输层(transport layer)</strong> 的基本功能是接受来自上一层的数据，在必要的时候把这些数据分隔成较小的单元，然后把这些数据单元传递给网络层，并且确保这些数据单元正确地到达另一端。</p>
</li>
<li><p><strong>会话层(session layer)</strong> 允许不同机器上的用户建立会话。会话通常提供各种服务，包括<strong>对话控制(dialog control)</strong>(记录该由谁来传递数据)、<strong>令牌管理(token management)</strong>(禁止双方同时执行同一个关键操作)，以及<strong>同步功能(synchronization)</strong>(在一个长传输过程中设置一些断点，以便在系统崩溃之后还能回复到崩溃前的状态继续运行)。</p>
</li>
<li><p><strong>表示层(presentation layer)</strong> 表示层以下的各层关注如何传递数据位，而表示层关注的是所传递信息的语法和语义。不同的计算机可能有不同的内部数据表示法，为了让这些计算机能够进行通信，它们所交换的数据结构必须以一种抽象的方式来定义，同时还应定义一种“线上”使用的标准编码方法。表示层管理这些抽象的数据结构，并允许定义和交换更高层的数据结构（比如银行账户记录）。</p>
</li>
<li><p><strong>应用层(application layer)</strong> 包含了用户通常需要的各种各样的协议。一个得到广泛使用的应用协议是<strong>超文本传输协议(HTTP, HyperText Transfer Protocol)</strong>，它是<strong>万维网</strong>的基础。其他一些应用协议可用于文件传输、电子邮件以及网络新闻等。</p>
</li>
</ul>
<hr>
<h2 id="TCP-IP-参考模型"><a href="#TCP-IP-参考模型" class="headerlink" title="TCP/IP 参考模型"></a>TCP/IP 参考模型</h2><h3 id="设计目标"><a href="#设计目标" class="headerlink" title="设计目标"></a>设计目标</h3><ul>
<li>以无缝的方式将多个网络链接起来。</li>
<li>即使在损失子网硬件的情况下网络还能够继续工作，原有的会话不能被打断。</li>
</ul>
<h3 id="模型结构"><a href="#模型结构" class="headerlink" title="模型结构"></a>模型结构</h3><ul>
<li><p><strong>链路层(link layer)</strong> 该层描述了链路必须王城什么功能才能满足无连接的互连网络层的需求，比如串行线和经典以太网链路。在分层协议的上下文中，链路层并不是通常意义上的一层。它是一个接口（位于网络层和数据链路层之间）。</p>
</li>
<li><p><strong>互联网层(internet layer)</strong> 是将整个网络体系结构贯穿在一起的关键层。它大致对应OSI 的网络层。互联网层的任务是将IP 分组投递到它们该去的地方。数据包的路由是这里最主要的问题，同时该层还要考虑拥塞控制问题。</p>
</li>
<li><p><strong>传输层(transport layer)</strong> 的设计目标是允许源主机和目标主机上的对等实体进行对话，犹如OSI 的传输层一样。这里定义了两个端到端的协议TCP 和UDP。</p>
</li>
<li><p><strong>应用层(application layer)</strong> 包含了所有的高层协议。如虚拟终端协议（TELNET）、文件传输协议（FTP）、电子邮件协议（SMTP）、DNS（Domain Name System）、HTTP以及用于传送实时媒体的RTP 等。</p>
</li>
</ul>
<h3 id="TCP-IP-模型及协议"><a href="#TCP-IP-模型及协议" class="headerlink" title="TCP/IP 模型及协议"></a>TCP/IP 模型及协议</h3><ul>
<li><p><strong>应用层</strong>  HTTP  SMTP  RTP  DNS</p>
</li>
<li><p><strong>传输层</strong>  TCP  UDP</p>
</li>
<li><p><strong>互联网层</strong> IP ICMP</p>
</li>
<li><p><strong>链路层</strong>  DSL  SONET  802.11  Ethernet</p>
</li>
</ul>
<hr>
<h2 id="套接字编程实例-Internet-文件服务器"><a href="#套接字编程实例-Internet-文件服务器" class="headerlink" title="套接字编程实例: Internet 文件服务器"></a>套接字编程实例: Internet 文件服务器</h2><blockquote>
<p>server.c</p>
</blockquote>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/fcntl.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netinet/in.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">void</span> fatal (<span class="keyword">char</span> *<span class="keyword">string</span>) &#123;</div><div class="line">    printf(<span class="string">"%s\n"</span>, <span class="keyword">string</span>);</div><div class="line">    exit(<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SERVER_PORT 12345</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> BUF_SIZE 4096</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> QUEUE_SIZE 10</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> main (<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[]) &#123;</div><div class="line">    <span class="keyword">int</span> s, b, l, fd, sa, bytes, on = <span class="number">1</span>;</div><div class="line">    <span class="keyword">char</span> buf[BUF_SIZE];</div><div class="line">    <span class="keyword">struct</span> sockaddr_in channel;</div><div class="line"></div><div class="line">    memset(&amp;channel, <span class="number">0</span>, <span class="keyword">sizeof</span>(channel));</div><div class="line">    channel.sin_family = AF_INET;</div><div class="line">    channel.sin_addr.s_addr = htonl(INADDR_ANY);</div><div class="line">    channel.sin_port = htons(SERVER_PORT);</div><div class="line"></div><div class="line">    s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);</div><div class="line">    <span class="built_in">if</span> (s &lt; <span class="number">0</span>)  fatal(<span class="string">"socket failed"</span>);</div><div class="line">    setsockopt(s, SOL_SOCKET, SO_REUSEADDR, (<span class="keyword">char</span> *) &amp;on, <span class="keyword">sizeof</span>(on));</div><div class="line">    b = bind(s, (<span class="keyword">struct</span> sockaddr *) &amp;channel, <span class="keyword">sizeof</span>(channel));</div><div class="line">    <span class="built_in">if</span> (b &lt; <span class="number">0</span>) fatal(<span class="string">"bind failed"</span>);</div><div class="line"></div><div class="line">    l = <span class="built_in">listen</span>(s, QUEUE_SIZE);</div><div class="line">    <span class="built_in">if</span> (l &lt; <span class="number">0</span>) fatal(<span class="string">"listen failed"</span>);</div><div class="line"></div><div class="line">    <span class="built_in">while</span> (<span class="number">1</span>) &#123;</div><div class="line">        sa = accept(s, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        <span class="built_in">if</span> (sa &lt; <span class="number">0</span>) fatal(<span class="string">"accept failed"</span>);</div><div class="line">        <span class="built_in">read</span>(sa, buf, BUF_SIZE);</div><div class="line"></div><div class="line">        fd = <span class="built_in">open</span>(buf, O_RDONLY);</div><div class="line">        <span class="built_in">if</span> (fd &lt; <span class="number">0</span>) &#123;</div><div class="line">            fatal(<span class="string">"open failed"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">while</span> (<span class="number">1</span>) &#123;</div><div class="line">            bytes = <span class="built_in">read</span>(fd, buf, BUF_SIZE);</div><div class="line">            <span class="built_in">if</span> (bytes &lt;= <span class="number">0</span>) <span class="built_in">break</span>;</div><div class="line">            <span class="built_in">write</span>(sa, buf, bytes);</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">close</span>(fd);</div><div class="line">        <span class="built_in">close</span>(sa);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>client.c</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netinet/in.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">fatal</span> <span class="params">(<span class="keyword">char</span> *<span class="built_in">string</span>)</span> </span>&#123;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, <span class="built_in">string</span>);</div><div class="line">    <span class="built_in">exit</span>(<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SERVER_PORT 12345</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> BUF_SIZE  4096</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> c, s, bytes;</div><div class="line">    <span class="keyword">char</span> buf[BUF_SIZE];</div><div class="line">    <span class="keyword">struct</span> hostent *h;</div><div class="line">    <span class="keyword">struct</span> sockaddr_in channel;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (argc != <span class="number">3</span>) fatal(<span class="string">"Usage: client server-name filename"</span>);</div><div class="line">    h = gethostbyname(argv[<span class="number">1</span>]);</div><div class="line">    <span class="keyword">if</span> (!h) fatal(<span class="string">"gethostbyname failed"</span>);</div><div class="line">    s = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);</div><div class="line">    <span class="keyword">if</span> (s &lt; <span class="number">0</span>) fatal(<span class="string">"socket"</span>);</div><div class="line">    <span class="built_in">memset</span>(&amp;channel, <span class="number">0</span>, <span class="keyword">sizeof</span>(channel));</div><div class="line">    channel.sin_family = AF_INET;</div><div class="line">    <span class="built_in">memcpy</span>(&amp;channel.sin_addr.s_addr, h-&gt;h_addr, h-&gt;h_length);</div><div class="line">    channel.sin_port = htons(SERVER_PORT);</div><div class="line"></div><div class="line">    c = connect(s, (<span class="keyword">struct</span> sockaddr *) &amp;channel, <span class="keyword">sizeof</span>(channel));</div><div class="line">    <span class="keyword">if</span> (c &lt; <span class="number">0</span>) fatal(<span class="string">"connect failed"</span>);</div><div class="line"></div><div class="line">    write(s, argv[<span class="number">2</span>], <span class="built_in">strlen</span>(argv[<span class="number">2</span>]) + <span class="number">1</span>);</div><div class="line"></div><div class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</div><div class="line">        bytes = read(s, buf, BUF_SIZE);</div><div class="line">        <span class="keyword">if</span> (bytes &lt;= <span class="number">0</span>) <span class="built_in">exit</span>(<span class="number">0</span>);</div><div class="line">        write(<span class="number">1</span>, buf, bytes);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="路由算法"><a href="#路由算法" class="headerlink" title="路由算法"></a>路由算法</h2><p><strong>最短路径算法</strong></p>
<p><strong>泛洪算法</strong><br>对多数情况是不适用的, 但是还有某些重要用途.<br>如广播和无线网络.</p>
<p><strong>距离矢量路由算法</strong>(Bellman-Ford算法)<br>无穷计算问题</p>
<p><strong>链路状态路由算法</strong>(Dijkstra算法)<br>被广泛应用与实际网络中</p>
<p><strong>层次路由</strong></p>
<p><strong>广播路由</strong><br>逆向路径转发</p>
<p><strong>组播路由</strong></p>
<hr>
<h1 id="计算机网络课程"><a href="#计算机网络课程" class="headerlink" title="计算机网络课程"></a>计算机网络课程</h1><h2 id="第二周-1-4计算机网络性能"><a href="#第二周-1-4计算机网络性能" class="headerlink" title="第二周-1.4计算机网络性能"></a>第二周-1.4计算机网络性能</h2><p><strong>速率</strong>即数据率(data rate) 或称数据传输率或比特率(bit rate)<br>单位 b/s(或bps), kb/s, Mb/s, Gb/s<br>k = 10^3, M = 10^ 6, G = 10^9<br>速率往往是指<strong>额定速率</strong>或<strong>标称速率</strong></p>
<p><strong>带宽</strong>(bandwidth) 是指信号具有的频带宽度，即最高频率与最低频率之差，单位是赫兹(Hz)<br>网络中的<strong>带宽</strong>是数字型号所能传送的<strong>最高数据率</strong>, 单位 b/s(bps)<br>常用的带宽单位:<br>kb/s(10^3 b/s), Mb/s, Gb/s, Tb/s</p>
<p>Q: 分组交换为什么会发生丢包和时延?<br>A: 分组在路由器缓存中排队</p>
<h3 id="四种分组延迟"><a href="#四种分组延迟" class="headerlink" title="四种分组延迟"></a>四种分组延迟</h3><ul>
<li><code>结点处理延迟</code>(nodal processing delay)</li>
<li><code>排队延迟</code>(queueing delay)<br>R: 链路带宽(bps)<br>L: 分组长度(bits)<br>a: 平均分组到达速率<br>流量强度: La / R (接近1: 平均排队延迟大, 约等于0: 平均排队延迟很小, 大于1: 超出服务能力,平均排队延迟无限大)</li>
<li><code>传输延迟</code>(transmission delay)<br>L: 分组长度(bits)<br>R: 链路带宽(bps)<br>d = L / R</li>
<li><code>传播延迟</code>(propagation delay)<br>d: 物理链路长度<br>s: 信号传播速度(~2 * 10^8 m/sec)<br>dprop = d / s</li>
</ul>
<p><strong>时延带宽积</strong> = 传播时延 * 带宽 = d * R (bits)<br>链路的时延带宽积又称为<code>以比特为单位的链路长度</code></p>
<p><strong>分组丢失(丢包)</strong> <code>丢包率</code> = 丢包数 / 已发分组总数</p>
<ul>
<li>队列缓存容量有限</li>
<li>分组到达已满队列将被丢弃</li>
<li>丢弃分组可能由前序节点或源重发(也可能不重发)</li>
</ul>
<p><strong>吞吐量/率(Throughput)</strong> : 表示在发送端与接受端之间传送数据速率(b/s)</p>
<ul>
<li>即时吞吐量: 给定时刻的速率</li>
<li>平均吞吐量: 一段时间的平均速率</li>
</ul>
<h2 id="第5周-传输层-上"><a href="#第5周-传输层-上" class="headerlink" title="第5周 传输层(上)"></a>第5周 传输层(上)</h2><p><strong>接收端进行多路分用</strong><br>传输层依据头部信息将收到的Segment 交给正确的Socket ,即不同的进程.</p>
<p><strong>发送端进行多路复用</strong><br>从多个Socket 接收数据,为每个数据封装上头部信息,生成Segment ,交给网络层.</p>
<h3 id="UDP-校验和-checksum"><a href="#UDP-校验和-checksum" class="headerlink" title="UDP 校验和(checksum)"></a>UDP 校验和(checksum)</h3><p><a href="http://m.blog.csdn.net/article/details?id=48268927" target="_blank" rel="external">csdn-二进制反码求和校验酸反</a></p>
<p><strong>发送方</strong><br>将段的内容视为16-bit 整数<br>计算所有整数的和,进位加在和的后面,将得到的值按位取反,得到校验和<br>发送方将校验和放入校验和字段</p>
<p><strong>接收方</strong><br>计算所收到段的校验和<br>将其与校验和字段进行对比<br>不相等: 检测出错误<br>相等: 没有检测出错误(但可能有错误)</p>
<p><strong>栗子</strong><br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">两个整数</div><div class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span></div><div class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span></div><div class="line"></div><div class="line">求和得到</div><div class="line"><span class="number">1</span>(进位) <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span></div><div class="line"></div><div class="line">将进位的<span class="number">1</span> 加到末位得到</div><div class="line"><span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> </div><div class="line"></div><div class="line">按位取反得到checksum</div><div class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span></div></pre></td></tr></table></figure></p>
<p><strong>可靠数据传输</strong><br>不错\不丢\不乱</p>
<h2 id="第6周-传输层-下"><a href="#第6周-传输层-下" class="headerlink" title="第6周 传输层(下)"></a>第6周 传输层(下)</h2><p><a href="https://blog.json.tw/introduction-to-computer-network-gbn-sr-tcp-compare" target="_blank" rel="external">GBN, SR, TCP 重传机制的比较</a></p>
<p>TCP - Tahoe : </p>
<pre><code>1. slow-start, 每收到一个ACK, 拥塞窗口cwnd值加一, 因此每过一个RTT, cwnd翻倍
2. 当cwnd超过慢启动阙值(slow start threshold)ssthresh时, cwnd停止slow-start, 开始线性增长.
3. 当发生超时或者快速重传(收到三次重复确认)时, ssthresh = cwnd / 2, cwnd = 1; 重新开始slow-start 过程
</code></pre><p>TCP - Reno</p>
<pre><code>1. slow-start
2. 当cwnd超过ssthresh时, cwnd停止slow-start, 开始线性增长
3. 当发生快速重传时, 进入快速恢复(fast recovery), ssthresh = cwnd / 2; cwnd = ssthresh; 
4. 当发生超时, ssthresh = cwnd / 2; cwnd = 1; 重新开始slow-start 过程
</code></pre><h2 id="第7周-网络层-上"><a href="#第7周-网络层-上" class="headerlink" title="第7周 网络层(上)"></a>第7周 网络层(上)</h2><p><strong>IP分组格式</strong></p>
<p>标志位 占3位, [保留, DF, MF]<br>DF(Don’t Fragment) {1: 禁止分片, 0: 允许分片}<br>MF(More Fragment) {1: 非最后一片, 0: 最后一片(或未分片)}</p>
<p>片偏移 字段占13位: 一个IP分组分片封装原IP 分组数据的相对偏移量<br>片偏移字段以<code>8 字节为单位</code></p>
<p>假设原IP 分组总长度L, 待转发链路的MTU(最大传输单元)为M<br>若L&gt;M, 且DF = 0, 则可以/需要分片<br>分片时每个分片的标识复制原IP 分组的标识<br>通常分片时, 除了最后一个分片, 其他分片均为MTU 允许的最大分片<br>一个最大分片可封装的数据应该是8 的倍数, 因此, 一个最大分片可以封装的数据为<br><code>d = [(M - 20) / 8] * 8    // 向下取整</code><br>需要的总片数为<br><code>n = [(L - 20) / d]   // 向上取整</code><br>每片的片偏移量字段的取值为<br><code>Fi = d / 8 * (i - 1) , 1 &lt;= i &lt;= n</code><br>每片总长度字段为<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Li = &#123;</div><div class="line">    d + <span class="number">20</span> , <span class="number">1</span> &lt;= <span class="selector-tag">i</span> &lt; n</div><div class="line">    L - (n - <span class="number">1</span>)d , <span class="selector-tag">i</span> = n</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>特殊IP地址</strong> (ipv4)</p>
<table>
<thead>
<tr>
<th>NetID</th>
<th>HostID</th>
<th>作为IP 分组源地址</th>
<th>作为IP 分组目的地址</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>全0</td>
<td>全0</td>
<td>可以</td>
<td>不可以</td>
<td>在本网范围内表示本机, 在路由表中用于表示默认路由(相当于表示整个Internet网络)</td>
</tr>
<tr>
<td>全0</td>
<td>特定值</td>
<td>不可以</td>
<td>可以</td>
<td>表示本网内某个特定主机</td>
</tr>
<tr>
<td>全1</td>
<td>全1</td>
<td>不可以</td>
<td>可以</td>
<td>本网广播地址(路由器不转发)</td>
</tr>
<tr>
<td>特定值</td>
<td>全0</td>
<td>不可以</td>
<td>不可以</td>
<td>网络地址, 表示一个网络</td>
</tr>
<tr>
<td>特定值</td>
<td>全1</td>
<td>不可以</td>
<td>可以</td>
<td>直接广播地址, 对特定网络上所有主机进行广播</td>
</tr>
<tr>
<td>127</td>
<td>非全0 或非全1 的任何数</td>
<td>可以</td>
<td>可以</td>
<td>用于本地软件环回测试, 称为环回测试</td>
</tr>
</tbody>
</table>
<p><strong>私有IP地址</strong> (ipv4)</p>
<table>
<thead>
<tr>
<th>Class</th>
<th>NetIDs</th>
<th>Blocks</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>10</td>
<td>1</td>
</tr>
<tr>
<td>B</td>
<td>172.16 to 172.31</td>
<td>16</td>
</tr>
<tr>
<td>C</td>
<td>192.168.0 to 192.168.255</td>
<td>256</td>
</tr>
</tbody>
</table>
<p><strong>子网掩码的应用</strong></p>
<p>将IP分组的目的IP地址与子网掩码按位与运算, 提取子网地址<br>例如:目的地址: 172.32.1.112, 子网掩码: 255.255.254.0<br>172.32.1.112 =   10101100 00100000 00000001 01110000<br>255.255.254.0 =  11111111 11111111 11111110 00000000<br>与运算 = 10101100 00100000 00000000 00000000 = 172.32.0.0</p>
<p>所以:<br>子网地址: 172.32.0.0 (子网掩码: 255.255.254.0)<br>地址范围: 172.32.0.0 ~ 172.32.1.255<br>可分配地址范围: 172.32.0.1 ~ 172.32.1.254<br>广播地址: 172.32.1.255</p>
<h2 id="第8周-网络层-下"><a href="#第8周-网络层-下" class="headerlink" title="第8周 网络层(下)"></a>第8周 网络层(下)</h2><p>主机如何获得IP地址</p>
<ul>
<li>硬编码 - 静态配置</li>
<li>动态主机配置协议 DHCP - 从服务器动态获取</li>
</ul>
<p>网络地址转换<strong>NAT</strong><br>内部网络设备对外界网络不可见</p>
<p>NAT穿透问题解决方案</p>
<ul>
<li>静态配置NAT, 将特定端口的连接请求转发给服务器</li>
<li>利用UPnP(Universal Plug and Play)互联网网关设备协议(IGD- Internet Gateway Device), 自动配置: 学习到NAT公共IP地址</li>
<li>中继(如 skype)</li>
</ul>
<p>互联网控制报文协议(<strong>ICMP</strong>)</p>
<ul>
<li>差错(或异常)报告</li>
<li>网络探寻</li>
</ul>
<p><strong>距离向量路由算法</strong></p>
<p><strong>链路状态路由算法</strong></p>
<p><strong>RIP协议(Routing Information Protocol)</strong>(AS内)(使用距离向量路由算法)(使用UDP)</p>
<p><strong>OSPF协议(Open Shortest Path First)</strong>(AS内)(使用链路状态路由算法)</p>
<p><strong>BGP协议(Border Gateway Protocol)</strong>(AS间)(使用TCP)<br>AS间: eBGP<br>AS内: iBGP<br>前缀: 到达某些AS需要经过的路径<br>前缀的属性: AS-PATH, NEXT-HOP<br>BGP路由选择: 输入策略(import policy)(如: 政策问题禁止将流量路由到某个AS)<br>为什么AS间和AS内的路由协议不同?(<code>策略</code>policy, <code>规模</code>scale, <code>性能</code>performance)</p>
<h2 id="链路层"><a href="#链路层" class="headerlink" title="链路层"></a>链路层</h2><h3 id="链路层服务"><a href="#链路层服务" class="headerlink" title="链路层服务:"></a>链路层服务:</h3><ul>
<li><code>组侦framing</code>(封装数据报构成数据帧, 加首部和尾部)( 帧同步); </li>
<li><code>链路接入link access</code>(如果是共享介质, 需要解决信道接入channel access)(帧首部的MAC地址, 用于表示帧的源和目的)</li>
<li><code>相邻结点间可靠交付</code>(在低误码率的有线链路上很少采用, 如光纤,某些双绞线等)(无线链路: 误码率高,需要可靠交付)</li>
<li><code>流量控制</code>(协调相邻的发送节点和接收)</li>
<li><code>差错检测</code>(信号衰减和噪声会引起差错)</li>
<li><code>差错纠正</code></li>
<li><code>全双工和半双工通信控制</code></li>
</ul>
<h3 id="差错编码"><a href="#差错编码" class="headerlink" title="差错编码"></a>差错编码</h3><p>原理: D -&gt; DR R为差错检测与纠正比特(冗余比特)<br>差错编码可分为<em>检错码</em>和<em>纠错码</em><br><code>检错码</code>的检错能力: 对于检错码, 如果编码集的<a href="https://zh.wikipedia.org/wiki/%E6%B1%89%E6%98%8E%E8%B7%9D%E7%A6%BB" target="_blank" rel="external">汉明距离</a><code>ds=r+1</code>, 则该差错编码可以检测<code>r</code> 位的差错.<br>例如: {0000, 0101, 1010, 1111}的汉明距离为2, 可以100%检测1比特的差错(1比特的差错一定会变成一个无效编码)<br><code>纠错码</code>的纠错能力: 对于纠错码, 如果编码及的汉明距离<code>ds=2r+1</code>, 则该差错编码可以纠正<code>r</code>位的差错.<br>例如: {000000, 010101, 101010, 111111}的汉明距离为3, 可以纠正1比特的差错(如100010纠正为101010, (纠正成离他最近的正确编码)).</p>
<h4 id="奇偶校验码"><a href="#奇偶校验码" class="headerlink" title="奇偶校验码"></a>奇偶校验码</h4><p><a href="https://zh.wikipedia.org/wiki/%E5%A5%87%E5%81%B6%E6%A0%A1%E9%AA%8C%E4%BD%8D" target="_blank" rel="external">wikipedia</a><br><code>1比特校验位</code> (检测奇数位差错(检错率50%))<br><code>二维奇偶校验</code>(检测奇数位差错, 部分偶数位差错)(纠正在同一行/列的奇数位差错)</p>
<h4 id="internet校验和-checksum"><a href="#internet校验和-checksum" class="headerlink" title="internet校验和(checksum)"></a>internet校验和(checksum)</h4><p>详见传输层-UDP校验和<br>一般放入(UDP, TCP, IP)的校验和字段</p>
<h4 id="循环冗余校验码-CRC"><a href="#循环冗余校验码-CRC" class="headerlink" title="循环冗余校验码(CRC)"></a>循环冗余校验码(CRC)</h4><p>广泛应用于数据链路层,检错能力强大<br><a href="http://fdcwqmst.blog.163.com/blog/static/16406145520109712150424/" target="_blank" rel="external">模2运算</a></p>
<p><code>D</code>: 数据比特<br><code>G</code>: <code>r+1</code>位的比特模式(生成比特模式)<br><code>R</code>: <code>r</code>位的CRC比特</p>
<p>发送方和接收方使用相同的<code>G</code>, 可以检测出所有长度小于r+1的差错<br><code>发送方</code>: 构造出的编码结果要能被G整除, 根据D和G计算出R, 将D和R拼接成<code>&lt; D,R&gt;</code>, 即编码结果<br><code>接收方</code>: 将<code>&lt; D,R&gt;</code> 除以G(模2), 余式为0则无错, 否则出错.</p>
<p><code>&lt; D, R&gt;</code>的构造方法&gt;</p>
<ol>
<li>将D左移r位, D * 2^r</li>
<li>D左移r位的结果除以G(模2), 得到结果whatever和余数R</li>
<li>将D左移r位的结果 减去余数(模2), 得到(D * 2^r - R), 也就是(D * r^r XOR R), 也就是D与R拼接得到&lt; D,R&gt;, 这个结果可以被G整除(被除数减掉余数的结果肯定能被除数除尽)</li>
</ol>
<p>举例:<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">被校验的数据M(x)=<span class="number">1000</span>，</div><div class="line">其选择生成多项式为G(x)=x^<span class="number">3</span>+x+<span class="number">1</span>,</div><div class="line">该数据的循环冗余校验和应为多少？</div><div class="line"></div><div class="line">G(x)=x^<span class="number">3</span>+x+<span class="number">1</span>对应的二进制数为<span class="number">1011</span>，</div><div class="line">且G(x)中含<span class="number">3</span>个项式，</div><div class="line">生成多项式为<span class="number">4</span>位二进制，</div><div class="line">由CRC规则应该取(<span class="number">4</span><span class="number">-1</span>)=<span class="number">3</span>位(校验和)，</div><div class="line">所以可以预加上<span class="number">3</span>位得到<span class="number">1000</span>B*<span class="number">2</span>^<span class="number">3</span>=<span class="number">1000</span> <span class="number">000</span>B;</div><div class="line"></div><div class="line"><span class="number">1000</span> <span class="number">000</span>B（被除数）对<span class="number">1011</span>（除数）做模<span class="number">2</span>除法，</div><div class="line">得到的余数便是<span class="number">101</span>B(即CRC校验和)，</div><div class="line">所以该数据的循环冗余校验后的数据应为<span class="number">1000</span> <span class="number">000</span>B+<span class="number">101</span>B=<span class="number">1000101</span>B。</div></pre></td></tr></table></figure></p>
<h3 id="Multiple-access-links-protocols"><a href="#Multiple-access-links-protocols" class="headerlink" title="Multiple access links , protocols"></a>Multiple access links , protocols</h3><p>two types of links</p>
<ul>
<li>point-to-point</li>
<li>broadcast(shared wire or medium)</li>
</ul>
<p>multiple access protocol</p>
<ul>
<li>distributed algorithm that determines how nodes share channel.</li>
</ul>
<p><strong>MAC protocols: taxonomy</strong></p>
<ul>
<li><p><strong>channel partitioning</strong><br>TDMA: time division multiple access<br>FDMA: frequency division multiple access</p>
</li>
<li><p><strong>random access</strong><br><strong>Slotted ALOHA</strong> (只能在某个时期开始时发, 如果两个节点冲突, 则下次两个节点都以概率p发送, 必须满足时钟同步, 节点必须能够检测到冲突, 效率0.37)<br><strong>Pure(unslotted) ALOHA</strong> (不分时期, 能直接发送, 效率比slotted Aloha更低, 0.18)<br><strong>CSMA</strong>(carrier sense multiple access)(listen before transmit, 也可能冲突)<br><strong>CSMA/CD</strong>(collision detection)(发送数据过程中检测冲突)(Ethernet CSMA/CD algorithm)<br>Lmin / R = 2 <em> S / V<br>800bit / 1Gbps = 2 </em> 80m / 200000Kmps</p>
</li>
<li><p><strong>taking turns</strong><br><strong>polling</strong> (master node invites slave nodes to transmit in turn)<br><strong>token passing</strong> (control token passed from one node to next sequentially)</p>
</li>
</ul>
<h3 id="Lan"><a href="#Lan" class="headerlink" title="Lan"></a>Lan</h3><p><strong>MAC address and ARP</strong></p>
<p>ARP表: LAN 中每个IP节点(主机, 路由器)维护一个表(存储某些LAN节点的IP/MAC地址映射关系)</p>
<p>A想要给<code>同一局域网</code>内的B发送数据包(B的MAC地址不在A的ARP表中)<br>则A<code>广播</code>ARP查询分组, 其中包含B的IP地址(广播的MAC地址=FF-FF-FF-FF-FF-FF)</p>
<h4 id="Ethernet"><a href="#Ethernet" class="headerlink" title="Ethernet"></a>Ethernet</h4><p><strong>bus(总线)</strong> (all nodes in same collision domain)</p>
<p><strong>star(星型)</strong> (each ‘spoke’ runs a Ethernet protocol (nodes do not collid with each other))</p>
<p>以太网: 无连接(没有握手), 不可靠(没有确认)</p>
<p><strong>Ethernet fram structure</strong>(见上 以太网帧结构)<br>preamble(8) des-add(6) sour-add(6) type(2) data(46-1500) CRC(4)<br>Lmin = 64B , data(min) = 64 - 6 - 6 - 2 - 4 = 46B</p>
<h4 id="switches-交换机"><a href="#switches-交换机" class="headerlink" title="switches(交换机)"></a>switches(交换机)</h4><p>存储, 转发以太网帧</p>
<p>识别帧中的MAC 地址, 选择性地转发</p>
<p>Ethernet protocol used on each incoming link, but no collisions; full duplex (each link is its own collision domain)</p>
<p><code>switch table</code> (each entry: MAC address of host, interface to reach host, time stamp)</p>
<p><code>switch: self-learning</code> </p>
<p>网络层路由器设备隔离广播域, 广播的范围为一个IP子网<br><code>注意区分冲突域 和广播域</code></p>
<p><code>交换机 vs 路由器</code><br>都有存储转发<br>路由器: 网络层, routing algorithms, IP addresses<br>交换机: 数据链路层 , learn forwarding table using flooding, learning, MAC addresses</p>
<p><code>summary comparison</code></p>
<table>
<thead>
<tr>
<th>-</th>
<th>hubs</th>
<th>switches</th>
<th>bridges</th>
<th>routers</th>
</tr>
</thead>
<tbody>
<tr>
<td>layer</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>traffic isolation</td>
<td>no</td>
<td>yes</td>
<td>yes</td>
<td>yes </td>
</tr>
<tr>
<td>storm isolation</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td>plug and play</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td>optimal routing</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td>cut through</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
</tr>
</tbody>
</table>
<h4 id="VLAN"><a href="#VLAN" class="headerlink" title="VLAN"></a>VLAN</h4><p>基于端口的VLAN<br><code>流量隔离</code> (come/from 端口1-8的帧只到达端口1-8)<br><code>动态成员</code> (端口可以动态分配给不同的成员)<br><code>在VLAN间转发</code>(通过路由, 就像在独立的交换机之间)(实践中, 厂商会将交换机和路由器集成在一起,因此不需要另外接路由器)</p>
<p><code>跨越多交换机的VLAN</code><br>多线缆连接(每个线缆连接一个VLAN)<br>中继端口(在跨越多个物理交换机定义的VLAN承载帧)(为多个VLAN转发802.1帧容易产生歧义(必须携带VLAN ID信息))(802.1q协议为经过中继端口转发的帧增加/去除 额外的首部域)</p>
<h3 id="PPP"><a href="#PPP" class="headerlink" title="PPP"></a>PPP</h3><p>one Sender and one Receiver, one link,<br>no Media Access Control,<br>no need for MAC address</p>
<p><strong>packet framing</strong><br><strong>bit transparency</strong><br><strong>error detection</strong><br><strong>connection liveness</strong><br><strong>network layer address negotiation</strong></p>
<p>no error correction/cecovery<br>no flow control<br>out of order delivery OK<br>no need to support multiple links</p>
<p><strong>Byte Stuffing</strong>字节填充<br>帧定界(标识帧的开始或者结束), 标识字节<code>&lt; 0 111 111 0&gt;</code><br>因此在发送数据时要进行字节填充, 扫描数据, 若发现<code>0 111 111 0</code>或<code>0 111 110 1</code>, 则在前面添加额外的字节<code>0 111 110 1</code></p>
<p>交换网络层数据之前, PPP数据链路两端需要:</p>
<ul>
<li>配置PPP链路</li>
<li>学习/配置网络层信息(如对于IP协议, 通过交换IPCP协议报文, 完成IP地址等相关信息的配置)</li>
</ul>
<h3 id="link-virtualization-MPLS"><a href="#link-virtualization-MPLS" class="headerlink" title="link virtualization: MPLS"></a>link virtualization: MPLS</h3><h2 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h2><p><strong>channel capacity</strong>(the maximum rate at which data can be transmitted over a given communication path(channel))</p>
<p>Data rate(in bits per second)<br>Bandwidth(in cycles per second of Hertz)</p>
<p>// 比特率和波特率的关系<br><strong>C = Blog2M</strong>(C bps, B baud rate, Bd, B = 2H, (H Hz))</p>
<p>// 比特率和带宽的关系<br><strong>C = 2Blog2M</strong> (C bps, B Hz)<br>C-channel capacity, B-bandwidth, M-the number of discrete signal<br>example: 带宽3KHz, 采用4个相位, 每个相位4种振幅的QAM调制技术, 则该通信链路的最大数据传输速率是: <strong>24 kbps</strong><br>2 <em> 4 </em> log2 16 = 24</p>
<p><strong>Shannon Capacity Formulation</strong><br><strong>C=Blog2 (1 + S / N)</strong><br>S/N - signal-to-noise ratio信噪比</p>
<p>S/N is often reported in descibels (<strong>dB</strong>)<br>(S/N)db = 10log10 (S / N)</p>
<p><code>Data Rate(Bit rate-R)</code>(Rate of data transmission in bits per second)<br><code>Modulation rate(Baud rate-B)</code>(Rate at width the signal level changes)<br><code>R = Blog2 M</code>(M-Number of states of code element)</p>
<p><code>Pulse Code Modulation(PCM)</code>(脉冲编码调制)</p>
<p><code>Spread Spectrum</code> (扩频)</p>
<p><code>异步/同步 传输</code>(异步: start bits, stop bits)(同步: 单独的时钟线, 或者将时钟信号嵌入到数据中)</p>
<p><code>Media</code></p>
<p><code>Interfacing</code></p>
<hr>
<h2 id="无线与移动网络"><a href="#无线与移动网络" class="headerlink" title="无线与移动网络"></a>无线与移动网络</h2><h3 id="wireless"><a href="#wireless" class="headerlink" title="wireless"></a>wireless</h3><p><code>wireless link</code>(无线链路)<br>(信号随距离衰减)(容易受干扰)()</p>
<p>信噪比低, 误码率高(SNR versus BER tradeoffs)</p>
<p>multiple access 可能遇到的问题<br><code>Hidden terminal problem</code>(障碍物导致的隐藏终端问题)<br><code>Signal attenuation</code>(信号衰减导致的问题)</p>
<p><code>CDMA</code>(码分多址)(每个用户分配不同的码片序列)</p>
<h4 id="802-11"><a href="#802-11" class="headerlink" title="802.11"></a>802.11</h4><p><strong>IEEE 802.11 Wireless LAN</strong>(WiFi)</p>
<ul>
<li>802.11b</li>
<li>802.11a</li>
<li>802.11g</li>
<li>802.11n (multiple antennae)(2.4-2.5 GHz range)(up to 600Mbs)</li>
</ul>
<blockquote>
<p>MIMO (多输入多输出)</p>
<p>OFDM (正交频分多路)</p>
</blockquote>
<p>base station = access point (ap)</p>
<p><code>BSS</code>(basic service set)(基站子系统)</p>
<p><code>SSID</code></p>
<p>host: must <em>associate</em> with an AP</p>
<p><strong>multiple access</strong>(可能产生的冲突问题)<br>CSMA - sense before transmitting<br>no collision dection(not CSMA/CD), use CSMA/CA(collision avoidance)(不能完全避免冲突, 能避免数据帧冲突)<br>发送端: 监听信道, 如果信道空闲, 且空闲了<strong>DIFS(分布式帧间间隙, 根据优先级有不同的时间间隙)</strong>时间, 则发送数据; 如果信道忙, 则启动随机的backoff time, 等信道空闲则启动倒计时, 倒计时结束后信道空闲则发送数据.<br>接收端: 如果接收到数据完成, 等待<strong>SIFS</strong>时间后返回ACK<br>避免冲突: 发送方先给BS发送一个<strong>RTS</strong>(request-to-send)包(使用CSMA), BS广播一个<strong>CTS</strong>作为RTS的回应; CTS被所有的节点监听到, 这样其他的节点就不会发送数据</p>
<p><code>AP不需要IP地址, 其为链路层设备</code></p>
<p>802.11 frame MTU 2312</p>
<h4 id="Cellular-Internet-access"><a href="#Cellular-Internet-access" class="headerlink" title="Cellular Internet access"></a>Cellular Internet access</h4><h3 id="mobility"><a href="#mobility" class="headerlink" title="mobility"></a>mobility</h3><p>mobile IP<br><code>home network</code> <code>home agent</code> <code>permanent address</code><br><code>visited network</code> <code>foreign agent</code> <code>care-of-address</code></p>
<p>GSM<br><code>home network</code> <code>home location register (HLR)</code> <code>visited network</code> <code>visitor location register(VLR)</code></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JS 超长数字的坑]]></title>
      <url>https://beim.github.io/2016/09/06/JS-%E8%B6%85%E9%95%BF%E6%95%B0%E5%AD%97%E7%9A%84%E5%9D%91/</url>
      <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> num1 = <span class="number">1234567890123456</span></div><div class="line"><span class="keyword">const</span> num2 = <span class="number">12345678901234567</span></div><div class="line"><span class="keyword">const</span> str1 = <span class="string">'1234567890123456'</span></div><div class="line"><span class="keyword">const</span> str2 = <span class="string">`12345678901234567`</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(num1 === str1) <span class="comment">// false</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;num1&#125;</span>`</span> === str1) <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(num2 === str2) <span class="comment">// false</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;num2&#125;</span>`</span> === str2) <span class="comment">// false</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2011-午夜巴黎]]></title>
      <url>https://beim.github.io/2016/08/25/2011-%E5%8D%88%E5%A4%9C%E5%B7%B4%E9%BB%8E/</url>
      <content type="html"><![CDATA[<p><img src="http://img21.mtime.cn/pi/2011/04/04/161411.40182295_1000X1000.jpg" alt="1"></p>
<a id="more"></a>
<p><img src="http://img21.mtime.cn/pi/2011/06/03/141830.39636076_1000X1000.jpg" alt="1"></p>
<p><img src="http://img21.mtime.cn/pi/2011/04/04/161416.77653536_1000X1000.jpg" alt="1"></p>
<p><img src="http://img21.mtime.cn/pi/2011/04/04/161416.35864935_1000X1000.jpg" alt="1"></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[React-Native Startup]]></title>
      <url>https://beim.github.io/2016/08/08/React-Native-Startup/</url>
      <content type="html"><![CDATA[<h2 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h2><h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><p>先<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="external">下载</a>JDK<br>解压到/usr/lib/jvm 下</p>
<p>修改环境变量<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ vi ~<span class="regexp">/.bashrc</span></div><div class="line"></div><div class="line"># 在末尾增加以下内容</div><div class="line">export JAVA_HOME=/usr<span class="regexp">/lib/jvm</span><span class="regexp">/jdk1.8.0_101</span></div><div class="line">export JRE_HOME=$&#123;JAVA_HOME&#125;/jre</div><div class="line">export CLASSPATH=.:$&#123;JAVA_HOME&#125;/<span class="class"><span class="keyword">lib</span>:$&#123;<span class="title">JRE_HOME</span>&#125;/<span class="title">lib</span></span></div><div class="line">export PATH=$&#123;JAVA_HOME&#125;/<span class="symbol">bin:</span>$PATH</div><div class="line"></div><div class="line"><span class="comment"># 使环境变量生效</span></div><div class="line">$ source ~<span class="regexp">/.bashrc</span></div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h3 id="Android-Studio-https-developer-android-com-studio-install-html"><a href="#Android-Studio-https-developer-android-com-studio-install-html" class="headerlink" title="Android Studio(https://developer.android.com/studio/install.html)"></a>Android Studio(<a href="https://developer.android.com/studio/install.html" target="_blank" rel="external">https://developer.android.com/studio/install.html</a>)</h3><p>先<a href="https://developer.android.com/studio/index.html" target="_blank" rel="external">下载</a>Android Studio<br>解压到/usr/local/src 下</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># 设置软链接</span></div><div class="line">$ sudo ln -s /usr/local/src/android-studio/bin/studio.sh /usr/local/bin/studio</div><div class="line"></div><div class="line"><span class="meta"># 64位的ubuntu需要安装以下库</span></div><div class="line">$ sudo apt-<span class="keyword">get</span> install lib32z1 lib32ncurses5 lib32bz2<span class="number">-1.0</span> lib32stdc++<span class="number">6</span></div><div class="line"></div><div class="line"><span class="meta"># 执行安装引导</span></div><div class="line">$ studio</div><div class="line"><span class="meta"># Sdk安装到了~/Android/Sdk</span></div><div class="line"></div><div class="line">$ vi ~/.bashrc</div><div class="line"><span class="meta"># 在文件末尾添加</span></div><div class="line"><span class="meta"># ANDROID_HOME环境变量</span></div><div class="line">export ANDROID_HOME=/home/beim/Android/Sdk</div><div class="line"><span class="meta"># Android SDK 的Tools 目录添加到PATH 变量中</span></div><div class="line">PATH=<span class="string">"~/Android/Sdk/tools:~/Android/Sdk/platform-tools:$&#123;PATH&#125;"</span></div><div class="line">export PATH</div><div class="line"></div><div class="line"><span class="meta"># 使环境变量生效</span></div><div class="line">source ~/.bashrc</div></pre></td></tr></table></figure>
<h3 id="SDK"><a href="#SDK" class="headerlink" title="SDK"></a>SDK</h3><p><code>$ studio</code> 进入Android Studio<br>在<code>SDK Platform</code> 窗口中，选择<code>Show Package Details</code>, 然后在<code>Android 6.0 (Marshmallow)</code>中勾选<code>Google APIs</code>、<code>Intel x86 Atom System Image</code>、<code>Intel x86 Atom_64 System Image</code>以及<code>Google APIs Intel x86 Atom_64 System Image</code>。<br>在<code>SDK Tools</code>窗口中，选择<code>Show Package Details</code>，然后在<code>Android SDK Build Tools</code>中勾选<code>Android SDK Build-Tools 23.0.1</code>。（必须是这个版本）<br>然后点击<code>apply</code>,等待下载和应用变更。</p>
<h3 id="adb"><a href="#adb" class="headerlink" title="adb"></a>adb</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 系统adb的版本要和android sdk platform-tools 的版本相同</span></div><div class="line">$ adb <span class="built_in">version</span> 检查版本</div><div class="line"></div><div class="line"><span class="comment"># 设置软链接</span></div><div class="line">$ sudo <span class="built_in">ln</span> -s ~/Android/Sdk/<span class="built_in">platform</span>-tools/adb /usr/<span class="built_in">local</span>/bin/adb</div></pre></td></tr></table></figure>
<h3 id="React-Native"><a href="#React-Native" class="headerlink" title="React Native"></a>React Native</h3><p><code>sudo npm install -g react-native-cli</code></p>
<h3 id="genymotion"><a href="#genymotion" class="headerlink" title="genymotion"></a>genymotion</h3><p>安卓模拟器（如果用真机可以不安装）<br><a href="https://www.genymotion.com/download/?utm_source=website&amp;utm_medium=slider&amp;utm_term=Get%20it%20now&amp;utm_campaign=Genymotion-2-7-2-release#" target="_blank" rel="external">下载</a><br>将下载下来的bin文件放置到用户目录下（/home/beim)</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># 更改权限</div><div class="line">$ chmod <span class="number">777</span> /home/beim/genymotion<span class="number">-2.7</span><span class="number">.2</span>-linux_x64.bin</div><div class="line"># 安装</div><div class="line">$ ./genymotion<span class="number">-2.7</span><span class="number">.2</span>-linux_x64.bin</div></pre></td></tr></table></figure>
<p>…<br>安装完成之后打开genymotion<br>选择<code>settings</code>-<code>ADB</code>-<code>Use custom Android SDK tools</code><br>填入之前安装Sdk的路径（/home/beim/Android/Sdk)</p>
<p>选择<code>Add</code><br>寻找合适（API23）的虚拟机下载并测试打开。</p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># 进入放置项目文件的目录</span></div><div class="line">$ react-native init AwesomeProject</div><div class="line"><span class="meta"># 耗费一定时间，需要科学上网。也可到github 上找别人打包好的文件</span></div><div class="line">$ cd AwesomeProject</div><div class="line">$ react-native start # 或者 npm start</div><div class="line"></div><div class="line"><span class="meta"># 确保真机或者虚拟机设备已经连接</span></div><div class="line">$ adb devices</div><div class="line"></div><div class="line"><span class="meta"># 另开一个终端</span></div><div class="line">$ react-native run-android</div><div class="line"></div><div class="line"><span class="meta"># 这时候可以看到真机/虚拟机打开了应用</span></div><div class="line"><span class="meta"># 如果出现红屏提示无法连接到服务器</span></div><div class="line"><span class="meta"># `按menu 键`或者 `摇一摇` 或者 `adb shell input keyevent 82` 打开开发者菜单</span></div><div class="line"><span class="meta"># 点击进入 ` Dev Settings`</span></div><div class="line"><span class="meta"># 点击`Debug server host for device`</span></div><div class="line"><span class="meta"># 如果是真机，输入你电脑的ip地址和端口号（如192.168.1.101:8081); 如果在虚拟机，输入`0.0.0.0:8081`</span></div><div class="line"><span class="meta"># 返回`开发者菜单`，选择`Reload JS`</span></div></pre></td></tr></table></figure>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="http://reactnative.cn/docs/0.31/getting-started.html#content" target="_blank" rel="external">React-Native中文网-搭建开发环境</a><br><a href="http://reactnative.cn/docs/0.31/running-on-device-android.html" target="_blank" rel="external">React-Native中文网-在设备上运行</a><br><a href="https://facebook.github.io/react-native/docs/getting-started.html#content" target="_blank" rel="external">React-Native官网</a><br><a href="http://stackoverflow.com/questions/38512025/react-native-run-android-mismatch-version-adb-server-version" target="_blank" rel="external">Stack Overflow adb server version (32) doesn’t match this client (36); killing …</a><br><a href="http://www.cnblogs.com/suxun/p/5220564.html" target="_blank" rel="external">史上最全Windows版本安装React Native环境配置</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ubuntu 启动初始化]]></title>
      <url>https://beim.github.io/2016/08/05/ubuntu-%E5%90%AF%E5%8A%A8%E5%88%9D%E5%A7%8B%E5%8C%96/</url>
      <content type="html"><![CDATA[<h2 id="首先看这几个目录："><a href="#首先看这几个目录：" class="headerlink" title="首先看这几个目录："></a>首先看这几个目录：</h2><figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># sysvinit 的文件</span></div><div class="line">/etc/init.d <span class="comment"># sysvinit 启动服务的脚本</span></div><div class="line">/etc/rc$&#123;runlevel&#125;.d <span class="comment"># 指向sysvinit 目录下脚本的软链接，系统通过区分不同目录来加载对应运行级别的程序。</span></div><div class="line"></div><div class="line"><span class="comment"># upstart 的文件</span></div><div class="line">/etc/init <span class="comment"># upstart 的启动配置文件。</span></div><div class="line"></div><div class="line"><span class="comment"># systemd 的文件</span></div><div class="line">/etc/systemd/system <span class="comment"># 指向/lib/systemd/system 的软链接，可以通过增删软链接来启用或者禁用启动服务。</span></div><div class="line">/<span class="class"><span class="keyword">lib</span>/<span class="title">systemd</span>/<span class="title">system</span> <span class="comment"># systemd 的启动配置文件。</span></span></div></pre></td></tr></table></figure>
<p>ubuntu 16采用的是systemd 初始化系统<br>ubuntu 14采用的是upstart 初始化系统<br>sysvinit 则是更早版本的启动服务<br><a id="more"></a></p>
<p>为了兼容性，systemd 和upstart 都会支持sysvinit</p>
<h2 id="一些工具"><a href="#一些工具" class="headerlink" title="一些工具"></a>一些工具</h2><p>sysvinit 启动的服务可以通过service 来控制</p>
<ul>
<li><code>$ service --status-all</code> 查看服务启动的状态，列出的服务和/etc/init.d 目录下的脚本是一一对应的。</li>
<li><code>$ service serviceName start/stop</code> 启用或者关闭服务。</li>
</ul>
<p>进入<code>/etc/rc2.d</code> 目录<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>cd /etc/rc2.d</div><div class="line"><span class="variable">$ </span>ll</div></pre></td></tr></table></figure></p>
<p>可以看到除了README 外，其他程序都是S || K + 数字 + 程序名的形式。S表示Start，也就是启动，K表示Kill（从其他运行级别切换过来需要关闭的程序）。后面的数字表示处理顺序，数字越小越早处理，数字相同时按照程序名的字母顺序启动。<br>可以通过修改S 或者K 来管理服务启动项。更建议使用工具来修改：<a href="http://wiki.ubuntu.org.cn/%E5%90%AF%E5%8A%A8#sysv-rc-conf" target="_blank" rel="external">sysv-rc-conf</a>(修改不同运行级别的启动项)，<a href="http://wiki.ubuntu.org.cn/%E5%90%AF%E5%8A%A8#rcconf" target="_blank" rel="external">rcconf</a>（修改当前运行级别的启动项）。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="http://www.ruanyifeng.com/blog/2013/08/linux_boot_process.html" target="_blank" rel="external">Linux 的启动流程_阮一峰</a>（初始化部分与ubuntu 不同，ubuntu 现在采用的是Upstart 启动服务）</li>
<li><a href="http://www.cnblogs.com/cassvin/archive/2011/12/25/ubuntu_init_analysis.html" target="_blank" rel="external">Ubuntu init启动流程分析</a>(解释了System V initialization 和 Upstart 两种方式)</li>
<li><a href="http://wiki.ubuntu.org.cn/%E5%90%AF%E5%8A%A8#rcconf" target="_blank" rel="external">ubuntuwiki启动</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/linux/1407_liuming_init2/" target="_blank" rel="external">浅析 Linux 初始化 init 系统，第 2 部分: UpStart</a></li>
<li><a href="http://blog.fens.me/linux-upstart/" target="_blank" rel="external">upstart把应用封装成系统服务</a></li>
<li><a href="http://wiki.ubuntu.org.cn/%E5%90%AF%E5%8A%A8#rcconf" target="_blank" rel="external">upstart_cookbook</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html" target="_blank" rel="external">Systemd 入门教程：命令篇</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html" target="_blank" rel="external">Systemd 入门教程：实战篇</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2016/03/node-systemd-tutorial.html" target="_blank" rel="external">Node 应用的 Systemd 启动</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/linux/1407_liuming_init3/index.html" target="_blank" rel="external">浅析 Linux 初始化 init 系统，第 3 部分: Systemd</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[git命令之 git tag]]></title>
      <url>https://beim.github.io/2016/08/05/git%E5%91%BD%E4%BB%A4%E4%B9%8B-git-tag/</url>
      <content type="html"><![CDATA[<h2 id="列出标签"><a href="#列出标签" class="headerlink" title="列出标签"></a>列出标签</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">tag</span></div></pre></td></tr></table></figure>
<h2 id="打标签"><a href="#打标签" class="headerlink" title="打标签"></a>打标签</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#创建轻量标签</span></div><div class="line">git <span class="keyword">tag</span> <span class="title">v0</span>.<span class="number">1.2</span></div><div class="line"></div><div class="line"><span class="comment">#创建附注标签</span></div><div class="line">git <span class="keyword">tag</span> <span class="title">-a</span> v0.<span class="number">1.2</span> -m '<span class="number">0.1</span>.<span class="number">2</span>版本'</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="切换到标签"><a href="#切换到标签" class="headerlink" title="切换到标签"></a>切换到标签</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">git</span> checkout tagname</div></pre></td></tr></table></figure>
<h2 id="查看标签信息"><a href="#查看标签信息" class="headerlink" title="查看标签信息"></a>查看标签信息</h2><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">show </span><span class="built_in">v0</span>.<span class="number">1</span></div></pre></td></tr></table></figure>
<h2 id="删除标签"><a href="#删除标签" class="headerlink" title="删除标签"></a>删除标签</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">tag</span> <span class="title">-d</span> v0.<span class="number">1.2</span></div></pre></td></tr></table></figure>
<h2 id="给指定的commit打标签"><a href="#给指定的commit打标签" class="headerlink" title="给指定的commit打标签"></a>给指定的commit打标签</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">tag</span> <span class="title">-a</span> v0.<span class="number">1.1</span> <span class="number">0</span>fbc3d0</div></pre></td></tr></table></figure>
<h2 id="标签发布到git服务器"><a href="#标签发布到git服务器" class="headerlink" title="标签发布到git服务器"></a>标签发布到git服务器</h2><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">push</span> <span class="built_in">origin</span> v0.1.2</div><div class="line"></div><div class="line">#一次性提交所有标签到<span class="built_in">origin</span></div><div class="line">git <span class="built_in">push</span> <span class="built_in">origin</span> --tags</div></pre></td></tr></table></figure>
<h2 id="删除远程tag"><a href="#删除远程tag" class="headerlink" title="删除远程tag"></a>删除远程tag</h2><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git push origin <span class="symbol">:refs/tags/tag-name</span></div><div class="line"><span class="comment">#其实分支也是这样</span></div><div class="line">git push origin <span class="symbol">:branch-name</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Node.js的内部结构]]></title>
      <url>https://beim.github.io/2016/08/05/Node-js%E7%9A%84%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/</url>
      <content type="html"><![CDATA[<p>首先, 关于JavaScript的一些话……</p>
<p>Jeff Atwood, Stack Overflow的联合创始人之一, 曾经在它的博客Coding Horror中写道:</p>
<p>any application that can be written in JavaScript, will eventually be written in JavaScript</p>
<a id="more"></a>
<p>JavaScript影响范围在过去几年中有相当大的增长, 以至于它现在已经成为最受欢迎的编程语言之一. 实际上, 在2016 SO Deverloper Survey中, JavaScript在Most Popular Technology和 Top Tech on Stack Overflow上都排名第一, 并且在其他几个调查结果的排名都不错.</p>
<p>Node.js是一个服务端JavaScript运行环境, 它奠定了服务端重要功能的基础,如二进制数据操作, 文件系统I/O操作, 数据库访问, 计算机网络等等. 它独特的特性让它在现有的久经考验的框架中突显出来,(如Django(Python), Laravel(PHP), RoR(Ruby)等).也正是这些特性让科技公司如PayPal, Tinder, Medium, LinkedIn 和 Netflix 接受了它, 有些甚至在Node.js达到1.0版本之前就开始使用.</p>
<p>我最近回答了一个<a href="http://stackoverflow.com/questions/36766696/which-is-correct-node-js-architecture/37512766#37512766" target="_blank" rel="external">关于Node.js内部结构的问题</a>,正是这个问题激励我写下这篇文章.</p>
<hr>
<p>官方文档对于理解Node.js究竟是什么并没有什么帮助:</p>
<blockquote>
<p>a JavaScript runtime built on Chrome’s V8 JavaScript engine. Node.js uses an event-driven, non-blocking I/O model ……</p>
</blockquote>
<p>为了理解这则声明,和它有多强大, 让我们将Node.js的组件分解, 解释其中关键的术语, 然后解释这些组件是怎样互相影响并让Node.js如此强大.</p>
<p><img src="/images/nodejsstructure.png" alt="nodejsstructure"></p>
<h2 id="COMPONENTS-DEPENDENCIES-组件-依赖"><a href="#COMPONENTS-DEPENDENCIES-组件-依赖" class="headerlink" title="COMPONENTS/DEPENDENCIES(组件/依赖)"></a>COMPONENTS/DEPENDENCIES(组件/依赖)</h2><p><strong>V8</strong>: Google开源,以C++实现的高性能JavaScript引擎. 这和你的Chrome浏览器的引擎是一样的. V8会处理你的JavaScript代码, 并将它编译成机器码(因此它飞一样快), 并执行. V8到底有多快? 查看这个<a href="http://stackoverflow.com/a/41932/4603550" target="_blank" rel="external">SO答案</a></p>
<p><strong>libuv</strong>: 提供异步特性的C library. 它用来支持event loop(事件循环), a thread pool(线程池), file system events(文件系统事件), 和 child processes(子进程), 还有其他关键功能.</p>
<p><strong>Other C/C++ Components/Dependencies</strong>: 例如 c-ares, crypto(OpenSSL), http-parser, 和zlib. 这些依赖提供了与服务器的较低层次的交互, 建立一些重要的功能如networking(网络),compressing(压缩),encrypting(加密)等等.</p>
<p><strong>Application/Modules</strong>这是所有的JavaScript 代码存在的地方: 你的程序代码, Node.js核心模块, 你从npm下载的模块, 和你自己写的模块. 你大部分的工作都在这个部分.</p>
<p><strong>Bindings</strong>: 你可能已经注意到, Node.js是用JavaScript和C/C++写成的. 用这么多C/C++代码或者libraries的原因很简单:他们很快啊! 然后你写的JavaScript代码是怎么平滑地转换成C/C++代码的呢? 难道他们不是两种不同的语言吗? 对确实是. 并且通常来说用不同语言写代码不能互相通信. 但是有bindings(绑定)就不一样了. Bindings(绑定), 正像它名字一样, 是将一种语言和另一种语言”绑定”起来的胶水代码, 这样的话他们就能够进行交互了. 在这种情况下(Node.js), bindings只将C/C++写的Node.js核心内部库(c-ares, zlib, OpenSSL, http-parser, 等等)暴露给JavaScript. 写bindings的动机之一是代码复用: 如果想要的功能已经实现了,为什么要再重新写一遍呢?只是因为它们是不同的语言吗?只是连接他们不就好了? 另一个动机是性能: 像C/C++这样的系统编程语言的性能通常比其他高级语言更好(如 Python, JavaScript, Ruby等). 因此对于像CPU密集型这样的操作让C/C++写的代码去做就好了.</p>
<p><strong>C/C++ Addons</strong>: bindings只提供Node.js的核心内部库的胶水代码(如 zlib, OpenSSL, c-ares, http-parser等等). 如果你想要在你的程序中加入第三方或者你自己的C/C++库, 你自己要为你的库写胶水代码. 你写的这些胶水代码被叫做addons(插件). 你可以把bindings和addons看做你的JavaScript代码和Node.js的C/C++代码沟通的桥梁.</p>
<h2 id="TERMINOLOGIES-术语"><a href="#TERMINOLOGIES-术语" class="headerlink" title="TERMINOLOGIES(术语)"></a>TERMINOLOGIES(术语)</h2><p><strong>I/O</strong>: Input/Output的缩写. 它基本代表了系统的I/O子系统的所有操作. I/O-bound(I/O密集型)操作通常涉及与硬盘/驱动器的交互. 例如数据库访问和文件系统操作. 其他相关的概念有CPU-bound, memory-bound等等. 检测一个操作是否属于I/O-bound, CPU-bound,或者其他类型, 需要增加特定操作所用的资源, 看哪个会获得更好的性能. 例如,如果CPU计算能力增强, 该操作会明显变快, 那么它属于CPU-bound.</p>
<p><strong>Non-blocking/Asynchronous(非阻塞/异步)</strong>: 通常来说, 当一个请求进来时, 程序会处理这个请求并在这个请求处理完成之前停止其他所有操作. 这立刻暴露出一个问题: 当大量请求同时到来时, 每个请求都得等之前的请求处理完. 换句话说, 先前的操作会阻塞它之后的操作. 情况还可能更糟, 如果先前的操作响应时间很长(例如,计算前1000个质数,或者从数据库中读取3GB的数据),其他所有的请求都会被终止/阻塞很长事件. 为了解决这个问题, 你可以采取多进程 和/或 多线程的解决方法, 它们各有优缺点. Node.js的处理方式不同, 它并没有为每个新请求开一个新进程, 所有的请求都使用单线程处理, 这几乎就是它做的所有事情: 处理请求–请求中所有(I/O)操作(例如文件系统访问,数据库读写)都送到worker线程,也就是背后的libuv(上面有提到). 换句话说, 请求中所有的I/O操作都是异步处理, 并不在主线程中处理.这种方法使得主线程永远不会被阻塞, 因为繁重的操作都转移到了其他的地方. 你(还有你的程序代码)只需要在主线程中工作. 所有libuv的线程池里的worker线程对你都是透明的. 你永远也不需要直接操作它们(也不需要担心). Node.js会帮你照顾它们. 这个结构使得I/O操作变得非常高效. 然而,这也不是没有缺点的. 操作不止包含I/O-bound,而且还有CPU-bound, memory-bound等等. Node.js只给你提供了I/O任务的异步方法, 当热也有办法来解决CPU密集型操作. 然而这不在本文讨论范围内.</p>
<p><strong>Event-Driven(事件驱动的)</strong>: 一般的, 几乎所有的现代系统中, 在主程序开始以后, 进程通过传入的请求来初始化. 然而就是从这里开始产生区别, 有时候不同技术的区别是巨大的. 通常的实现是按程序处理请求: 为一个请求开一个线程; 操作一个接一个的完成; 如果哪个操作慢了, 它之后的操作都会在那个操作被暂停; 当所有的操作都完成, 再返回响应. 然而,在Node.js中, 所有的操作都作为事件注册到Node.js中, 等待被触发, 它们可能被主程序或者请求触发.</p>
<p><strong>Runtime(System)</strong>: Node.js运行环境是整个代码库(上面提到的组件), 包括低级和高级, 同时为Node.js程序的执行提供支持.</p>
<h2 id="PUTTING-EVERYTHING-TOGETHER-整合"><a href="#PUTTING-EVERYTHING-TOGETHER-整合" class="headerlink" title="PUTTING EVERYTHING TOGETHER(整合)"></a>PUTTING EVERYTHING TOGETHER(整合)</h2><p>现在我们对Node.js的组件有了大致概念, 接下来看它的工作流程, 之后你将对它的结构和不同组件间如何交互有更好的了解.</p>
<p>当Node.js程序开始运行的时候, V8引擎会运行你写的陈旭代码. 你程序中的对象会保持一系列<code>observers</code>(观察者)(注册到events的方法). 当它们预期的事件发出之后,这些observers将会得到通知.</p>
<p>当一个事件发出, 它的回调函数将会排入event queue(事件队列). 只要队列中还有事件,event loop(事件循环)就会将队列中的事件出列并添加到call stack(调用堆栈), 需要注意的是, 只有之间的事件被处理完(调用堆栈清空后), event loop才会将下一个事件放到call stack.</p>
<p>在call stack中, 当遇到I/O操作, 它将会被交给libuv去处理. 默认的, libuv保持4个worker线程的线程池, 这个默认值可以被修改. worker线程会根据I/O操作的类型, 和Node.js的低层次库交互,来决定执行的具体操作如数据库读写, 文件系统访问,网络等待. 当处理完毕之后, libuv会将这个事件enqueue(出列)并放回到event queue(事件队列)中, 等待主线程处理. 这时, libuv异步处理了I/O操作, 主线程并没有等待操作的结果而是继续进行. 被libuv返回的事件在event loop(事件循环)再次将它放到call stack(调用堆栈)的时候被主线程处理. 这样就完成了一个Node.js程序事件的生命周期.</p>
<p><a href="http://stackoverflow.com/users/370756/mbq" target="_blank" rel="external">mbq</a>曾经以餐馆对Node.js作了绝妙的比喻. 我将借用它的范例并稍作修改来让Node.js周期更容易理解. 把Node.js程序看做星巴克. 一个高效,训练有素的服务员(唯一的主线程)来下订单. 当大量客户同时进入咖啡厅, 他们将会等待服务员的服务(事件队列的入队). 当服务员接待一个客户之后, 他会把客户的订单交给一个管理员(libuv), 管理员会给每个订单交给一个咖啡师(worker thread). 咖啡师会根据顾客的要求用不同的配料和机器(底层的C/C++组件)来制作不同种的饮料.一般情况下会有4个咖啡师值班(thread pool). 然而,在高峰期, 可以让更多的咖啡师来工作(然而这应该在一天刚开始的时候来做, 而不是午休期间). 当服务员将订单提交给管理员之后, 他并没有等咖啡做好之后再服务下一位顾客, 而是叫下一位顾客(event loop将下一个事件出列,并放到call stack). 你可以把call stack中的事件看做是正在柜台被服务的顾客. 当咖啡做好之后, 咖啡将会被送到顾客队列的末尾. 当咖啡移动到柜台的时候, 服务员会叫顾客的名字,然后顾客拿到咖啡.(这在现实生活中可能有点怪, 然而你从程序的进程的角度来想的话就合理了)</p>
<hr>
<p>这样就完成了Node.js的内部代码库和它的事件生命周期的高度概览. 然而这是很概括性的,并没有包括很多问题和细节, 例如CPU-bound操作处理, Node.js设计模式等.</p>
<hr>
<h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a><a href="https://medium.com/yet-another-node-js-blog/architecture-of-node-js-internal-codebase-57cd8376b71f#.sl5sna17t" target="_blank" rel="external">原文</a></h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[跨域请求之JSONP与CORS]]></title>
      <url>https://beim.github.io/2016/08/05/%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%E4%B9%8BJSONP%E4%B8%8ECORS/</url>
      <content type="html"><![CDATA[<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>在使用wikipedia的API的时候，直接发送ajax请求得到以下信息：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">XMLHttpRequest cannot <span class="keyword">load</span> https://en.wikipedia.org/w/api.php?<span class="keyword">action</span>=<span class="keyword">query</span>&amp;<span class="keyword">format</span>=<span class="keyword">json</span>&amp;<span class="keyword">list</span>=<span class="keyword">search</span>&amp;srsearch=<span class="number">1.</span> Response <span class="keyword">to</span> preflight request doesn’t pass <span class="keyword">access</span> control <span class="keyword">check</span>: <span class="keyword">No</span> ‘<span class="keyword">Access</span>-Control-<span class="keyword">Allow</span>-Origin’ header <span class="keyword">is</span> <span class="keyword">present</span> <span class="keyword">on</span> the requested resource. Origin ‘<span class="keyword">http</span>://s.codepen.io’ <span class="keyword">is</span> therefore <span class="keyword">not</span> allowed access.</div></pre></td></tr></table></figure>
<p>这是由于XMLHttpRequest对象受限于<a href="https://en.wikipedia.org/wiki/Same-origin_policy" target="_blank" rel="external">同源策略(same origin-policy)</a>。这个策略使得页面只能从同一个源(origin)获取数据。源是由协议(protocol)，主机(host)，端口号(port number)决定的。例如<code>https://www.sitepoint.com/jsonp-examples/</code> 的源就是<code>https, www.sitepoint.com</code>, <code>80</code>。</p>
<p>同源策略是一个安全机制。它避免了脚本从你的域读取数据并发送到别的服务器上。</p>
<a id="more"></a>
<p>下面介绍两种解决方法：</p>
<h2 id="JSONP-JSON-with-Padding"><a href="#JSONP-JSON-with-Padding" class="headerlink" title="JSONP(JSON with Padding)"></a>JSONP(JSON with Padding)</h2><p>script标签可以从另一个域中载入数据，<script src="xxx"></script>。因此我们可以新建一个script标签，设置src属性，然后插入到页面中</p>
<p>JSONP就建立在这种技术之上，它给我们提供了一种处理返回数据的方法。它将服务器返回的JSON数据包裹在一个回调函数中(即padding)。这个回调函数必须在处理JSONP返回数据的页面中。</p>
<p>例如：</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">var</span> JSON_CALLBACK = <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(res)</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> <span class="built_in">url</span> = <span class="string">'https://en.wikipedia.org/w/api.php?action=query&amp;format=json&amp;list=search&amp;srsearch='</span> + <span class="keyword">this</span>.state.svalue + <span class="string">'&amp;callback=JSON_CALLBACK'</span></div><div class="line"><span class="comment">//JSON_CALLBACK即回调函数名称</span></div><div class="line"><span class="keyword">let</span> scriptTag = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>)</div><div class="line">scriptTag.setAttribute(<span class="string">'src'</span>, <span class="built_in">url</span>)</div><div class="line"><span class="built_in">document</span>.body.appendChild(scriptTag)</div></pre></td></tr></table></figure>
<p>这种方法只在跨域 GET请求有用。</p>
<h2 id="CORS-Cross-Origin-Resource-Sharing跨域资源共享"><a href="#CORS-Cross-Origin-Resource-Sharing跨域资源共享" class="headerlink" title="CORS(Cross-Origin Resource Sharing跨域资源共享)"></a>CORS(Cross-Origin Resource Sharing跨域资源共享)</h2><p><a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing" target="_blank" rel="external">CORS</a>是允许请求跨域资源的机制。</p>
<p>对于AJAX和HTTP请求，浏览器会先对请求预检(preflight)，向目标服务器发送HTTP OPTIONS 请求头， 然后从服务器获得许可(approval)，再发送实际的HTTP请求。</p>
<blockquote>
<p>以下情况将会发送预请求</p>
<ul>
<li>请求以 GET, HEAD 或者 POST 以外的方法发起请求。或者，使用 POST，但请求数据为 application/x-www-form-urlencoded, multipart/form-data 或者 text/plain 以外的数据类型。比如说，用 POST 发送数据类型为 application/xml 或者 text/xml 的 XML 数据的请求。</li>
<li>使用自定义请求头（比如添加诸如 X-PINGOTHER）</li>
</ul>
</blockquote>
<p>举个栗子：</p>
<ul>
<li>浏览器发送OPTIONS请求，带有Origin HTTP头。 这个请求头的值即当前页面的域。当<a href="http://www.foo.com的页面尝试获取" target="_blank" rel="external">http://www.foo.com的页面尝试获取</a> bar.com的数据时，会给bar.com 发送下列请求头：<code>Origin: http://www.foo.com</code></li>
<li>服务器可能会返回</li>
</ul>
<blockquote>
<ul>
<li>Access-Control-Allow-Origin: <a href="http://www.foo.com。（ACAO)响应头表明允许的源站点。" target="_blank" rel="external">http://www.foo.com。（ACAO)响应头表明允许的源站点。</a></li>
<li>如果服务器不支持跨域请求，将会返回错误。</li>
<li>Access-Control-Allow-Origin: *。(ACAO)响应头表明允许所有域。</li>
</ul>
</blockquote>
<h2 id="JSONP-vs-CORS"><a href="#JSONP-vs-CORS" class="headerlink" title="JSONP vs CORS"></a>JSONP vs CORS</h2><p>两种方法都需要服务器支持。</p>
<p>JSONP只支持GET请求方法。JSONP可能造成XSS问题。</p>
<p>CORS可以看做现代的JSONP替代方案。CORS还能支持GET以外的HTTP请求，对错误处理和安全支持也更好。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="http://stackoverflow.com/questions/33297190/response-for-preflight-has-invalid-http-status-code-404-angular-js" target="_blank" rel="external">stackoverflow</a></p>
<p><a href="http://stackoverflow.com/questions/11001817/allow-cors-rest-request-to-a-express-node-js-application-on-heroku" target="_blank" rel="external">stackoverflow</a><br>解决了项目中POST 请求的问题，<br>由于在发送真正的POST 请求之前会发送一个OPTIONS 请求，将这个请求的status 置为200，则下一步发送真正的POST 请求。</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="external">MDN</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JS-类和对象]]></title>
      <url>https://beim.github.io/2016/08/05/JS-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/</url>
      <content type="html"><![CDATA[<h2 id="构造函数法"><a href="#构造函数法" class="headerlink" title="构造函数法"></a>构造函数法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">like</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> nickName = <span class="string">'myNickName'</span></div><div class="line">    <span class="keyword">this</span>.callNickName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> nickName;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">'myName'</span></div><div class="line">    <span class="keyword">this</span>.like = like</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> cat1 = <span class="keyword">new</span> Cat(<span class="string">'dog'</span>)</div><div class="line"><span class="built_in">console</span>.log(cat1.name) <span class="comment">// myName</span></div><div class="line"><span class="built_in">console</span>.log(cat1.nickName) <span class="comment">// undefined</span></div><div class="line"><span class="built_in">console</span>.log(cat1.callNickName()) <span class="comment">// myNickName</span></div><div class="line"><span class="built_in">console</span>.log(cat1.like) <span class="comment">// dog</span></div><div class="line"><span class="comment">// 属性和方法也可以定义在function对象的prototype对象上</span></div><div class="line">Cat.prototype.makeSound = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'miao'</span>)</div><div class="line">&#125;</div><div class="line">cat1.makeSound() <span class="comment">// miao</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create()"></a>Object.create()</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Cat = &#123;</div><div class="line">    name: <span class="string">'myName'</span>,</div><div class="line">    makeSound: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'miao'</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> cat1 = <span class="built_in">Object</span>.create(Cat)  </div><div class="line"><span class="built_in">console</span>.log(cat1.name) <span class="comment">// myName </span></div><div class="line">cat1.makeSound() <span class="comment">// miao</span></div></pre></td></tr></table></figure>
<h2 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(x, y) &#123;</div><div class="line">        <span class="keyword">this</span>.x = x</div><div class="line">        <span class="keyword">this</span>.y = y</div><div class="line">    &#125;</div><div class="line">    toString() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">'('</span> + <span class="keyword">this</span>.x + <span class="string">', '</span> + <span class="keyword">this</span>.y + <span class="string">')'</span></div><div class="line">    &#125;</div><div class="line">    say() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'say something'</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> Point) <span class="comment">// function</span></div><div class="line"><span class="built_in">console</span>.log(Point === Point.prototype.constructor) <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(Point.toString()) <span class="comment">// class Point &#123; ... &#125;</span></div><div class="line"><span class="keyword">var</span> point = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">2</span>)</div><div class="line"><span class="built_in">console</span>.log(point.toString()) <span class="comment">// (1, 2)</span></div><div class="line">point.say() <span class="comment">// say something</span></div><div class="line">Point.say() <span class="comment">// Error!</span></div></pre></td></tr></table></figure>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="http://www.ruanyifeng.com/blog/2012/07/three_ways_to_define_a_javascript_class.html" target="_blank" rel="external">前两种方法</a></li>
<li><a href="http://es6.ruanyifeng.com/#docs/class" target="_blank" rel="external">第三种方法</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[测试框架AVA]]></title>
      <url>https://beim.github.io/2016/08/05/%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6AVA/</url>
      <content type="html"><![CDATA[<p><img src="/images/ceshiheader.png" alt="ava"></p>
<blockquote>
<p>面向未来的测试运行器</p>
</blockquote>
<a id="more"></a>
<ul>
<li><a href="https://cnodejs.org/topic/57464cd8da0dea851e308101" target="_blank" rel="external">关于AVA的介绍</a></li>
<li><a href="https://github.com/avajs/ava" target="_blank" rel="external">github</a></li>
</ul>
<h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><h3 id="全局安装AVA，在项目中用-–init-参数运行命令，会将AVA添加到package-json"><a href="#全局安装AVA，在项目中用-–init-参数运行命令，会将AVA添加到package-json" class="headerlink" title="全局安装AVA，在项目中用 –init 参数运行命令，会将AVA添加到package.json"></a>全局安装AVA，在项目中用 –init 参数运行命令，会将AVA添加到package.json</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$ npm install --global ava</div><div class="line">$ ava --init</div><div class="line"><span class="section">#package.json</span></div><div class="line">&#123;</div><div class="line"><span class="code">    "name": "awesome-package",</span></div><div class="line"><span class="code">    "scripts": &#123;</span></div><div class="line"><span class="code">        "test": "ava"</span></div><div class="line"><span class="code">    &#125;,</span></div><div class="line"><span class="code">    "devDependencies": &#123;</span></div><div class="line"><span class="code">        "ava": "^0.11.0"</span></div><div class="line"><span class="code">    &#125;</span></div><div class="line">&#125;![<span class="string">ava</span>](<span class="link">/images/ceshiheader</span>)</div></pre></td></tr></table></figure>
<h3 id="手动安装"><a href="#手动安装" class="headerlink" title="手动安装"></a>手动安装</h3><figure class="highlight d"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">nstall --save-dev ava</div><div class="line"></div><div class="line">#再对 <span class="string">``</span><span class="keyword">package</span>.json<span class="string">``</span> 配置 <span class="string">``</span>test<span class="string">``</span> 脚本 （如上）</div></pre></td></tr></table></figure>
<h2 id="测试一下"><a href="#测试一下" class="headerlink" title="测试一下"></a>测试一下</h2><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#main.js</span></div><div class="line">let a = <span class="function"><span class="params">(x)</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">if</span> (x &gt; <span class="number">0</span>)</div><div class="line">    <span class="keyword">return</span> x * x</div><div class="line">    <span class="keyword">return</span> x</div><div class="line">&#125;</div><div class="line"><span class="built_in">module</span>.exports = a</div><div class="line"><span class="comment">#test.js</span></div><div class="line">const test = <span class="built_in">require</span>(<span class="string">'ava'</span>)</div><div class="line">const a = <span class="built_in">require</span>(<span class="string">'./main.js'</span>)</div><div class="line">test(<span class="string">'give 3 should return 9'</span>, t =&gt; &#123;</div><div class="line">    t.<span class="keyword">is</span>(a(<span class="number">3</span>), <span class="number">9</span>)</div><div class="line">&#125;)</div><div class="line">test(<span class="string">'git -3 should return -3'</span>, t =&gt; &#123;</div><div class="line">    t.<span class="keyword">is</span>(a(<span class="number">-3</span>), <span class="number">-3</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">beim<span class="variable">@Idea:</span>~/temp/ava$ ava -v</div><div class="line">  ✔ give <span class="number">3</span> should return <span class="number">9</span></div><div class="line">  ✔ git -<span class="number">3</span> should return -<span class="number">3</span></div><div class="line">  <span class="number">2</span> tests passed [<span class="number">10</span>:<span class="number">19</span>:<span class="number">26</span> GMT+<span class="number">0800</span> (CST)]</div></pre></td></tr></table></figure>
<h2 id="测试覆盖率"><a href="#测试覆盖率" class="headerlink" title="测试覆盖率"></a>测试覆盖率</h2><p>官方推荐使用<a href="https://github.com/istanbuljs/nyc" target="_blank" rel="external">nyc</a></p>
<h3 id="用法-1"><a href="#用法-1" class="headerlink" title="用法"></a>用法</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ npm <span class="keyword">install</span> nyc --save-dev</div><div class="line"><span class="comment">#或全局安装</span></div><div class="line">$ npm <span class="keyword">install</span> nyc -g</div><div class="line"><span class="comment">#修改package.json 的test 脚本</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"script"</span>: &#123;</div><div class="line">    <span class="string">"test"</span>: <span class="string">"nyc ava ./test/*.js"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="测试一下-1"><a href="#测试一下-1" class="headerlink" title="测试一下"></a>测试一下</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">#修改之前的package<span class="selector-class">.json</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"scripts"</span>: &#123;</div><div class="line">    <span class="string">"test"</span>: <span class="string">"nyc ava -v"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">beim<span class="meta">@Idea:~/temp/ava$</span> npm test</div><div class="line">&gt; @ test /home/beim/temp/ava</div><div class="line">&gt; nyc ava -v</div><div class="line">  ✔ give 3 should return 9</div><div class="line">  ✔ git -3 should return -3</div><div class="line">  2 tests passed [10:23:53 GMT+0800 (CST)]</div><div class="line">----------|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------------</span>|</div><div class="line">File      |<span class="string">  % Stmts </span>|<span class="string"> % Branch </span>|<span class="string">  % Funcs </span>|<span class="string">  % Lines </span>|<span class="string">Uncovered Lines </span>|</div><div class="line">----------|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------------</span>|</div><div class="line">All files |<span class="string">      100 </span>|<span class="string">      100 </span>|<span class="string">      100 </span>|<span class="string">      100 </span>|<span class="string">                </span>|</div><div class="line"> main.js  |<span class="string">      100 </span>|<span class="string">      100 </span>|<span class="string">      100 </span>|<span class="string">      100 </span>|<span class="string">                </span>|</div><div class="line">----------|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------------</span>|</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2017-白日梦]]></title>
      <url>https://beim.github.io/1970/01/02/2017-%E7%99%BD%E6%97%A5%E6%A2%A6/</url>
      <content type="html"><![CDATA[<embed src="//music.163.com/style/swf/widget.swf?sid=28592459&type=2&auto=0&width=320&height=66" width="340" height="86" allownetworking="all">

<blockquote>
<p>only my railgun</p>
</blockquote>
<a id="more"></a>
<h1 id="Jan"><a href="#Jan" class="headerlink" title="Jan"></a>Jan</h1><hr>
<p><strong>白日梦</strong></p>
<p><a href="http://music.163.com/#/song/722928?userid=111365099" target="_blank" rel="external">Departures〜あなたにおくるアイの歌〜</a></p>
<p><code>Sun Jan 1 22:11</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>好想好回家<br>回美地<br>躺在自己的小房间里<br>玩跑跑，玩冒险岛，看小说</p>
<p><code>Thu Jan 5 01:23</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>飞行兔SR呀<br>再也抽不到了</p>
<p><code>Thu Jan 5 13:51</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>在国服跑跑偶遇琉璃深灰白！<br>那时候玩韩服多亏有她呢<br>她说还记得我hhh</p>
<p><code>Fri Jan 6 23:52</code></p>
<hr>
<p><strong>夏娜</strong></p>
<p>无限的时间将跳动停止，人们消声无息的燃烧着，没有任何人注意到，世界已经脱轨，被红世之火所包围。</p>
<p><code>Sat Jan 7 20:50</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>正在教室看遗传算法论文。。<br>之前选题的论文是英文的，看的过程中google关键字偶然发现了一篇中文论文，内容几乎一样。。。再google 中文论文里的关键字，找到了英文论文的中文翻译QAQ<br>真是。。<br>嗨呀～</p>
<p><code>Sat Jan 7 20:54</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>这一天<br>棍棍又回想起了被思思血虐的恐惧。。</p>
<p><code>Mon Jan 9 22:34</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>支付宝上每天都能看见<br>可能认识的好友 至此经年<br>23333</p>
<p><code>Tue Jan 10 16:29</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>刚才我下楼<br>碰见一个女孩 贼好看<br>我推门的时候没看见她在门后<br>然后她笑着躲开<br>卧槽<br>那一瞬间<br>太美了</p>
<p><code>Tue Jan 10 18:51</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>在大陆的生活还是太快～</p>
<p><code>Tue Jan 10 21:01</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>发现一个网站主页上的图片~<br><img src="http://ob4a6y748.bkt.clouddn.com/tz-2017-01-12%2009-41-05%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="tz"></p>
<p><code>Thu Jan 12 09:47</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>要出发了~成都成都~</p>
<p><code>Sat Jan 14 10:58</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>I’ll miss you terribly</p>
<p><code>Wed Jan 25 21:14</code></p>
<hr>
<p><strong>大家</strong></p>
<p>今天下午和同学9个人玩狼人杀 然后吃晚饭 吃完不知道去干嘛 但是都舍不得散 于是就出来压马路 绕着步行街走了一圈又一圈∠( ᐛ 」∠)＿ 到九点才各自坐末班车回家😂</p>
<p><code>Thu Jan 26 22:38</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>突然想起自己小时候和老爸斗智斗勇2333<br>很小的时候我就爱看电视，一看一整天，哪个台在哪个频道都一清二楚的那种hhh 老爸逼我写了多少张保证书都不好使   于是他断我电闸   那时候还是开关式的  在墙上挂得很高  我就搬凳子上去打开 一张不够要两张hhh 在老爸把我胖揍一顿之后我愤然把电视信号线剪断以表决心  但是第二天发现接上之后还能看啊2333于是偷偷摸摸又看了好长时间直到买了新的线hhhh<br>四年级的时候 家里有了电脑 于是斗争阵地转移  老爸还是用老招数断电  可是新家的电闸是空气开关啊我够得着2333 太简单秒过~ 后来再断电，家里电闸却没关，我以为是停电，可是喵的对门怎么没停电？？于是我<code>偶然</code>地下楼把单元楼对应我家的电闸打开了（噢哈哈哈）老爸发现断电不好使以后开始没收我鼠标，于是开始在家里藏鼠标-找鼠标的游戏。沙发底下，空调顶上，衣柜衣服口袋里，还有搬梯子才能够到的柜子里。。。最变态的一次居然藏到了垃圾桶的垃圾袋下面！我居然还找到了！！！WTF？？！！最easy的一次是藏到了我的书包里面，老爸啊老爸，你以为我真的不会学习吗啊哈哈哈！！！当然还遇到过真*难关，老妈拿出了神器-房间钥匙，每次她出门都把我的书房锁上QAQ  简直无解啊。。然而。。由于家里几个房间钥匙都长得差不多，某天我偷偷把卧室和书房钥匙对换了一下。。233333机智如我。。这次真是干得天衣无缝啊哈哈哈 我甚至还把同学叫来家里玩电脑  然而就在那次被老妈回家撞见QAQ  果然还是不能浪。。。</p>
<p><code>Fri Jan 27 12:42</code></p>
<hr>
<h1 id="Feb"><a href="#Feb" class="headerlink" title="Feb"></a>Feb</h1><hr>
<p><strong>白日梦</strong></p>
<p>到乡下的路越来越好, 在乡下呆的时间却越来越少.</p>
<p><code>Wed Feb 1 10:02</code></p>
<hr>
<p><strong>狼人杀</strong></p>
<p>第三次狼人杀 真的是上瘾啊2333 近期不玩了~~<br>当狼跳预言家太多了导致拿到真预言家的时候,文旭民居然跳预言家刚我…噗<br>最后一把悍跳预言家发女巫金水推掉真预言家完胜2333 嗨呀<br>下次出门再把牌还给偶像好了hhh</p>
<p><code>Fri Feb 3 19:07</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>对假期的空闲时间并不满意..<br>关键是<br>doctor who 太好看了!!!!<br>QAQ 学习学习<br>还没学算法呢… apue有毒..</p>
<p>下学期的课怎么办哎.. 比正常的多5门课.. 好方.. 然而还没做准备..</p>
<p><code>Sat Feb 4 21:30</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>大晚上的被拉去种树<br>靠外侧第二棵是兔子树, 第四棵是面包树2333</p>
<p><code>Mon Feb 6 22:31</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>又约了大后天狼人杀<br>wtf???<br>好好学习呢???</p>
<p><code>Mon Feb 6 22:32</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>大早上起来去中医院吃面, 然后步行回家<br>给博客加了访客记录和显示今日访客人数的功能</p>
<p><code>Tue Feb 7 10:42</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>和菜, 鱼 在湘东(黑人问号???)打羽毛球桌球<br>然后吃牛排看电影<br>乘风破浪<br>由于对后会无期的印象去看的<br>笑点get 到, 但是电影想要表达的却不太理解<br><em>世界是不会变的</em><br>要改变儿子, 让儿子读书当医生, 会用脚踹儿子脸的正太没有变<br>要改变父亲, 让父亲不犯事的太浪没有变<br>该发生的都会发生, 世界不会改变<br>改变的是人心</p>
<p>看完电影出来鱼看到偶像给他发的消息<br>= =!<br>wtf</p>
<p><code>Tue Feb 7 21:08</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>白日梦<br>很漫长的下午<br>梦里我到西安某学校交换<br>同寝室的还有两人，都是交换生<br>其中一人是和女票一起来的<br>他俩是青梅竹马<br>我们四个人在西安玩了一个学期<br>其中有一天，她男票正在拦出租车，她在我耳边低声说了些什么。<br>交换快结束了，那天下午，她约我出来，我们面对面，我听到身后有人喊我，我回头，他用枪指着我，突然枪响，他倒下了，他身后是另一个室友。<br>之后我带她走到了岔路口，我在另一个梦里来过，不止一次。面前有三条路，宽阔的大路，蜿蜒的小路，还有不太能称得上路的田间小路。三条路会在同一个地方汇合。我走过第一条路，重复单调，我走了很久以后搭班车返回了。我走过第三条路，是在田间，在河边，有一座跨河的桥，但是没人能上去。我曾经尝试过但是并不能成功。我拉着她往第二条路上走，她摇头，于是我们去了第三条路。她几乎就能上桥了，这时来了一群人，气势汹汹。<br>下午我和她一起坐公交车回家，她坐在我前面，昏昏欲睡。突然一个急刹车，她抬头看到最后排空着，于是抓着扶手走了过去。她坐下后我也跟着过去了。<br>我先下了车，到家已经天黑了。我应该坐28个小时火车才能到家的，车票还在我口袋里。<br>我想拍下火车票发朋友圈，这时我被拉去玩狼人杀，13个人的局，我来了以后还差2人，是我的两个室友。</p>
<p><code>Wed Feb 8 19:02</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>今天玩得乱七八糟…<br>我只想当一匹隐狼啊..为什么都要查我…<br>刘杨和小姨妈进步都好大..<br>yty 每次都第一天出局2333<br>下次不玩这么晚了, 每次都得让老妈开车来接…</p>
<p><code>Fri Feb 10 00:05</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>今天睡到中午才起床</p>
<p>啊 好害怕开学<br>只有13天了<br>下学期真是大挑战</p>
<p>May the force be with you.</p>
<p><code>Fri Feb 10 13:20</code></p>
<hr>
<p><strong><a href="http://music.163.com/#/song?id=31273654" target="_blank" rel="external">ぼくら</a></strong></p>
<p>いつか 时が 过ぎて 仆ら<br>若有一日岁月蹉跎<br>ただの大人になったとしても<br>我们变成了普普通通的大人<br>今のままの このままの 自分でいられるかな？<br>还能做现在的 这样的自己吗？</p>
<p>心 折れて 梦に やぶれ<br>经历心伤 经历梦碎<br>ただの大人になったとしても<br>我们变成了普普通通的大人<br>今のままの こんなままの 自分でいられるかな？<br>还能做现在的 这样的自己吗？</p>
<p><code>Fri Feb 10 13:32</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>讲真读apue 会有敬畏和感动</p>
<p><code>Fri Feb 10 22:53</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p><a href="http://music.163.com/#/song?id=436514312" target="_blank" rel="external">成都 - 网易云</a></p>
<p><a href="http://music.163.com/#/song?id=436514312" target="_blank" rel="external">这才是成都 - 网易云</a></p>
<p>2333</p>
<p>两首歌里的成都, 和我见到的, 都是我向往的</p>
<p><code>Sat Feb 11 17:38</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>doggy 居然为情所困..<br>还是原来的那个人</p>
<p><code>Sun Feb 12 00:38</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>如果计算机的能力足够, 也就不需要多线程这种复杂的东西.<br>不需要去做优化<br>可惜现实并不理想</p>
<p><code>Sun Feb 12 14:09</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>昨天回瓶中逛<br>然后和doggy<br>又一次从步行街走到香溪美林<br>希望他和lujia能好好的走下去</p>
<p><code>Mon Feb 13 12:30</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>需要在满足锁需求的情况下, 在代码复杂性和性能之间找到正确的平衡.</p>
<p><code>Mon Feb 13 21:21</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>[乌云背后的幸福线]<br>I’m married!<br>So am I!</p>
<p>2333</p>
<p>Can you forgive? Are you any good at that?</p>
<p>I opened up to you and you judged me. You are an asshole! You are an asshole!</p>
<p><code>Mon Feb 13 23:09</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>虽然apue 读了大半, 但是并没有觉得学到多少东西<br>没有解决问题的愉悦感= =</p>
<p><code>Wed Feb 15 16:28</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>梦见自己在成都<br>梦见自己在武功山的缆车上, 直线下落的, 好不刺激</p>
<p>几年前 这样的冬天 带着这样的困意 起床 打开征途</p>
<p><code>Thu Feb 16 08:13</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>实习的时候总是觉得时间不够用呢<br>练字都忘了</p>
<p><code>Wed Feb 22 20:42</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>寒假最后一天<br>和偶像看了极限特工</p>
<p><code>Wed Feb 22 20:43</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>实习实习QAQ<br>投了N多简历。。都石沉大海。。<br>02-28 阿里 研发工程师【一面】<br>02-28 LLS 软件开发工程师 深圳<br>02-28 思叠科技 Linux软件和云计算网络工程师 成都<br>02-28 睿初科技 软件测试实习生 深圳<br>03-01 Intel Software Development Internship 北京<br>03-01 tap4fun Web开发工程师 成都<br>03-01 Camera360 软件测试实习生 成都<br>03-02 创立科技 实习生（软件测试） 成都<br>03-02 壹仟零壹夜 软件测试工程师 成都<br>03-02 腾讯 软件开发-Web开发工程师 深圳 (一面 测试工程师)<br>03-03 百词斩 测试实习生 成都<br>03-03 上海数巧 Node.js开发工程师 上海<br>03-03 OceanBase 开发工程师C++ 杭州<br>03-04 中科研拓 Nodejs开发工程师 深圳<br>03-04 华为 云计算开发工程师 深圳 (一面)<br>03-04 华为 IT应用软件开发工程师 深圳<br>03-05 Intel Software Development Internship 北京<br>03-06 昆仑医生 nodejs开发方向实习生 北京<br>03-06 Shopee 后端开发工程师 深圳<br>03-07 成都思应科技中心 python开发实习生 成都<br>03-07 海说科技 服务器实习生 成都 【面试通过】18628242424 袁<br>03-07 艾德睿智 NODEJS开发实习生 北京 【面试通知】<br>03-07 中科研拓 nodejs开发工程师 深圳 【面试邀请】<br>03-07 网易杭州 C++开发工程师-音乐事业部 杭州<br>03-07 联想服务 软件开发工程师<br>03-07 搜狐 后台研发工程师 北京<br>03-08 蚂蚁金服 分布式计算【一面】<br>03-09 云巴 后端开发实习生 深圳 （hr妹子声音好听）<br>03-10 饿了么 ?? 上海<br>03-20 猎豹移动 研发工程师 北京<br>03-21 广州江南科友 Linux C研发工程师 广州（offer get）<br>03-21 搜狐 研发工程师 北京</p>
<hr>
<p><strong>白日梦</strong></p>
<p>正学着C++ 突然来了蚂蚁金服的面试。。很慌。。<br>除去之前成都某外包公司的面试，这应该是第一次正式的面试。。<br>喵的都没有提前预约的。。<br>问了C，linux和计网的东西。。然后做了一个链表求环的题，问了问项目。。感觉没一个答得完善的。。gg<br>gg<br>算是涨经验吧。。面试官还是很nice的，尽量的让我来提出话题然后相应的提问。。<br>复习复习计网～下次面试加油</p>
<p><code>Sat Mar 11 17:50</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>uva210</p>
<p>明明可以跑。。居然超时。。醉了</p>
<hr>
<p><strong>白日梦</strong></p>
<p>晚上正学着算法，来个电话，腾讯手机管家告诉我是广告推销，我给挂了。<br>第三个进来接了，居然是阿里的面试。。。。？？？？？<br>聊了大概50分钟  ，问了不少项目相关，然后问计网，数据结构，操作系统。。数据库啥都答不上来。。。估计。。gg<br>最后面试官问我还有啥想问的，两次。。我说没啥要问的QAQ<br>好像傻。。<br>汲取经验。。加油</p>
<p><code>Tue Mar 14 00:36</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>前两天去了东北五校招聘会，会场里挤满了人和动物。原本进去投了猎豹移动之后就回来，出来取了快递以后又回去逛了一圈，找找有没有成都的公司。（并没有啊QAQ）<br>投了广州的江南科友，去笔试了一波。原本想的笔试筛选严格的话还可以考虑，没想到笔试一点都不考技术，hr也表现出公司对技术人员的不重视，宣讲没听完就回去了。今天实习动员会的时候又接到了这家个公司的电话，工资2400包住宿，拒绝。<br>如果找不到合适的实习单位，不如考研吧。。<br>你怎么看？</p>
<p><code>Thu Mar 23 23:46</code></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2016-白日梦]]></title>
      <url>https://beim.github.io/1970/01/01/2016-%E7%99%BD%E6%97%A5%E6%A2%A6/</url>
      <content type="html"><![CDATA[<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=409650845&auto=0&height=66"></iframe>

<blockquote>
<p>不如就此相忘于尘世间</p>
</blockquote>
<a id="more"></a>
<h1 id="Aug"><a href="#Aug" class="headerlink" title="Aug"></a>Aug</h1><hr>
<p><strong>白日梦</strong>：<br>我坐在船上，船行在海上。还有鲸豚。<br>我尝试着换了个方向行驶。<br>船桅折了。<br><code>Sun Aug 14 22:37</code></p>
<hr>
<p><strong>武功山</strong>：<br><img src="http://ob4a6y748.bkt.clouddn.com/yun1.jpg" alt="武功山"><br><img src="http://ob4a6y748.bkt.clouddn.com/yun2.jpg" alt="武功山"><br>晚上7点，到了海拔1918m的金顶。<br>在纸上写棍棍和兔子的名字，放进了云里。<br><code>Tue Aug 16 17:25</code></p>
<hr>
<p><strong>摆渡人</strong>:<br>崔斯坦没有消失。<br>真是太好了。<br>太好了。<br><code>Tue Aug 16 21:48</code></p>
<hr>
<p><strong>白日梦</strong>:<br>做了一个让我笑醒的梦<br>好想和你说<br><code>Thu Aug 18 22:19</code></p>
<hr>
<p><strong>浪矢杂货店</strong>:<br>很多时候<br>你一直都知道自己想要的是什么<br>只是不敢承认<br>所以我喜欢抛硬币来解决问题<br>在抛出的一瞬间 答案就明了了<br><code>Mon Aug 22 23:45</code></p>
<hr>
<p><strong>张家界</strong><br><img src="http://ob4a6y748.bkt.clouddn.com/yun3.jpg" alt="玻璃桥"><br>心心念念的玻璃桥<br><code>Sun Aug 28 15:19</code></p>
<hr>
<h1 id="Sep"><a href="#Sep" class="headerlink" title="Sep"></a>Sep</h1><hr>
<p><strong>NCU</strong><br>走的时候没有向林純瓊老师道别真是有点遗憾呐<br><code>Tue Sep 13 15:45</code></p>
<hr>
<p><strong>迅羽</strong><br>一年了<br>羽毛想你啊<br><code>Sun Sep 25 22:10</code></p>
<hr>
<p><strong>RE0</strong><br>雷姆雷姆<br>剑圣剑鬼<br><code>Mon Sep 26 11:00</code></p>
<hr>
<h1 id="Oct"><a href="#Oct" class="headerlink" title="Oct"></a>Oct</h1><hr>
<p><strong>白日梦</strong><br>假期白天不睡觉<br>大挑战<br><code>Wed Oct 5 16:23</code></p>
<hr>
<p><strong>十月</strong><br>兔子<br>这里下雪了~<br><code>Sat Oct 22 11:39</code></p>
<hr>
<h1 id="Nov"><a href="#Nov" class="headerlink" title="Nov"></a>Nov</h1><hr>
<p><strong>十一月</strong><br>没有工作日 没有休息日 没有万圣节<br>只有两只蜂 计 和 编<br>嗡嗡嗡嗡嗡嗡</p>
<p>ys收到村上春树的书了, 两年的约定兑现了呢.<br><code>Tue Nov 1 23:00</code></p>
<hr>
<p><strong>科学的电磁炮</strong><br><img src="http://ob4a6y748.bkt.clouddn.com/dcp.png" alt="dcp"><br>yoooo</p>
<p><24小时学会电磁炮><br><code>Wed Nov 2 16:01</code></24小时学会电磁炮></p>
<hr>
<p><strong>白日梦</strong><br>特别怀念在台湾那些闲散的时光<br>有阳光和树影<br><code>Thu Nov 3 11:29</code></p>
<hr>
<p><strong>白日梦</strong><br>从未知到一知半解是很容易的, 从一知半解再到已知却需要花费大量的精力.<br>而人都会有规避危险的意识, 就像走在高压电箱前会停下, 因为怕被电到.<br>于是就保持着一知半解的状态,止步不前.<br><code>Fri Nov 11 14:34</code></p>
<hr>
<p><strong>白日梦</strong><br><a href="http://music.163.com/#/song?id=29043460" target="_blank" rel="external">プラスティックとレイン</a><br>很想回去<br><code>Sat Nov 12 19:04</code></p>
<hr>
<p><strong>大清早</strong><br>和00聊了会儿<br>好久不见她<br>貌似发生了什么事情<br>希望她好起来吧<br><code>Wed Nov 16 08:17</code></p>
<hr>
<p><strong>白日梦</strong><br>下午和清河阿尔法小溪跑车了<br>兔子.好想你<br><code>Fri Nov 18 20:15</code></p>
<hr>
<p><strong>雪</strong><br><img src="http://ob4a6y748.bkt.clouddn.com/xx11768779376.jpg" alt="x"><br><img src="http://ob4a6y748.bkt.clouddn.com/xx2-1829678333.jpg" alt="x"><br><img src="http://ob4a6y748.bkt.clouddn.com/xx3-1207002342.jpg" alt="x"><br><img src="http://ob4a6y748.bkt.clouddn.com/xx4-2091906432.jpg" alt="x"><br><code>Sat Nov 19 17:44</code></p>
<hr>
<p><strong>浮生未歇</strong><br><a href="http://music.163.com/#/song/409650845?userid=111365099" target="_blank" rel="external">不如就此相忘于尘世间</a></p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=409650845&auto=0&height=66"></iframe>

<p><code>Sun Nov 20 10:58</code></p>
<hr>
<p><strong>酱油</strong><br>昨天下午酱油找我帮他媳妇做题<br>哼这家伙 和他媳妇还挺同步的<br>真好啊<br>然后<br>然后<br>我问他知不知道兔子在哪<br>他居然不知道兔子是谁~(白痴兔hhh)<br>然后告诉他是酱油他才知道2333<br>他说<br>他帮我问吧<br>等他回复的时候, 我期待他问不到的. (真是奇怪)<br>还是想等兔子告诉我啊<br>等不到吧<br>= =<br>晚安<br><code>Mon Nov 21 01:20</code></p>
<hr>
<p><strong>兔子,你在哪</strong><br>又下大雪了呢<br>你那里呢<br><code>Mon Nov 21 01:28</code></p>
<hr>
<p><strong>冷</strong><br>太冷了！！怎么可以这么冷<br><code>Mon Nov 21 07:16</code></p>
<hr>
<p><strong>白日梦</strong><br>从游侠变成了黑棉<br>好像又错过了呢<br><code>Mon Nov 21 22:12</code></p>
<hr>
<p><strong>白日梦</strong><br>这学期头一回去网吧<br>跑了两个小时第一<br>太嗨了<br><code>Tue Nov 22 23:59</code></p>
<hr>
<p><strong>云</strong><br>想到了一个能同步的方法~<br><code>Mon Nov 28 08:35</code></p>
<hr>
<p><strong>白日梦</strong><br>一冲动又买了个没用的东西<br>不过开心2333<br><code>Mon Nov 28 15:18</code></p>
<hr>
<p><strong>白日梦</strong><br>感觉现在网易云音乐给每个人的推荐都一样<br>我们已经被网易云养成啦~<br><code>Mon Nov 28 18:05</code></p>
<hr>
<p><strong>白日梦</strong><br>曾经习以为常的日子<br>现在满脑子都是它<br><code>Tue Nov 29 09:22</code></p>
<hr>
<h1 id="Dec"><a href="#Dec" class="headerlink" title="Dec"></a>Dec</h1><hr>
<p><strong>白日梦</strong><br>那么多人都渐渐和你走散<br>真是无奈<br><code>Thu Dec 1 00:25</code></p>
<hr>
<p><strong>白日梦</strong><br>春困秋乏夏无力冬日正好眠<br><code>Thu Dec 1 08:37</code></p>
<hr>
<p><strong>白日梦</strong><br>还是忍不住把机票买了ohhhh<br>房间也在airbnb选好了<br><code>Sun Dec 4 11:01</code></p>
<hr>
<p><strong>不能说的秘密</strong><br>从琴房到教室的距离<br>一共一百零八步<br><code>Sun Dec 4 22:07</code></p>
<hr>
<p><strong>白日梦</strong><br>这两天都是一睡一下午<br>梦里面设计了一个游戏<br>然后一直在和室友聊盈利模式<br>奇怪的梦<br><code>Mon Dec 5 16:27</code></p>
<hr>
<p><strong>白日梦</strong><br>原来这么多年握笔的方法都是错的啊哼╭(╯^╰)╮</p>
<blockquote>
<p>握笔口诀如下：—抵二压三衬托，指实掌虚腕灵活，角度适宜方向正，笔画轻重细琢磨。</p>
</blockquote>
<p>虽然换了握笔方式之后感觉使不出劲 = =<br>但是写‘七‘字的那一长划比原来好写了诶</p>
<p>最喜欢写’至‘字了</p>
<p><code>Tue Dec 6 19:53</code></p>
<hr>
<p><strong>白日梦</strong><br>这个梦。。<br>梦里我和兔子坐在一张圆桌边，还有其他人<br>要分开了<br>就像小学时同桌要调座位那样分开<br>在梦里哭得好难受</p>
<p><code>Wen Dec 7 05:47</code></p>
<hr>
<p><strong>白日梦</strong></p>
<blockquote>
<p>“人总是要分的，而且还会越分越远，见不着面，摸不着人，想得你抓心饶肝的，可是咱也在长啊，个越来越高，能耐越来越大，到时候想见谁就见谁，总有一天你会发现，从天南到海北就是一抬腿的距离。”</p>
</blockquote>
<p><code>Wen Dec 7 05:55</code></p>
<hr>
<p><strong>云免流</strong></p>
<p>通过服务器代理，把所有的请求都发到服务器137或者138端口，使运营商对这些流量不计费。<br>这么简单就能有无限免费流量的方法，能用多久呢？<br><em>脑补吾王偏头</em><br>已经不想再用wifi 了(〃’▽’〃) </p>
<p><code>Sun Dec 12 14:48</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>学习docker<br>简直是打开了新世界的大门~</p>
<p><code>Thu Dec 15 09:41</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>TGG 决赛<br>恭喜博哥又拿到一个冠军~</p>
<p><code>Sat Dec 17 22:29</code></p>
<hr>
<p><strong>圣女贞德</strong></p>
<p>「哦，上帝创造了这美丽的尘世。可是，什么时候这人间才能准备好，迎接您的圣徒们呢？还要多久啊。哦，主啊，还要多久啊？」</p>
<p>摘自：《圣女贞德》 — 〔英〕萧伯纳</p>
<p><code>Sun Dec 18 00:24</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>全班<br>日租房<br>狼人杀<br>火影<br>火锅<br>还有<br>学了四川麻将(*￣︶￣)</p>
<p>嗨呀</p>
<p><code>Mon Dec 19 02:09</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>We were 10 and cute,<br>we are 30 and angry.</p>
<p><code>Mon Dec 19 13:29</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>宜宾到萍乡的学生票居然不让取<br>白跑一趟火车站 =.=</p>
<p>更新：<br>第二次去拿到啦2333</p>
<p><code>Wed Dec 21 16:43</code></p>
<hr>
<p><strong>Christmas</strong></p>
<p>昨晚是平安夜<br>。<br>。<br>。<br>请警长决定发言顺序~~</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=30569077&auto=0&height=66"></iframe>

<p><code>Sun Dec 25 19:07</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>一二月份是大二上，还在恋爱期，每天逃课，吃串串香，逛凯德。<br>直到放假发生那件事。<br>春夏在台湾‘度假’；认识了很可爱的人。<br>回来以后沈阳实习，分手。<br>暑假，浑浑噩噩，无迹可寻。<br>再开学已经是大三，考研的考研，比赛的比赛，不知不觉已被人落下了许多。<br>几次想要补修课程，不得。罢了，好好的学这学期的课吧，希望期末能有个好成绩。<br>圣诞节也没有想问候的人了。过什么节也和我没有关系。<br>过我自己的便是了。<br>这一年越来越反感社交，不愿和人聊天，不愿去保持一段关系。<br>就算是qq 聊天也生怕说错话，聊天框里的字打了又删，哎，还是发表情吧<code>^_^</code></p>
<p>放假是打算去宜宾的<br>但是还没给自己找到理由啊，只是想去。<br>会不会打扰兔子呢<br>不知道<br>不要告诉她吧<br>已经半年了啊，还是很想她的。<br>可是这么冒然的过去<br>只是为了自己的话，很自私吧</p>
<p>明年怎么办呐<br>要准备考研吗<br>下学期我还得补修五门课呢，会很忙，没有时间准备考研的<br>说到底我是不愿意考研<br>可是为什么<br>不喜欢继续在学校学习，还是害怕为考研付出努力</p>
<p>如果不考研的话<br>实习吧，目前的技术栈也就是前端-react-后端-nodejs，apue 才看一点根本派不上用场。<br>可能只能做前端了，可是并不喜欢= =<br>尴尬</p>
<p>这日子过地这么纠结呢= =</p>
<p>还是有好的事情的啊！</p>
<ul>
<li>对linux，网络的了解加深</li>
<li>网站，爬虫，小工具什么的做了不少</li>
<li>将拿到第一个项目的3000块</li>
<li>能去宜宾玩呀，吃四川火锅～燃面～猪儿耙～</li>
<li>写字帖成了习惯，谢谢兔子呢（虽然实际写的字还是不好看QAQ）</li>
<li>有喜欢的巧克力，domori chuao 70%，royce 生巧</li>
</ul>
<p>呐 好好复习<br>过个愉快的寒假吧～ 最后一个哟</p>
<p><code>Mon Dec 26 00:00</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>一个学妹晨练打卡不够，重修什么的会影响去台湾交换啊<br>然后帮她改了打卡次数<br>呐 祝你明年在台湾玩的开心～</p>
<p><code>Tue Dec 27 21:14</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>又是一个奇怪的梦<br>跨江大桥，没有云，没有风，一张小板凳，兔子坐在左边，我坐在右边。<br>聊了很久，然后我们从一头走到另一头。</p>
<p><code>Wed Dec 28 09:38</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>考完了服务学，编译还没出成绩。<br>这几天都不能静下心来，无论做什么事。<br>像是刚住进树洞里的人，只能抬头看鸟儿飞过，看日出日落。</p>
<p><code>Wed Dec 28 21:19</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>在断头台上，死刑犯是不想死的，但是呢，他又得期望刽子手能一刀致命，要不然还得来第二下。<br>oh</p>
<p><code>Wed Dec 28 21:50</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>小孩子才会有错过和扭捏</p>
<p><code>Wed Dec 28 22:13</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>晚上在教室看完了《局外人》<br>出来买了一瓶阿萨姆奶茶，是热的诶~<br>出致知楼的时候看见雪花在灯光照射下blin blin 的闪</p>
<p><code>Wed Dec 28 22:47</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>付出了一个月心血的编译实验，最后答辩给0 分呢</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=316517&auto=0&height=66"></iframe>

<p><code>Thu Dec 39 16:54</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>梦见自己到超市买馒头，购物篮塞的好满好满，乐得笑出声<br>然后笑醒了<br>QAQ？！</p>
<p><code>Fri Dec 30 16:28</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>诶？！<br>看兔子的信息的时候点到申请好友了？？！！<br>QAQ</p>
<p><code>Sat Dec 31 23:23</code></p>
<hr>
<p><strong>白日梦</strong></p>
<p>17 年咯<br>随意的定下三个应该大概可能会实现的小目标～</p>
<ul>
<li>练字</li>
<li>阅读两本英文小说</li>
<li>用c或者c++写一个高性能的http 代理服务器</li>
</ul>
<p><code>Sun Jan 1 09:28</code></p>
]]></content>
    </entry>
    
  
  
</search>

<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[服务学概论-笔记]]></title>
      <url>https://beim.github.io/2016/11/02/%E6%9C%8D%E5%8A%A1%E5%AD%A6%E6%A6%82%E8%AE%BA-%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h1 id="1"><a href="#1" class="headerlink" title="1"></a>1</h1><p>什么是现代服务业</p>
<ul>
<li>基础服务 (通信服务和信息服务)</li>
<li>生产服务 (制造服务, 产品服务, 物流, 金融等)</li>
<li>生活服务 (医疗\保健, 教育, 旅游, 住宿)</li>
<li>公共服务 (政府的公共管理服务, 基础教育, 公共卫生)</li>
</ul>
<hr>
<h2 id="现代服务业的发展趋势"><a href="#现代服务业的发展趋势" class="headerlink" title="现代服务业的发展趋势"></a>现代服务业的发展趋势</h2><ul>
<li><p>服务外包 (将非核心的业务外包出去)</p>
</li>
<li><p>服务聚合 (将分散的,相互独立的服务整合在一起, 形成新的服务, 创造新的服务价值.)(例如: 百度地图, 优酷, 淘宝, 百度)<br><strong>BIRIS 模式</strong>(Bilateral Resource Integrated Service)<br>一种基于第三方的双边顾客资源整合的服务聚合创新模式</p>
</li>
<li><p>服务虚拟化, 万物皆服务(EaaS)(将实体服务变为虚拟服务, 例如: 云计算)</p>
<blockquote>
<p>遗存系统(legacy system)<br>适配器(接口)<br>Human as a Service</p>
</blockquote>
</li>
<li><p>社会化, 位置化移动化(<strong>SOLOMO</strong>, Social, Local, Mobile, 社交 + 位置化/本地化 + 移动)(例如: 微信, 支付宝, 微博)<br>SoLoMo + 娱乐 =&gt; 改写社交<br>SoLoMo + O2O =&gt; 改写零售</p>
</li>
</ul>
<hr>
<h2 id="服务案例"><a href="#服务案例" class="headerlink" title="服务案例"></a>服务案例</h2><p><strong>案例: 物流服务</strong><br>第一方物流/第二方物流(产商, 客户)<br>第三方物流(顺丰, 申通)<br>第四方物流(菜鸟物流)</p>
<p><strong>案例: 航空售票服务</strong><br>机票直销<br>机票代售点<br>第三方代理商(携程: 客户-航空公司)<br>第四方代理商(去哪儿: 客户-第三方/代售点)</p>
<blockquote>
<p>中航信</p>
</blockquote>
<p><strong>案例: 呼叫中心服务</strong><br>专家:有高技能的人守在电话旁(1970)<br>工具: 接线员无需高技能, 使用FAQ手册(1980)<br>市场: 低成本外包(在印度建立呼叫中心)(2000)<br>Automate(2010)</p>
<p><strong>案例: 商品零售服务</strong><br>小卖店<br>百货商店<br>连锁店<br>大型连锁超市</p>
<p><strong>案例: 在线信息共享服务</strong><br>论坛<br>BBS<br>博客<br>微博<br>微信</p>
<p><strong>服务外包企业案例: 印度Bangalore 的服务外包</strong><br>基础操作的外包服务<br>中断技能型的外包服务(人力资源, 财务外包)<br>高端智力型外包服务(研发设计, 数据挖掘)</p>
<p><strong>企业服务案例: IBM的IT服务管理</strong><br>从销售大型服务器, 硬件设备, 软件产品的IT厂商<br>转变为<br>全球最大的IT服务提供商</p>
<p><strong>服务聚合企业案例: 携程网</strong><br>机票<br>车票<br>酒店<br>门票</p>
<p><strong>服务聚合企业案例: COSCO(中国远洋物流有限公司)</strong> (中国最大的第三方物流企业)</p>
<blockquote>
<p>海运物流</p>
</blockquote>
<p><strong>EaaS企业案例: 亚马逊</strong><br>从用户书评中挖掘信息<br>开放API, 允许处理用户,收藏列表和购物车, 允许对亚马逊产品目录主要产品的访问, 其他公司或者个人的应用系统可以直接调用Amazon API<br>云基础设施服务, Amazon EC2, S3, SQS</p>
<p><strong>EaaS企业案例: Rolls-Royce的 TotalCare</strong><br>卖产品-&gt; 卖服务</p>
<p><strong>EaaS企业案例: 健康医疗保健服务</strong><br>监控 - 评估 - 规划 - 治疗</p>
<p><strong>SoLoMo企业案例: SNS社交网络服务</strong><br>人人网<br>微信<br>知乎</p>
<p><strong>SoLoMo企业案例: 基于位置的服务LBS</strong><br><a href="http://baike.baidu.com/item/LBS/1742" target="_blank" rel="external">LBS</a><br>Foursquare 街旁 在哪等待</p>
<p><strong>SoLoMo企业案例: 情境感知的服务</strong><br>通过传感器采集服务对象的情境信息<br>根据情境信息判断对象的状态, 提供响应的服务</p>
<p><strong>SoLoMo企业案例: 面向云服务交付的移动应用</strong><br>典型代表: 云手机(阿里, 华为), 用友移动mERP</p>
<p><strong>SoLoMo企业案例: LBS+购物信息推送</strong><br>美团, 大众点评</p>
<p><strong>SoLoMo企业案例: 地铁虚拟货架</strong></p>
<p><strong>SoLoMo企业案例: SNS+电子商务服务</strong><br>微商</p>
<h2 id="服务的概念-特征与分类"><a href="#服务的概念-特征与分类" class="headerlink" title="服务的概念, 特征与分类"></a>服务的概念, 特征与分类</h2><h3 id="服务概念"><a href="#服务概念" class="headerlink" title="服务概念"></a>服务概念</h3><p>Philip Kotler: 服务是一方向另一方提供的任意活动或好处. 它是不可触知的, 不形成所有权问题, 其生产可能与物质产品有关, 也可能无关.</p>
<p>ISO 9004-2: 服务是为满足客户需要, 供方与顾客接触的活动和供方内部活动所产生的结果</p>
<p>其他: 服务是供应商与客户协同工作以转换某对象(如商品, 信息)的<strong>状态</strong>, 这些客户具有某种隶属关系.</p>
<p>其他: 服务是一种客户直接参与其中作为合作生产者的时间<strong>易逝性</strong>的无形体验.<br>(水杯是产品, 水杯可供人喝水是服务)</p>
<p>服务: 一种促进顾客发生”改变” 的过程, 这种”改变” 包括物理的和无形的占有物的状态改善</p>
<p>“IT使能业务服务” 常用服务运作模型和计费模式来刻画.</p>
<h3 id="服务的分类模式"><a href="#服务的分类模式" class="headerlink" title="服务的分类模式"></a>服务的分类模式</h3><h3 id="服务与产品的区别"><a href="#服务与产品的区别" class="headerlink" title="服务与产品的区别"></a>服务与产品的区别</h3><h3 id="软件服务-software-services"><a href="#软件服务-software-services" class="headerlink" title="软件服务(software services)"></a>软件服务(software services)</h3>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[红城堡-渡边淳一]]></title>
      <url>https://beim.github.io/2016/11/01/%E7%BA%A2%E5%9F%8E%E5%A0%A1-%E6%B8%A1%E8%BE%B9%E6%B7%B3%E4%B8%80/</url>
      <content type="html"><![CDATA[<p><img src="https://img3.doubanio.com/lpic/s28069096.jpg" alt="hcb"></p>
<blockquote>
<p>爱与性都没有的时候</p>
</blockquote>
<a id="more"></a>
<p><a href="https://book.douban.com/subject/26384630/" target="_blank" rel="external">豆瓣读书</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[富士山禁恋-松本清张]]></title>
      <url>https://beim.github.io/2016/11/01/%E5%AF%8C%E5%A3%AB%E5%B1%B1%E7%A6%81%E6%81%8B-%E6%9D%BE%E6%9C%AC%E6%B8%85%E5%BC%A0/</url>
      <content type="html"><![CDATA[<p><img src="https://img3.doubanio.com/lpic/s24401753.jpg" alt="fss"></p>
<blockquote>
<p>面对注定绝望的爱情, 我们又能怎么办</p>
</blockquote>
<a id="more"></a>
<p><a href="https://book.douban.com/subject/7153418/" target="_blank" rel="external">豆瓣读书</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2013-蓝色茉莉]]></title>
      <url>https://beim.github.io/2016/11/01/2013-%E8%93%9D%E8%89%B2%E8%8C%89%E8%8E%89/</url>
      <content type="html"><![CDATA[<p><img src="http://img31.mtime.cn/pi/2014/01/10/162701.70021676_1000X1000.jpg" alt="lsml"></p>
<blockquote>
<p>看到服务员了吗, 我还想要杯斯特利*马提尼</p>
</blockquote>
<a id="more"></a>
<p><img src="http://img31.mtime.cn/pi/2014/01/10/162712.28434029_1000X1000.jpg" alt="lsml"></p>
<p><img src="http://img31.mtime.cn/pi/2013/06/28/143646.97680358_1000X1000.jpg" alt="lsml"></p>
<p><img src="http://img31.mtime.cn/pi/2013/08/09/101710.91218653_1000X1000.jpg" alt="lsml"></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[那些尝过的巧克力]]></title>
      <url>https://beim.github.io/2016/11/01/%E9%82%A3%E4%BA%9B%E5%B0%9D%E8%BF%87%E7%9A%84%E5%B7%A7%E5%85%8B%E5%8A%9B/</url>
      <content type="html"><![CDATA[<h1 id="MOSER-ROTH"><a href="#MOSER-ROTH" class="headerlink" title="MOSER ROTH"></a>MOSER ROTH</h1><p><img src="http://ob4a6y748.bkt.clouddn.com/moser-roth-1470272806.jpg" alt="moser-roth"><br><img src="http://ob4a6y748.bkt.clouddn.com/moser-roth-1882366841.jpg" alt="mosere-roth"><br><img src="http://ob4a6y748.bkt.clouddn.com/moser-roth-1573414625.jpg" alt="moser-roth"></p>
<p>一盒5块，每块25克。<br>初尝黑巧，70%，拆开有香味，第一块吃起来感觉很苦。吃第二块的时候感觉苦然后酸，再然后就是酸和甜的味道。</p>
<p>85%  比70%的更硬。卧槽太苦了。<br>好吧这种程度的苦还是可以接受的，吃完之后有回甘。</p>
<h1 id="DOMORI"><a href="#DOMORI" class="headerlink" title="DOMORI"></a>DOMORI</h1><p><img src="http://ob4a6y748.bkt.clouddn.com/domori-1776829436.jpg" alt="DOMORI"><br><img src="http://ob4a6y748.bkt.clouddn.com/domori-2080594587.jpg" alt="domori"></p>
<p>Puertofino 70%<br>每块25g  可以切分成4个小块 吃起来很方便<br>酸味+可可的醇香  和MOSER ROTH 70%比起来酸度更高一些<br>真。入口即化<br>生津效果非常明显</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[note-Beej-Network-Programming]]></title>
      <url>https://beim.github.io/2016/10/20/note-Beej-Network-Programming/</url>
      <content type="html"><![CDATA[<h1 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h1><hr>
<h1 id="What-is-a-socket"><a href="#What-is-a-socket" class="headerlink" title="What is a socket?"></a>What is a socket?</h1><p>“Stream Sockets” and “Datagram Sockets” , which may be referred to as <code>SOCK_STRAM</code> and <code>SOCK_DGRAM</code><br>Datagram sockets are sometimes called “connectionless sockets”. (Though they can be <code>connect()</code>‘d if you really want)</p>
<hr>
<h1 id="IP-Addresses-structs-and-Data-Munging-转换"><a href="#IP-Addresses-structs-and-Data-Munging-转换" class="headerlink" title="IP Addresses, structs, and Data Munging(转换)"></a>IP Addresses, structs, and Data Munging(转换)</h1><h2 id="ipv6"><a href="#ipv6" class="headerlink" title="ipv6"></a>ipv6</h2><p>ipv6, 128 bits,  Lots of times with lots of zeros in it, and can be compressed between two colons.<br>For instance:<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">2001</span>:<span class="number">0</span><span class="attribute">db8</span>:<span class="attribute">c9d2</span>:<span class="number">0012</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0051</span></div><div class="line"><span class="number">2001</span>:<span class="attribute">db8</span>:<span class="attribute">c9d2</span>:<span class="number">12</span>::<span class="number">51</span></div><div class="line"></div><div class="line"><span class="number">2001</span>:<span class="number">0</span><span class="attribute">db8</span>:<span class="attribute">ab00</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span></div><div class="line"><span class="number">2001</span>:<span class="attribute">db8</span>:<span class="attribute">ab00</span>::</div><div class="line"></div><div class="line"># It<span class="string">'s loopback address, It always means "this machine I'</span>m running on now"</div><div class="line"><span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0000</span>:<span class="number">0001</span></div><div class="line">::<span class="number">1</span></div><div class="line"></div><div class="line"># there's an ipv4-compatibility mode for ipv6 <span class="attribute">addresses</span></div><div class="line">::<span class="attribute">ffff</span>:<span class="number">192.0</span>.<span class="number">2.33</span></div></pre></td></tr></table></figure></p>
<hr>
<h2 id="subnets"><a href="#subnets" class="headerlink" title="subnets"></a>subnets</h2><figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="number">192.0</span>.<span class="number">2.12</span> <span class="built_in">AND</span> <span class="number">255.255</span>.<span class="number">255.0</span></div><div class="line">=&gt;</div><div class="line"><span class="number">192.0</span>.<span class="number">2.0</span> (<span class="number">255.255</span>.<span class="number">255.0</span>)</div><div class="line"></div><div class="line"># <span class="built_in">or</span></div><div class="line"><span class="number">192.0</span>.<span class="number">2.12</span>/<span class="number">24</span></div><div class="line"></div><div class="line"># for ipv6</div><div class="line"><span class="symbol">2001:db8</span><span class="symbol">:</span><span class="symbol">:</span>/<span class="number">32</span></div><div class="line"><span class="built_in">or</span></div><div class="line"><span class="symbol">2001:db8</span><span class="symbol">:5413</span><span class="symbol">:4028</span><span class="symbol">:</span><span class="symbol">:9</span>db9/<span class="number">64</span></div></pre></td></tr></table></figure>
<hr>
<h2 id="Byte-Order"><a href="#Byte-Order" class="headerlink" title="Byte Order"></a>Byte Order</h2><p>Two byte orderings: Big-Endian, Little-Endian<br>If you want to represent thw two-byte hex number, say <code>b34f</code>, you’ll store it:<br>Big-Endian : b34f<br>Little-Endian: 4fb3<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="string">`Network Byte Order`</span> </div><div class="line">        =&gt; <span class="string">`Big-Endian Order`</span></div><div class="line"><span class="string">`Host Byte Order`</span></div><div class="line">        =&gt; <span class="string">`Little-Endian Order`</span> (Intel or Intel-compatible processor)</div><div class="line">        =&gt; <span class="string">`Big-Endian`</span></div></pre></td></tr></table></figure></p>
<p>These function will do the magic conversion between <code>Network Byte Order</code> and <code>Host Byte Order</code></p>
<ul>
<li>htons()   host to network short (two bytes)</li>
<li>htonl()   host to network long (four bytes)</li>
<li>ntohs()   network to host short </li>
<li>ntohl()   network to host long</li>
</ul>
<hr>
<h2 id="struct"><a href="#struct" class="headerlink" title="struct"></a>struct</h2><p>socket descriptor =&gt; <strong>int</strong></p>
<p><strong>struct addrinfo</strong> . It’s used to prep the socket address structures for subsequent use. It’s also used in host name lookups, and service name lookups.<br><figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">addrinfo</span></span> &#123;</div><div class="line">    <span class="keyword">int</span>              ai_flags;     <span class="comment">// AI_PASSIVE, AI_CANONNAME, etc.</span></div><div class="line">    <span class="keyword">int</span>              ai_family;    <span class="comment">// AF_INET, AF_INET6, AF_UNSPEC</span></div><div class="line">    <span class="keyword">int</span>              ai_socktype;  <span class="comment">// SOCK_STREAM, SOCK_DGRAM</span></div><div class="line">    <span class="keyword">int</span>              ai_protocol;  <span class="comment">// use 0 for "any"</span></div><div class="line">    size_t           ai_addrlen;   <span class="comment">// size of ai_addr in bytes</span></div><div class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr</span></span> *ai_addr;      <span class="comment">// struct sockaddr_in or _in6</span></div><div class="line">    <span class="keyword">char</span>            *ai_canonname; <span class="comment">// full canonical hostname</span></div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">addrinfo</span></span> *ai_next;      <span class="comment">// linked list, next node</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>You’ll load this struct up a bit, and then call getaddrinfo(). It’ll return a pointer to a new linked list of these structures filled out with all the goodies you need;</p>
<p><strong>struct sockaddr</strong><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> sockaddr &#123;</div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">short</span>    sa_family;    <span class="comment">// address family, AF_xxx</span></div><div class="line">    <span class="keyword">char</span>              sa_data[<span class="number">14</span>];  <span class="comment">// 14 bytes of protocol address</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><code>sa_family</code> can be a variety of things, but it’ll be <code>AF_INET</code>(ipv4) or <code>AF_INET6</code>(ipv6) in this document.<br><code>sa_data</code> contains a destination address and port number for the socket.<br>This is rather unwieldy since you don’t want to tediously pack the address in the <code>sa_data</code> by hand.<br>To deal with this, programmers created a parallel structure: <code>struct sockaddr_in</code>(‘in’ for ‘internet’) to be used with <code>ipv4</code></p>
<blockquote>
<p>And this is the <strong>important</strong> bit: a pointer to a <code>struct sockaddr_in</code> can be cast to a pointer to a <code>struct sockaddr</code> and vice-versa. So even though <code>connect()</code> wants a <code>struct sockaddr*</code>, you can still use a <code>struct sockaddr_in</code> and cast it at the last minute</p>
</blockquote>
<p><strong>struct sockaddr_in</strong><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// (IPv4 only--see struct sockaddr_in6 for IPv6)</span></div><div class="line"></div><div class="line"><span class="keyword">struct</span> sockaddr_in &#123;</div><div class="line">    <span class="keyword">short</span> <span class="keyword">int</span>          sin_family;  <span class="comment">// Address family, AF_INET</span></div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">short</span> <span class="keyword">int</span> sin_port;    <span class="comment">// Port number</span></div><div class="line">    <span class="keyword">struct</span> in_addr     sin_addr;    <span class="comment">// Internet address</span></div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span>      sin_zero[<span class="number">8</span>]; <span class="comment">// Same size as struct sockaddr, It's included to pad the structure to the length of `struct sockaddr`</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><code>sin_zero</code> shouled be set to all zeros with the function <strong>memset()</strong><br><code>sin_family</code> corresponds to <code>sa_family</code> in a <code>struct sockaddr</code> and should be set to <code>AF_INET</code><br><code>sin_port</code> must be in <em>Network Byte Order</em> (by using <strong>htons()</strong>)</p>
<p><code>sin_addr</code> is a <code>struct in_addr</code><br><figure class="highlight thrift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// (IPv4 only--see struct in6_addr for IPv6)</span></div><div class="line"></div><div class="line"><span class="comment">// Internet address (a structure for historical reasons)</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">in_addr</span> </span>&#123;</div><div class="line">    uint32_t s_addr; <span class="comment">// that's a 32-bit int (4 bytes)</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>So if you have declared <code>ina</code> to be of type <code>struct sockaddr_in</code> then <code>ina.sin_addr.s_addr</code> references the 4-byte IP address(in Network Byte Order).</p>
<p>What about ipv6, see <strong>sockaddr_in6</strong><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// (IPv6 only--see struct sockaddr_in and struct in_addr for IPv4)</span></div><div class="line"></div><div class="line"><span class="keyword">struct</span> sockaddr_in6 &#123;</div><div class="line">    <span class="keyword">u_int16_t</span>       sin6_family;   <span class="comment">// address family, AF_INET6</span></div><div class="line">    <span class="keyword">u_int16_t</span>       sin6_port;     <span class="comment">// port number, Network Byte Order</span></div><div class="line">    <span class="keyword">u_int32_t</span>       sin6_flowinfo; <span class="comment">// IPv6 flow information</span></div><div class="line">    <span class="keyword">struct</span> in6_addr sin6_addr;     <span class="comment">// IPv6 address</span></div><div class="line">    <span class="keyword">u_int32_t</span>       sin6_scope_id; <span class="comment">// Scope ID</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> in6_addr &#123;</div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span>   s6_addr[<span class="number">16</span>];   <span class="comment">// IPv6 address</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><strong>struct sockaddr_storage</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> sockaddr_storage &#123;</div><div class="line">    <span class="keyword">sa_family_t</span>  ss_family;     <span class="comment">// address family</span></div><div class="line"></div><div class="line">    <span class="comment">// all this is padding, implementation specific, ignore it:</span></div><div class="line">    <span class="keyword">char</span>      <span class="number">__</span>ss_pad1[<span class="number">_</span>SS_PAD1SIZE];</div><div class="line">    <span class="keyword">int64_t</span>   <span class="number">__</span>ss_align;</div><div class="line">    <span class="keyword">char</span>      <span class="number">__</span>ss_pad2[<span class="number">_</span>SS_PAD2SIZE];</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p><code>struct sockaddr_storage</code> is designed to be large enough to hold both ipv4 and ipv6 structures. So you can pass this parallel structure to some calls and then cast it to the type you need;</p>
<p>You can see the addrees family <code>ss_family</code> field - check this to see if it’s <code>AF_INET</code> or <code>AF_INET6</code>, Then you can cast it to a <code>struct sockaddr_in</code> or <code>struct sockaddr_in6</code> if you wanna.</p>
<hr>
<h2 id="IP-Addresses"><a href="#IP-Addresses" class="headerlink" title="IP Addresses"></a>IP Addresses</h2><p>if you want to convert 10.12.110.57 to sa.sin_addr<br>use <strong>inet_pton()</strong>, which converts IP address in numbers-and-dots notation into either a <code>struct in_addr</code> or <code>struct in6_addr</code> depending on whether you specify <code>AF_INET</code> or <code>AF_INET6</code>  (<code>pton</code> stands for presentation to network - you can call it printable to network.)<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> sockaddr_in sa; <span class="comment">// IPv4</span></div><div class="line"><span class="keyword">struct</span> sockaddr_in6 sa6; <span class="comment">// IPv6</span></div><div class="line"></div><div class="line">inet_pton(AF_INET, <span class="string">"10.12.110.57"</span>, &amp;(sa.sin_addr)); <span class="comment">// IPv4</span></div><div class="line">inet_pton(AF_INET6, <span class="string">"2001:db8:63b3:1::3490"</span>, &amp;(sa6.sin6_addr)); <span class="comment">// IPv6</span></div></pre></td></tr></table></figure></p>
<p>(the old way of doing things used a function called <strong>inet_addr()</strong> or another function called <strong>inet_aton()</strong> these are now absolete and don’t work with ipv6)</p>
<p>if you want to convert sa.sin_addr to 10.12.110.57<br>use <strong>init_ntop()</strong>(means network to presentation, or network to printable) , like this:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// IPv4:</span></div><div class="line"></div><div class="line"><span class="keyword">char</span> ip4[INET_ADDRSTRLEN];  <span class="comment">// space to hold the IPv4 string</span></div><div class="line"><span class="keyword">struct</span> sockaddr_in sa;      <span class="comment">// pretend this is loaded with something</span></div><div class="line"></div><div class="line">inet_ntop(AF_INET, &amp;(sa.sin_addr), ip4, INET_ADDRSTRLEN);</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"The IPv4 address is: %s\n"</span>, ip4);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// IPv6:</span></div><div class="line"></div><div class="line"><span class="keyword">char</span> ip6[INET6_ADDRSTRLEN]; <span class="comment">// space to hold the IPv6 string</span></div><div class="line"><span class="keyword">struct</span> sockaddr_in6 sa6;    <span class="comment">// pretend this is loaded with something</span></div><div class="line"></div><div class="line">inet_ntop(AF_INET6, &amp;(sa6.sin6_addr), ip6, INET6_ADDRSTRLEN);</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"The address is: %s\n"</span>, ip6);</div></pre></td></tr></table></figure></p>
<p>When you call it, you will pass the address type (ipv4 or ipv6), the address, a pointer to a string to hold the result, and the maximum length of that string. (Two macros conveniently hold the size of the string : <code>INET_ADDRSTRLEN</code> and <code>INET6_ADDRSTRLEN</code>)</p>
<p>(the old way of doing things: called <strong>inet_ntoa()</strong>, it’s also absolete and won’t work with ipv6)</p>
<blockquote>
<p>NOTE: These functions only work with numeric IP addresses - they won’t do any nameserver DNS lookup on a hostname, like ‘www.example.com’. You will use <strong>getaddrinfo()</strong> to do that.</p>
</blockquote>
<hr>
<h2 id="Private-Or-Disconnected-Networks"><a href="#Private-Or-Disconnected-Networks" class="headerlink" title="Private (Or Disconnected ) Networks"></a>Private (Or Disconnected ) Networks</h2><p>ipv4: 10.x.x.x 192.168.x.x 172.y.x.x   x is 0-255  y is 16-31<br>ipv6: fsxx: (or maybe in the future fcXX:), as per <a href="http://tools.ietf.org/html/rfc4193" target="_blank" rel="external">RFC 4193</a></p>
<hr>
<h1 id="Jumping-from-ipv4-to-ipv6"><a href="#Jumping-from-ipv4-to-ipv6" class="headerlink" title="Jumping from ipv4 to ipv6"></a>Jumping from ipv4 to ipv6</h1><p><a href="http://beej.us/guide/bgnet/output/html/multipage/ip4to6.html" target="_blank" rel="external">Beej’s Guide</a></p>
<hr>
<h1 id="System-Calls-or-Bust"><a href="#System-Calls-or-Bust" class="headerlink" title="System Calls or Bust"></a>System Calls or Bust</h1><h2 id="getaddrinfo-Prepare-to-launch"><a href="#getaddrinfo-Prepare-to-launch" class="headerlink" title="getaddrinfo() ; Prepare to launch"></a>getaddrinfo() ; Prepare to launch</h2><p>It helps set up the <code>structs</code> you need later on.</p>
<p>HISTORY: it used to be that you would use a function called <strong>gethostbyname()</strong> to do DNS lookups. Then you’d load that information by hand into a <code>struct sockaddr_in</code>, and use that in calls.</p>
<p>This is no longer necessary, you now have the function <strong>getaddrinfo()</strong> that does all kinds of good stuff for you, including DNS and service name lookups, and fills out the <code>structs</code> you need, besides!</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="built_in">int</span> getaddrinfo(<span class="keyword">const</span> char *node,     // e.g. <span class="string">"www.example.com"</span> <span class="literal">or</span> IP</div><div class="line">                <span class="keyword">const</span> char *service,  // e.g. <span class="string">"http"</span> <span class="literal">or</span> port <span class="built_in">number</span></div><div class="line">                <span class="keyword">const</span> struct addrinfo *hints,</div><div class="line">                struct addrinfo **res)<span class="comment">;</span></div></pre></td></tr></table></figure>
<p>You give this function three input parameters, and it gives you a pointer to a linked-list, <code>res</code>, of result.</p>
<p>The parameter <code>service</code> can be a port number, like “80”, or the name of a particular service (found in <a href="http://www.iana.org/assignments/port-numbers" target="_blank" rel="external">THE IANA Port List</a> or the <code>/etc/services</code> file) like “http” or “ftp” or whatever.</p>
<p>The <code>hints</code> parameter points to a <code>struct addrinfo</code> that you’ve already filled out with relevant information.</p>
<p>Here’s a sample call if you’re a server who wants to listen on your host’s IP address, port 3490.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> status;</div><div class="line"><span class="keyword">struct</span> addrinfo hints;</div><div class="line"><span class="keyword">struct</span> addrinfo *servinfo;  <span class="comment">// will point to the results</span></div><div class="line"></div><div class="line"><span class="built_in">memset</span>(&amp;hints, <span class="number">0</span>, <span class="keyword">sizeof</span> hints); <span class="comment">// make sure the struct is empty</span></div><div class="line">hints.ai_family = AF_UNSPEC;     <span class="comment">// don't care IPv4 or IPv6, you can set it to AF_INET or AF_INET6 if you want one or the other specifically.</span></div><div class="line">hints.ai_socktype = SOCK_STREAM; <span class="comment">// TCP stream sockets</span></div><div class="line">hints.ai_flags = AI_PASSIVE;     <span class="comment">// fill in my IP for me</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> ((status = getaddrinfo(<span class="literal">NULL</span>, <span class="string">"3490"</span>, &amp;hints, &amp;servinfo)) != <span class="number">0</span>) &#123;</div><div class="line">    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"getaddrinfo error: %s\n"</span>, gai_strerror(status));</div><div class="line">    <span class="built_in">exit</span>(<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// servinfo now points to a linked list of 1 or more struct addrinfos</span></div><div class="line"></div><div class="line"><span class="comment">// ... do everything until you don't need servinfo anymore ....</span></div><div class="line"></div><div class="line">freeaddrinfo(servinfo); <span class="comment">// free the linked-list</span></div></pre></td></tr></table></figure>
<p>The <code>AI_PASSIVE</code> flag tells <strong>getaddrinfo()</strong> to assign the address of my local host to the socket structures. (Or you can put a specific address in as the first parameter to <strong>getaddrinfo()</strong> where I currently have NULL, up there)</p>
<p>If there’s an error (<strong>getaddrinfo()</strong> returns non-zero), we can print it out using the funciont <strong>gai_strerrr()</strong>. If everything works properly, <code>servinfo</code> will point to a linked list of <code>struct addrinfo</code>s, each of which contains a <code>struct sockaddr</code> of some kind that we can use later!</p>
<p>Finally, when we’re all done with the linked list that <strong>getaddrinfo()</strong> allocated for us, we should free it all up with a call to <strong>freeaddrinfo()</strong></p>
<p>Here’s sample call if you’re a client who wants to connect to a particular server, say “www.example.net” port 3490.<br><figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> status;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">addrinfo</span></span> hints;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">addrinfo</span></span> *servinfo;  <span class="comment">// will point to the results</span></div><div class="line"></div><div class="line">memset(&amp;hints, <span class="number">0</span>, <span class="keyword">sizeof</span> hints); <span class="comment">// make sure the struct is empty</span></div><div class="line">hints.ai_family = AF_UNSPEC;     <span class="comment">// don't care IPv4 or IPv6</span></div><div class="line">hints.ai_socktype = SOCK_STREAM; <span class="comment">// TCP stream sockets</span></div><div class="line"></div><div class="line"><span class="comment">// get ready to connect</span></div><div class="line">status = getaddrinfo(<span class="string">"www.example.net"</span>, <span class="string">"3490"</span>, &amp;hints, &amp;servinfo);</div><div class="line"></div><div class="line"><span class="comment">// servinfo now points to a linked list of 1 or more struct addrinfos</span></div><div class="line"></div><div class="line"><span class="comment">// etc.</span></div></pre></td></tr></table></figure></p>
<p>I keep saying that <code>servinfo</code> is a linked list with all kinds of address information.Here is a demo to show off this information. The <a href="http://beej.us/guide/bgnet/examples/showip.c" target="_blank" rel="external">short program</a> will print the IP address for whatever host you specified on the command line. </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">** showip.c -- show IP addresses for a host given on the command line</div><div class="line">*/</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netinet/in.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">struct</span> addrinfo hints, *res, *p;</div><div class="line">    <span class="keyword">int</span> status;</div><div class="line">    <span class="keyword">char</span> ipstr[INET6_ADDRSTRLEN];</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (argc != <span class="number">2</span>) &#123;</div><div class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>,<span class="string">"usage: showip hostname\n"</span>);</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="built_in">memset</span>(&amp;hints, <span class="number">0</span>, <span class="keyword">sizeof</span> hints);</div><div class="line">    hints.ai_family = AF_UNSPEC; <span class="comment">// AF_INET or AF_INET6 to force version</span></div><div class="line">    hints.ai_socktype = SOCK_STREAM;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> ((status = getaddrinfo(argv[<span class="number">1</span>], <span class="literal">NULL</span>, &amp;hints, &amp;res)) != <span class="number">0</span>) &#123;</div><div class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"getaddrinfo: %s\n"</span>, gai_strerror(status));</div><div class="line">        <span class="keyword">return</span> <span class="number">2</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="built_in">printf</span>(<span class="string">"IP addresses for %s:\n\n"</span>, argv[<span class="number">1</span>]);</div><div class="line"></div><div class="line">    <span class="keyword">for</span>(p = res;p != <span class="literal">NULL</span>; p = p-&gt;ai_next) &#123;</div><div class="line">        <span class="keyword">void</span> *addr;</div><div class="line">        <span class="keyword">char</span> *ipver;</div><div class="line"></div><div class="line">        <span class="comment">// get the pointer to the address itself,</span></div><div class="line">        <span class="comment">// different fields in IPv4 and IPv6:</span></div><div class="line">        <span class="keyword">if</span> (p-&gt;ai_family == AF_INET) &#123; <span class="comment">// IPv4</span></div><div class="line">            <span class="keyword">struct</span> sockaddr_in *ipv4 = (<span class="keyword">struct</span> sockaddr_in *)p-&gt;ai_addr;</div><div class="line">            addr = &amp;(ipv4-&gt;sin_addr);</div><div class="line">            ipver = <span class="string">"IPv4"</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// IPv6</span></div><div class="line">            <span class="keyword">struct</span> sockaddr_in6 *ipv6 = (<span class="keyword">struct</span> sockaddr_in6 *)p-&gt;ai_addr;</div><div class="line">            addr = &amp;(ipv6-&gt;sin6_addr);</div><div class="line">            ipver = <span class="string">"IPv6"</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// convert the IP to a string and print it:</span></div><div class="line">        inet_ntop(p-&gt;ai_family, addr, ipstr, <span class="keyword">sizeof</span> ipstr);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"  %s: %s\n"</span>, ipver, ipstr);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    freeaddrinfo(res); <span class="comment">// free the linked list</span></div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Sample run!<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ showip www<span class="selector-class">.example</span><span class="selector-class">.net</span></div><div class="line">IP addresses <span class="keyword">for</span> www<span class="selector-class">.example</span><span class="selector-class">.net</span>:</div><div class="line"></div><div class="line">  IPv4: <span class="number">192.0</span>.<span class="number">2.88</span></div><div class="line"></div><div class="line">$ showip ipv6<span class="selector-class">.example</span><span class="selector-class">.com</span></div><div class="line">IP addresses <span class="keyword">for</span> ipv6<span class="selector-class">.example</span><span class="selector-class">.com</span>:</div><div class="line"></div><div class="line">  IPv4: <span class="number">192.0</span>.<span class="number">2.101</span></div><div class="line">  IPv6: <span class="number">2001</span>:db8:<span class="number">8</span>c00:<span class="number">22</span>::<span class="number">171</span></div></pre></td></tr></table></figure></p>
<hr>
<h2 id="socket-Get-the-File-Descriptor"><a href="#socket-Get-the-File-Descriptor" class="headerlink" title="socket() ; Get the File Descriptor"></a>socket() ; Get the File Descriptor</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="comment">// arguments: ipv4 or ipv6, stream or datagram, and tcp or udp</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">socket</span><span class="params">(<span class="keyword">int</span> domain, <span class="keyword">int</span> type, <span class="keyword">int</span> protocol)</span></span>;</div></pre></td></tr></table></figure>
<p>It used to be people would hardcode these values, and you can absolutely still do that.(<code>domain</code> is <code>PF_INET</code> or <code>PF_INET6</code>, <code>type</code> is <code>SOCK_STREAM</code> or <code>SOCK_DGRAM</code>, and <code>protocol</code> can be set to 0 to choose the proper protocol for the given type. Or you can call <strong>getprotobyname()</strong> to look up the protocol you want, “tcp” or “udp”)</p>
<p>(This <code>PF_INET</code> thing is a close relative of the <code>AF_INET</code>, But the most correct thing to do is to use <code>AF_INET</code> in your <code>struct sockaddr_in</code> and <code>PF_INET</code> in your call to <strong>socket()</strong>)</p>
<p>What you really want to do is use the values from the results of the call to <strong>getaddrinfo()</strong>, and feed them into <strong>socket()</strong> directly like this.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> s;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">addrinfo</span></span> hints, *res;</div><div class="line"></div><div class="line"><span class="comment">// do the lookup</span></div><div class="line"><span class="comment">// [pretend we already filled out the "hints" struct]</span></div><div class="line">getaddrinfo(<span class="string">"www.example.com"</span>, <span class="string">"http"</span>, &amp;hints, &amp;res);</div><div class="line"></div><div class="line"><span class="comment">// [again, you should do error-checking on getaddrinfo(), and walk</span></div><div class="line"><span class="comment">// the "res" linked list looking for valid entries instead of just</span></div><div class="line"><span class="comment">// assuming the first one is good (like many of these examples do.)</span></div><div class="line"><span class="comment">// See the section on client/server for real examples.]</span></div><div class="line"></div><div class="line">s = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);</div></pre></td></tr></table></figure>
<p><strong>socket()</strong> simply returns to you a <code>socket discriptor</code> that you can use in later system calls, or <code>-1</code> on error.</p>
<hr>
<h2 id="bind-What-port-am-I-on"><a href="#bind-What-port-am-I-on" class="headerlink" title="bind() ; What port am I on ?"></a>bind() ; What port am I on ?</h2><p>Associate the socket with a port on your local machine. If you’re going to only be doing a <strong>connect()</strong>, this is probably be unnecessary.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">bind</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">struct</span> sockaddr *my_addr, <span class="keyword">int</span> addrlen)</span></span>;</div><div class="line"></div><div class="line"><span class="comment">// `sockfd` is the socket file descriptor returned by socket(). </span></div><div class="line"><span class="comment">// `my_addr` is a pointer to a `struct sockaddr` that contains information about your address, namely, port and IP address.</span></div><div class="line"><span class="comment">// `addrlen` is the length in bytes of that address.</span></div></pre></td></tr></table></figure>
<p>Let’s have an example that binds the socket to the host the program is running on, port 3490:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> addrinfo hints, *res;</div><div class="line"><span class="keyword">int</span> sockfd;</div><div class="line"></div><div class="line"><span class="comment">// first, load up address structs with getaddrinfo():</span></div><div class="line"></div><div class="line"><span class="built_in">memset</span>(&amp;hints, <span class="number">0</span>, <span class="keyword">sizeof</span> hints);</div><div class="line">hints.ai_family = AF_UNSPEC;  <span class="comment">// use IPv4 or IPv6, whichever</span></div><div class="line">hints.ai_socktype = SOCK_STREAM;</div><div class="line">hints.ai_flags = AI_PASSIVE;     <span class="comment">// fill in my IP for me</span></div><div class="line"></div><div class="line">getaddrinfo(<span class="literal">NULL</span>, <span class="string">"3490"</span>, &amp;hints, &amp;res);</div><div class="line"></div><div class="line"><span class="comment">// make a socket:</span></div><div class="line"></div><div class="line">sockfd = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);</div><div class="line"></div><div class="line"><span class="comment">// bind it to the port we passed in to getaddrinfo():</span></div><div class="line"></div><div class="line">bind(sockfd, res-&gt;ai_addr, res-&gt;ai_addrlen);</div></pre></td></tr></table></figure>
<p>By using the <code>AI_PASSIVE</code> flag, I’m telling the program to bind to the IP of the host it’s running on. If you want to bind to a specific local IP address, drop the <code>AI_PASSIVE</code> and put an IP address in for the first argument to <strong>getaddrinfo()</strong>.</p>
<p><strong>bind()</strong> also returns -1 on error and sets <code>errno</code> to the error’s value.</p>
<p>Lots of old code manually packs the <code>struct sockaddr_in</code> before calling <strong>bind()</strong>. This is ipv4-specified. The old code looks like this:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// !!! THIS IS THE OLD WAY !!!</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> sockfd;</div><div class="line"><span class="keyword">struct</span> sockaddr_in my_addr;</div><div class="line"></div><div class="line">sockfd = socket(PF_INET, SOCK_STREAM, <span class="number">0</span>);</div><div class="line"></div><div class="line">my_addr.sin_family = AF_INET;</div><div class="line">my_addr.sin_port = htons(MYPORT);     <span class="comment">// short, network byte order</span></div><div class="line">my_addr.sin_addr.s_addr = inet_addr(<span class="string">"10.12.110.57"</span>);</div><div class="line"><span class="built_in">memset</span>(my_addr.sin_zero, <span class="string">'\0'</span>, <span class="keyword">sizeof</span> my_addr.sin_zero);</div><div class="line"></div><div class="line">bind(sockfd, (<span class="keyword">struct</span> sockaddr *)&amp;my_addr, <span class="keyword">sizeof</span> my_addr);</div></pre></td></tr></table></figure></p>
<p>In the above code, you could also assign <code>INADDR_ANY</code> to the <code>s_addr</code> field if you want to bind to your local IP address (like the <code>AI_PASSIVE</code> flag, above.) The ipv6 version of <code>INADDR_ANY</code> is a global variable <code>in6addr_any</code> that is assigned into the <code>sin6_addr</code> field of your <code>struct sockadd_in6</code>. (There is also a macro <code>IN6ADDR_ANY_INIT</code> that you can use in a variable initializer.)</p>
<p>Sometimes you try to return a server and <strong>bind()</strong> fails, claiming “Address already in use”. It’s because a little bit of a socket that was connected is still hanging around in the kernel, and it’s hogging the port. You can either wait for it to clear (a minute or so), or add code to your program allowing it to reuse the port, like this:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// int setsockopt(int sockfd, int level, int optname,</span></div><div class="line"><span class="comment">//                    const void *optval, socklen_t optlen);</span></div><div class="line"><span class="keyword">int</span> yes=<span class="number">1</span>;</div><div class="line"><span class="comment">//char yes='1'; // Solaris people use this</span></div><div class="line"></div><div class="line"><span class="comment">// lose the pesky "Address already in use" error message</span></div><div class="line"><span class="keyword">if</span> (setsockopt(listener,SOL_SOCKET,SO_REUSEADDR,&amp;yes,<span class="keyword">sizeof</span> yes) == <span class="number">-1</span>) &#123;</div><div class="line">    perror(<span class="string">"setsockopt"</span>);</div><div class="line">    <span class="built_in">exit</span>(<span class="number">1</span>);</div><div class="line">&#125; </div><div class="line"></div><div class="line"><span class="comment">// then bind...</span></div></pre></td></tr></table></figure>
<hr>
<h2 id="connect-–-Hey-you"><a href="#connect-–-Hey-you" class="headerlink" title="connect() – Hey you!"></a>connect() – Hey you!</h2><p>The <strong>connect()</strong> call is as follows:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">connect</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">struct</span> sockaddr *serv_addr, <span class="keyword">int</span> addrlen)</span></span>; </div><div class="line"></div><div class="line"><span class="comment">// `sockfd` is socket file descriptor, as returned by the socket() call.</span></div><div class="line"><span class="comment">// `serv_addr` is a `struct sockaddr` containing the destination port and IP address</span></div><div class="line"><span class="comment">// `addrlen` is the length in bytes of the server address structure</span></div><div class="line"><span class="comment">// All of this information can be gleaned from the results of the **getaddrinfo()** call</span></div></pre></td></tr></table></figure></p>
<p>Here is an example where we make a socket connection to “www.example.com”, port 3490<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> addrinfo hints, *res;</div><div class="line"><span class="keyword">int</span> sockfd;</div><div class="line"></div><div class="line"><span class="comment">// first, load up address structs with getaddrinfo():</span></div><div class="line"></div><div class="line"><span class="built_in">memset</span>(&amp;hints, <span class="number">0</span>, <span class="keyword">sizeof</span> hints);</div><div class="line">hints.ai_family = AF_UNSPEC;</div><div class="line">hints.ai_socktype = SOCK_STREAM;</div><div class="line"></div><div class="line">getaddrinfo(<span class="string">"www.example.com"</span>, <span class="string">"3490"</span>, &amp;hints, &amp;res);</div><div class="line"></div><div class="line"><span class="comment">// make a socket:</span></div><div class="line"></div><div class="line">sockfd = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);</div><div class="line"></div><div class="line"><span class="comment">// connect!</span></div><div class="line"></div><div class="line">connect(sockfd, res-&gt;ai_addr, res-&gt;ai_addrlen);</div></pre></td></tr></table></figure></p>
<p>OLD WAY: Old programs filled out their own <code>struct sockaddr_in</code> to pass to <strong>connect()</strong>.</p>
<p><strong>connect()</strong> will return <strong>-1</strong> on error and set the variable <strong>errno</strong></p>
<hr>
<h2 id="listen-Will-somebody-please-call-me"><a href="#listen-Will-somebody-please-call-me" class="headerlink" title="listen() - Will somebody please call me?"></a>listen() - Will somebody please call me?</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">listen</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">int</span> backlog)</span></span>; </div><div class="line"></div><div class="line"><span class="comment">// `sockfd` is the socket file descriptor from the **socket()** system call.</span></div><div class="line"><span class="comment">// `backlog` is the number of connections allowed on the imcoming queue.</span></div><div class="line"><span class="comment">// Incoming connections are going to wait in this queue until you **accept()** them, and this is the limit on how many can queue up.</span></div><div class="line"><span class="comment">// Most systems silently limit this number to about 20; you can probably get away with setting it to 5 or 10.</span></div></pre></td></tr></table></figure>
<p><strong>listen()</strong> returns <strong>-1</strong> and sets <strong>errno</strong> on error</p>
<p>We need to call <strong>bind()</strong> before we call <strong>listen()</strong> so that the server is running on a specific port.<br>The sequence of system calls you’ll make is:<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">getaddrinfo()<span class="comment">;</span></div><div class="line">socket()<span class="comment">;</span></div><div class="line">bind()<span class="comment">;</span></div><div class="line">listen()<span class="comment">;</span></div><div class="line">/* accept() goes here */</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="accept-Thank-you-for-calling-port-3490"><a href="#accept-Thank-you-for-calling-port-3490" class="headerlink" title="accept() - Thank you for calling port 3490"></a>accept() - Thank you for calling port 3490</h2><p>Someone far far away will try to <strong>connect()</strong> to your machine on a port that you are <strong>listen()</strong>ing on. Their connection will be queued up waiting to be <strong>accept()</strong>ed. You call <strong>accept()</strong> and you tell it to get the pending connection. It’ll return to you a <code>brand new socket file descriptor</code> to use for this single connection!. The original one is still listening for more new connections, and the newly created one is finally ready to <strong>send()</strong> and <strong>recv()</strong>. </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">accept</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">struct</span> sockaddr *addr, <span class="keyword">socklen_t</span> *addrlen)</span></span>; </div><div class="line"></div><div class="line"><span class="comment">// `sockfd` is the listen()ing socket descriptor.</span></div><div class="line"><span class="comment">// `addr` will usually be a pointer to a local `struct sockaddr_storage`</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[cpp-makefile体验]]></title>
      <url>https://beim.github.io/2016/10/18/cpp-makefile%E4%BD%93%E9%AA%8C/</url>
      <content type="html"><![CDATA[<p>来自csdn</p>
<a id="more"></a>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">l</span></div><div class="line">dir1/  makefile  o/  <span class="keyword">test</span>.cpp  <span class="keyword">test</span>.hpp</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">cat</span> <span class="keyword">test</span>.cpp</div><div class="line">#<span class="keyword">include</span> <span class="string">"test.hpp"</span></div><div class="line"></div><div class="line">using namespace std;</div><div class="line"></div><div class="line">int main() &#123;</div><div class="line">    int x(3);</div><div class="line">    int <span class="built_in">y</span>(5);</div><div class="line">    int c;</div><div class="line">    c = calculate(x, y);</div><div class="line">    cout &lt;&lt; c &lt;&lt; endl;</div><div class="line">&#125;</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">cat</span> <span class="keyword">test</span>.hpp</div><div class="line">#<span class="keyword">include</span> &lt;iostream&gt;</div><div class="line">#<span class="keyword">include</span> <span class="string">"./dir1/test1.hpp"</span></div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">l</span> dir1</div><div class="line">test1.cpp  test1.hpp</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">cat</span> dir1/test1.cpp</div><div class="line">#<span class="keyword">include</span> <span class="string">"test1.hpp"</span></div><div class="line"></div><div class="line">int calculate(int <span class="keyword">const</span>&amp; a, int <span class="keyword">const</span>&amp; b) &#123;</div><div class="line">    int c;</div><div class="line">    c = a + b;</div><div class="line">    <span class="keyword">return</span> c;</div><div class="line">&#125;</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">cat</span> dir1/test1.hpp </div><div class="line">#<span class="keyword">include</span> &lt;iostream&gt;</div><div class="line"></div><div class="line">int calculate(int <span class="keyword">const</span>&amp; a, int <span class="keyword">const</span>&amp; b);</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">l</span> o/</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">cat</span> makefile</div><div class="line">mycplusplus: <span class="keyword">test</span>.o test1.o</div><div class="line">	<span class="keyword">g</span>++ o/test1.o o/<span class="keyword">test</span>.o -o mycplusplus</div><div class="line">test1.o : dir1/test1.cpp</div><div class="line">	<span class="keyword">g</span>++ -c dir1/test1.cpp -o o/test1.o</div><div class="line"><span class="keyword">test</span>.o : <span class="keyword">test</span>.cpp</div><div class="line">	<span class="keyword">g</span>++ -c <span class="keyword">test</span>.cpp -o o/<span class="keyword">test</span>.o</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ make</div><div class="line"><span class="keyword">g</span>++ -c <span class="keyword">test</span>.cpp -o o/<span class="keyword">test</span>.o</div><div class="line"><span class="keyword">g</span>++ -c dir1/test1.cpp -o o/test1.o</div><div class="line"><span class="keyword">g</span>++ o/test1.o o/<span class="keyword">test</span>.o -o mycplusplus</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">l</span></div><div class="line">dir1/  makefile  mycplusplus*  o/  <span class="keyword">test</span>.cpp  <span class="keyword">test</span>.hpp</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ ./mycplusplus </div><div class="line">8</div><div class="line"></div><div class="line">~/usr/temp/<span class="keyword">test</span>-makefile$ <span class="keyword">l</span> o/</div><div class="line">test1.o  <span class="keyword">test</span>.o</div></pre></td></tr></table></figure>
<p><a href="http://blog.csdn.net/hongkangwl/article/details/21328327" target="_blank" rel="external">参考CSDN</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2016-收藏]]></title>
      <url>https://beim.github.io/2016/10/15/2016-%E6%94%B6%E8%97%8F/</url>
      <content type="html"><![CDATA[<h1 id="语言相关"><a href="#语言相关" class="headerlink" title="语言相关"></a>语言相关</h1><h2 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h2><ul>
<li><p><a href="https://blog.risingstack.com/async-await-node-js-7-nightly/" target="_blank" rel="external">Experimenting With async/await in Node.js 7 Nightly</a></p>
</li>
<li><p><a href="https://blog.risingstack.com/nodejs-at-scale-npm-best-practices/" target="_blank" rel="external">Node.js at Scale - npm Best Practices</a></p>
</li>
<li><p><a href="https://cnodejs.org/topic/5640b80d3a6aa72c5e0030b6" target="_blank" rel="external">体验异步的终极解决方案-ES7的Async/Await</a></p>
</li>
<li><p><a href="http://morning.work/page/2016-05/how-to-write-a-nodejs-api-client-package.html" target="_blank" rel="external">Nodejs 编写API 客户端</a></p>
</li>
</ul>
<h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><ul>
<li><p><a href="https://github.com/getify/You-Dont-Know-JS" target="_blank" rel="external">You Dont’t Know JS - github</a></p>
</li>
<li><p><a href="http://gold.xitu.io/post/57fe3db0816dfa0056d7d713" target="_blank" rel="external">JavaScript 闯关记-掘金</a></p>
</li>
</ul>
<h2 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h2><ul>
<li><p><a href="https://zhuanlan.zhihu.com/json-tutorial" target="_blank" rel="external">JSON库教程 - 知乎专栏</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/DataStructureAndAlgorithm" target="_blank" rel="external">C++数据结构 - 知乎专栏</a></p>
</li>
<li><p><a href="http://m.blog.csdn.net/article/details?id=51016126" target="_blank" rel="external">值得推荐的C/C++框架和库—造轮子前先看看现有的轮子</a></p>
</li>
<li><p><a href="http://www.ituring.com.cn/book/1203" target="_blank" rel="external">像计算机科学家一样思考（C++版)</a></p>
</li>
<li><p><a href="http://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/contents/" target="_blank" rel="external">Google 开源项目风格指南-C++ 风格指南</a></p>
</li>
</ul>
<h1 id="语言无关"><a href="#语言无关" class="headerlink" title="语言无关"></a>语言无关</h1><h2 id="front"><a href="#front" class="headerlink" title="front"></a>front</h2><h2 id="back"><a href="#back" class="headerlink" title="back"></a>back</h2><h2 id="other"><a href="#other" class="headerlink" title="other"></a>other</h2><ul>
<li><p><a href="https://visualgo.net/" target="_blank" rel="external">VISUALGO 可视化算法和数据结构</a></p>
</li>
<li><p><a href="https://www.codetriage.com/" target="_blank" rel="external">CodeTriage - 帮助开源项目</a></p>
</li>
<li><p><a href="https://github.com/examplecode/mproxy" target="_blank" rel="external">mproxy - c 语言实现的一个最小的http代理，支持翻墙</a></p>
</li>
<li><p><a href="https://github.com/inaz2/proxy2" target="_blank" rel="external">python-http/https代理</a></p>
</li>
<li><p><a href="https://github.com/vic317yeh/One-Click-to-Be-Pro/blob/master/README.md" target="_blank" rel="external">语言,算法,工具, 资源集合-github-One Click to Be Pro</a></p>
</li>
<li><p><a href="https://github.com/vhf/free-programming-books/blob/master/free-programming-books-zh.md" target="_blank" rel="external">各种方向资源集合- github- free-programming-books</a></p>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[cpp-宏编写技巧]]></title>
      <url>https://beim.github.io/2016/10/13/cpp-%E5%AE%8F%E7%BC%96%E5%86%99%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<p>如果宏里有多过一个语句(statement), 就需要用do {/<em>…</em>/} while(0) 包裹成单个语句, 否则会有如下问题</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M() a(); b()</span></div><div class="line"><span class="keyword">if</span> (cond)</div><div class="line">    M();</div><div class="line"><span class="keyword">else</span></div><div class="line">    c();</div><div class="line"></div><div class="line"><span class="comment">/* 预处理后 */</span></div><div class="line"><span class="keyword">if</span> (cond)</div><div class="line">    a(); b()</div><div class="line"><span class="keyword">else</span> <span class="comment">/* else 缺乏对应if */</span></div><div class="line">    c();</div></pre></td></tr></table></figure>
<p>只用{} 也不行:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M() &#123; a(); b();&#125;</span></div><div class="line"><span class="keyword">if</span> (cond)</div><div class="line">    M();</div><div class="line"><span class="keyword">else</span></div><div class="line">    c();</div><div class="line"></div><div class="line"><span class="comment">/* 预处理后 */</span></div><div class="line"><span class="keyword">if</span> (cond)</div><div class="line">    &#123; a(); b(); &#125;; <span class="comment">/* 最后的分号代表if 语句结束 */</span></div><div class="line"><span class="keyword">else</span>   <span class="comment">/* else 缺乏对应if */</span></div><div class="line">    c();</div></pre></td></tr></table></figure>
<p>用 do while 就可以了</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M() do &#123; a(); b(); &#125; while(0)</span></div><div class="line"><span class="keyword">if</span> (cond)</div><div class="line">    M();</div><div class="line"><span class="keyword">else</span></div><div class="line">    c();</div><div class="line"></div><div class="line"><span class="comment">/* 预处理后 */</span></div><div class="line"><span class="keyword">if</span> (cond)</div><div class="line">    <span class="keyword">do</span> &#123; a(); b(); &#125; <span class="keyword">while</span>(<span class="number">0</span>);</div><div class="line"><span class="keyword">else</span></div><div class="line">    c();</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[设计模式笔记]]></title>
      <url>https://beim.github.io/2016/10/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p>设计模式</p>
<a id="more"></a>
<h1 id="Factory-Method-Insurance"><a href="#Factory-Method-Insurance" class="headerlink" title="Factory Method - Insurance"></a>Factory Method - Insurance</h1><p>工厂方法模式</p>
<p><strong>优点</strong>:</p>
<ul>
<li>工厂方法模式将创建对象的逻辑与任务交给了工厂类</li>
<li>工厂方法模式支持开闭原则</li>
</ul>
<p><strong>适用情况</strong></p>
<ul>
<li>创建某些类的对象的逻辑比较复杂,并且有很多条件分支, 而且还可能增加新的条件.</li>
<li>一个类不能预先准确的知道它必须创建一个层次类中的哪一个子类的对象</li>
<li>一个类适用它的子类决定所要创建的对象</li>
<li>需要封装创建类的对象的逻辑, 使得这些逻辑局部化.</li>
</ul>
<p>简单工厂方法模式与工厂方法模式的区别: <strong>p15</strong></p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-12-36%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="factory"></p>
<hr>
<h1 id="AbstractFactory-House"><a href="#AbstractFactory-House" class="headerlink" title="AbstractFactory - House"></a>AbstractFactory - House</h1><p>抽象工厂模式</p>
<p>符合开闭原则 和不符合开闭原则的情况: <strong>p22</strong></p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-13-04%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="absfactory"></p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">BuildingFactory(<span class="keyword">abstract</span>)</div><div class="line"></div><div class="line">MediumBuildingFactor    SuperBuildingFactor</div><div class="line"></div><div class="line">MediumHouse MediumCondo    SuperHouse SuperCondo</div><div class="line"></div><div class="line">House&lt;<span class="keyword">interface</span>&gt; Condo&lt;<span class="keyword">interface</span>&gt;</div></pre></td></tr></table></figure>
<hr>
<h1 id="Adapter-CustomerInfo-check"><a href="#Adapter-CustomerInfo-check" class="headerlink" title="Adapter-CustomerInfo-check"></a>Adapter-CustomerInfo-check</h1><p>适配器模式</p>
<p>为了解决接口不一致的问题, 两个软件模块之间往往需要通过一个适配器类Adapter 进行适配, 这样的模式叫做适配器设计模式.</p>
<p><strong>适用情况</strong></p>
<ul>
<li>当系统想要使用现有的类, 但是现有类的接口不符合系统需要时.</li>
<li>当需要通过创建一个可复用的类, 使得本来接口不相容并且无关的类结合在一起工作时.</li>
<li>在设计中需要改变多个子类接口, 在作用相同但名称不同的类或方法之间进行适配时.</li>
</ul>
<p><strong>两种模式</strong></p>
<ul>
<li>类适配器模式</li>
<li>对象适配器模式 <code>和类适配器模式相同思路, 但是在Adapter 类中, 调用adaptee 的方法, 而不是继承adaptee</code></li>
</ul>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-13-28%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="adapter"></p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CusInfoValidator&lt;<span class="class"><span class="keyword">interface</span>&gt;    <span class="title">InfoValidation</span></span></div><div class="line"></div><div class="line"><span class="title">InformationAdapter</span> <span class="keyword">extends</span> ... <span class="keyword">implements</span> ...</div></pre></td></tr></table></figure>
<hr>
<h1 id="Bridge-AgentInfo"><a href="#Bridge-AgentInfo" class="headerlink" title="Bridge-AgentInfo"></a>Bridge-AgentInfo</h1><p>桥接模式</p>
<p>桥接模式是指将抽象部分与它的实现部分分离, 使它们可以独立地变化.<br>桥接模式强调对象有两个以上的维度变化, 简化多级集成关系, 但同时增加了聚合对象的内部方法, 因为它不得不多写方法以便包含它的类调用.</p>
<p><strong>优点</strong></p>
<ul>
<li>分离接口和实现部分. 一个实现不必固定的绑定一个接口. 一个抽象类的实现可以在系统运行时进行配置, 一个对象甚至可以在运行时改变它的实现.</li>
<li>提高了可扩展性. 可以独立的对Abstraction 和Implementor 层次结构进行扩展</li>
<li>实现细节对客户的透明. 可以对客户隐藏实现细节.</li>
</ul>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-14-04%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="bridge"></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">AgentInfo(<span class="keyword">abstract</span>)</div><div class="line"></div><div class="line">EncryptedInfo1  EncryptedInfo2</div><div class="line"></div><div class="line">MessageWriter&lt;<span class="class"><span class="keyword">interface</span>&gt;</span></div><div class="line"></div><div class="line">FileWriter  DBWriter</div></pre></td></tr></table></figure>
<hr>
<h1 id="Facade-usrInfoValidation"><a href="#Facade-usrInfoValidation" class="headerlink" title="Facade-usrInfoValidation"></a>Facade-usrInfoValidation</h1><p>外观模式</p>
<p>用来隐藏一个软件系统的内部细节, 为一系列复杂的接口提供一个统一的接口, 使该系统更容易使用.</p>
<p><strong>优点</strong><br>利用外观模式可以去掉子系统与客户程序之间的直接绑定, 从而提高子系统的独立性, 也降低 了客户程序与子程序的直接耦合度. 此外, 利用外观模式可以使系统层次化.</p>
<p><strong>缺点</strong><br>对于那些不需要定制的用户来说, 例如一个熟练的程序员要写一些复杂的功能, 而外观类中没有这样的功能, 因此外观模式可能对它们没有帮助. 在这种情况下, 用户程序可以直接绕过外观模式, 而直接调用子系统类库.</p>
<p><code>适配器模式</code>与<code>外观模式</code>的区别</p>
<ul>
<li>适配器模式转换接口的目的是将一个不适合使用的接口转换为可以被使用的接口, 或者将一些接口不同而功能相同或者相近的接口加以转换, 以便可以被统一使用.</li>
<li>外观模式简化接口是为了更好地使用某个类库, 为一系列复杂的接口提供一个统一的接口</li>
</ul>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-14-22%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="facade"></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="section">CustomerFacade</span> &#123;</div><div class="line">    <span class="attribute">Account</span> accountObj;</div><div class="line">    <span class="attribute">CreditCard</span> creditCardObj;</div><div class="line">    <span class="attribute">Address</span> addressObj;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="attribute">Account</span> CreditCard Address</div></pre></td></tr></table></figure>
<hr>
<h1 id="Strategy-Sorting"><a href="#Strategy-Sorting" class="headerlink" title="Strategy-Sorting"></a>Strategy-Sorting</h1><p>策略模式</p>
<p>下面定义了一系列的算法, 将每一个算法封装起来, 并且使它们之间可以相互替换. 策略模式让算法的变化不会影响到使用算法的客户.</p>
<p><strong>优点</strong></p>
<ul>
<li>得到一系列可以复用的算法, 这些算法集成一个共同的抽象类, 因此共有的功能可以放到超类中.</li>
<li>将不同算法封装在不同的策略子类中, 使逻辑更加清晰, 各个算法可以独立地变化.</li>
<li>使功能改变或者扩展更容易.</li>
</ul>
<p><strong>缺点</strong><br>客户程序必须知道不同策略接口的各个子类的行为, 必须理解每个子类有哪些不同.</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-14-40%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="strategy"></p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Context</span></div><div class="line"></div><div class="line">SortAlgorithm&lt;interface&gt;</div><div class="line"></div><div class="line"><span class="keyword">InsertionSort </span> QuickSort  <span class="keyword">BubbleSort </span> HeapSort</div></pre></td></tr></table></figure>
<hr>
<h1 id="State-BankAccount-typical-2"><a href="#State-BankAccount-typical-2" class="headerlink" title="State-BankAccount-typical-2"></a>State-BankAccount-typical-2</h1><p>状态模式</p>
<p>在面向对象设计中, 在依赖于状态的对象中, 对象的行为依赖于状态.</p>
<p>状态模式将不同状态下的行为封装在不同的类中, 每个类代表一个状态.</p>
<p><strong>优点</strong></p>
<ul>
<li>因为状态相关的代码都被封装在各个状态子类中, 所以容易添加新的状态, 只需要定义并添加新的状态子类和新的状态变化关系即可. 有时其他的类也需要较少的修改.</li>
<li>将不同的状态封装成不同的类使得状态迁移很明确, 并且可以防止Context 类将状态弄混乱了</li>
</ul>
<p><strong>适用</strong></p>
<ul>
<li>当对象的行为依赖于状态, 对象要在运行时改变状态时使用状态模式</li>
<li>当操作带有大量依赖于状态的条件语句时使用该模式. 通常许多操作都含有相同的条件结构, 状态模式将条件结构的每个分支包装成独立分支的类, 使得在不同状态下的行为可以独立变化.</li>
</ul>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-15-02%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="state"></p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">BankContext  &lt;-&gt;  State(<span class="built_in">abstract</span>)</div><div class="line"></div><div class="line">NoTransactionFeeState  TransactionFeeState  OverDrawnState</div></pre></td></tr></table></figure>
<hr>
<h1 id="Visitor-ComputerParts"><a href="#Visitor-ComputerParts" class="headerlink" title="Visitor-ComputerParts"></a>Visitor-ComputerParts</h1><p>访问者模式</p>
<p>访问者模式在处理数据结构较稳定, 但是作用于其上的操作需要经常变化的问题是非常有效的.</p>
<p>访问者模式是指作用于一个对象结构体上的元素的操作. 访问者可以使用户在不改变该结构体的类的基础上定义一个新的操作.</p>
<p><strong>优点</strong></p>
<ul>
<li>使得在访问者类中针对复杂类结构中的某个类添加新方法较为容易, 即只需要简单的添加一个新的访问者方法即可. </li>
<li>访问者将相关的方法集中在一个具体的访问者类中, 而将其他相关的方法集中在另外一个具体的访问者类中. 也就是说, 访问者子类是按照方法的类型来分类的.</li>
</ul>
<p><strong>缺点</strong><br>增加一个具体的新ConcreteElement 类比较困难. 因为此时需要在每个ConcreteVisitor 类中添加该ConcreteElement 类的访问方法.(所以其适合数据结构稳定的情况)</p>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-15-22%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="visitor"></p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">CompositeStructure</div><div class="line"></div><div class="line">ComputerParts</div><div class="line"></div><div class="line">Memory  VideoCard  <span class="literal">Monitor</span></div><div class="line"></div><div class="line">Visitor</div><div class="line"></div><div class="line">PriceVisitor  Parts<span class="literal">Inf</span>oVisitor</div></pre></td></tr></table></figure>
<hr>
<h1 id="Mediator-Tour-Hotel-Flight"><a href="#Mediator-Tour-Hotel-Flight" class="headerlink" title="Mediator-Tour-Hotel-Flight"></a>Mediator-Tour-Hotel-Flight</h1><p>中介者模式</p>
<p>中介者模式将所有对象之间的交互细节抽象到一个独立的类中,对象之间的交互经由这个独立的类完成.</p>
<p><strong>优点</strong></p>
<ul>
<li>所有对象的交互行为都被转入到一个独立的中介者对象中, 使得用户更容易通过中介者修改对象之间的相互关系行为. 当修改一个交互行为的时候, 可以通过修改或者更换其中一个具体的中介者子类来完成. 另外, 将对象的交互转移到一个专门的类中也提高了对象的可重用性.</li>
<li>因为对象之间不直接有交互, 使对象的单元测试更容易.</li>
<li>低耦合使得一个类的修改不会影响到其他的类.</li>
</ul>
<p><img src="http://ob4a6y748.bkt.clouddn.com/2016-10-10%2020-15-46%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="mediator"></p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">BusinessMediator</span></div><div class="line"></div><div class="line"><span class="symbol">AirlineGUI</span>  HotelGUI  TourGUI</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[dns相关的小实践]]></title>
      <url>https://beim.github.io/2016/10/07/dns%E7%9B%B8%E5%85%B3%E7%9A%84%E5%B0%8F%E5%AE%9E%E8%B7%B5/</url>
      <content type="html"><![CDATA[<p>dig 命令可以跟踪dns 查询的路径.<br>如<code>dig www.baidu.com +trace</code></p>
<p>ubuntu 系统下<code>/etc/resolv.conf</code> 配置文件, 用来设置DNS 服务器的IP 地址及DNS 域名, 还包含了主机的域名搜索顺序.</p>
<p>文件<code>/etc/resolve.conf</code> 内容如下:<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># Dynamic resolv.<span class="keyword">conf</span>(5) <span class="keyword">file</span> <span class="keyword">for</span> glibc resolver(3) generated <span class="keyword">by</span> resolvconf(8)</div><div class="line">#     <span class="keyword">DO</span> NOT <span class="keyword">EDIT</span> THIS <span class="keyword">FILE</span> <span class="keyword">BY</span> HAND -- YOUR CHANGES WILL BE OVERWRITTEN</div><div class="line">nameserver 127.0.0.1</div><div class="line"><span class="keyword">search</span> lan</div></pre></td></tr></table></figure></p>
<p>执行命令<code>dig www.kicker.com.cn + trace</code></p>
<p>输出结果:<br><figure class="highlight dns"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">; &lt;&lt;&gt;&gt; DiG 9.10.3-P4-Ubuntu &lt;&lt;&gt;&gt; www.kicker.com.cn +trace</span></div><div class="line"><span class="comment">;; global options: +cmd</span></div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	b.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	k.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	e.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	f.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	c.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	l.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	m.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	a.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	g.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	j.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	d.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	i.root-servers.net.</div><div class="line">.			<span class="number">478606</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	h.root-servers.net.</div><div class="line"><span class="comment">;; Received 239 bytes from 127.0.0.1#53(127.0.0.1) in 2 ms</span></div><div class="line"></div><div class="line">cn.			<span class="number">172800</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	d.dns.cn.</div><div class="line">cn.			<span class="number">172800</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	a.dns.cn.</div><div class="line">cn.			<span class="number">172800</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	e.dns.cn.</div><div class="line">cn.			<span class="number">172800</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	c.dns.cn.</div><div class="line">cn.			<span class="number">172800</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	ns.cernet.net.</div><div class="line">cn.			<span class="number">172800</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	b.dns.cn.</div><div class="line">cn.			<span class="number">86400</span>	<span class="keyword">IN</span>	<span class="keyword">DS</span>	<span class="number">41470 8 2</span> <span class="number">3623</span>FB6E3B1F69C6855DA1E48D3A38236DD2EDF0380FB018FF538650 EAC2C4DD</div><div class="line">cn.			<span class="number">86400</span>	<span class="keyword">IN</span>	<span class="keyword">RRSIG</span>	<span class="keyword">DS</span> <span class="number">8 1 86400</span> <span class="number">20161020020000</span> <span class="number">20161007010000</span> <span class="number">39291</span> . A2tSyIt/guVEItqdJgKF7h765ACBXXhA6zQGVNfYYbpeupuDju37nXm5 Z44h9TlVa2RIkM9Jq8x0SMuH5cm1G4opXU1zHZgUvhC+<span class="number">1</span>feGfEnZ26Py fXZ3hTBT+uNwU/gnRZgvEvfORwU4BNfjKyrHmk/tXKYcARXOMK9Nb3PA BBJ2vshXDn6quUtElmP3CktvXDzpC/<span class="number">7</span>pT6HMgaBOYxWYxao9W0UsEDZQ cxWpXBu7Psj7a/<span class="number">11</span>kMQGZNONU65P13e3QK8zlF6BMDZDMJH9tIBJF8v6 udnjKVx8bnkqJza//<span class="number">19</span>PxtiSDf3KHvFKE7cH5sv0G1Zr3yMLNfG5/aTs qBlX+<span class="keyword">A</span>==</div><div class="line"><span class="comment">;; Received 644 bytes from 199.7.91.13#53(d.root-servers.net) in 370 ms</span></div><div class="line"></div><div class="line">kicker.com.cn.		<span class="number">86400</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	ns.nagor.com.cn.</div><div class="line">kicker.com.cn.		<span class="number">86400</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	ns.nagor.cn.</div><div class="line">GICE14DNTMDN31G43AUGVRKTKALVB8QC.com.cn. <span class="number">21600</span> <span class="keyword">IN</span> <span class="keyword">NSEC</span><span class="number">3	1 1 10</span> AEF123AB MI2OUBFA49Q47917BR600DOL1QGRP79T <span class="keyword">NS</span> <span class="keyword">SOA</span> <span class="keyword">RRSIG</span> <span class="keyword">DNSKEY</span> <span class="keyword">NSEC3PARAM</span></div><div class="line">GICE14DNTMDN31G43AUGVRKTKALVB8QC.com.cn. <span class="number">21600</span> <span class="keyword">IN</span> <span class="keyword">RRSIG</span>	<span class="keyword">NSEC3</span> <span class="number">8 3 21600</span> <span class="number">20161020002013</span> <span class="number">20160920000126</span> <span class="number">15399</span> com.cn. jDuJAUMvAwNM3kPNu3bVyk1VMZInBfUKiD6/lutPeAjrudbIj7qFkTxM F164SK96QaYMWZMg7sHThlA9S5DoDE3rEh9vF01qcsg1pxA7+m9lDFSn Q0dQ8hU078oCPnH4JPzgB5obiSc2OmcgFml5vaIMiWT+Rpe9V3ZCkX7W z7Q=</div><div class="line">MI2OUBFA49Q47917BR600DOL1QGRP79T.com.cn. <span class="number">21600</span> <span class="keyword">IN</span> <span class="keyword">NSEC</span><span class="number">3	1 1 10</span> AEF123AB UQROTQK62NOIM5U43DMF7AMC8JJFRM7T <span class="keyword">TXT</span> <span class="keyword">RRSIG</span></div><div class="line">MI2OUBFA49Q47917BR600DOL1QGRP79T.com.cn. <span class="number">21600</span> <span class="keyword">IN</span> <span class="keyword">RRSIG</span>	<span class="keyword">NSEC3</span> <span class="number">8 3 21600</span> <span class="number">20161019013404</span> <span class="number">20160919011226</span> <span class="number">15399</span> com.cn. Rw7vfPaOa+UB9TpAHniy3XOk8UcZFHo1w7Qlq0gjX/gBBQY1vUR10BeI x0kodMsNRkHkvjvWkHfxAu/A8rR0X4xOuJkYZGBnR0YYVnP/N3YGHoz3 C6QOM47dyogMIOg/zVpnYjubpaILGpNY5ddZaJLF2sKz9SvJ0NXCQIyg lGQ=</div><div class="line"><span class="comment">;; Received 591 bytes from 203.119.25.1#53(a.dns.cn) in 22 ms</span></div><div class="line"></div><div class="line">www.kicker.com.cn.	<span class="number">600</span>	<span class="keyword">IN</span>	<span class="keyword">A</span>	<span class="number">192.161.49.88</span></div><div class="line">kicker.com.cn.		<span class="number">7200</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	ns1.dnsnw.com.</div><div class="line">kicker.com.cn.		<span class="number">7200</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	ns2.dnsnw.com.</div><div class="line">kicker.com.cn.		<span class="number">7200</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	ns.nagor.cn.</div><div class="line">kicker.com.cn.		<span class="number">7200</span>	<span class="keyword">IN</span>	<span class="keyword">NS</span>	ns.nagor.com.cn.</div><div class="line"><span class="comment">;; Received 159 bytes from 218.66.171.170#53(ns.nagor.com.cn) in 54 ms</span></div></pre></td></tr></table></figure></p>
<p>解释一下过程</p>
<ol>
<li><p>访问本地域名服务器(127.0.0.1)(16行), 获得根域名服务器的记录(.)</p>
</li>
<li><p>访问(.)的域名服务器, 获得(cn.)的记录</p>
</li>
<li><p>访问(cn.)的域名服务器, 获得(kicker.com.cn.) 的记录</p>
</li>
<li><p>访问(kicker.com.cn.) 的域名服务器, 获得(www.kicker.com.cn)的ip地址</p>
</li>
</ol>
<p><strong>A记录</strong><br>A记录（即地址记录，也称为主机记录）将一个网域关联到托管该网域服务的计算机的物理IP地址。</p>
<p><strong>NS记录</strong><br>域名服务器(NS)记录用于确定哪些服务器为一个网域传达DNS信息。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[cpp-泛型算法参考]]></title>
      <url>https://beim.github.io/2016/10/06/cpp-%E6%B3%9B%E5%9E%8B%E7%AE%97%E6%B3%95%E5%8F%82%E8%80%83/</url>
      <content type="html"><![CDATA[<p>所有的泛型算法(generic algorithm), 除了极少数外, 前两个参数皆为一组iterator, 用来标示欲遍历的容器(container) 元素的范围. 范围系为[iterator1, iterator2)</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> array_size = <span class="number">7</span>;</div><div class="line"><span class="keyword">int</span> iarray[array_size] = &#123;<span class="number">1</span>, <span class="number">10</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">14</span>, <span class="number">8</span>&#125;;</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec(iarray, iarray + array_size);</div><div class="line"></div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator it = find(vec.begin(), vec.end(), value);</div><div class="line"><span class="keyword">int</span> *pi = find(iarray, iarray + array_size, value);</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>算法通常有重载的两个版本: 版本一使用底层元素所属类型的内置运算符, 包括equality 运算符和less-than 运算符. 版本二接受function object 或function pointer 的传入, 借此提供和内置运算符不同的行为.<br>例如, 默认情形下, sort() 会使用less-than 来排序. 如果要改变这一行为, 我们可以传入预先定义好的greater function object:</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sort(<span class="name">vec</span>.begin(), vec.end())<span class="comment">;</span></div><div class="line">sort(<span class="name">vec</span>.begin(), vec.end(), greater&lt;int&gt; ())<span class="comment">;</span></div></pre></td></tr></table></figure>
<p>不过, 另有一些算法以不同的名称区分不同版本,形成两个函数; 以_if 为名称后缀的, 使用的是”可指定特定行为”的那个版本.<br>许多<code>会更改目标容器之内容</code>的算法, 都提供两种版本: 一种称为in-place (就地) 版本, 会改变容器的内容. 另一种称为copy 版本, 不改变传入容器的内容, 而是先为它制作一份副本, 再改变副本的内容, 然后返回该副本.</p>
<ul>
<li>如下array, vector, list 被用来作为下文所列泛型算法的函数参数:</li>
</ul>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">int ia[<span class="number">8</span>] = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">21</span>, <span class="number">28</span>, <span class="number">36</span>&#125;;</div><div class="line"><span class="type">vector</span>&lt;int&gt; ivec(ia, ia + <span class="number">8</span>);</div><div class="line"><span class="type">list</span>&lt;int&gt; ilist(ia, ia + <span class="number">8</span>);</div><div class="line"></div><div class="line"><span class="type">string</span> sa[<span class="number">10</span>] = &#123;<span class="string">"The"</span>, <span class="string">"light"</span>, <span class="string">"untonsured"</span>, <span class="string">"hair"</span>, <span class="string">"grained"</span>, <span class="string">"and"</span>, <span class="string">"hued"</span>, <span class="string">"like"</span>, <span class="string">"pale"</span>, <span class="string">"oak"</span>&#125;;</div><div class="line"><span class="type">vector</span>&lt;<span class="type">string</span>&gt; svec(sa, sa + <span class="number">10</span>);</div><div class="line"><span class="type">list</span>&lt;<span class="type">string</span>&gt; slist(sa, sa + <span class="number">10</span>);</div></pre></td></tr></table></figure>
<h2 id="accumulate-元素累加"><a href="#accumulate-元素累加" class="headerlink" title="accumulate() 元素累加"></a>accumulate() 元素累加</h2><p>默认情形下, 它会将容器内的所有元素相加, 再加上第三个参数所指定的初值. 也可以借由传入一个二元运算, 取代默认的”相加”操作.</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;numeric&gt;</span></span></div><div class="line"></div><div class="line">iresult = accumulate(ia, ia + <span class="number">8</span>, <span class="number">0</span>);</div><div class="line">iresult = accumulate(ilist.<span class="built_in">begin</span>, ilist.<span class="built_in">end</span>(), <span class="number">0</span>, plus&lt;<span class="keyword">int</span>&gt; ());</div></pre></td></tr></table></figure>
<h2 id="adjacent-difference-相邻元素的差额"><a href="#adjacent-difference-相邻元素的差额" class="headerlink" title="adjacent_difference() 相邻元素的差额"></a>adjacent_difference() 相邻元素的差额</h2><p>默认情形下, 它会产生一个新数列. 此数列中除了第一个元素, 每个元素都是原数列的<code>相同位置</code>及<code>前一位置</code>两元素的差额. 假设原数列为{0, 1, 2, 3, 5, 8}, 那么产生出来的新数列就是{0, 1, 0, 1, 1, 2, 3}. 它可以借由一个二元运算, 取代默认的<code>相减</code>操作. 第三个参数是个iterator, 指向一个容器, 用来放置执行结果.</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#include &lt;numeric&gt;</div><div class="line"></div><div class="line">adjacent_difference(<span class="name">ilist</span>.begin(), ilist.end(), iresult.begin())<span class="comment">;</span></div><div class="line">adjacent_difference(<span class="name">ilist</span>.begin(), ilist.end(), iresult.begin(), multiplies&lt;int&gt; ())<span class="comment">;</span></div></pre></td></tr></table></figure>
<h2 id="adjacent-find-搜寻相邻的重复元素"><a href="#adjacent-find-搜寻相邻的重复元素" class="headerlink" title="adjacent_find()  搜寻相邻的重复元素"></a>adjacent_find()  搜寻相邻的重复元素</h2><p>默认情况下, 它会搜索第一组<code>相邻且其值重复</code>的元素. 可用某个二元运算符取代内置的equality 运算符. 本函数会返回一个iterator, 指向两个重复元素中的第一个.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">class</span> TwiceOver &#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="keyword">int</span> val1, <span class="keyword">int</span> val2)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> val1 == val2 / <span class="number">2</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">piter = adjacent_find(ia, ia + <span class="number">8</span>);</div><div class="line">iter = adjacent_find(vec.begin(), vec.end(), TwiceOver());</div></pre></td></tr></table></figure>
<h2 id="binary-search-二元搜索"><a href="#binary-search-二元搜索" class="headerlink" title="binary_search()  二元搜索"></a>binary_search()  二元搜索</h2><p>binary_search() 假设其处理对象已经以less-than 运算符加以排序. 如果该容器以其他方式完成排序, 那么调用binary_search() 时就得传入该二元运算符. 此算法会返回true 或false.</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line">found_it =  binary_search(ilist.<span class="built_in">begin</span>(), ilist.<span class="built_in">end</span>(), value);</div><div class="line">found_it = binary_search(vec.<span class="built_in">begin</span>, vec.<span class="built_in">end</span>(), value, greater&lt;<span class="keyword">int</span>&gt; ());</div></pre></td></tr></table></figure>
<h2 id="copy-复制"><a href="#copy-复制" class="headerlink" title="copy() 复制"></a>copy() 复制</h2><p>将第一个容器的元素复制到第二个容器.</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line">ostream_iterator&lt;<span class="keyword">int</span>&gt; ofile(cout, <span class="string">" "</span>);</div><div class="line">copy(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>(), ofile);</div></pre></td></tr></table></figure>
<h2 id="copy-backword-逆向复制"><a href="#copy-backword-逆向复制" class="headerlink" title="copy_backword() 逆向复制"></a>copy_backword() 逆向复制</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line">copy_backword(svec.<span class="built_in">begin</span>(), svec.<span class="built_in">end</span>(), target.<span class="built_in">begin</span>());</div></pre></td></tr></table></figure>
<h2 id="count-计数"><a href="#count-计数" class="headerlink" title="count() 计数"></a>count() 计数</h2><p>返回容器中与制定值相等的元素个数</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line">cout &lt;&lt; value &lt;&lt; <span class="string">" occurs "</span></div><div class="line">     &lt;&lt; count(svec.<span class="built_in">begin</span>(), svec.<span class="built_in">end</span>(), value)</div><div class="line">     &lt;&lt; <span class="string">" times in string vector.\n"</span>;</div></pre></td></tr></table></figure>
<h2 id="count-if-在特定条件下计数"><a href="#count-if-在特定条件下计数" class="headerlink" title="count_if() 在特定条件下计数"></a>count_if() 在特定条件下计数</h2><p>返回容器中<code>元素值被某特定运算符求值为true</code>的元素个数.</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">class</span> Even &#123;</div><div class="line">    <span class="keyword">public</span>: </div><div class="line">        <span class="keyword">bool</span> <span class="keyword">operator</span>() (<span class="keyword">int</span> val) &#123;</div><div class="line">            <span class="built_in">return</span> !(val % <span class="number">2</span>);</div><div class="line">        &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">ires = count_if(ia, ia + <span class="number">8</span>, bind2nd(less&lt;<span class="keyword">int</span>&gt;(), <span class="number">10</span>));</div><div class="line">ires = count_if(ilist.<span class="built_in">begin</span>(), ilist_end(), Even());</div></pre></td></tr></table></figure>
<h2 id="equal-判断相等与否"><a href="#equal-判断相等与否" class="headerlink" title="equal() 判断相等与否"></a>equal() 判断相等与否</h2><p>如果两数列的各元素值都相同, 就返回true. 如果第二数列的元素比较多, 多出来的元素不予考虑. 默认使用equality 运算符, 但也可以传入一个二元的function object 或function pointer, 用以指定另一种比较方式.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">class</span> EqualAndOdd &#123;</div><div class="line">    <span class="keyword">public</span>: </div><div class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="keyword">int</span> v1, <span class="keyword">int</span> v2)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> ((v1 == v2) &amp;&amp; (v1 % <span class="number">2</span>));</div><div class="line">        &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">int</span> ia1[] = &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span>&#125;;</div><div class="line"><span class="keyword">int</span> ia2[] = &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">21</span>, <span class="number">34</span>&#125;;</div><div class="line">res = equal(ia1, ia1 + <span class="number">7</span>, ia2); <span class="comment">// true</span></div><div class="line">res = equal(ia1, ia1 + <span class="number">7</span>, ia2, equalAndOdd()); <span class="comment">// false</span></div></pre></td></tr></table></figure>
<h2 id="fill-改填元素值"><a href="#fill-改填元素值" class="headerlink" title="fill() 改填元素值"></a>fill() 改填元素值</h2><p>将容器内的每一个元素一一设定为某特定值.</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="built_in">fill</span>(ivec.<span class="built_in">begin</span>(), ivec.<span class="built_in">end</span>(), value);</div></pre></td></tr></table></figure>
<h2 id="fill-n-改填元素值"><a href="#fill-n-改填元素值" class="headerlink" title="fill_n() 改填元素值"></a>fill_n() 改填元素值</h2><p>将容器内的每个元素一一设为某特定值; 只设定n个元素</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#include &lt;algorithm&gt;</span></div><div class="line"></div><div class="line">fill_n(ia, <span class="built_in">count</span>, value)<span class="comment">;</span></div><div class="line">fill_n(svec.<span class="keyword">begin(), </span><span class="built_in">count</span>, string_value)<span class="comment">;</span></div></pre></td></tr></table></figure>
<h2 id="find-搜索"><a href="#find-搜索" class="headerlink" title="find() 搜索"></a>find() 搜索</h2><p>容器内的元素被一一拿出来和特定值比较. 一旦遇到相符的元素, 搜索操作便结束. find() 返回一个iterator, 指向该元素. 如果没有任何相符元素, 就返回容器的end().</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line">piter = <span class="built_in">find</span>(ia, ia + <span class="number">8</span>, value);</div><div class="line">iter = <span class="built_in">find</span>(svec.<span class="built_in">begin</span>(), svec.<span class="built_in">end</span>(), <span class="string">"rosebud"</span>);</div></pre></td></tr></table></figure>
<h2 id="find-end-搜索某个子序列的最后一次出现地点"><a href="#find-end-搜索某个子序列的最后一次出现地点" class="headerlink" title="find_end() 搜索某个子序列的最后一次出现地点"></a>find_end() 搜索某个子序列的最后一次出现地点</h2><p>此算法接受两组iterator. 第一组iterator 标示被搜索的容器范围. 第二组iterator 标示作为比对标准的一组元素序列. find_end() 会找出容器内出现<code>比对元素序列</code>的最后一次位置. 比对方式默认是equality 运算符, 但亦允许另行制定一个二元运算. 如果比对成功, 就返回iterator 指向符合条件的位置. 如果比对失败(找不到吻合序列), 就返回所指定之容器范围的末尾(亦即find_end() 的第二参数). 举个例子, 给定字符序列Mississippi 及第二序列ss, find_end() 会返回一个iterator, 指向Mississippi 中的第二个ss 子序列的第一个s 位置.</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#include &lt;algorithm&gt;</div><div class="line"></div><div class="line">int ia[<span class="number">17</span>] = &#123;<span class="number">7</span> , <span class="number">3</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">3</span>&#125;;</div><div class="line">int seq[<span class="number">3</span>] = &#123;<span class="number">3</span>, <span class="number">7</span>, <span class="number">6</span>&#125;;</div><div class="line"></div><div class="line"><span class="comment">// found_it 指向ia[10]</span></div><div class="line">found_it = find_end(ia, ia + <span class="number">17</span>, seq, seq + <span class="number">3</span>);</div></pre></td></tr></table></figure>
<h2 id="find-first-of-搜索某些元素的首次出现地点"><a href="#find-first-of-搜索某些元素的首次出现地点" class="headerlink" title="find_first_of() 搜索某些元素的首次出现地点"></a>find_first_of() 搜索某些元素的首次出现地点</h2><p>此算法接受两组iterator. 第一组iterator 标示被搜索的容器范围. 第二组iterator 标示作为比对标准的一组元素序列. 举个例子, 如果我们想找出字符串synesthesia 中的第一个元音字母, 我们把第二字符串定义为aeiou. 如果第一序列中存在第二序列的任一元素, find_first_of() 便返回一个iterator, 指向第一个出现的元素—本例为第一个e. 如果第一序列中并不存在第二序列的任何元素值, 变返回一个iterator, 指向第一序列的末尾. 可选的第五参数, 允许你指定一个二元运算, 借此改用equality 运算符以外的比较方式.</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="built_in">string</span> s_array[] = &#123;<span class="string">"Ee"</span>, <span class="string">"eE"</span>, <span class="string">"ee"</span>, <span class="string">"Oo"</span>, <span class="string">"oo"</span>, <span class="string">"ee"</span>&#125;<span class="comment">;</span></div><div class="line"><span class="built_in">string</span> to_find[] = &#123;<span class="string">"oo"</span>, <span class="string">"gg"</span>, <span class="string">"ee"</span>&#125;<span class="comment">;</span></div><div class="line"></div><div class="line">// 返回第一次出现<span class="string">"ee"</span> 的位置. 答案将是&amp;s_array[<span class="number">2</span>]</div><div class="line">found_it = find_first_of&#123;s_array, s_array + <span class="number">6</span>, to_find, to_find + <span class="number">3</span>&#125;<span class="comment">;</span></div></pre></td></tr></table></figure>
<h2 id="find-if-在特定条件下搜索"><a href="#find-if-在特定条件下搜索" class="headerlink" title="find_if() 在特定条件下搜索"></a>find_if() 在特定条件下搜索</h2><p>容器内的元素会被一一施以特定的二元运算, 测试是否符合条件. 如果找到符合条件的元素, 搜索操作便结束, 并返回一个iterator 指向该元素. 如果没有找到符合条件的元素, 就返回容器的end(). </p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> &lt;algorithm&gt;</span></div><div class="line"></div><div class="line">find_if(<span class="built_in">vec</span>.begin(), <span class="built_in">vec</span>.<span class="keyword">end</span>(), LessThanVal(ival));</div></pre></td></tr></table></figure>
<h2 id="for-each-对范围内的第一个元素应用某个操作"><a href="#for-each-对范围内的第一个元素应用某个操作" class="headerlink" title="for_each() 对范围内的第一个元素应用某个操作"></a>for_each() 对范围内的第一个元素应用某个操作</h2><p>for_each() 的第三个参数用来表示<code>将依次应用于每个元素身上</code>的运算. 这个运算不得更改元素值, 如果要更改元素值, 可使用transform(). 指定的运算如果有返回值, 该值会被忽略.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Type&gt;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_elements</span><span class="params">(Type elem)</span> </span>&#123;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; elem &lt;&lt; <span class="string">" "</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">for_each(ivec.begin(), ivec.end(), print_elements);</div></pre></td></tr></table></figure>
<h2 id="generate-以指定操作的运算结果填充特定范围内的元素"><a href="#generate-以指定操作的运算结果填充特定范围内的元素" class="headerlink" title="generate()  以指定操作的运算结果填充特定范围内的元素"></a>generate()  以指定操作的运算结果填充特定范围内的元素</h2><p>generate() 会将指定操作的运算结果, 填入序列之中.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">class</span> GenByTwo &#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span> <span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">static</span> <span class="keyword">int</span> seed = <span class="number">-1</span>;</div><div class="line">            <span class="keyword">return</span> seed +=<span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">&#125;;</div><div class="line"><span class="built_in">list</span>&lt;<span class="keyword">int</span>&gt; ilist(<span class="number">10</span>);</div><div class="line"><span class="comment">// 填入ilist 的内容为 1 3 5 7 9 11 13 15 17 19</span></div><div class="line">generate(ilist.begin(), ilist.end(), GenByTwo());</div></pre></td></tr></table></figure>
<h2 id="generate-n-以指定操作的运算结果填充n个元素的内容"><a href="#generate-n-以指定操作的运算结果填充n个元素的内容" class="headerlink" title="generate_n()  以指定操作的运算结果填充n个元素的内容"></a>generate_n()  以指定操作的运算结果填充n个元素的内容</h2><p>generate_n 会连续调用指定操作n次, 并将这n次的结果填入序列的n个元素之中.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">class</span> gen_by_two &#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        gen_by_two (<span class="keyword">int</span> seed = <span class="number">0</span>) : <span class="number">_</span>seed(seed) &#123;&#125;</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">operator</span> <span class="params">()</span> <span class="params">()</span> </span>&#123;<span class="keyword">return</span> <span class="number">_</span>seed += <span class="number">2</span>;&#125;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">int</span> <span class="number">_</span>seed;</div><div class="line">&#125;</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ivec(<span class="number">10</span>);</div><div class="line"></div><div class="line"><span class="comment">// 填入ivec的内容为 102 104 106 108 110 112 114 116 118 120</span></div><div class="line">generate_n(ivec.begin(), ivec.size(), gen_by_two(<span class="number">100</span>));</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[vim-奇技淫巧]]></title>
      <url>https://beim.github.io/2016/10/05/vim-%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7/</url>
      <content type="html"><![CDATA[<p><img src="http://ob4a6y748.bkt.clouddn.com/Vimlogo.svg" alt="vim"></p>
<a id="more"></a>
<h1 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h1><table>
<thead>
<tr>
<th>输入</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>w</td>
<td>移动到下一个单词开头</td>
</tr>
<tr>
<td>e</td>
<td>移动到下一个单词结尾</td>
</tr>
<tr>
<td>b</td>
<td>倒退到上一个单词开头</td>
</tr>
<tr>
<td>0</td>
<td>移动到行首</td>
</tr>
<tr>
<td>$</td>
<td>移动到行末</td>
</tr>
<tr>
<td>+</td>
<td>移动到上一行开头</td>
</tr>
<tr>
<td>-</td>
<td>移动到下一行开头</td>
</tr>
<tr>
<td>^</td>
<td>移动到当前行第一个非空格处</td>
</tr>
<tr>
<td></td>
<td>滚动</td>
</tr>
<tr>
<td>ctrl+f</td>
<td>向前滚屏 (front)</td>
</tr>
<tr>
<td>ctrl+b</td>
<td>向后滚屏 (back)</td>
</tr>
<tr>
<td>ctrl+d</td>
<td>向前滚半屏 (down)</td>
</tr>
<tr>
<td>ctrl+u</td>
<td>向后滚半屏 (up)</td>
</tr>
<tr>
<td>ctrl+e</td>
<td>向后滚一行</td>
</tr>
<tr>
<td>ctrl+y</td>
<td>向前滚一行</td>
</tr>
<tr>
<td></td>
<td>z调整滚动</td>
</tr>
<tr>
<td>z<enter></enter></td>
<td>将光标所在行移动到屏幕顶端</td>
</tr>
<tr>
<td>zz</td>
<td>将光标所在行移动到屏幕中间</td>
</tr>
<tr>
<td>z-</td>
<td>将光标所在行移动到屏幕底端</td>
</tr>
<tr>
<td>980zz</td>
<td>将第980行移动到屏幕中间</td>
</tr>
<tr>
<td></td>
<td>在屏幕中移动</td>
</tr>
<tr>
<td>H</td>
<td>移动到屏幕顶端的行 (high)</td>
</tr>
<tr>
<td>M</td>
<td>移动到屏幕中央的行 (middle)</td>
</tr>
<tr>
<td>L</td>
<td>移动到屏幕底端的行 (low)</td>
</tr>
<tr>
<td>nH</td>
<td>移动到屏幕顶端往下第n行</td>
</tr>
<tr>
<td>nL</td>
<td>移动到屏幕顶端往上的第n行</td>
</tr>
<tr>
<td></td>
<td>最强移动</td>
</tr>
<tr>
<td>nG</td>
<td>转至第n行</td>
</tr>
<tr>
<td>G</td>
<td>转至文本末尾</td>
</tr>
<tr>
<td>gg</td>
<td>转至文本开头</td>
</tr>
</tbody>
</table>
<h1 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h1><table>
<thead>
<tr>
<th>输入</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>i</td>
<td>光标位置插入</td>
</tr>
<tr>
<td>a</td>
<td>光标位置后插入 (append)</td>
</tr>
<tr>
<td>I</td>
<td>行首插入</td>
</tr>
<tr>
<td>A</td>
<td>行末插入</td>
</tr>
<tr>
<td>o</td>
<td>下一行插入</td>
</tr>
<tr>
<td>O</td>
<td>上一行插入</td>
</tr>
<tr>
<td>cc</td>
<td>当前行根据缩进插入</td>
</tr>
</tbody>
</table>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[cpp-顺序性容器]]></title>
      <url>https://beim.github.io/2016/10/05/cpp-%E9%A1%BA%E5%BA%8F%E6%80%A7%E5%AE%B9%E5%99%A8/</url>
      <content type="html"><![CDATA[<p>要使用顺序性容器,首先必须包含相关的头文件,也就是以下三者之一:<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h1 id="定义顺序性容器对象的方式有五种"><a href="#定义顺序性容器对象的方式有五种" class="headerlink" title="定义顺序性容器对象的方式有五种"></a>定义顺序性容器对象的方式有五种</h1><ol>
<li><p>产生空的容器</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">list</span>&lt;<span class="built_in">string</span>&gt; slist;</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ivec;</div></pre></td></tr></table></figure>
</li>
<li><p>产生特定大小的容器.每个元素都以其默认值作为初值.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">list</span>&lt;<span class="keyword">int</span>&gt; ilist(<span class="number">1024</span>);</div><div class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; svec(<span class="number">32</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>产生特定大小的容器,并为每个元素赋制定初值</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ivec(<span class="number">10</span>, <span class="number">-1</span>);</div><div class="line"><span class="built_in">list</span>&lt;<span class="built_in">string</span>&gt; slist(<span class="number">16</span>, <span class="string">"unassigned"</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>通过一对iterator 产生容器. 这对iterator 用来标示一整组作为初值的元素的范围;</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">int ia[<span class="number">8</span>] = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">21</span>];</div><div class="line"><span class="type">vector</span>&lt;int&gt; fib(ia, ia + <span class="number">8</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>根据某个容器产生出新容器. 复制原容器内的元素, 作为新容器的初值.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">list</span>&lt;<span class="built_in">string</span>&gt; slist; <span class="comment">// 空容器</span></div><div class="line"><span class="comment">// 填充list...</span></div><div class="line"><span class="built_in">list</span>&lt;<span class="built_in">string</span>&gt; slist2(slist); <span class="comment">// 将slist 复制给slist2</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="操作函数"><a href="#操作函数" class="headerlink" title="操作函数:"></a>操作函数:</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">push_back()  // 在末端插入一个元素</div><div class="line">pop_back()  // 在末端删除一个元素, 不返回被删除的元素值.</div><div class="line">push_front()  // 在最前端插入一个元素(list 和deque, 不包括vector)</div><div class="line">pop_front()  // 在最前端删除一个元素(list 和deque, 不包括vector), 不返回被删除的元素值</div><div class="line">front()  // 返回最前端元素的值</div><div class="line">back()  // 返回末端元素的值</div><div class="line"></div><div class="line">iterator <span class="keyword">insert</span>(iterator <span class="keyword">position</span>, elemType <span class="keyword">value</span>) </div><div class="line">将<span class="keyword">value</span> 插入<span class="keyword">position</span> 之前. 它会返回一个iterator, 指向被插入的元素.</div><div class="line"></div><div class="line"><span class="built_in">void</span> <span class="keyword">insert</span>(iterator <span class="keyword">position</span>, <span class="built_in">int</span> <span class="keyword">count</span>, elemType <span class="keyword">value</span>) </div><div class="line">在<span class="keyword">position</span> 之前插入<span class="keyword">count</span> 个元素, 这些元素的值都和<span class="keyword">value</span> 相同.</div><div class="line"></div><div class="line"><span class="built_in">void</span> <span class="keyword">insert</span>(iterator1 <span class="keyword">position</span>, iterator2 <span class="keyword">first</span>, iterator3 <span class="keyword">last</span>)</div><div class="line">可在<span class="keyword">position</span> 之前插入[<span class="keyword">first</span>, <span class="keyword">last</span>) 所标示的各个元素.</div><div class="line"></div><div class="line">// iterator <span class="keyword">insert</span>(iterator <span class="keyword">position</span>) </div><div class="line">// 可在<span class="keyword">position</span> 之前插入元素. 元素的初值为所属类型的默认值.</div><div class="line"></div><div class="line">iterator erase(iterator posit) </div><div class="line">可删除posit 所指的元素</div><div class="line"></div><div class="line">iterator erase(iterator <span class="keyword">first</span>, iterator <span class="keyword">last</span>) </div><div class="line">删除[<span class="keyword">first</span>, <span class="keyword">last</span>) 范围内的元素</div></pre></td></tr></table></figure>
<h1 id="itertor-与-const-iterator-与-const-iterator-区别"><a href="#itertor-与-const-iterator-与-const-iterator-区别" class="headerlink" title="itertor 与 const_iterator 与 const iterator 区别"></a>itertor 与 const_iterator 与 const iterator 区别</h1><p>如果你传递过来一个const 类型的容器, 那么只能用const_iterator 来遍历<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Method</span> <span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vInt)</span> </span>&#123;</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::const_iterator iter;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>简单示例const_iterator 与const iterator<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ivec;</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::const_iterator citer1 = ivec.begin();</div><div class="line"><span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator citer2 = ivec.begin();</div><div class="line">*citer1 = <span class="number">1</span>; <span class="comment">// error</span></div><div class="line">*citer2 = <span class="number">1</span>; <span class="comment">// right</span></div><div class="line">++citer1; <span class="comment">// right</span></div><div class="line">++citer2; <span class="comment">// error</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>详见 <a href="http://www.cnblogs.com/greatverve/archive/2012/09/12/const-iterator.html" target="_blank" rel="external">博客园</a></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JS-char-code]]></title>
      <url>https://beim.github.io/2016/09/29/JS-char-code/</url>
      <content type="html"><![CDATA[<h2 id="String-fromCharCode"><a href="#String-fromCharCode" class="headerlink" title="String.fromCharCode()"></a>String.fromCharCode()</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/fromCharCode" target="_blank" rel="external">MDN</a></p>
<p>String.fromCharCode() 静态方法根据制定的Unicode 编码中的序号值来返回一个字符串<br>由于fromCharCode 是String 的静态方法, 所以应该这样使用: String.fromCharCode(), 而不是作为你创建的String 对象的方法.</p>
<blockquote>
<p>String.fromCharCode(num1, …, numN)</p>
</blockquote>
<p>参数:<br>num1, …, numN<br>    一组序列数字,表示Unicode 值.</p>
<p><code>String.fromCharCode(65, 66, 67) // &quot;ABC&quot;</code></p>
<a id="more"></a>
<hr>
<h2 id="String-fromCodePoint"><a href="#String-fromCodePoint" class="headerlink" title="String.fromCodePoint()"></a>String.fromCodePoint()</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/fromCodePoint" target="_blank" rel="external">MDN</a></p>
<p>与fromCharCode 功能类似, 但是支持的Unicode 字符更全.<br>由于fromCodePoint() 是String 的一个静态方法, 所以只能通过String.fromCodePoint() 这样的方式来使用, 不能在String 对象的实例上直接调用.</p>
<hr>
<h2 id="String-prototype-charAt"><a href="#String-prototype-charAt" class="headerlink" title="String.prototype.charAt()"></a>String.prototype.charAt()</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/charAt" target="_blank" rel="external">MDN</a></p>
<p>charAt() 方法返回字符串中指定位置的字符</p>
<blockquote>
<p>str.charAt(index)</p>
</blockquote>
<p>参数:<br>index<br>    0 到 字符串长度-1 的一个整数</p>
<p><code>&#39;abc&#39;.charAt(1) // &#39;b&#39;</code></p>
<hr>
<h2 id="String-prototype-charCodeAt"><a href="#String-prototype-charCodeAt" class="headerlink" title="String.prototype.charCodeAt()"></a>String.prototype.charCodeAt()</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt" target="_blank" rel="external">MDN</a></p>
<p>charCodeAt() 方法返回0到65535 之间的整数, 代表索引处字符的UTF-16编码单元, 如果你希望得到整点编码值, 使用codePointAt()</p>
<blockquote>
<p>str.charCodeAt(index)</p>
</blockquote>
<p>参数:<br>index<br>    一个大于等于0, 小于字符串长度的整数. 如果不是一个数值, 则默认为0</p>
<p>如果index 小于0 或不小于字符串的长度, 则返回NaN</p>
<p><code>&quot;ABC&quot;.charCodeAt(0) // 65</code></p>
<hr>
<h2 id="String-prototype-codePointAt"><a href="#String-prototype-codePointAt" class="headerlink" title="String.prototype.codePointAt()"></a>String.prototype.codePointAt()</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/codePointAt" target="_blank" rel="external">MDN</a></p>
<p>codePointAt() 方法返回一个代表unicode 编码的非负整数</p>
<blockquote>
<p>str.codePointAt(pos)</p>
</blockquote>
<p>参数:<br>pos<br>    指向字符串中需要返回编码的元素的位置</p>
<p>如果pos 指向的位置没有元素, 将返回undefined</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">'ABC'</span>.codePointAt(<span class="number">1</span>) <span class="comment">// 66</span></div><div class="line"><span class="string">'\uD800\uDC00'</span>.codePointAt(<span class="number">0</span>) <span class="comment">// 65536</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JS-正则表达式]]></title>
      <url>https://beim.github.io/2016/09/21/JS-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      <content type="html"><![CDATA[<h2 id="RegExp-方法"><a href="#RegExp-方法" class="headerlink" title="RegExp 方法"></a>RegExp 方法</h2><ul>
<li><p>RegExp.prototype.exec()</p>
</li>
<li><p>RegExp.prototype.test()</p>
</li>
<li><p>RegExp.prototype.toSource()</p>
</li>
<li><p>RegExp.prototype.toString()</p>
</li>
</ul>
<h2 id="String-方法"><a href="#String-方法" class="headerlink" title="String 方法"></a>String 方法</h2><ul>
<li><p>String.prototype.match()</p>
</li>
<li><p>String.prototype.replace()</p>
</li>
</ul>
<a id="more"></a>
<h2 id="栗子"><a href="#栗子" class="headerlink" title="栗子"></a>栗子</h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> patt = /a/</div><div class="line"><span class="keyword">let</span> <span class="keyword">str</span> = <span class="symbol">'abcabc</span>'</div><div class="line"></div><div class="line">patt.exec(<span class="keyword">str</span>) </div><div class="line"><span class="comment">// [ 'a', index: 0, input: 'abcabc' ]</span></div><div class="line">patt.test(<span class="keyword">str</span>) </div><div class="line"><span class="comment">// true </span></div><div class="line"><span class="keyword">str</span>.<span class="keyword">match</span>(patt) </div><div class="line"><span class="comment">// [ 'a', index: 0, input: 'abcabc' ]</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> patt1 = /a/g</div><div class="line">patt1.exec(<span class="keyword">str</span>)</div><div class="line"><span class="comment">// [ 'a', index: 0, input: 'abcabc' ]</span></div><div class="line">patt1.test(<span class="keyword">str</span>)</div><div class="line"><span class="comment">// true</span></div><div class="line"><span class="keyword">str</span>.<span class="keyword">match</span>(patt1)</div><div class="line"><span class="comment">// [ 'a', 'a' ]</span></div></pre></td></tr></table></figure>
<h2 id="更多栗子"><a href="#更多栗子" class="headerlink" title="更多栗子"></a>更多栗子</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> patt = /(GET) (HTTP)/</div><div class="line"><span class="keyword">let</span> str = <span class="string">'test GET HTTP'</span></div><div class="line"></div><div class="line">patt.exec(str)</div><div class="line">// [ <span class="string">'GET HTTP'</span>, <span class="string">'GET'</span>, <span class="string">'HTTP'</span>, <span class="built_in">index</span>: <span class="number">5</span>, inpu<span class="variable">t:</span> <span class="string">'test GET HTTP'</span> ]</div><div class="line"></div><div class="line">patt.test(str)</div><div class="line">// true</div><div class="line"></div><div class="line">str.<span class="keyword">match</span>(patt)</div><div class="line">// [ <span class="string">'GET HTTP'</span>, <span class="string">'GET'</span>, <span class="string">'HTTP'</span>, <span class="built_in">index</span>: <span class="number">5</span>, inpu<span class="variable">t:</span> <span class="string">'test GET HTTP'</span> ]</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">let</span> patt = /(GET) (HTTP)/g</div><div class="line"><span class="keyword">let</span> str = <span class="string">'test GET HTTP'</span></div><div class="line"></div><div class="line">patt.exec(str)</div><div class="line">// [ <span class="string">'GET HTTP'</span>, <span class="string">'GET'</span>, <span class="string">'HTTP'</span>, <span class="built_in">index</span>: <span class="number">5</span>, inpu<span class="variable">t:</span> <span class="string">'test GET HTTP'</span> ]</div><div class="line"></div><div class="line">patt.test(str)</div><div class="line">// true</div><div class="line"></div><div class="line">patt.<span class="keyword">match</span>(str)</div><div class="line">// [<span class="string">'GET HTTP'</span>]</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[编译原理2E-笔记]]></title>
      <url>https://beim.github.io/2016/09/14/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%862E-%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p><img src="http://ob4a6y748.bkt.clouddn.com/compilers.jpg" alt="compiler"><br><a id="more"></a></p>
<h1 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h1><h2 id="第三章词法分析"><a href="#第三章词法分析" class="headerlink" title="第三章词法分析"></a>第三章词法分析</h2><p><strong>3.1.1</strong></p>
<figure class="highlight bnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">&lt;float&gt;</span> <span class="attribute">&lt;id, limitedSquaare&gt;</span> <span class="attribute">&lt;(&gt;</span> <span class="attribute">&lt;id, x&gt;</span> <span class="attribute">&lt;)&gt;</span> <span class="attribute">&lt;&#123;&gt;</span></div><div class="line">  <span class="attribute">&lt;float&gt;</span> <span class="attribute">&lt;id, x&gt;</span></div><div class="line">  <span class="attribute">&lt;return&gt;</span> <span class="attribute">&lt;(&gt;</span> <span class="attribute">&lt;id, x&gt;</span> <span class="attribute">&lt;op,"&lt;="&gt;</span> <span class="attribute">&lt;num, -10.0&gt;</span> <span class="attribute">&lt;op, "||"&gt;</span> <span class="attribute">&lt;id, x&gt;</span> <span class="attribute">&lt;op, "&gt;</span>="&gt; <span class="attribute">&lt;num, 10.0&gt;</span> <span class="attribute">&lt;)&gt;</span> <span class="attribute">&lt;op, "?"&gt;</span> <span class="attribute">&lt;num, 100&gt;</span> <span class="attribute">&lt;op, ":"&gt;</span> <span class="attribute">&lt;id, x&gt;</span> <span class="attribute">&lt;op, "*"&gt;</span> <span class="attribute">&lt;id, x&gt;</span></div><div class="line"><span class="attribute">&lt;&#125;&gt;</span></div></pre></td></tr></table></figure>
<p><strong>3.1.2</strong></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="section">&lt;text, "Here is a photo of"&gt;</span> <span class="section">&lt;nodeStart, b&gt;</span> <span class="section">&lt;text, "my house"&gt;</span> <span class="section">&lt;nodeEnd, b&gt;</span></div><div class="line"><span class="section">&lt;nodeStart, p&gt;</span> <span class="section">&lt;selfEndNodeStart, IMG&gt;</span> <span class="section">&lt;SRC, "house.gif"&gt;</span> <span class="section">&lt;selfEndNodeEnd, IMG&gt;</span> <span class="section">&lt;selfEndNode, BR&gt;</span></div><div class="line"><span class="section">&lt;text, "See"&gt;</span> <span class="section">&lt;nodeStart, A&gt;</span> <span class="section">&lt;HREF, "morePix.html"&gt;</span> <span class="section">&lt;selfEndNodeEnd, A&gt;</span> <span class="section">&lt;text, "More Pictures"&gt;</span> <span class="section">&lt;nodeEnd, A&gt;</span> <span class="section">&lt;text, "if you liked that one."&gt;</span></div><div class="line"><span class="section">&lt;nodeEnd, p&gt;</span></div></pre></td></tr></table></figure>
<p><strong>3.3.2</strong></p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>) <span class="keyword">a</span>开头<span class="keyword">a</span>结尾,中间是大于等于<span class="number">0</span>个<span class="keyword">a</span>或b组成的字符串 如 abababaaba</div><div class="line"><span class="number">2</span>) 任意<span class="keyword">a</span>与b组成的字符串</div><div class="line"><span class="number">3</span>) 以<span class="keyword">a</span> 连接 <span class="keyword">a</span>或b 连接 <span class="keyword">a</span>或b 结尾的任意<span class="keyword">a</span>与b组成的字串</div><div class="line"><span class="number">4</span>) <span class="number">3</span>个b和任意个<span class="keyword">a</span>组成的字串</div><div class="line"><span class="number">5</span>) 偶数个<span class="keyword">a</span>和b组成的字串</div></pre></td></tr></table></figure>
<p><strong>3.3.3</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>) n + <span class="number">1</span></div><div class="line"><span class="number">2</span>) n + <span class="number">1</span></div><div class="line"><span class="number">3</span>) n</div><div class="line"><span class="number">4</span>) (<span class="number">1</span> + n) / <span class="number">2</span> * n + <span class="number">1</span></div><div class="line"><span class="number">5</span>) <span class="number">2</span>^n</div></pre></td></tr></table></figure>
<p><strong>3.3.4</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/select/i</div><div class="line">select -&gt; [<span class="string">Ss</span>][<span class="symbol">Ee</span>][<span class="string">Ll</span>][<span class="symbol">Ee</span>][<span class="string">Cc</span>][<span class="symbol">Tt</span>]</div></pre></td></tr></table></figure>
<p><strong>3.3.5</strong></p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>) want -&gt; other* a (other|<span class="type">a</span>)* e (other|<span class="type">e</span>)* i (other|<span class="type">i</span>)* o (other|<span class="type">o</span>)* u (other|<span class="type">u</span>)*</div><div class="line">    other -&gt; [bcdfghjklmnpqrstvwxyz]</div><div class="line"><span class="number">2</span>) a*b*...z*</div><div class="line"><span class="number">9</span>) b*a*b?a*</div></pre></td></tr></table></figure>
<p><strong>3.3.6</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>) [a-jA-J]</div><div class="line"><span class="number">2</span>) [bcdfghjklmnpqrstvwxzy]</div><div class="line"><span class="number">3</span>) [<span class="number">0</span><span class="number">-9</span>a-f]</div><div class="line"><span class="number">4</span>) [.?!]</div></pre></td></tr></table></figure>
<p><strong>3.5.2</strong></p>
<blockquote>
<p>deemo.lex</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">%&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::ofstream;</div><div class="line"><span class="function">ofstream <span class="title">out</span><span class="params">(<span class="string">"out.txt"</span>)</span></span>;</div><div class="line">%&#125;</div><div class="line"></div><div class="line">delim   [ \t\n]</div><div class="line">ws  &#123;delim&#125;+</div><div class="line"></div><div class="line">%%</div><div class="line">&#123;ws&#125;  out &lt;&lt; <span class="string">" "</span>;</div><div class="line">.  out &lt;&lt; yytext;</div><div class="line">%%</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">yywrap</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">main(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[]) &#123;</div><div class="line">    yylex();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>3.5.3</strong></p>
<blockquote>
<p>deemo.lex</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">%&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::ofstream;</div><div class="line"><span class="function">ofstream <span class="title">out</span><span class="params">(<span class="string">"out.txt"</span>)</span></span>;</div><div class="line">%&#125;</div><div class="line"></div><div class="line">delim   [ \t\n]</div><div class="line">ws  &#123;delim&#125;+</div><div class="line"></div><div class="line">%%</div><div class="line">&#123;ws&#125; &#123;out &lt;&lt; yytext;&#125;</div><div class="line"><span class="keyword">float</span>  &#123;out &lt;&lt; <span class="string">"double"</span>;&#125;</div><div class="line">.  &#123;out &lt;&lt; yytext;&#125;</div><div class="line">%%</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">yywrap</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">main(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[]) &#123;</div><div class="line">    yylex();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>3.5.4</strong></p>
<blockquote>
<p>deemo.lex</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">%&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::ofstream;</div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line"><span class="function">ofstream <span class="title">out</span><span class="params">(<span class="string">"out.txt"</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">display</span> <span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; &amp;cvec, ofstream &amp;os)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cvec.size(); i++) &#123;</div><div class="line">        os &lt;&lt; cvec[i];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">%&#125;</div><div class="line"></div><div class="line">delim   [ \t\n]</div><div class="line">ws  &#123;delim&#125;+</div><div class="line">letter  [A-Za-z]</div><div class="line">digit  [<span class="number">0</span><span class="number">-9</span>]</div><div class="line">id &#123;letter&#125;(&#123;letter&#125;|&#123;digit&#125;)*</div><div class="line">number  &#123;digit&#125;+(\.&#123;digit&#125;+)?(E[+-]?&#123;digit&#125;+)?</div><div class="line"></div><div class="line">%%</div><div class="line">&#123;ws&#125; &#123;</div><div class="line">    out &lt;&lt; yytext;</div><div class="line">&#125;</div><div class="line">&#123;letter&#125;+  &#123;</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; cvec(yytext, yytext + <span class="built_in">strlen</span>(yytext));</div><div class="line">    <span class="keyword">if</span> (cvec[<span class="number">0</span>] != <span class="string">'a'</span> &amp;&amp; cvec[<span class="number">0</span>] != <span class="string">'e'</span> &amp;&amp; cvec[<span class="number">0</span>] != <span class="string">'i'</span> &amp;&amp; cvec[<span class="number">0</span>] != <span class="string">'o'</span> &amp;&amp; cvec[<span class="number">0</span>] != <span class="string">'u'</span>) &#123;</div><div class="line">        cvec.push_back(cvec[<span class="number">0</span>]);</div><div class="line">        cvec.erase(cvec.begin());</div><div class="line">    &#125;</div><div class="line">    cvec.push_back(<span class="string">'a'</span>);</div><div class="line">    cvec.push_back(<span class="string">'y'</span>);</div><div class="line">    display(cvec, out);</div><div class="line">&#125;</div><div class="line">.  &#123;</div><div class="line">    out &lt;&lt; yytext;</div><div class="line">&#125;</div><div class="line">%%</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">yywrap</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">main(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[]) &#123;</div><div class="line">    yylex();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>3.5.5</strong></p>
<blockquote>
<p>deemo.lex</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">%&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::ofstream;</div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line"><span class="function">ofstream <span class="title">out</span><span class="params">(<span class="string">"out.txt"</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">display</span> <span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; &amp;cvec, ofstream &amp;os)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cvec.size(); i++) &#123;</div><div class="line">        os &lt;&lt; cvec[i];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">%&#125;</div><div class="line"></div><div class="line">delim   [ \t\n]</div><div class="line">ws  &#123;delim&#125;+</div><div class="line">letter  [A-Za-z]</div><div class="line">digit  [<span class="number">0</span><span class="number">-9</span>]</div><div class="line">id &#123;letter&#125;(&#123;letter&#125;|&#123;digit&#125;)*</div><div class="line">number  &#123;digit&#125;+(\.&#123;digit&#125;+)?(E[+-]?&#123;digit&#125;+)?</div><div class="line"></div><div class="line">%%</div><div class="line">&#123;ws&#125; &#123;</div><div class="line">    out &lt;&lt; yytext;</div><div class="line">&#125;</div><div class="line">[Ss][Ee][Ll][Ee][Cc][Tt]  &#123;</div><div class="line">    out &lt;&lt; <span class="string">"select"</span>;</div><div class="line">&#125;</div><div class="line">[Ff][Rr][Oo][Mm]  &#123;</div><div class="line">    out &lt;&lt; <span class="string">"from"</span>;</div><div class="line">&#125;</div><div class="line">[Ww][Hh][Ee][Rr][Ee]  &#123;</div><div class="line">    out &lt;&lt; <span class="string">"where"</span>;</div><div class="line">&#125;</div><div class="line">&#123;id&#125;  &#123;</div><div class="line">    out &lt;&lt; yytext;</div><div class="line">&#125;</div><div class="line">.  &#123;</div><div class="line">    out &lt;&lt; yytext;</div><div class="line">&#125;</div><div class="line">%%</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">yywrap</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">main(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[]) &#123;</div><div class="line">    yylex();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="第四章语法分析"><a href="#第四章语法分析" class="headerlink" title="第四章语法分析"></a>第四章语法分析</h2><p><strong>4.2.1</strong></p>
<ol>
<li><p>最左推倒</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">S -&gt; SS*</div><div class="line">  -<span class="ruby">&gt; SS+S*</span></div><div class="line">  -<span class="ruby">&gt; aS+S*</span></div><div class="line">  -<span class="ruby">&gt; aa+S*</span></div><div class="line">  -<span class="ruby">&gt; aa+a*</span></div></pre></td></tr></table></figure>
</li>
<li><p>最右推倒</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">S -&gt; SS*</div><div class="line">  -<span class="ruby">&gt; Sa*</span></div><div class="line">  -<span class="ruby">&gt; SS+a*</span></div><div class="line">  -<span class="ruby">&gt; Sa+a*</span></div><div class="line">  -<span class="ruby">&gt; aa+a*</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>4.2.3</strong></p>
<ol>
<li>S -&gt; 0T1S | 1S | null<br>T -&gt; 1T | 0T | 0</li>
</ol>
<h1 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h1><h2 id="LR语法分析算法-算法4-44-p159"><a href="#LR语法分析算法-算法4-44-p159" class="headerlink" title="LR语法分析算法(算法4.44 p159)"></a>LR语法分析算法(算法4.44 p159)</h2><p>输入: 一个输入串w 和一个LR 语法分析表, 这个标描述了文法G 的ACTION 函数和GOTO 函数.</p>
<p>输出: 如果w 在L(G) 中, 则输出w 的自底向上语法分析过程中的归约步骤; 否则给出一个错误指示.</p>
<p>文法:<br><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(<span class="number">1</span>) E -&gt; E + <span class="literal">T</span>      (<span class="number">4</span>) <span class="literal">T</span> -&gt; <span class="literal">F</span></div><div class="line">(<span class="number">2</span>) E -&gt; <span class="literal">T</span>          (<span class="number">5</span>) <span class="literal">F</span> -&gt; (E)</div><div class="line">(<span class="number">3</span>) <span class="literal">T</span> -&gt; <span class="literal">T</span> * <span class="literal">F</span>      (<span class="number">6</span>) <span class="literal">F</span> -&gt; id</div></pre></td></tr></table></figure></p>
<p>LR 语法分析程序<br><figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">令a 为w$ 的第一个符号</div><div class="line"><span class="keyword">while</span><span class="comment">(1)</span> &#123;</div><div class="line">    s = 栈顶的状态</div><div class="line">    <span class="keyword">if</span> <span class="comment">(ACTION[s, a] == 移入t)</span> &#123;</div><div class="line">        将t 压入栈中;</div><div class="line">        令a 为下一个输入符号</div><div class="line">    &#125; else <span class="keyword">if</span> <span class="comment">(ACTION[s, a] == 归约 A -&gt; β)</span> &#123;</div><div class="line">        从栈中弹出|β| 个符号;</div><div class="line">        t = 栈顶的状态</div><div class="line">        将<span class="keyword">GOTO</span>[t, A] 压入栈中</div><div class="line">        输出产生式A -&gt; β</div><div class="line">    &#125; else <span class="keyword">if</span> <span class="comment">(ACTION[s, a] = 接受)</span> &#123;</div><div class="line">        break; <span class="comment">/* 语法分析完成 */</span></div><div class="line">    &#125; else &#123;</div><div class="line">        调用错误恢复例程</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="翻译"><a href="#翻译" class="headerlink" title="翻译"></a>翻译</h2><p>声明语句的翻译</p>
<p>赋值语句的翻译</p>
<p>控制语句的翻译</p>
<p>回填</p>
<p>switch 语句的翻译</p>
<p>过程调用语句的翻译</p>
<h2 id="存储分配"><a href="#存储分配" class="headerlink" title="存储分配"></a>存储分配</h2><h3 id="静态存储分配-顺序分配法-层次分配法"><a href="#静态存储分配-顺序分配法-层次分配法" class="headerlink" title="静态存储分配(顺序分配法)(层次分配法)"></a>静态存储分配(顺序分配法)(层次分配法)</h3><h3 id="栈式存储分配"><a href="#栈式存储分配" class="headerlink" title="栈式存储分配"></a>栈式存储分配</h3><p>活动树<br>设计活动记录</p>
<p>调用序列<br>返回序列</p>
<p>变长数据</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[计算机网络-笔记]]></title>
      <url>https://beim.github.io/2016/09/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C5E-%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h1 id="0"><a href="#0" class="headerlink" title="0"></a>0</h1><p><strong>tcp报文中的 Timestamp option</strong><br><a href="http://stackoverflow.com/questions/2524511/what-is-the-meaning-of-the-tsv-and-tser-fields-in-an-ethereal-dump" target="_blank" rel="external">Timestamp value 和 Timestamp echo 作用</a></p>
<hr>
<h1 id="计算机网络5E"><a href="#计算机网络5E" class="headerlink" title="计算机网络5E"></a>计算机网络5E</h1><h2 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h2><ul>
<li><p><strong>IP</strong> (Internet Protocol) 因特网协议</p>
</li>
<li><p><strong>ICMP</strong> (Internet Control Message Protocol) 因特网控制报文协议</p>
</li>
<li><p><strong>TCP</strong> (Transport Control Protocol) 传输控制协议</p>
</li>
<li><p><strong>UDP</strong> (User Datagram Protocol) 用户数据报协议</p>
</li>
<li><p><strong>Internet</strong> 因特网</p>
</li>
<li><p><strong>internet</strong> 互联网</p>
</li>
<li><p><strong>NAP</strong> (Network Access Point) 网络接入点</p>
</li>
<li><p><strong>DSL</strong> (Digital Subscriber Line) 数字用户线</p>
</li>
</ul>
<a id="more"></a>
<ul>
<li><p><strong>SMTP</strong> (Simple Mail Transfer Protocol) 简单邮件传输协议</p>
</li>
<li><p><strong>POP3</strong> (Post Office Protocol) 邮局协议版本3</p>
</li>
<li><p><strong>HTTP</strong> (HyperText Transfer Protocol) 超文本传输协议</p>
</li>
<li><p><strong>URL</strong> (Uniform Resource Locator) 统一资源定位符</p>
</li>
<li><p><strong>CDN</strong> (Content Dilivery Network) 内容分发网络</p>
</li>
<li><p><strong>P2P</strong> (Peer-to-Peer) 对等网络</p>
</li>
</ul>
<hr>
<h2 id="报文格式"><a href="#报文格式" class="headerlink" title="报文格式"></a>报文格式</h2><p><strong>ICMP</strong></p>
<p>Type(1) Code(1) Checksum(2)<br>(这4 个字节取决于ICMP 报文的类型)<br>(ICMP 的数据部分, (长度取决于类型))</p>
<hr>
<h2 id="OSI参考模型"><a href="#OSI参考模型" class="headerlink" title="OSI参考模型"></a>OSI参考模型</h2><ul>
<li><p><strong>物理层(physical layer)</strong> 关注在一条通信信道上传输原始比特。</p>
</li>
<li><p><strong>数据链路层(data link layer)</strong> 的主要任务是将一个原始的传输设施转变成一条没有漏检传输错误的线路。将真实的错误掩盖，使网络层看不到。为此，发送方将输入的数据拆分成<strong>数据帧(data frame)</strong>，则接受方必须确认正确收到每一帧，即给发送方返回一个<strong>确认帧(acknowledgement frame)</strong>。</p>
</li>
<li><p><strong>网络层(network layer)</strong> 的主要功能是控制子网的运行。关键问题是将数据包从源端路由到接受方。处理拥塞也是网络层的责任，一般还要和高层协议结合起来处理拥塞才有效。</p>
</li>
<li><p><strong>传输层(transport layer)</strong> 的基本功能是接受来自上一层的数据，在必要的时候把这些数据分隔成较小的单元，然后把这些数据单元传递给网络层，并且确保这些数据单元正确地到达另一端。</p>
</li>
<li><p><strong>会话层(session layer)</strong> 允许不同机器上的用户建立会话。会话通常提供各种服务，包括<strong>对话控制(dialog control)</strong>(记录该由谁来传递数据)、<strong>令牌管理(token management)</strong>(禁止双方同时执行同一个关键操作)，以及<strong>同步功能(synchronization)</strong>(在一个长传输过程中设置一些断点，以便在系统崩溃之后还能回复到崩溃前的状态继续运行)。</p>
</li>
<li><p><strong>表示层(presentation layer)</strong> 表示层以下的各层关注如何传递数据位，而表示层关注的是所传递信息的语法和语义。不同的计算机可能有不同的内部数据表示法，为了让这些计算机能够进行通信，它们所交换的数据结构必须以一种抽象的方式来定义，同时还应定义一种“线上”使用的标准编码方法。表示层管理这些抽象的数据结构，并允许定义和交换更高层的数据结构（比如银行账户记录）。</p>
</li>
<li><p><strong>应用层(application layer)</strong> 包含了用户通常需要的各种各样的协议。一个得到广泛使用的应用协议是<strong>超文本传输协议(HTTP, HyperText Transfer Protocol)</strong>，它是<strong>万维网</strong>的基础。其他一些应用协议可用于文件传输、电子邮件以及网络新闻等。</p>
</li>
</ul>
<hr>
<h2 id="TCP-IP-参考模型"><a href="#TCP-IP-参考模型" class="headerlink" title="TCP/IP 参考模型"></a>TCP/IP 参考模型</h2><h3 id="设计目标"><a href="#设计目标" class="headerlink" title="设计目标"></a>设计目标</h3><ul>
<li>以无缝的方式将多个网络链接起来。</li>
<li>即使在损失子网硬件的情况下网络还能够继续工作，原有的会话不能被打断。</li>
</ul>
<h3 id="模型结构"><a href="#模型结构" class="headerlink" title="模型结构"></a>模型结构</h3><ul>
<li><p><strong>链路层(link layer)</strong> 该层描述了链路必须王城什么功能才能满足无连接的互连网络层的需求，比如串行线和经典以太网链路。在分层协议的上下文中，链路层并不是通常意义上的一层。它是一个接口（位于网络层和数据链路层之间）。</p>
</li>
<li><p><strong>互联网层(internet layer)</strong> 是将整个网络体系结构贯穿在一起的关键层。它大致对应OSI 的网络层。互联网层的任务是将IP 分组投递到它们该去的地方。数据包的路由是这里最主要的问题，同时该层还要考虑拥塞控制问题。</p>
</li>
<li><p><strong>传输层(transport layer)</strong> 的设计目标是允许源主机和目标主机上的对等实体进行对话，犹如OSI 的传输层一样。这里定义了两个端到端的协议TCP 和UDP。</p>
</li>
<li><p><strong>应用层(application layer)</strong> 包含了所有的高层协议。如虚拟终端协议（TELNET）、文件传输协议（FTP）、电子邮件协议（SMTP）、DNS（Domain Name System）、HTTP以及用于传送实时媒体的RTP 等。</p>
</li>
</ul>
<h3 id="TCP-IP-模型及协议"><a href="#TCP-IP-模型及协议" class="headerlink" title="TCP/IP 模型及协议"></a>TCP/IP 模型及协议</h3><ul>
<li><p><strong>应用层</strong>  HTTP  SMTP  RTP  DNS</p>
</li>
<li><p><strong>传输层</strong>  TCP  UDP</p>
</li>
<li><p><strong>互联网层</strong> IP ICMP</p>
</li>
<li><p><strong>链路层</strong>  DSL  SONET  802.11  Ethernet</p>
</li>
</ul>
<hr>
<h2 id="套接字编程实例-Internet-文件服务器"><a href="#套接字编程实例-Internet-文件服务器" class="headerlink" title="套接字编程实例: Internet 文件服务器"></a>套接字编程实例: Internet 文件服务器</h2><blockquote>
<p>server.c</p>
</blockquote>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/fcntl.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netinet/in.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">void</span> fatal (<span class="keyword">char</span> *<span class="keyword">string</span>) &#123;</div><div class="line">    printf(<span class="string">"%s\n"</span>, <span class="keyword">string</span>);</div><div class="line">    exit(<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SERVER_PORT 12345</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> BUF_SIZE 4096</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> QUEUE_SIZE 10</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> main (<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[]) &#123;</div><div class="line">    <span class="keyword">int</span> s, b, l, fd, sa, bytes, on = <span class="number">1</span>;</div><div class="line">    <span class="keyword">char</span> buf[BUF_SIZE];</div><div class="line">    <span class="keyword">struct</span> sockaddr_in channel;</div><div class="line"></div><div class="line">    memset(&amp;channel, <span class="number">0</span>, <span class="keyword">sizeof</span>(channel));</div><div class="line">    channel.sin_family = AF_INET;</div><div class="line">    channel.sin_addr.s_addr = htonl(INADDR_ANY);</div><div class="line">    channel.sin_port = htons(SERVER_PORT);</div><div class="line"></div><div class="line">    s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);</div><div class="line">    <span class="built_in">if</span> (s &lt; <span class="number">0</span>)  fatal(<span class="string">"socket failed"</span>);</div><div class="line">    setsockopt(s, SOL_SOCKET, SO_REUSEADDR, (<span class="keyword">char</span> *) &amp;on, <span class="keyword">sizeof</span>(on));</div><div class="line">    b = bind(s, (<span class="keyword">struct</span> sockaddr *) &amp;channel, <span class="keyword">sizeof</span>(channel));</div><div class="line">    <span class="built_in">if</span> (b &lt; <span class="number">0</span>) fatal(<span class="string">"bind failed"</span>);</div><div class="line"></div><div class="line">    l = <span class="built_in">listen</span>(s, QUEUE_SIZE);</div><div class="line">    <span class="built_in">if</span> (l &lt; <span class="number">0</span>) fatal(<span class="string">"listen failed"</span>);</div><div class="line"></div><div class="line">    <span class="built_in">while</span> (<span class="number">1</span>) &#123;</div><div class="line">        sa = accept(s, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        <span class="built_in">if</span> (sa &lt; <span class="number">0</span>) fatal(<span class="string">"accept failed"</span>);</div><div class="line">        <span class="built_in">read</span>(sa, buf, BUF_SIZE);</div><div class="line"></div><div class="line">        fd = <span class="built_in">open</span>(buf, O_RDONLY);</div><div class="line">        <span class="built_in">if</span> (fd &lt; <span class="number">0</span>) &#123;</div><div class="line">            fatal(<span class="string">"open failed"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">while</span> (<span class="number">1</span>) &#123;</div><div class="line">            bytes = <span class="built_in">read</span>(fd, buf, BUF_SIZE);</div><div class="line">            <span class="built_in">if</span> (bytes &lt;= <span class="number">0</span>) <span class="built_in">break</span>;</div><div class="line">            <span class="built_in">write</span>(sa, buf, bytes);</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">close</span>(fd);</div><div class="line">        <span class="built_in">close</span>(sa);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>client.c</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netinet/in.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">fatal</span> <span class="params">(<span class="keyword">char</span> *<span class="built_in">string</span>)</span> </span>&#123;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, <span class="built_in">string</span>);</div><div class="line">    <span class="built_in">exit</span>(<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SERVER_PORT 12345</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> BUF_SIZE  4096</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> c, s, bytes;</div><div class="line">    <span class="keyword">char</span> buf[BUF_SIZE];</div><div class="line">    <span class="keyword">struct</span> hostent *h;</div><div class="line">    <span class="keyword">struct</span> sockaddr_in channel;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (argc != <span class="number">3</span>) fatal(<span class="string">"Usage: client server-name filename"</span>);</div><div class="line">    h = gethostbyname(argv[<span class="number">1</span>]);</div><div class="line">    <span class="keyword">if</span> (!h) fatal(<span class="string">"gethostbyname failed"</span>);</div><div class="line">    s = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);</div><div class="line">    <span class="keyword">if</span> (s &lt; <span class="number">0</span>) fatal(<span class="string">"socket"</span>);</div><div class="line">    <span class="built_in">memset</span>(&amp;channel, <span class="number">0</span>, <span class="keyword">sizeof</span>(channel));</div><div class="line">    channel.sin_family = AF_INET;</div><div class="line">    <span class="built_in">memcpy</span>(&amp;channel.sin_addr.s_addr, h-&gt;h_addr, h-&gt;h_length);</div><div class="line">    channel.sin_port = htons(SERVER_PORT);</div><div class="line"></div><div class="line">    c = connect(s, (<span class="keyword">struct</span> sockaddr *) &amp;channel, <span class="keyword">sizeof</span>(channel));</div><div class="line">    <span class="keyword">if</span> (c &lt; <span class="number">0</span>) fatal(<span class="string">"connect failed"</span>);</div><div class="line"></div><div class="line">    write(s, argv[<span class="number">2</span>], <span class="built_in">strlen</span>(argv[<span class="number">2</span>]) + <span class="number">1</span>);</div><div class="line"></div><div class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</div><div class="line">        bytes = read(s, buf, BUF_SIZE);</div><div class="line">        <span class="keyword">if</span> (bytes &lt;= <span class="number">0</span>) <span class="built_in">exit</span>(<span class="number">0</span>);</div><div class="line">        write(<span class="number">1</span>, buf, bytes);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="路由算法"><a href="#路由算法" class="headerlink" title="路由算法"></a>路由算法</h2><p><strong>最短路径算法</strong></p>
<p><strong>泛洪算法</strong><br>对多数情况是不适用的, 但是还有某些重要用途.<br>如广播和无线网络.</p>
<p><strong>距离矢量算法</strong><br>无穷计算问题</p>
<p><strong>链路状态路由</strong></p>
<hr>
<h1 id="计算机网络课程"><a href="#计算机网络课程" class="headerlink" title="计算机网络课程"></a>计算机网络课程</h1><h2 id="第二周-1-4计算机网络性能"><a href="#第二周-1-4计算机网络性能" class="headerlink" title="第二周-1.4计算机网络性能"></a>第二周-1.4计算机网络性能</h2><p><strong>速率</strong>即数据率(data rate) 或称数据传输率或比特率(bit rate)<br>单位 b/s(或bps), kb/s, Mb/s, Gb/s<br>k = 10^3, M = 10^ 6, G = 10^9<br>速率往往是指<strong>额定速率</strong>或<strong>标称速率</strong></p>
<p><strong>带宽</strong>(bandwidth) 是指信号具有的频带宽度，即最高频率与最低频率之差，单位是赫兹(Hz)<br>网络中的<strong>带宽</strong>是数字型号所能传送的<strong>最高数据率</strong>, 单位 b/s(bps)<br>常用的带宽单位:<br>kb/s(10^3 b/s), Mb/s, Gb/s, Tb/s</p>
<p>Q: 分组交换为什么会发生丢包和时延?<br>A: 分组在路由器缓存中排队</p>
<h3 id="四种分组延迟"><a href="#四种分组延迟" class="headerlink" title="四种分组延迟"></a>四种分组延迟</h3><ul>
<li><code>结点处理延迟</code>(nodal processing delay)</li>
<li><code>排队延迟</code>(queueing delay)<br>R: 链路带宽(bps)<br>L: 分组长度(bits)<br>a: 平均分组到达速率<br>流量强度: La / R (接近1: 平均排队延迟大, 约等于0: 平均排队延迟很小, 大于1: 超出服务能力,平均排队延迟无限大)</li>
<li><code>传输延迟</code>(transmission delay)<br>L: 分组长度(bits)<br>R: 链路带宽(bps)<br>d = L / R</li>
<li><code>传播延迟</code>(propagation delay)<br>d: 物理链路长度<br>s: 信号传播速度(~2 * 10^8 m/sec)<br>dprop = d / s</li>
</ul>
<p><strong>时延带宽积</strong> = 传播时延 * 带宽 = d * R (bits)<br>链路的时延带宽积又称为<code>以比特为单位的链路长度</code></p>
<p><strong>分组丢失(丢包)</strong> <code>丢包率</code> = 丢包数 / 已发分组总数</p>
<ul>
<li>队列缓存容量有限</li>
<li>分组到达已满队列将被丢弃</li>
<li>丢弃分组可能由前序节点或源重发(也可能不重发)</li>
</ul>
<p><strong>吞吐量/率(Throughput)</strong> : 表示在发送端与接受端之间传送数据速率(b/s)</p>
<ul>
<li>即时吞吐量: 给定时刻的速率</li>
<li>平均吞吐量: 一段时间的平均速率</li>
</ul>
<h2 id="第5周-传输层-上"><a href="#第5周-传输层-上" class="headerlink" title="第5周 传输层(上)"></a>第5周 传输层(上)</h2><p><strong>接收端进行多路分用</strong><br>传输层依据头部信息将收到的Segment 交给正确的Socket ,即不同的进程.</p>
<p><strong>发送端进行多路复用</strong><br>从多个Socket 接收数据,为每个数据封装上头部信息,生成Segment ,交给网络层.</p>
<h3 id="UDP-校验和-checksum"><a href="#UDP-校验和-checksum" class="headerlink" title="UDP 校验和(checksum)"></a>UDP 校验和(checksum)</h3><p><a href="http://m.blog.csdn.net/article/details?id=48268927" target="_blank" rel="external">csdn-二进制反码求和校验酸反</a></p>
<p><strong>发送方</strong><br>将段的内容视为16-bit 整数<br>计算所有整数的和,进位加在和的后面,将得到的值按位取反,得到校验和<br>发送方将校验和放入校验和字段</p>
<p><strong>接收方</strong><br>计算所收到段的校验和<br>将其与校验和字段进行对比<br>不相等: 检测出错误<br>相等: 没有检测出错误(但可能有错误)</p>
<p><strong>栗子</strong><br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">两个整数</div><div class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span></div><div class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span></div><div class="line"></div><div class="line">求和得到</div><div class="line"><span class="number">1</span>(进位) <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span></div><div class="line"></div><div class="line">将进位的<span class="number">1</span> 加到末位得到</div><div class="line"><span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> </div><div class="line"></div><div class="line">按位取反得到checksum</div><div class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span></div></pre></td></tr></table></figure></p>
<p><strong>可靠数据传输</strong><br>不错\不丢\不乱</p>
<h2 id="第6周-传输层-下"><a href="#第6周-传输层-下" class="headerlink" title="第6周 传输层(下)"></a>第6周 传输层(下)</h2><p><a href="https://blog.json.tw/introduction-to-computer-network-gbn-sr-tcp-compare" target="_blank" rel="external">GBN, SR, TCP 重传机制的比较</a></p>
<p>TCP - Tahoe : </p>
<pre><code>1. slow-start, 每收到一个ACK, 拥塞窗口cwnd值加一, 因此每过一个RTT, cwnd翻倍
2. 当cwnd超过慢启动阙值(slow start threshold)ssthresh时, cwnd停止slow-start, 开始线性增长.
3. 当发生超时或者快速重传(收到三次重复确认)时, ssthresh = cwnd / 2, cwnd = 1; 重新开始slow-start 过程
</code></pre><p>TCP - Reno</p>
<pre><code>1. slow-start
2. 当cwnd超过ssthresh时, cwnd停止slow-start, 开始线性增长
3. 当发生快速重传时, 进入快速恢复(fast recovery), ssthresh = cwnd / 2; cwnd = ssthresh; 
4. 当发生超时, ssthresh = cwnd / 2; cwnd = 1; 重新开始slow-start 过程
</code></pre><h2 id="第7周-网络层-上"><a href="#第7周-网络层-上" class="headerlink" title="第7周 网络层(上)"></a>第7周 网络层(上)</h2><p><strong>IP分组格式</strong></p>
<p>标志位 占3位, [保留, DF, MF]<br>DF(Don’t Fragment) {1: 禁止分片, 0: 允许分片}<br>MF(More Fragment) {1: 非最后一片, 0: 最后一片(或未分片)}</p>
<p>片偏移 字段占13位: 一个IP分组分片封装原IP 分组数据的相对偏移量<br>片偏移字段以<code>8 字节为单位</code></p>
<p>假设原IP 分组总长度L, 待转发链路的MTU(最大传输单元)为M<br>若L&gt;M, 且DF = 0, 则可以/需要分片<br>分片时每个分片的标识复制原IP 分组的标识<br>通常分片时, 除了最后一个分片, 其他分片均为MTU 允许的最大分片<br>一个最大分片可封装的数据应该是8 的倍数, 因此, 一个最大分片可以封装的数据为<br><code>d = [(M - 20) / 8] * 8    // 向下取整</code><br>需要的总片数为<br><code>n = [(L - 20) / d]   // 向上取整</code><br>每片的片偏移量字段的取值为<br><code>Fi = d / 8 * (i - 1) , 1 &lt;= i &lt;= n</code><br>每片总长度字段为<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Li = &#123;</div><div class="line">    d + <span class="number">20</span> , <span class="number">1</span> &lt;= <span class="selector-tag">i</span> &lt; n</div><div class="line">    L - (n - <span class="number">1</span>)d , <span class="selector-tag">i</span> = n</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>特殊IP地址</strong> (ipv4)</p>
<table>
<thead>
<tr>
<th>NetID</th>
<th>HostID</th>
<th>作为IP 分组源地址</th>
<th>作为IP 分组目的地址</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>全0</td>
<td>全0</td>
<td>可以</td>
<td>不可以</td>
<td>在本网范围内表示本机, 在路由表中用于表示默认路由(相当于表示整个Internet网络)</td>
</tr>
<tr>
<td>全0</td>
<td>特定值</td>
<td>不可以</td>
<td>可以</td>
<td>表示本网内某个特定主机</td>
</tr>
<tr>
<td>全1</td>
<td>全1</td>
<td>不可以</td>
<td>可以</td>
<td>本网广播地址(路由器不转发)</td>
</tr>
<tr>
<td>特定值</td>
<td>全0</td>
<td>不可以</td>
<td>不可以</td>
<td>网络地址, 表示一个网络</td>
</tr>
<tr>
<td>特定值</td>
<td>全1</td>
<td>不可以</td>
<td>可以</td>
<td>直接广播地址, 对特定网络上所有主机进行广播</td>
</tr>
<tr>
<td>127</td>
<td>非全0 或非全1 的任何数</td>
<td>可以</td>
<td>可以</td>
<td>用于本地软件环回测试, 称为环回测试</td>
</tr>
</tbody>
</table>
<p><strong>私有IP地址</strong> (ipv4)</p>
<table>
<thead>
<tr>
<th>Class</th>
<th>NetIDs</th>
<th>Blocks</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>10</td>
<td>1</td>
</tr>
<tr>
<td>B</td>
<td>172.16 to 172.31</td>
<td>16</td>
</tr>
<tr>
<td>C</td>
<td>192.168.0 to 192.168.255</td>
<td>256</td>
</tr>
</tbody>
</table>
<p><strong>子网掩码的应用</strong></p>
<p>将IP分组的目的IP地址与子网掩码按位与运算, 提取子网地址<br>例如:目的地址: 172.32.1.112, 子网掩码: 255.255.254.0<br>172.32.1.112 =   10101100 00100000 00000001 01110000<br>255.255.254.0 =  11111111 11111111 11111110 00000000<br>与运算 = 10101100 00100000 00000000 00000000 = 172.32.0.0</p>
<p>所以:<br>子网地址: 172.32.0.0 (子网掩码: 255.255.254.0)<br>地址范围: 172.32.0.0 ~ 172.32.1.255<br>可分配地址范围: 172.32.0.1 ~ 172.32.1.254<br>广播地址: 172.32.1.255</p>
<h2 id="第8周-网络层-下"><a href="#第8周-网络层-下" class="headerlink" title="第8周 网络层(下)"></a>第8周 网络层(下)</h2><p>主机如何获得IP地址</p>
<ul>
<li>硬编码 - 静态配置</li>
<li>动态主机配置协议 DHCP - 从服务器动态获取</li>
</ul>
<p>网络地址转换<strong>NAT</strong><br>内部网络设备对外界网络不可见</p>
<p>NAT穿透问题解决方案</p>
<ul>
<li>静态配置NAT, 将特定端口的连接请求转发给服务器</li>
<li>利用UPnP(Universal Plug and Play)互联网网关设备协议(IGD- Internet Gateway Device), 自动配置: 学习到NAT公共IP地址</li>
<li>中继(如 skype)</li>
</ul>
<p>互联网控制报文协议(<strong>ICMP</strong>)</p>
<ul>
<li>差错(或异常)报告</li>
<li>网络探寻</li>
</ul>
<p><strong>链路状态路由算法</strong></p>
<h2 id="链路层"><a href="#链路层" class="headerlink" title="链路层"></a>链路层</h2><h3 id="Multiple-access-links-protocols"><a href="#Multiple-access-links-protocols" class="headerlink" title="Multiple access links , protocols"></a>Multiple access links , protocols</h3><p>two types of links</p>
<ul>
<li>point-to-point</li>
<li>broadcast(shared wire or medium)</li>
</ul>
<p>multiple access protocol</p>
<ul>
<li>distributed algorithm that determines how nodes share channel.</li>
</ul>
<p><strong>MAC protocols: taxonomy</strong></p>
<ul>
<li><p><strong>channel partitioning</strong><br>TDMA: time division multiple access<br>FDMA: frequency division multiple access</p>
</li>
<li><p><strong>random access</strong><br><strong>Slotted ALOHA</strong> (只能在某个时期开始时发, 如果两个节点冲突, 则下次两个节点都以概率p发送, 必须满足时钟同步, 节点必须能够检测到冲突, 效率0.36)<br><strong>Pure(unslotted) ALOHA</strong> (不分时期, 能直接发送, 效率比slotted Aloha更低, 0.18)<br><strong>CSMA</strong>(carrier sense multiple access)(listen before transmit, 也可能冲突)<br><strong>CSMA/CD</strong>(collision detection)(发送数据过程中检测冲突)(Ethernet CSMA/CD algorithm)<br>Lmin / R = 2 <em> S / V<br>800bit / 1Gbps = 2 </em> 80m / 200000Kmps</p>
</li>
<li><p><strong>taking turns</strong><br><strong>polling</strong> (master node invites slave nodes to transmit in turn)<br><strong>token passing</strong> (control token passed from one node to next sequentially)</p>
</li>
</ul>
<h3 id="Lan"><a href="#Lan" class="headerlink" title="Lan"></a>Lan</h3><p><strong>MAC address and ARP</strong></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JS 超长数字的坑]]></title>
      <url>https://beim.github.io/2016/09/06/JS-%E8%B6%85%E9%95%BF%E6%95%B0%E5%AD%97%E7%9A%84%E5%9D%91/</url>
      <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> num1 = <span class="number">1234567890123456</span></div><div class="line"><span class="keyword">const</span> num2 = <span class="number">12345678901234567</span></div><div class="line"><span class="keyword">const</span> str1 = <span class="string">'1234567890123456'</span></div><div class="line"><span class="keyword">const</span> str2 = <span class="string">`12345678901234567`</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(num1 === str1) <span class="comment">// false</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;num1&#125;</span>`</span> === str1) <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(num2 === str2) <span class="comment">// false</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;num2&#125;</span>`</span> === str2) <span class="comment">// false</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2011-午夜巴黎]]></title>
      <url>https://beim.github.io/2016/08/25/2011-%E5%8D%88%E5%A4%9C%E5%B7%B4%E9%BB%8E/</url>
      <content type="html"><![CDATA[<p><img src="http://img21.mtime.cn/pi/2011/04/04/161411.40182295_1000X1000.jpg" alt="1"></p>
<a id="more"></a>
<p><img src="http://img21.mtime.cn/pi/2011/06/03/141830.39636076_1000X1000.jpg" alt="1"></p>
<p><img src="http://img21.mtime.cn/pi/2011/04/04/161416.77653536_1000X1000.jpg" alt="1"></p>
<p><img src="http://img21.mtime.cn/pi/2011/04/04/161416.35864935_1000X1000.jpg" alt="1"></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[React-Native Startup]]></title>
      <url>https://beim.github.io/2016/08/08/React-Native-Startup/</url>
      <content type="html"><![CDATA[<h2 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h2><h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><p>先<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="external">下载</a>JDK<br>解压到/usr/lib/jvm 下</p>
<p>修改环境变量<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ vi ~<span class="regexp">/.bashrc</span></div><div class="line"></div><div class="line"># 在末尾增加以下内容</div><div class="line">export JAVA_HOME=/usr<span class="regexp">/lib/jvm</span><span class="regexp">/jdk1.8.0_101</span></div><div class="line">export JRE_HOME=$&#123;JAVA_HOME&#125;/jre</div><div class="line">export CLASSPATH=.:$&#123;JAVA_HOME&#125;/<span class="class"><span class="keyword">lib</span>:$&#123;<span class="title">JRE_HOME</span>&#125;/<span class="title">lib</span></span></div><div class="line">export PATH=$&#123;JAVA_HOME&#125;/<span class="symbol">bin:</span>$PATH</div><div class="line"></div><div class="line"><span class="comment"># 使环境变量生效</span></div><div class="line">$ source ~<span class="regexp">/.bashrc</span></div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h3 id="Android-Studio-https-developer-android-com-studio-install-html"><a href="#Android-Studio-https-developer-android-com-studio-install-html" class="headerlink" title="Android Studio(https://developer.android.com/studio/install.html)"></a>Android Studio(<a href="https://developer.android.com/studio/install.html" target="_blank" rel="external">https://developer.android.com/studio/install.html</a>)</h3><p>先<a href="https://developer.android.com/studio/index.html" target="_blank" rel="external">下载</a>Android Studio<br>解压到/usr/local/src 下</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># 设置软链接</span></div><div class="line">$ sudo ln -s /usr/local/src/android-studio/bin/studio.sh /usr/local/bin/studio</div><div class="line"></div><div class="line"><span class="meta"># 64位的ubuntu需要安装以下库</span></div><div class="line">$ sudo apt-<span class="keyword">get</span> install lib32z1 lib32ncurses5 lib32bz2<span class="number">-1.0</span> lib32stdc++<span class="number">6</span></div><div class="line"></div><div class="line"><span class="meta"># 执行安装引导</span></div><div class="line">$ studio</div><div class="line"><span class="meta"># Sdk安装到了~/Android/Sdk</span></div><div class="line"></div><div class="line">$ vi ~/.bashrc</div><div class="line"><span class="meta"># 在文件末尾添加</span></div><div class="line"><span class="meta"># ANDROID_HOME环境变量</span></div><div class="line">export ANDROID_HOME=/home/beim/Android/Sdk</div><div class="line"><span class="meta"># Android SDK 的Tools 目录添加到PATH 变量中</span></div><div class="line">PATH=<span class="string">"~/Android/Sdk/tools:~/Android/Sdk/platform-tools:$&#123;PATH&#125;"</span></div><div class="line">export PATH</div><div class="line"></div><div class="line"><span class="meta"># 使环境变量生效</span></div><div class="line">source ~/.bashrc</div></pre></td></tr></table></figure>
<h3 id="SDK"><a href="#SDK" class="headerlink" title="SDK"></a>SDK</h3><p><code>$ studio</code> 进入Android Studio<br>在<code>SDK Platform</code> 窗口中，选择<code>Show Package Details</code>, 然后在<code>Android 6.0 (Marshmallow)</code>中勾选<code>Google APIs</code>、<code>Intel x86 Atom System Image</code>、<code>Intel x86 Atom_64 System Image</code>以及<code>Google APIs Intel x86 Atom_64 System Image</code>。<br>在<code>SDK Tools</code>窗口中，选择<code>Show Package Details</code>，然后在<code>Android SDK Build Tools</code>中勾选<code>Android SDK Build-Tools 23.0.1</code>。（必须是这个版本）<br>然后点击<code>apply</code>,等待下载和应用变更。</p>
<h3 id="adb"><a href="#adb" class="headerlink" title="adb"></a>adb</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 系统adb的版本要和android sdk platform-tools 的版本相同</span></div><div class="line">$ adb <span class="built_in">version</span> 检查版本</div><div class="line"></div><div class="line"><span class="comment"># 设置软链接</span></div><div class="line">$ sudo <span class="built_in">ln</span> -s ~/Android/Sdk/<span class="built_in">platform</span>-tools/adb /usr/<span class="built_in">local</span>/bin/adb</div></pre></td></tr></table></figure>
<h3 id="React-Native"><a href="#React-Native" class="headerlink" title="React Native"></a>React Native</h3><p><code>sudo npm install -g react-native-cli</code></p>
<h3 id="genymotion"><a href="#genymotion" class="headerlink" title="genymotion"></a>genymotion</h3><p>安卓模拟器（如果用真机可以不安装）<br><a href="https://www.genymotion.com/download/?utm_source=website&amp;utm_medium=slider&amp;utm_term=Get%20it%20now&amp;utm_campaign=Genymotion-2-7-2-release#" target="_blank" rel="external">下载</a><br>将下载下来的bin文件放置到用户目录下（/home/beim)</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># 更改权限</div><div class="line">$ chmod <span class="number">777</span> /home/beim/genymotion<span class="number">-2.7</span><span class="number">.2</span>-linux_x64.bin</div><div class="line"># 安装</div><div class="line">$ ./genymotion<span class="number">-2.7</span><span class="number">.2</span>-linux_x64.bin</div></pre></td></tr></table></figure>
<p>…<br>安装完成之后打开genymotion<br>选择<code>settings</code>-<code>ADB</code>-<code>Use custom Android SDK tools</code><br>填入之前安装Sdk的路径（/home/beim/Android/Sdk)</p>
<p>选择<code>Add</code><br>寻找合适（API23）的虚拟机下载并测试打开。</p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># 进入放置项目文件的目录</span></div><div class="line">$ react-native init AwesomeProject</div><div class="line"><span class="meta"># 耗费一定时间，需要科学上网。也可到github 上找别人打包好的文件</span></div><div class="line">$ cd AwesomeProject</div><div class="line">$ react-native start # 或者 npm start</div><div class="line"></div><div class="line"><span class="meta"># 确保真机或者虚拟机设备已经连接</span></div><div class="line">$ adb devices</div><div class="line"></div><div class="line"><span class="meta"># 另开一个终端</span></div><div class="line">$ react-native run-android</div><div class="line"></div><div class="line"><span class="meta"># 这时候可以看到真机/虚拟机打开了应用</span></div><div class="line"><span class="meta"># 如果出现红屏提示无法连接到服务器</span></div><div class="line"><span class="meta"># `按menu 键`或者 `摇一摇` 或者 `adb shell input keyevent 82` 打开开发者菜单</span></div><div class="line"><span class="meta"># 点击进入 ` Dev Settings`</span></div><div class="line"><span class="meta"># 点击`Debug server host for device`</span></div><div class="line"><span class="meta"># 如果是真机，输入你电脑的ip地址和端口号（如192.168.1.101:8081); 如果在虚拟机，输入`0.0.0.0:8081`</span></div><div class="line"><span class="meta"># 返回`开发者菜单`，选择`Reload JS`</span></div></pre></td></tr></table></figure>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="http://reactnative.cn/docs/0.31/getting-started.html#content" target="_blank" rel="external">React-Native中文网-搭建开发环境</a><br><a href="http://reactnative.cn/docs/0.31/running-on-device-android.html" target="_blank" rel="external">React-Native中文网-在设备上运行</a><br><a href="https://facebook.github.io/react-native/docs/getting-started.html#content" target="_blank" rel="external">React-Native官网</a><br><a href="http://stackoverflow.com/questions/38512025/react-native-run-android-mismatch-version-adb-server-version" target="_blank" rel="external">Stack Overflow adb server version (32) doesn’t match this client (36); killing …</a><br><a href="http://www.cnblogs.com/suxun/p/5220564.html" target="_blank" rel="external">史上最全Windows版本安装React Native环境配置</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ubuntu 启动初始化]]></title>
      <url>https://beim.github.io/2016/08/05/ubuntu-%E5%90%AF%E5%8A%A8%E5%88%9D%E5%A7%8B%E5%8C%96/</url>
      <content type="html"><![CDATA[<h2 id="首先看这几个目录："><a href="#首先看这几个目录：" class="headerlink" title="首先看这几个目录："></a>首先看这几个目录：</h2><figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># sysvinit 的文件</span></div><div class="line">/etc/init.d <span class="comment"># sysvinit 启动服务的脚本</span></div><div class="line">/etc/rc$&#123;runlevel&#125;.d <span class="comment"># 指向sysvinit 目录下脚本的软链接，系统通过区分不同目录来加载对应运行级别的程序。</span></div><div class="line"></div><div class="line"><span class="comment"># upstart 的文件</span></div><div class="line">/etc/init <span class="comment"># upstart 的启动配置文件。</span></div><div class="line"></div><div class="line"><span class="comment"># systemd 的文件</span></div><div class="line">/etc/systemd/system <span class="comment"># 指向/lib/systemd/system 的软链接，可以通过增删软链接来启用或者禁用启动服务。</span></div><div class="line">/<span class="class"><span class="keyword">lib</span>/<span class="title">systemd</span>/<span class="title">system</span> <span class="comment"># systemd 的启动配置文件。</span></span></div></pre></td></tr></table></figure>
<p>ubuntu 16采用的是systemd 初始化系统<br>ubuntu 14采用的是upstart 初始化系统<br>sysvinit 则是更早版本的启动服务<br><a id="more"></a></p>
<p>为了兼容性，systemd 和upstart 都会支持sysvinit</p>
<h2 id="一些工具"><a href="#一些工具" class="headerlink" title="一些工具"></a>一些工具</h2><p>sysvinit 启动的服务可以通过service 来控制</p>
<ul>
<li><code>$ service --status-all</code> 查看服务启动的状态，列出的服务和/etc/init.d 目录下的脚本是一一对应的。</li>
<li><code>$ service serviceName start/stop</code> 启用或者关闭服务。</li>
</ul>
<p>进入<code>/etc/rc2.d</code> 目录<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>cd /etc/rc2.d</div><div class="line"><span class="variable">$ </span>ll</div></pre></td></tr></table></figure></p>
<p>可以看到除了README 外，其他程序都是S || K + 数字 + 程序名的形式。S表示Start，也就是启动，K表示Kill（从其他运行级别切换过来需要关闭的程序）。后面的数字表示处理顺序，数字越小越早处理，数字相同时按照程序名的字母顺序启动。<br>可以通过修改S 或者K 来管理服务启动项。更建议使用工具来修改：<a href="http://wiki.ubuntu.org.cn/%E5%90%AF%E5%8A%A8#sysv-rc-conf" target="_blank" rel="external">sysv-rc-conf</a>(修改不同运行级别的启动项)，<a href="http://wiki.ubuntu.org.cn/%E5%90%AF%E5%8A%A8#rcconf" target="_blank" rel="external">rcconf</a>（修改当前运行级别的启动项）。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="http://www.ruanyifeng.com/blog/2013/08/linux_boot_process.html" target="_blank" rel="external">Linux 的启动流程_阮一峰</a>（初始化部分与ubuntu 不同，ubuntu 现在采用的是Upstart 启动服务）</li>
<li><a href="http://www.cnblogs.com/cassvin/archive/2011/12/25/ubuntu_init_analysis.html" target="_blank" rel="external">Ubuntu init启动流程分析</a>(解释了System V initialization 和 Upstart 两种方式)</li>
<li><a href="http://wiki.ubuntu.org.cn/%E5%90%AF%E5%8A%A8#rcconf" target="_blank" rel="external">ubuntuwiki启动</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/linux/1407_liuming_init2/" target="_blank" rel="external">浅析 Linux 初始化 init 系统，第 2 部分: UpStart</a></li>
<li><a href="http://blog.fens.me/linux-upstart/" target="_blank" rel="external">upstart把应用封装成系统服务</a></li>
<li><a href="http://wiki.ubuntu.org.cn/%E5%90%AF%E5%8A%A8#rcconf" target="_blank" rel="external">upstart_cookbook</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html" target="_blank" rel="external">Systemd 入门教程：命令篇</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html" target="_blank" rel="external">Systemd 入门教程：实战篇</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2016/03/node-systemd-tutorial.html" target="_blank" rel="external">Node 应用的 Systemd 启动</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/linux/1407_liuming_init3/index.html" target="_blank" rel="external">浅析 Linux 初始化 init 系统，第 3 部分: Systemd</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[git命令之 git tag]]></title>
      <url>https://beim.github.io/2016/08/05/git%E5%91%BD%E4%BB%A4%E4%B9%8B-git-tag/</url>
      <content type="html"><![CDATA[<h2 id="列出标签"><a href="#列出标签" class="headerlink" title="列出标签"></a>列出标签</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">tag</span></div></pre></td></tr></table></figure>
<h2 id="打标签"><a href="#打标签" class="headerlink" title="打标签"></a>打标签</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#创建轻量标签</span></div><div class="line">git <span class="keyword">tag</span> <span class="title">v0</span>.<span class="number">1.2</span></div><div class="line"></div><div class="line"><span class="comment">#创建附注标签</span></div><div class="line">git <span class="keyword">tag</span> <span class="title">-a</span> v0.<span class="number">1.2</span> -m '<span class="number">0.1</span>.<span class="number">2</span>版本'</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="切换到标签"><a href="#切换到标签" class="headerlink" title="切换到标签"></a>切换到标签</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">git</span> checkout tagname</div></pre></td></tr></table></figure>
<h2 id="查看标签信息"><a href="#查看标签信息" class="headerlink" title="查看标签信息"></a>查看标签信息</h2><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">show </span><span class="built_in">v0</span>.<span class="number">1</span></div></pre></td></tr></table></figure>
<h2 id="删除标签"><a href="#删除标签" class="headerlink" title="删除标签"></a>删除标签</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">tag</span> <span class="title">-d</span> v0.<span class="number">1.2</span></div></pre></td></tr></table></figure>
<h2 id="给指定的commit打标签"><a href="#给指定的commit打标签" class="headerlink" title="给指定的commit打标签"></a>给指定的commit打标签</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">tag</span> <span class="title">-a</span> v0.<span class="number">1.1</span> <span class="number">0</span>fbc3d0</div></pre></td></tr></table></figure>
<h2 id="标签发布到git服务器"><a href="#标签发布到git服务器" class="headerlink" title="标签发布到git服务器"></a>标签发布到git服务器</h2><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">push</span> <span class="built_in">origin</span> v0.1.2</div><div class="line"></div><div class="line">#一次性提交所有标签到<span class="built_in">origin</span></div><div class="line">git <span class="built_in">push</span> <span class="built_in">origin</span> --tags</div></pre></td></tr></table></figure>
<h2 id="删除远程tag"><a href="#删除远程tag" class="headerlink" title="删除远程tag"></a>删除远程tag</h2><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git push origin <span class="symbol">:refs/tags/tag-name</span></div><div class="line"><span class="comment">#其实分支也是这样</span></div><div class="line">git push origin <span class="symbol">:branch-name</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Node.js的内部结构]]></title>
      <url>https://beim.github.io/2016/08/05/Node-js%E7%9A%84%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/</url>
      <content type="html"><![CDATA[<p>首先, 关于JavaScript的一些话……</p>
<p>Jeff Atwood, Stack Overflow的联合创始人之一, 曾经在它的博客Coding Horror中写道:</p>
<p>any application that can be written in JavaScript, will eventually be written in JavaScript</p>
<a id="more"></a>
<p>JavaScript影响范围在过去几年中有相当大的增长, 以至于它现在已经成为最受欢迎的编程语言之一. 实际上, 在2016 SO Deverloper Survey中, JavaScript在Most Popular Technology和 Top Tech on Stack Overflow上都排名第一, 并且在其他几个调查结果的排名都不错.</p>
<p>Node.js是一个服务端JavaScript运行环境, 它奠定了服务端重要功能的基础,如二进制数据操作, 文件系统I/O操作, 数据库访问, 计算机网络等等. 它独特的特性让它在现有的久经考验的框架中突显出来,(如Django(Python), Laravel(PHP), RoR(Ruby)等).也正是这些特性让科技公司如PayPal, Tinder, Medium, LinkedIn 和 Netflix 接受了它, 有些甚至在Node.js达到1.0版本之前就开始使用.</p>
<p>我最近回答了一个<a href="http://stackoverflow.com/questions/36766696/which-is-correct-node-js-architecture/37512766#37512766" target="_blank" rel="external">关于Node.js内部结构的问题</a>,正是这个问题激励我写下这篇文章.</p>
<hr>
<p>官方文档对于理解Node.js究竟是什么并没有什么帮助:</p>
<blockquote>
<p>a JavaScript runtime built on Chrome’s V8 JavaScript engine. Node.js uses an event-driven, non-blocking I/O model ……</p>
</blockquote>
<p>为了理解这则声明,和它有多强大, 让我们将Node.js的组件分解, 解释其中关键的术语, 然后解释这些组件是怎样互相影响并让Node.js如此强大.</p>
<p><img src="/images/nodejsstructure.png" alt="nodejsstructure"></p>
<h2 id="COMPONENTS-DEPENDENCIES-组件-依赖"><a href="#COMPONENTS-DEPENDENCIES-组件-依赖" class="headerlink" title="COMPONENTS/DEPENDENCIES(组件/依赖)"></a>COMPONENTS/DEPENDENCIES(组件/依赖)</h2><p><strong>V8</strong>: Google开源,以C++实现的高性能JavaScript引擎. 这和你的Chrome浏览器的引擎是一样的. V8会处理你的JavaScript代码, 并将它编译成机器码(因此它飞一样快), 并执行. V8到底有多快? 查看这个<a href="http://stackoverflow.com/a/41932/4603550" target="_blank" rel="external">SO答案</a></p>
<p><strong>libuv</strong>: 提供异步特性的C library. 它用来支持event loop(事件循环), a thread pool(线程池), file system events(文件系统事件), 和 child processes(子进程), 还有其他关键功能.</p>
<p><strong>Other C/C++ Components/Dependencies</strong>: 例如 c-ares, crypto(OpenSSL), http-parser, 和zlib. 这些依赖提供了与服务器的较低层次的交互, 建立一些重要的功能如networking(网络),compressing(压缩),encrypting(加密)等等.</p>
<p><strong>Application/Modules</strong>这是所有的JavaScript 代码存在的地方: 你的程序代码, Node.js核心模块, 你从npm下载的模块, 和你自己写的模块. 你大部分的工作都在这个部分.</p>
<p><strong>Bindings</strong>: 你可能已经注意到, Node.js是用JavaScript和C/C++写成的. 用这么多C/C++代码或者libraries的原因很简单:他们很快啊! 然后你写的JavaScript代码是怎么平滑地转换成C/C++代码的呢? 难道他们不是两种不同的语言吗? 对确实是. 并且通常来说用不同语言写代码不能互相通信. 但是有bindings(绑定)就不一样了. Bindings(绑定), 正像它名字一样, 是将一种语言和另一种语言”绑定”起来的胶水代码, 这样的话他们就能够进行交互了. 在这种情况下(Node.js), bindings只将C/C++写的Node.js核心内部库(c-ares, zlib, OpenSSL, http-parser, 等等)暴露给JavaScript. 写bindings的动机之一是代码复用: 如果想要的功能已经实现了,为什么要再重新写一遍呢?只是因为它们是不同的语言吗?只是连接他们不就好了? 另一个动机是性能: 像C/C++这样的系统编程语言的性能通常比其他高级语言更好(如 Python, JavaScript, Ruby等). 因此对于像CPU密集型这样的操作让C/C++写的代码去做就好了.</p>
<p><strong>C/C++ Addons</strong>: bindings只提供Node.js的核心内部库的胶水代码(如 zlib, OpenSSL, c-ares, http-parser等等). 如果你想要在你的程序中加入第三方或者你自己的C/C++库, 你自己要为你的库写胶水代码. 你写的这些胶水代码被叫做addons(插件). 你可以把bindings和addons看做你的JavaScript代码和Node.js的C/C++代码沟通的桥梁.</p>
<h2 id="TERMINOLOGIES-术语"><a href="#TERMINOLOGIES-术语" class="headerlink" title="TERMINOLOGIES(术语)"></a>TERMINOLOGIES(术语)</h2><p><strong>I/O</strong>: Input/Output的缩写. 它基本代表了系统的I/O子系统的所有操作. I/O-bound(I/O密集型)操作通常涉及与硬盘/驱动器的交互. 例如数据库访问和文件系统操作. 其他相关的概念有CPU-bound, memory-bound等等. 检测一个操作是否属于I/O-bound, CPU-bound,或者其他类型, 需要增加特定操作所用的资源, 看哪个会获得更好的性能. 例如,如果CPU计算能力增强, 该操作会明显变快, 那么它属于CPU-bound.</p>
<p><strong>Non-blocking/Asynchronous(非阻塞/异步)</strong>: 通常来说, 当一个请求进来时, 程序会处理这个请求并在这个请求处理完成之前停止其他所有操作. 这立刻暴露出一个问题: 当大量请求同时到来时, 每个请求都得等之前的请求处理完. 换句话说, 先前的操作会阻塞它之后的操作. 情况还可能更糟, 如果先前的操作响应时间很长(例如,计算前1000个质数,或者从数据库中读取3GB的数据),其他所有的请求都会被终止/阻塞很长事件. 为了解决这个问题, 你可以采取多进程 和/或 多线程的解决方法, 它们各有优缺点. Node.js的处理方式不同, 它并没有为每个新请求开一个新进程, 所有的请求都使用单线程处理, 这几乎就是它做的所有事情: 处理请求–请求中所有(I/O)操作(例如文件系统访问,数据库读写)都送到worker线程,也就是背后的libuv(上面有提到). 换句话说, 请求中所有的I/O操作都是异步处理, 并不在主线程中处理.这种方法使得主线程永远不会被阻塞, 因为繁重的操作都转移到了其他的地方. 你(还有你的程序代码)只需要在主线程中工作. 所有libuv的线程池里的worker线程对你都是透明的. 你永远也不需要直接操作它们(也不需要担心). Node.js会帮你照顾它们. 这个结构使得I/O操作变得非常高效. 然而,这也不是没有缺点的. 操作不止包含I/O-bound,而且还有CPU-bound, memory-bound等等. Node.js只给你提供了I/O任务的异步方法, 当热也有办法来解决CPU密集型操作. 然而这不在本文讨论范围内.</p>
<p><strong>Event-Driven(事件驱动的)</strong>: 一般的, 几乎所有的现代系统中, 在主程序开始以后, 进程通过传入的请求来初始化. 然而就是从这里开始产生区别, 有时候不同技术的区别是巨大的. 通常的实现是按程序处理请求: 为一个请求开一个线程; 操作一个接一个的完成; 如果哪个操作慢了, 它之后的操作都会在那个操作被暂停; 当所有的操作都完成, 再返回响应. 然而,在Node.js中, 所有的操作都作为事件注册到Node.js中, 等待被触发, 它们可能被主程序或者请求触发.</p>
<p><strong>Runtime(System)</strong>: Node.js运行环境是整个代码库(上面提到的组件), 包括低级和高级, 同时为Node.js程序的执行提供支持.</p>
<h2 id="PUTTING-EVERYTHING-TOGETHER-整合"><a href="#PUTTING-EVERYTHING-TOGETHER-整合" class="headerlink" title="PUTTING EVERYTHING TOGETHER(整合)"></a>PUTTING EVERYTHING TOGETHER(整合)</h2><p>现在我们对Node.js的组件有了大致概念, 接下来看它的工作流程, 之后你将对它的结构和不同组件间如何交互有更好的了解.</p>
<p>当Node.js程序开始运行的时候, V8引擎会运行你写的陈旭代码. 你程序中的对象会保持一系列<code>observers</code>(观察者)(注册到events的方法). 当它们预期的事件发出之后,这些observers将会得到通知.</p>
<p>当一个事件发出, 它的回调函数将会排入event queue(事件队列). 只要队列中还有事件,event loop(事件循环)就会将队列中的事件出列并添加到call stack(调用堆栈), 需要注意的是, 只有之间的事件被处理完(调用堆栈清空后), event loop才会将下一个事件放到call stack.</p>
<p>在call stack中, 当遇到I/O操作, 它将会被交给libuv去处理. 默认的, libuv保持4个worker线程的线程池, 这个默认值可以被修改. worker线程会根据I/O操作的类型, 和Node.js的低层次库交互,来决定执行的具体操作如数据库读写, 文件系统访问,网络等待. 当处理完毕之后, libuv会将这个事件enqueue(出列)并放回到event queue(事件队列)中, 等待主线程处理. 这时, libuv异步处理了I/O操作, 主线程并没有等待操作的结果而是继续进行. 被libuv返回的事件在event loop(事件循环)再次将它放到call stack(调用堆栈)的时候被主线程处理. 这样就完成了一个Node.js程序事件的生命周期.</p>
<p><a href="http://stackoverflow.com/users/370756/mbq" target="_blank" rel="external">mbq</a>曾经以餐馆对Node.js作了绝妙的比喻. 我将借用它的范例并稍作修改来让Node.js周期更容易理解. 把Node.js程序看做星巴克. 一个高效,训练有素的服务员(唯一的主线程)来下订单. 当大量客户同时进入咖啡厅, 他们将会等待服务员的服务(事件队列的入队). 当服务员接待一个客户之后, 他会把客户的订单交给一个管理员(libuv), 管理员会给每个订单交给一个咖啡师(worker thread). 咖啡师会根据顾客的要求用不同的配料和机器(底层的C/C++组件)来制作不同种的饮料.一般情况下会有4个咖啡师值班(thread pool). 然而,在高峰期, 可以让更多的咖啡师来工作(然而这应该在一天刚开始的时候来做, 而不是午休期间). 当服务员将订单提交给管理员之后, 他并没有等咖啡做好之后再服务下一位顾客, 而是叫下一位顾客(event loop将下一个事件出列,并放到call stack). 你可以把call stack中的事件看做是正在柜台被服务的顾客. 当咖啡做好之后, 咖啡将会被送到顾客队列的末尾. 当咖啡移动到柜台的时候, 服务员会叫顾客的名字,然后顾客拿到咖啡.(这在现实生活中可能有点怪, 然而你从程序的进程的角度来想的话就合理了)</p>
<hr>
<p>这样就完成了Node.js的内部代码库和它的事件生命周期的高度概览. 然而这是很概括性的,并没有包括很多问题和细节, 例如CPU-bound操作处理, Node.js设计模式等.</p>
<hr>
<h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a><a href="https://medium.com/yet-another-node-js-blog/architecture-of-node-js-internal-codebase-57cd8376b71f#.sl5sna17t" target="_blank" rel="external">原文</a></h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[跨域请求之JSONP与CORS]]></title>
      <url>https://beim.github.io/2016/08/05/%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%E4%B9%8BJSONP%E4%B8%8ECORS/</url>
      <content type="html"><![CDATA[<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>在使用wikipedia的API的时候，直接发送ajax请求得到以下信息：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">XMLHttpRequest cannot <span class="keyword">load</span> https://en.wikipedia.org/w/api.php?<span class="keyword">action</span>=<span class="keyword">query</span>&amp;<span class="keyword">format</span>=<span class="keyword">json</span>&amp;<span class="keyword">list</span>=<span class="keyword">search</span>&amp;srsearch=<span class="number">1.</span> Response <span class="keyword">to</span> preflight request doesn’t pass <span class="keyword">access</span> control <span class="keyword">check</span>: <span class="keyword">No</span> ‘<span class="keyword">Access</span>-Control-<span class="keyword">Allow</span>-Origin’ header <span class="keyword">is</span> <span class="keyword">present</span> <span class="keyword">on</span> the requested resource. Origin ‘<span class="keyword">http</span>://s.codepen.io’ <span class="keyword">is</span> therefore <span class="keyword">not</span> allowed access.</div></pre></td></tr></table></figure>
<p>这是由于XMLHttpRequest对象受限于<a href="https://en.wikipedia.org/wiki/Same-origin_policy" target="_blank" rel="external">同源策略(same origin-policy)</a>。这个策略使得页面只能从同一个源(origin)获取数据。源是由协议(protocol)，主机(host)，端口号(port number)决定的。例如<code>https://www.sitepoint.com/jsonp-examples/</code> 的源就是<code>https, www.sitepoint.com</code>, <code>80</code>。</p>
<p>同源策略是一个安全机制。它避免了脚本从你的域读取数据并发送到别的服务器上。</p>
<a id="more"></a>
<p>下面介绍两种解决方法：</p>
<h2 id="JSONP-JSON-with-Padding"><a href="#JSONP-JSON-with-Padding" class="headerlink" title="JSONP(JSON with Padding)"></a>JSONP(JSON with Padding)</h2><p>script标签可以从另一个域中载入数据，<script src="xxx"></script>。因此我们可以新建一个script标签，设置src属性，然后插入到页面中</p>
<p>JSONP就建立在这种技术之上，它给我们提供了一种处理返回数据的方法。它将服务器返回的JSON数据包裹在一个回调函数中(即padding)。这个回调函数必须在处理JSONP返回数据的页面中。</p>
<p>例如：</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">var</span> JSON_CALLBACK = <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(res)</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> <span class="built_in">url</span> = <span class="string">'https://en.wikipedia.org/w/api.php?action=query&amp;format=json&amp;list=search&amp;srsearch='</span> + <span class="keyword">this</span>.state.svalue + <span class="string">'&amp;callback=JSON_CALLBACK'</span></div><div class="line"><span class="comment">//JSON_CALLBACK即回调函数名称</span></div><div class="line"><span class="keyword">let</span> scriptTag = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>)</div><div class="line">scriptTag.setAttribute(<span class="string">'src'</span>, <span class="built_in">url</span>)</div><div class="line"><span class="built_in">document</span>.body.appendChild(scriptTag)</div></pre></td></tr></table></figure>
<p>这种方法只在跨域 GET请求有用。</p>
<h2 id="CORS-Cross-Origin-Resource-Sharing跨域资源共享"><a href="#CORS-Cross-Origin-Resource-Sharing跨域资源共享" class="headerlink" title="CORS(Cross-Origin Resource Sharing跨域资源共享)"></a>CORS(Cross-Origin Resource Sharing跨域资源共享)</h2><p><a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing" target="_blank" rel="external">CORS</a>是允许请求跨域资源的机制。</p>
<p>对于AJAX和HTTP请求，浏览器会先对请求预检(preflight)，向目标服务器发送HTTP OPTIONS 请求头， 然后从服务器获得许可(approval)，再发送实际的HTTP请求。</p>
<blockquote>
<p>以下情况将会发送预请求</p>
<ul>
<li>请求以 GET, HEAD 或者 POST 以外的方法发起请求。或者，使用 POST，但请求数据为 application/x-www-form-urlencoded, multipart/form-data 或者 text/plain 以外的数据类型。比如说，用 POST 发送数据类型为 application/xml 或者 text/xml 的 XML 数据的请求。</li>
<li>使用自定义请求头（比如添加诸如 X-PINGOTHER）</li>
</ul>
</blockquote>
<p>举个栗子：</p>
<ul>
<li>浏览器发送OPTIONS请求，带有Origin HTTP头。 这个请求头的值即当前页面的域。当<a href="http://www.foo.com的页面尝试获取" target="_blank" rel="external">http://www.foo.com的页面尝试获取</a> bar.com的数据时，会给bar.com 发送下列请求头：<code>Origin: http://www.foo.com</code></li>
<li>服务器可能会返回</li>
</ul>
<blockquote>
<ul>
<li>Access-Control-Allow-Origin: <a href="http://www.foo.com。（ACAO)响应头表明允许的源站点。" target="_blank" rel="external">http://www.foo.com。（ACAO)响应头表明允许的源站点。</a></li>
<li>如果服务器不支持跨域请求，将会返回错误。</li>
<li>Access-Control-Allow-Origin: *。(ACAO)响应头表明允许所有域。</li>
</ul>
</blockquote>
<h2 id="JSONP-vs-CORS"><a href="#JSONP-vs-CORS" class="headerlink" title="JSONP vs CORS"></a>JSONP vs CORS</h2><p>两种方法都需要服务器支持。</p>
<p>JSONP只支持GET请求方法。JSONP可能造成XSS问题。</p>
<p>CORS可以看做现代的JSONP替代方案。CORS还能支持GET以外的HTTP请求，对错误处理和安全支持也更好。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="http://stackoverflow.com/questions/33297190/response-for-preflight-has-invalid-http-status-code-404-angular-js" target="_blank" rel="external">stackoverflow</a></p>
<p><a href="http://stackoverflow.com/questions/11001817/allow-cors-rest-request-to-a-express-node-js-application-on-heroku" target="_blank" rel="external">stackoverflow</a><br>解决了项目中POST 请求的问题，<br>由于在发送真正的POST 请求之前会发送一个OPTIONS 请求，将这个请求的status 置为200，则下一步发送真正的POST 请求。</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="external">MDN</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[js中的类Class]]></title>
      <url>https://beim.github.io/2016/08/05/js%E4%B8%AD%E7%9A%84%E7%B1%BBClass/</url>
      <content type="html"><![CDATA[<h2 id="构造函数法"><a href="#构造函数法" class="headerlink" title="构造函数法"></a>构造函数法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">like</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> nickName = <span class="string">'myNickName'</span></div><div class="line">    <span class="keyword">this</span>.callNickName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> nickName;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">'myName'</span></div><div class="line">    <span class="keyword">this</span>.like = like</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> cat1 = <span class="keyword">new</span> Cat(<span class="string">'dog'</span>)</div><div class="line"><span class="built_in">console</span>.log(cat1.name) <span class="comment">// myName</span></div><div class="line"><span class="built_in">console</span>.log(cat1.nickName) <span class="comment">// undefined</span></div><div class="line"><span class="built_in">console</span>.log(cat1.callNickName()) <span class="comment">// myNickName</span></div><div class="line"><span class="built_in">console</span>.log(cat1.like) <span class="comment">// dog</span></div><div class="line"><span class="comment">// 属性和方法也可以定义在function对象的prototype对象上</span></div><div class="line">Cat.prototype.makeSound = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'miao'</span>)</div><div class="line">&#125;</div><div class="line">cat1.makeSound() <span class="comment">// miao</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create()"></a>Object.create()</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Cat = &#123;</div><div class="line">    name: <span class="string">'myName'</span>,</div><div class="line">    makeSound: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'miao'</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> cat1 = <span class="built_in">Object</span>.create(Cat)  </div><div class="line"><span class="built_in">console</span>.log(cat1.name) <span class="comment">// myName </span></div><div class="line">cat1.makeSound() <span class="comment">// miao</span></div></pre></td></tr></table></figure>
<h2 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(x, y) &#123;</div><div class="line">        <span class="keyword">this</span>.x = x</div><div class="line">        <span class="keyword">this</span>.y = y</div><div class="line">    &#125;</div><div class="line">    toString() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">'('</span> + <span class="keyword">this</span>.x + <span class="string">', '</span> + <span class="keyword">this</span>.y + <span class="string">')'</span></div><div class="line">    &#125;</div><div class="line">    say() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'say something'</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> Point) <span class="comment">// function</span></div><div class="line"><span class="built_in">console</span>.log(Point === Point.prototype.constructor) <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(Point.toString()) <span class="comment">// class Point &#123; ... &#125;</span></div><div class="line"><span class="keyword">var</span> point = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">2</span>)</div><div class="line"><span class="built_in">console</span>.log(point.toString()) <span class="comment">// (1, 2)</span></div><div class="line">point.say() <span class="comment">// say something</span></div><div class="line">Point.say() <span class="comment">// Error!</span></div></pre></td></tr></table></figure>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="http://www.ruanyifeng.com/blog/2012/07/three_ways_to_define_a_javascript_class.html" target="_blank" rel="external">前两种方法</a></li>
<li><a href="http://es6.ruanyifeng.com/#docs/class" target="_blank" rel="external">第三种方法</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[测试框架AVA]]></title>
      <url>https://beim.github.io/2016/08/05/%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6AVA/</url>
      <content type="html"><![CDATA[<p><img src="/images/ceshiheader.png" alt="ava"></p>
<blockquote>
<p>面向未来的测试运行器</p>
</blockquote>
<a id="more"></a>
<ul>
<li><a href="https://cnodejs.org/topic/57464cd8da0dea851e308101" target="_blank" rel="external">关于AVA的介绍</a></li>
<li><a href="https://github.com/avajs/ava" target="_blank" rel="external">github</a></li>
</ul>
<h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><h3 id="全局安装AVA，在项目中用-–init-参数运行命令，会将AVA添加到package-json"><a href="#全局安装AVA，在项目中用-–init-参数运行命令，会将AVA添加到package-json" class="headerlink" title="全局安装AVA，在项目中用 –init 参数运行命令，会将AVA添加到package.json"></a>全局安装AVA，在项目中用 –init 参数运行命令，会将AVA添加到package.json</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$ npm install --global ava</div><div class="line">$ ava --init</div><div class="line"><span class="section">#package.json</span></div><div class="line">&#123;</div><div class="line"><span class="code">    "name": "awesome-package",</span></div><div class="line"><span class="code">    "scripts": &#123;</span></div><div class="line"><span class="code">        "test": "ava"</span></div><div class="line"><span class="code">    &#125;,</span></div><div class="line"><span class="code">    "devDependencies": &#123;</span></div><div class="line"><span class="code">        "ava": "^0.11.0"</span></div><div class="line"><span class="code">    &#125;</span></div><div class="line">&#125;![<span class="string">ava</span>](<span class="link">/images/ceshiheader</span>)</div></pre></td></tr></table></figure>
<h3 id="手动安装"><a href="#手动安装" class="headerlink" title="手动安装"></a>手动安装</h3><figure class="highlight d"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">nstall --save-dev ava</div><div class="line"></div><div class="line">#再对 <span class="string">``</span><span class="keyword">package</span>.json<span class="string">``</span> 配置 <span class="string">``</span>test<span class="string">``</span> 脚本 （如上）</div></pre></td></tr></table></figure>
<h2 id="测试一下"><a href="#测试一下" class="headerlink" title="测试一下"></a>测试一下</h2><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#main.js</span></div><div class="line">let a = <span class="function"><span class="params">(x)</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">if</span> (x &gt; <span class="number">0</span>)</div><div class="line">    <span class="keyword">return</span> x * x</div><div class="line">    <span class="keyword">return</span> x</div><div class="line">&#125;</div><div class="line"><span class="built_in">module</span>.exports = a</div><div class="line"><span class="comment">#test.js</span></div><div class="line">const test = <span class="built_in">require</span>(<span class="string">'ava'</span>)</div><div class="line">const a = <span class="built_in">require</span>(<span class="string">'./main.js'</span>)</div><div class="line">test(<span class="string">'give 3 should return 9'</span>, t =&gt; &#123;</div><div class="line">    t.<span class="keyword">is</span>(a(<span class="number">3</span>), <span class="number">9</span>)</div><div class="line">&#125;)</div><div class="line">test(<span class="string">'git -3 should return -3'</span>, t =&gt; &#123;</div><div class="line">    t.<span class="keyword">is</span>(a(<span class="number">-3</span>), <span class="number">-3</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">beim<span class="variable">@Idea:</span>~/temp/ava$ ava -v</div><div class="line">  ✔ give <span class="number">3</span> should return <span class="number">9</span></div><div class="line">  ✔ git -<span class="number">3</span> should return -<span class="number">3</span></div><div class="line">  <span class="number">2</span> tests passed [<span class="number">10</span>:<span class="number">19</span>:<span class="number">26</span> GMT+<span class="number">0800</span> (CST)]</div></pre></td></tr></table></figure>
<h2 id="测试覆盖率"><a href="#测试覆盖率" class="headerlink" title="测试覆盖率"></a>测试覆盖率</h2><p>官方推荐使用<a href="https://github.com/istanbuljs/nyc" target="_blank" rel="external">nyc</a></p>
<h3 id="用法-1"><a href="#用法-1" class="headerlink" title="用法"></a>用法</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ npm <span class="keyword">install</span> nyc --save-dev</div><div class="line"><span class="comment">#或全局安装</span></div><div class="line">$ npm <span class="keyword">install</span> nyc -g</div><div class="line"><span class="comment">#修改package.json 的test 脚本</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"script"</span>: &#123;</div><div class="line">    <span class="string">"test"</span>: <span class="string">"nyc ava ./test/*.js"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="测试一下-1"><a href="#测试一下-1" class="headerlink" title="测试一下"></a>测试一下</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">#修改之前的package<span class="selector-class">.json</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"scripts"</span>: &#123;</div><div class="line">    <span class="string">"test"</span>: <span class="string">"nyc ava -v"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">beim<span class="meta">@Idea:~/temp/ava$</span> npm test</div><div class="line">&gt; @ test /home/beim/temp/ava</div><div class="line">&gt; nyc ava -v</div><div class="line">  ✔ give 3 should return 9</div><div class="line">  ✔ git -3 should return -3</div><div class="line">  2 tests passed [10:23:53 GMT+0800 (CST)]</div><div class="line">----------|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------------</span>|</div><div class="line">File      |<span class="string">  % Stmts </span>|<span class="string"> % Branch </span>|<span class="string">  % Funcs </span>|<span class="string">  % Lines </span>|<span class="string">Uncovered Lines </span>|</div><div class="line">----------|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------------</span>|</div><div class="line">All files |<span class="string">      100 </span>|<span class="string">      100 </span>|<span class="string">      100 </span>|<span class="string">      100 </span>|<span class="string">                </span>|</div><div class="line"> main.js  |<span class="string">      100 </span>|<span class="string">      100 </span>|<span class="string">      100 </span>|<span class="string">      100 </span>|<span class="string">                </span>|</div><div class="line">----------|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------</span>|<span class="string">----------------</span>|</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2016_日常]]></title>
      <url>https://beim.github.io/2016/08/01/2016-%E6%97%A5%E5%B8%B8/</url>
      <content type="html"><![CDATA[<p><img src="/images/house.jpg" alt="header"><br><a id="more"></a></p>
<h1 id="Aug"><a href="#Aug" class="headerlink" title="Aug"></a>Aug</h1><hr>
<p><strong>白日梦</strong>：<br>兔子和我说了好多话，第四条里她访问了一个网址，<br>然后不知怎的我的笔记本接到了请求，genymotion 模拟器启动，8081端口反向代理，adb连接。<br>模拟器里的人影若隐若现，<br><code>Thu Aug 11 22:13</code></p>
<hr>
<p><strong>白日梦</strong>：<br>我坐在船上，船行在海上。还有鲸豚。<br>我尝试着换了个方向行驶。<br>船桅折了。<br><code>Sun Aug 14 22:37</code></p>
<hr>
<p><strong>武功山</strong>：<br><img src="http://ob4a6y748.bkt.clouddn.com/yun1.jpg" alt="武功山"><br><img src="http://ob4a6y748.bkt.clouddn.com/yun2.jpg" alt="武功山"><br>晚上7点，到了海拔1918m的金顶。<br>在纸上写棍棍和兔子的名字，放进了云里。<br><code>Tue Aug 16 17:25</code></p>
<hr>
<p><strong>摆渡人</strong>:<br>崔斯坦没有消失。<br>真是太好了。<br>太好了。<br><code>Tue Aug 16 21:48</code></p>
<hr>
<p><strong>白日梦</strong>:<br>做了一个让我笑醒的梦<br>好想和你说<br><code>Thu Aug 18 22:19</code></p>
<hr>
<p><strong>浪矢杂货店</strong>:<br>很多时候<br>你一直都知道自己想要的是什么<br>只是不敢承认<br>所以我喜欢抛硬币来解决问题<br>在抛出的一瞬间 答案就明了了<br><code>Mon Aug 22 23:45</code></p>
<hr>
<p><strong>张家界</strong><br><img src="http://ob4a6y748.bkt.clouddn.com/yun3.jpg" alt="玻璃桥"><br>心心念念的玻璃桥<br><code>Sun Aug 28 15:19</code></p>
<hr>
<p><strong>白日梦</strong><br>在台湾过得更悠闲自在<br>是因为无社交？<br><code>Thu Sep 8 08:25</code></p>
<hr>
<p><strong>NCU</strong><br>走的时候没有向林純瓊老师道别真是有点遗憾呐<br><code>Tue Sep 13 15:45</code></p>
<hr>
<p><strong>迅羽</strong><br>一年了<br>羽毛想你啊<br><code>Sun Sep 25 22:10</code></p>
<hr>
<p><strong>RE0</strong><br>雷姆雷姆<br>剑圣剑鬼<br><code>Mon Sep 26 11:00</code></p>
<hr>
<p><strong>白日梦</strong><br>假期白天不睡觉<br>大挑战<br><code>Wed Oct 5 16:23</code></p>
<hr>
<p><strong>十月</strong><br>兔子<br>这里下雪了~<br><code>Sat Oct 22 11:39</code></p>
<hr>
<p><strong>十一月</strong><br>没有工作日 没有休息日 没有万圣节<br>只有两只蜂 计 和 编<br>嗡嗡嗡嗡嗡嗡</p>
<p>ys收到村上春树的书了, 两年的约定兑现了呢.<br><code>Tue Nov 1 23:00</code></p>
<hr>
<p><strong>科学的电磁炮</strong><br><img src="http://ob4a6y748.bkt.clouddn.com/dcp.png" alt="dcp"><br>yoooo</p>
<p><24小时学会电磁炮><br><code>Wed Nov 2 16:01</code></24小时学会电磁炮></p>
<hr>
]]></content>
    </entry>
    
  
  
</search>
